(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Fw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var OS={exports:{}},s0={};var MC;function H4(){if(MC)return s0;MC=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:o,ref:i!==void 0?i:null,props:s}}return s0.Fragment=e,s0.jsx=t,s0.jsxs=t,s0}var TC;function j4(){return TC||(TC=1,OS.exports=H4()),OS.exports}var F=j4(),FS={exports:{}},yn={};var wC;function W4(){if(wC)return yn;wC=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function _(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function T(z,Z,ae){this.props=z,this.context=Z,this.refs=S,this.updater=ae||b}T.prototype.isReactComponent={},T.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function A(){}A.prototype=T.prototype;function D(z,Z,ae){this.props=z,this.context=Z,this.refs=S,this.updater=ae||b}var N=D.prototype=new A;N.constructor=D,w(N,T.prototype),N.isPureReactComponent=!0;var L=Array.isArray;function I(){}var k={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function U(z,Z,ae){var fe=ae.ref;return{$$typeof:r,type:z,key:Z,ref:fe!==void 0?fe:null,props:ae}}function H(z,Z){return U(z.type,Z,z.props)}function Y(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function X(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ae){return Z[ae]})}var q=/\/+/g;function Q(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?X(""+z.key):Z.toString(36)}function ie(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(I,I):(z.status="pending",z.then(function(Z){z.status==="pending"&&(z.status="fulfilled",z.value=Z)},function(Z){z.status==="pending"&&(z.status="rejected",z.reason=Z)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function j(z,Z,ae,fe,ve){var re=typeof z;(re==="undefined"||re==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(re){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case r:case e:pe=!0;break;case m:return pe=z._init,j(pe(z._payload),Z,ae,fe,ve)}}if(pe)return ve=ve(z),pe=fe===""?"."+Q(z,0):fe,L(ve)?(ae="",pe!=null&&(ae=pe.replace(q,"$&/")+"/"),j(ve,Z,ae,"",function(ct){return ct})):ve!=null&&(Y(ve)&&(ve=H(ve,ae+(ve.key==null||z&&z.key===ve.key?"":(""+ve.key).replace(q,"$&/")+"/")+pe)),Z.push(ve)),1;pe=0;var Se=fe===""?".":fe+":";if(L(z))for(var je=0;je<z.length;je++)fe=z[je],re=Se+Q(fe,je),pe+=j(fe,Z,ae,re,ve);else if(je=_(z),typeof je=="function")for(z=je.call(z),je=0;!(fe=z.next()).done;)fe=fe.value,re=Se+Q(fe,je++),pe+=j(fe,Z,ae,re,ve);else if(re==="object"){if(typeof z.then=="function")return j(ie(z),Z,ae,fe,ve);throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return pe}function J(z,Z,ae){if(z==null)return z;var fe=[],ve=0;return j(z,fe,"","",function(re){return Z.call(ae,re,ve++)}),fe}function de(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=ae)},function(ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=ae)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var le=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},ce={map:J,forEach:function(z,Z,ae){J(z,function(){Z.apply(this,arguments)},ae)},count:function(z){var Z=0;return J(z,function(){Z++}),Z},toArray:function(z){return J(z,function(Z){return Z})||[]},only:function(z){if(!Y(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return yn.Activity=g,yn.Children=ce,yn.Component=T,yn.Fragment=t,yn.Profiler=i,yn.PureComponent=D,yn.StrictMode=n,yn.Suspense=u,yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,yn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},yn.cache=function(z){return function(){return z.apply(null,arguments)}},yn.cacheSignal=function(){return null},yn.cloneElement=function(z,Z,ae){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var fe=w({},z.props),ve=z.key;if(Z!=null)for(re in Z.key!==void 0&&(ve=""+Z.key),Z)!R.call(Z,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&Z.ref===void 0||(fe[re]=Z[re]);var re=arguments.length-2;if(re===1)fe.children=ae;else if(1<re){for(var pe=Array(re),Se=0;Se<re;Se++)pe[Se]=arguments[Se+2];fe.children=pe}return U(z.type,ve,fe)},yn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},yn.createElement=function(z,Z,ae){var fe,ve={},re=null;if(Z!=null)for(fe in Z.key!==void 0&&(re=""+Z.key),Z)R.call(Z,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ve[fe]=Z[fe]);var pe=arguments.length-2;if(pe===1)ve.children=ae;else if(1<pe){for(var Se=Array(pe),je=0;je<pe;je++)Se[je]=arguments[je+2];ve.children=Se}if(z&&z.defaultProps)for(fe in pe=z.defaultProps,pe)ve[fe]===void 0&&(ve[fe]=pe[fe]);return U(z,re,ve)},yn.createRef=function(){return{current:null}},yn.forwardRef=function(z){return{$$typeof:l,render:z}},yn.isValidElement=Y,yn.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:de}},yn.memo=function(z,Z){return{$$typeof:h,type:z,compare:Z===void 0?null:Z}},yn.startTransition=function(z){var Z=k.T,ae={};k.T=ae;try{var fe=z(),ve=k.S;ve!==null&&ve(ae,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(I,le)}catch(re){le(re)}finally{Z!==null&&ae.types!==null&&(Z.types=ae.types),k.T=Z}},yn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},yn.use=function(z){return k.H.use(z)},yn.useActionState=function(z,Z,ae){return k.H.useActionState(z,Z,ae)},yn.useCallback=function(z,Z){return k.H.useCallback(z,Z)},yn.useContext=function(z){return k.H.useContext(z)},yn.useDebugValue=function(){},yn.useDeferredValue=function(z,Z){return k.H.useDeferredValue(z,Z)},yn.useEffect=function(z,Z){return k.H.useEffect(z,Z)},yn.useEffectEvent=function(z){return k.H.useEffectEvent(z)},yn.useId=function(){return k.H.useId()},yn.useImperativeHandle=function(z,Z,ae){return k.H.useImperativeHandle(z,Z,ae)},yn.useInsertionEffect=function(z,Z){return k.H.useInsertionEffect(z,Z)},yn.useLayoutEffect=function(z,Z){return k.H.useLayoutEffect(z,Z)},yn.useMemo=function(z,Z){return k.H.useMemo(z,Z)},yn.useOptimistic=function(z,Z){return k.H.useOptimistic(z,Z)},yn.useReducer=function(z,Z,ae){return k.H.useReducer(z,Z,ae)},yn.useRef=function(z){return k.H.useRef(z)},yn.useState=function(z){return k.H.useState(z)},yn.useSyncExternalStore=function(z,Z,ae){return k.H.useSyncExternalStore(z,Z,ae)},yn.useTransition=function(){return k.H.useTransition()},yn.version="19.2.4",yn}var EC;function Rv(){return EC||(EC=1,FS.exports=W4()),FS.exports}var Re=Rv();const LN=Fw(Re);var kS={exports:{}},a0={},BS={exports:{}},zS={};var AC;function X4(){return AC||(AC=1,(function(r){function e(j,J){var de=j.length;j.push(J);e:for(;0<de;){var le=de-1>>>1,ce=j[le];if(0<i(ce,J))j[le]=J,j[de]=ce,de=le;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var J=j[0],de=j.pop();if(de!==J){j[0]=de;e:for(var le=0,ce=j.length,z=ce>>>1;le<z;){var Z=2*(le+1)-1,ae=j[Z],fe=Z+1,ve=j[fe];if(0>i(ae,de))fe<ce&&0>i(ve,ae)?(j[le]=ve,j[fe]=de,le=fe):(j[le]=ae,j[Z]=de,le=Z);else if(fe<ce&&0>i(ve,de))j[le]=ve,j[fe]=de,le=fe;else break e}}return J}function i(j,J){var de=j.sortIndex-J.sortIndex;return de!==0?de:j.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var u=[],h=[],m=1,g=null,v=3,_=!1,b=!1,w=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function N(j){for(var J=t(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=j)n(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=t(h)}}function L(j){if(w=!1,N(j),!b)if(t(u)!==null)b=!0,I||(I=!0,X());else{var J=t(h);J!==null&&ie(L,J.startTime-j)}}var I=!1,k=-1,R=5,U=-1;function H(){return S?!0:!(r.unstable_now()-U<R)}function Y(){if(S=!1,I){var j=r.unstable_now();U=j;var J=!0;try{e:{b=!1,w&&(w=!1,A(k),k=-1),_=!0;var de=v;try{t:{for(N(j),g=t(u);g!==null&&!(g.expirationTime>j&&H());){var le=g.callback;if(typeof le=="function"){g.callback=null,v=g.priorityLevel;var ce=le(g.expirationTime<=j);if(j=r.unstable_now(),typeof ce=="function"){g.callback=ce,N(j),J=!0;break t}g===t(u)&&n(u),N(j)}else n(u);g=t(u)}if(g!==null)J=!0;else{var z=t(h);z!==null&&ie(L,z.startTime-j),J=!1}}break e}finally{g=null,v=de,_=!1}J=void 0}}finally{J?X():I=!1}}}var X;if(typeof D=="function")X=function(){D(Y)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Q=q.port2;q.port1.onmessage=Y,X=function(){Q.postMessage(null)}}else X=function(){T(Y,0)};function ie(j,J){k=T(function(){j(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var de=v;v=J;try{return j()}finally{v=de}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(j,J){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var de=v;v=j;try{return J()}finally{v=de}},r.unstable_scheduleCallback=function(j,J,de){var le=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?le+de:le):de=le,j){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=de+ce,j={id:m++,callback:J,priorityLevel:j,startTime:de,expirationTime:ce,sortIndex:-1},de>le?(j.sortIndex=de,e(h,j),t(u)===null&&j===t(h)&&(w?(A(k),k=-1):w=!0,ie(L,de-le))):(j.sortIndex=ce,e(u,j),b||_||(b=!0,I||(I=!0,X()))),j},r.unstable_shouldYield=H,r.unstable_wrapCallback=function(j){var J=v;return function(){var de=v;v=J;try{return j.apply(this,arguments)}finally{v=de}}}})(zS)),zS}var CC;function UN(){return CC||(CC=1,BS.exports=X4()),BS.exports}var VS={exports:{}},Ls={};var RC;function Y4(){if(RC)return Ls;RC=1;var r=Rv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:m}}var o=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ls.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ls.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(u,h,null,m)},Ls.flushSync=function(u){var h=o.T,m=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=h,n.p=m,n.d.f()}},Ls.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},Ls.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Ls.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,g=l(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):m==="script"&&n.d.X(u,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ls.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=l(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},Ls.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=l(m,h.crossOrigin);n.d.L(u,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ls.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=l(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},Ls.requestFormReset=function(u){n.d.r(u)},Ls.unstable_batchedUpdates=function(u,h){return u(h)},Ls.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},Ls.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ls.version="19.2.4",Ls}var DC;function q4(){if(DC)return VS.exports;DC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),VS.exports=Y4(),VS.exports}var NC;function Z4(){if(NC)return a0;NC=1;var r=UN(),e=Rv(),t=q4();function n(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,p=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(p=c.return),a=c.return;while(a)}return c.tag===3?p:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(a.tag===31){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(n(188))}function h(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(n(188));return c!==a?null:a}for(var p=a,y=c;;){var E=p.return;if(E===null)break;var C=E.alternate;if(C===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===p)return u(E),a;if(C===y)return u(E),c;C=C.sibling}throw Error(n(188))}if(p.return!==y.return)p=E,y=C;else{for(var B=!1,te=E.child;te;){if(te===p){B=!0,p=E,y=C;break}if(te===y){B=!0,y=E,p=C;break}te=te.sibling}if(!B){for(te=C.child;te;){if(te===p){B=!0,p=C,y=E;break}if(te===y){B=!0,y=C,p=E;break}te=te.sibling}if(!B)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:c}function m(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=m(a),c!==null)return c;a=a.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),D=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function X(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var q=Symbol.for("react.client.reference");function Q(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case D:return a.displayName||"Context";case A:return(a._context.displayName||"Context")+".Consumer";case N:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return c=a.displayName||null,c!==null?c:Q(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return Q(a(c))}catch{}}return null}var ie=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},le=[],ce=-1;function z(a){return{current:a}}function Z(a){0>ce||(a.current=le[ce],le[ce]=null,ce--)}function ae(a,c){ce++,le[ce]=a.current,a.current=c}var fe=z(null),ve=z(null),re=z(null),pe=z(null);function Se(a,c){switch(ae(re,c),ae(ve,a),ae(fe,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?XA(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=XA(c),a=YA(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(fe),ae(fe,a)}function je(){Z(fe),Z(ve),Z(re)}function ct(a){a.memoizedState!==null&&ae(pe,a);var c=fe.current,p=YA(c,a.type);c!==p&&(ae(ve,a),ae(fe,p))}function Je(a){ve.current===a&&(Z(fe),Z(ve)),pe.current===a&&(Z(pe),t0._currentValue=de)}var nt,Mt;function Ue(a){if(nt===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);nt=c&&c[1]||"",Mt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+a+Mt}var Ve=!1;function Oe(a,c){if(!a||Ve)return"";Ve=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(et){var Xe=et}Reflect.construct(a,[],pt)}else{try{pt.call()}catch(et){Xe=et}a.call(pt.prototype)}}else{try{throw Error()}catch(et){Xe=et}(pt=a())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(et){if(et&&Xe&&typeof et.stack=="string")return[et.stack,Xe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),B=C[0],te=C[1];if(B&&te){var ye=B.split(`
`),ze=te.split(`
`);for(E=y=0;y<ye.length&&!ye[y].includes("DetermineComponentFrameRoot");)y++;for(;E<ze.length&&!ze[E].includes("DetermineComponentFrameRoot");)E++;if(y===ye.length||E===ze.length)for(y=ye.length-1,E=ze.length-1;1<=y&&0<=E&&ye[y]!==ze[E];)E--;for(;1<=y&&0<=E;y--,E--)if(ye[y]!==ze[E]){if(y!==1||E!==1)do if(y--,E--,0>E||ye[y]!==ze[E]){var lt=`
`+ye[y].replace(" at new "," at ");return a.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",a.displayName)),lt}while(1<=y&&0<=E);break}}}finally{Ve=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?Ue(p):""}function it(a,c){switch(a.tag){case 26:case 27:case 5:return Ue(a.type);case 16:return Ue("Lazy");case 13:return a.child!==c&&c!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return Oe(a.type,!1);case 11:return Oe(a.type.render,!1);case 1:return Oe(a.type,!0);case 31:return Ue("Activity");default:return""}}function ee(a){try{var c="",p=null;do c+=it(a,p),p=a,a=a.return;while(a);return c}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var ut=Object.prototype.hasOwnProperty,Ye=r.unstable_scheduleCallback,De=r.unstable_cancelCallback,We=r.unstable_shouldYield,K=r.unstable_requestPaint,V=r.unstable_now,ue=r.unstable_getCurrentPriorityLevel,Ie=r.unstable_ImmediatePriority,Ce=r.unstable_UserBlockingPriority,Ee=r.unstable_NormalPriority,st=r.unstable_LowPriority,at=r.unstable_IdlePriority,wt=r.log,Lt=r.unstable_setDisableYieldValue,Ge=null,Fe=null;function tt(a){if(typeof wt=="function"&&Lt(a),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Ge,a)}catch{}}var oe=Math.clz32?Math.clz32:he,Ae=Math.log,ht=Math.LN2;function he(a){return a>>>=0,a===0?32:31-(Ae(a)/ht|0)|0}var _e=256,$e=262144,Rt=4194304;function rt(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ne(a,c,p){var y=a.pendingLanes;if(y===0)return 0;var E=0,C=a.suspendedLanes,B=a.pingedLanes;a=a.warmLanes;var te=y&134217727;return te!==0?(y=te&~C,y!==0?E=rt(y):(B&=te,B!==0?E=rt(B):p||(p=te&~a,p!==0&&(E=rt(p))))):(te=y&~C,te!==0?E=rt(te):B!==0?E=rt(B):p||(p=y&~a,p!==0&&(E=rt(p)))),E===0?0:c!==0&&c!==E&&(c&C)===0&&(C=E&-E,p=c&-c,C>=p||C===32&&(p&4194048)!==0)?c:E}function bt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function Ot(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var a=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),a}function Ht(a){for(var c=[],p=0;31>p;p++)c.push(a);return c}function Sn(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Dn(a,c,p,y,E,C){var B=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var te=a.entanglements,ye=a.expirationTimes,ze=a.hiddenUpdates;for(p=B&~p;0<p;){var lt=31-oe(p),pt=1<<lt;te[lt]=0,ye[lt]=-1;var Xe=ze[lt];if(Xe!==null)for(ze[lt]=null,lt=0;lt<Xe.length;lt++){var et=Xe[lt];et!==null&&(et.lane&=-536870913)}p&=~pt}y!==0&&Qn(a,y,0),C!==0&&E===0&&a.tag!==0&&(a.suspendedLanes|=C&~(B&~c))}function Qn(a,c,p){a.pendingLanes|=c,a.suspendedLanes&=~c;var y=31-oe(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|p&261930}function Li(a,c){var p=a.entangledLanes|=c;for(a=a.entanglements;p;){var y=31-oe(p),E=1<<y;E&c|a[y]&c&&(a[y]|=c),p&=~E}}function xr(a,c){var p=c&-c;return p=(p&42)!==0?1:Zi(p),(p&(a.suspendedLanes|c))!==0?0:p}function Zi(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ti(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pi(){var a=J.p;return a!==0?a:(a=window.event,a===void 0?32:gC(a.type))}function Qt(a,c){var p=J.p;try{return J.p=a,c()}finally{J.p=p}}var Jn=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Jn,W="__reactProps$"+Jn,ne="__reactContainer$"+Jn,ge="__reactEvents$"+Jn,ke="__reactListeners$"+Jn,qe="__reactHandles$"+Jn,Ke="__reactResources$"+Jn,St="__reactMarker$"+Jn;function yt(a){delete a[Xn],delete a[W],delete a[ge],delete a[ke],delete a[qe]}function At(a){var c=a[Xn];if(c)return c;for(var p=a.parentNode;p;){if(c=p[ne]||p[Xn]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(a=eC(a);a!==null;){if(p=a[Xn])return p;a=eC(a)}return c}a=p,p=a.parentNode}return null}function Ct(a){if(a=a[Xn]||a[ne]){var c=a.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return a}return null}function Dt(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(n(33))}function G(a){var c=a[Ke];return c||(c=a[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function me(a){a[St]=!0}var Te=new Set,be={};function Me(a,c){ot(a,c),ot(a+"Capture",c)}function ot(a,c){for(be[a]=c,a=0;a<c.length;a++)Te.add(c[a])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gt={},vt={};function kt(a){return ut.call(vt,a)?!0:ut.call(gt,a)?!1:mt.test(a)?vt[a]=!0:(gt[a]=!0,!1)}function Ft(a,c,p){if(kt(c))if(p===null)a.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+p)}}function Zt(a,c,p){if(p===null)a.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+p)}}function Et(a,c,p,y){if(y===null)a.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(c,p,""+y)}}function Xt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function mn(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Fn(a,c,p){var y=Object.getOwnPropertyDescriptor(a.constructor.prototype,c);if(!a.hasOwnProperty(c)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,C=y.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return E.call(this)},set:function(B){p=""+B,C.call(this,B)}}),Object.defineProperty(a,c,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(B){p=""+B},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function en(a){if(!a._valueTracker){var c=mn(a)?"checked":"value";a._valueTracker=Fn(a,c,""+a[c])}}function jt(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return a&&(y=mn(a)?a.checked?"true":"false":a.value),a=y,a!==p?(c.setValue(a),!0):!1}function xt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var cn=/[\n"\\]/g;function Nt(a){return a.replace(cn,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Yn(a,c,p,y,E,C,B,te){a.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.type=B:a.removeAttribute("type"),c!=null?B==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Xt(c)):a.value!==""+Xt(c)&&(a.value=""+Xt(c)):B!=="submit"&&B!=="reset"||a.removeAttribute("value"),c!=null?Cn(a,B,Xt(c)):p!=null?Cn(a,B,Xt(p)):y!=null&&a.removeAttribute("value"),E==null&&C!=null&&(a.defaultChecked=!!C),E!=null&&(a.checked=E&&typeof E!="function"&&typeof E!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?a.name=""+Xt(te):a.removeAttribute("name")}function ai(a,c,p,y,E,C,B,te){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||p!=null){if(!(C!=="submit"&&C!=="reset"||c!=null)){en(a);return}p=p!=null?""+Xt(p):"",c=c!=null?""+Xt(c):p,te||c===a.value||(a.value=c),a.defaultValue=c}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=te?a.checked:!!y,a.defaultChecked=!!y,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(a.name=B),en(a)}function Cn(a,c,p){c==="number"&&xt(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function oi(a,c,p,y){if(a=a.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<a.length;p++)E=c.hasOwnProperty("$"+a[p].value),a[p].selected!==E&&(a[p].selected=E),E&&y&&(a[p].defaultSelected=!0)}else{for(p=""+Xt(p),c=null,E=0;E<a.length;E++){if(a[E].value===p){a[E].selected=!0,y&&(a[E].defaultSelected=!0);return}c!==null||a[E].disabled||(c=a[E])}c!==null&&(c.selected=!0)}}function Ln(a,c,p){if(c!=null&&(c=""+Xt(c),c!==a.value&&(a.value=c),p==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=p!=null?""+Xt(p):""}function fi(a,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(n(92));if(ie(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=Xt(c),a.defaultValue=p,y=a.textContent,y===p&&y!==""&&y!==null&&(a.value=y),en(a)}function lr(a,c){if(c){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=c;return}}a.textContent=c}var wi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function as(a,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":y?a.setProperty(c,p):typeof p!="number"||p===0||wi.has(c)?c==="float"?a.cssFloat=p:a[c]=(""+p).trim():a[c]=p+"px"}function Ss(a,c,p){if(c!=null&&typeof c!="object")throw Error(n(62));if(a=a.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var E in c)y=c[E],c.hasOwnProperty(E)&&p[E]!==y&&as(a,E,y)}else for(var C in c)c.hasOwnProperty(C)&&as(a,C,c[C])}function Gs(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ha(a){return Dl.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function qr(){}var uo=null;function Rc(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Hs=null,da=null;function Dc(a){var c=Ct(a);if(c&&(a=c.stateNode)){var p=a[W]||null;e:switch(a=c.stateNode,c.type){case"input":if(Yn(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Nt(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==a&&y.form===a.form){var E=y[W]||null;if(!E)throw Error(n(90));Yn(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===a.form&&jt(y)}break e;case"textarea":Ln(a,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&oi(a,!!p.multiple,c,!1)}}}var Nc=!1;function Nl(a,c,p){if(Nc)return a(c,p);Nc=!0;try{var y=a(c);return y}finally{if(Nc=!1,(Hs!==null||da!==null)&&(Za(),Hs&&(c=Hs,a=da,da=Hs=null,Dc(c),a)))for(c=0;c<a.length;c++)Dc(a[c])}}function fo(a,c){var p=a.stateNode;if(p===null)return null;var y=p[W]||null;if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),os=!1;if(js)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){os=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{os=!1}var Zr=null,Pc=null,Ga=null;function Pl(){if(Ga)return Ga;var a,c=Pc,p=c.length,y,E="value"in Zr?Zr.value:Zr.textContent,C=E.length;for(a=0;a<p&&c[a]===E[a];a++);var B=p-a;for(y=1;y<=B&&c[p-y]===E[C-y];y++);return Ga=E.slice(a,1<y?1-y:void 0)}function Ll(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function pa(){return!0}function Ul(){return!1}function Ei(a){function c(p,y,E,C,B){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=C,this.target=B,this.currentTarget=null;for(var te in a)a.hasOwnProperty(te)&&(p=a[te],this[te]=p?p(C):C[te]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?pa:Ul,this.isPropagationStopped=Ul,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),c}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=Ei(Ha),po=g({},Ha,{view:0,detail:0}),Il=Ei(po),Ol,mo,go,cr=g({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ad,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==go&&(go&&a.type==="mousemove"?(Ol=a.screenX-go.screenX,mo=a.screenY-go.screenY):mo=Ol=0,go=a),Ol)},movementY:function(a){return"movementY"in a?a.movementY:mo}}),jf=Ei(cr),Lc=g({},cr,{dataTransfer:0}),Uc=Ei(Lc),Tu=g({},po,{relatedTarget:0}),wu=Ei(Tu),Br=g({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Ws=Ei(Br),Kr=g({},Ha,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ja=Ei(Kr),Fl=g({},Ha,{data:0}),wd=Ei(Fl),Ed={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vm(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Jv[a])?!!c[a]:!1}function Ad(){return Vm}var $v=g({},po,{key:function(a){if(a.key){var c=Ed[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Ll(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Qv[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ad,charCode:function(a){return a.type==="keypress"?Ll(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ll(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ic=Ei($v),Cd=g({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gm=Ei(Cd),Hm=g({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ad}),ey=Ei(Hm),ty=g({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=Ei(ty),zr=g({},cr,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ny=Ei(zr),iy=g({},Ha,{newState:0,oldState:0}),ry=Ei(iy),sy=[9,13,27,32],Oc=js&&"CompositionEvent"in window,Eu=null;js&&"documentMode"in document&&(Eu=document.documentMode);var Rd=js&&"TextEvent"in window&&!Eu,jm=js&&(!Oc||Eu&&8<Eu&&11>=Eu),ay=" ",Wf=!1;function Dd(a,c){switch(a){case"keyup":return sy.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wm(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Fc=!1;function oy(a,c){switch(a){case"compositionend":return Wm(c);case"keypress":return c.which!==32?null:(Wf=!0,ay);case"textInput":return a=c.data,a===ay&&Wf?null:a;default:return null}}function Xm(a,c){if(Fc)return a==="compositionend"||!Oc&&Dd(a,c)?(a=Pl(),Ga=Pc=Zr=null,Fc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return jm&&c.locale!=="ko"?null:c.data;default:return null}}var Ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qm(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Ym[a.type]:c==="textarea"}function Nd(a,c,p,y){Hs?da?da.push(y):da=[y]:Hs=y,c=hx(c,"onChange"),0<c.length&&(p=new Qo("onChange","change",null,p,y),a.push({event:p,listeners:c}))}var kl=null,kc=null;function ly(a){zA(a,0)}function Au(a){var c=Dt(a);if(jt(c))return a}function Zm(a,c){if(a==="change")return c}var vo=!1;if(js){var Xf;if(js){var Km="oninput"in document;if(!Km){var Qm=document.createElement("div");Qm.setAttribute("oninput","return;"),Km=typeof Qm.oninput=="function"}Xf=Km}else Xf=!1;vo=Xf&&(!document.documentMode||9<document.documentMode)}function ma(){kl&&(kl.detachEvent("onpropertychange",Yf),kc=kl=null)}function Yf(a){if(a.propertyName==="value"&&Au(kc)){var c=[];Nd(c,kc,a,Rc(a)),Nl(ly,c)}}function cy(a,c,p){a==="focusin"?(ma(),kl=c,kc=p,kl.attachEvent("onpropertychange",Yf)):a==="focusout"&&ma()}function Jm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Au(kc)}function uy(a,c){if(a==="click")return Au(c)}function fy(a,c){if(a==="input"||a==="change")return Au(c)}function $m(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ls=typeof Object.is=="function"?Object.is:$m;function Cu(a,c){if(ls(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var p=Object.keys(a),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!ut.call(c,E)||!ls(a[E],c[E]))return!1}return!0}function qf(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ru(a,c){var p=qf(a);a=0;for(var y;p;){if(p.nodeType===3){if(y=a+p.textContent.length,a<=c&&y>=c)return{node:p,offset:c-a};a=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=qf(p)}}function mi(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?mi(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function hy(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=xt(a.document);c instanceof a.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)a=c.contentWindow;else break;c=xt(a.document)}return c}function eg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var dy=js&&"documentMode"in document&&11>=document.documentMode,yo=null,xo=null,Du=null,Pd=!1;function Nu(a,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Pd||yo==null||yo!==xt(y)||(y=yo,"selectionStart"in y&&eg(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Du&&Cu(Du,y)||(Du=y,y=hx(xo,"onSelect"),0<y.length&&(c=new Qo("onSelect","select",null,c,p),a.push({event:c,listeners:y}),c.target=yo)))}function Qr(a,c){var p={};return p[a.toLowerCase()]=c.toLowerCase(),p["Webkit"+a]="webkit"+c,p["Moz"+a]="moz"+c,p}var Bc={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},Zf={},tg={};js&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Jo(a){if(Zf[a])return Zf[a];if(!Bc[a])return a;var c=Bc[a],p;for(p in c)if(c.hasOwnProperty(p)&&p in tg)return Zf[a]=c[p];return a}var Ld=Jo("animationend"),Kf=Jo("animationiteration"),ng=Jo("animationstart"),py=Jo("transitionrun"),sS=Jo("transitionstart"),my=Jo("transitioncancel"),ig=Jo("transitionend"),ga=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function va(a,c){ga.set(a,c),Me(c,[a])}var Jf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},ya=[],$o=0,Dr=0;function $f(){for(var a=$o,c=Dr=$o=0;c<a;){var p=ya[c];ya[c++]=null;var y=ya[c];ya[c++]=null;var E=ya[c];ya[c++]=null;var C=ya[c];if(ya[c++]=null,y!==null&&E!==null){var B=y.pending;B===null?E.next=E:(E.next=B.next,B.next=E),y.pending=E}C!==0&&Bl(p,E,C)}}function Nr(a,c,p,y){ya[$o++]=a,ya[$o++]=c,ya[$o++]=p,ya[$o++]=y,Dr|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function Ud(a,c,p,y){return Nr(a,c,p,y),xa(a)}function cs(a,c){return Nr(a,null,null,c),xa(a)}function Bl(a,c,p){a.lanes|=p;var y=a.alternate;y!==null&&(y.lanes|=p);for(var E=!1,C=a.return;C!==null;)C.childLanes|=p,y=C.alternate,y!==null&&(y.childLanes|=p),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(E=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,E&&c!==null&&(E=31-oe(p),a=C.hiddenUpdates,y=a[E],y===null?a[E]=[c]:y.push(c),c.lane=p|536870912),C):null}function xa(a){if(50<rc)throw rc=0,ru=null,Error(n(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var zl={};function rg(a,c,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(a,c,p,y){return new rg(a,c,p,y)}function Id(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ms(a,c){var p=a.alternate;return p===null?(p=Ui(a.tag,c,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=c,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&65011712,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,c=a.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function Pu(a,c){a.flags&=65011714;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,c=p.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function _o(a,c,p,y,E,C){var B=0;if(y=a,typeof a=="function")Id(a)&&(B=1);else if(typeof a=="string")B=N4(a,p,fe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=Ui(31,p,c,E),a.elementType=U,a.lanes=C,a;case w:return Vl(p.children,E,C,c);case S:B=8,E|=24;break;case T:return a=Ui(12,p,c,E|2),a.elementType=T,a.lanes=C,a;case L:return a=Ui(13,p,c,E),a.elementType=L,a.lanes=C,a;case I:return a=Ui(19,p,c,E),a.elementType=I,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case D:B=10;break e;case A:B=9;break e;case N:B=11;break e;case k:B=14;break e;case R:B=16,y=null;break e}B=29,p=Error(n(130,a===null?"null":typeof a,"")),y=null}return c=Ui(B,p,c,E),c.elementType=a,c.type=y,c.lanes=C,c}function Vl(a,c,p,y){return a=Ui(7,a,y,c),a.lanes=p,a}function Od(a,c,p){return a=Ui(6,a,null,c),a.lanes=p,a}function Lu(a){var c=Ui(18,null,null,0);return c.stateNode=a,c}function Fd(a,c,p){return c=Ui(4,a.children!==null?a.children:[],a.key,c),c.lanes=p,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var eh=new WeakMap;function Xs(a,c){if(typeof a=="object"&&a!==null){var p=eh.get(a);return p!==void 0?p:(c={value:a,source:c,stack:ee(c)},eh.set(a,c),c)}return{value:a,source:c,stack:ee(c)}}var Gl=[],Hl=0,Uu=null,Iu=0,Ts=[],Ai=0,el=null,Ii=1,Wa="";function bo(a,c){Gl[Hl++]=Iu,Gl[Hl++]=Uu,Uu=a,Iu=c}function gy(a,c,p){Ts[Ai++]=Ii,Ts[Ai++]=Wa,Ts[Ai++]=el,el=a;var y=Ii;a=Wa;var E=32-oe(y)-1;y&=~(1<<E),p+=1;var C=32-oe(c)+E;if(30<C){var B=E-E%5;C=(y&(1<<B)-1).toString(32),y>>=B,E-=B,Ii=1<<32-oe(c)+E|p<<E|y,Wa=C+a}else Ii=1<<C|p<<E|y,Wa=a}function So(a){a.return!==null&&(bo(a,1),gy(a,1,0))}function kd(a){for(;a===Uu;)Uu=Gl[--Hl],Gl[Hl]=null,Iu=Gl[--Hl],Gl[Hl]=null;for(;a===el;)el=Ts[--Ai],Ts[Ai]=null,Wa=Ts[--Ai],Ts[Ai]=null,Ii=Ts[--Ai],Ts[Ai]=null}function Bd(a,c){Ts[Ai++]=Ii,Ts[Ai++]=Wa,Ts[Ai++]=el,Ii=c.id,Wa=c.overflow,el=a}var Gi=null,gi=null,kn=!1,tl=null,Ys=!1,Ou=Error(n(519));function Mo(a){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw To(Xs(c,a)),Ou}function vy(a){var c=a.stateNode,p=a.type,y=a.memoizedProps;switch(c[Xn]=a,c[W]=y,p){case"dialog":Vn("cancel",c),Vn("close",c);break;case"iframe":case"object":case"embed":Vn("load",c);break;case"video":case"audio":for(p=0;p<Pa.length;p++)Vn(Pa[p],c);break;case"source":Vn("error",c);break;case"img":case"image":case"link":Vn("error",c),Vn("load",c);break;case"details":Vn("toggle",c);break;case"input":Vn("invalid",c),ai(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":Vn("invalid",c);break;case"textarea":Vn("invalid",c),fi(c,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||jA(c.textContent,p)?(y.popover!=null&&(Vn("beforetoggle",c),Vn("toggle",c)),y.onScroll!=null&&Vn("scroll",c),y.onScrollEnd!=null&&Vn("scrollend",c),y.onClick!=null&&(c.onclick=qr),c=!0):c=!1,c||Mo(a,!0)}function yy(a){for(Gi=a.return;Gi;)switch(Gi.tag){case 5:case 31:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:Gi=Gi.return}}function Fu(a){if(a!==Gi)return!1;if(!kn)return yy(a),kn=!0,!1;var c=a.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||bS(a.type,a.memoizedProps)),p=!p),p&&gi&&Mo(a),yy(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));gi=$A(a)}else if(c===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));gi=$A(a)}else c===27?(c=gi,rf(a.type)?(a=ES,ES=null,gi=a):gi=c):gi=Gi?ko(a.stateNode.nextSibling):null;return!0}function jl(){gi=Gi=null,kn=!1}function zd(){var a=tl;return a!==null&&(ji===null?ji=a:ji.push.apply(ji,a),tl=null),a}function To(a){tl===null?tl=[a]:tl.push(a)}var ku=z(null),Wl=null,wo=null;function nl(a,c,p){ae(ku,c._currentValue),c._currentValue=p}function Eo(a){a._currentValue=ku.current,Z(ku)}function Vd(a,c,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===p)break;a=a.return}}function Gd(a,c,p,y){var E=a.child;for(E!==null&&(E.return=a);E!==null;){var C=E.dependencies;if(C!==null){var B=E.child;C=C.firstContext;e:for(;C!==null;){var te=C;C=E;for(var ye=0;ye<c.length;ye++)if(te.context===c[ye]){C.lanes|=p,te=C.alternate,te!==null&&(te.lanes|=p),Vd(C.return,p,a),y||(B=null);break e}C=te.next}}else if(E.tag===18){if(B=E.return,B===null)throw Error(n(341));B.lanes|=p,C=B.alternate,C!==null&&(C.lanes|=p),Vd(B,p,a),B=null}else B=E.child;if(B!==null)B.return=E;else for(B=E;B!==null;){if(B===a){B=null;break}if(E=B.sibling,E!==null){E.return=B.return,B=E;break}B=B.return}E=B}}function Ao(a,c,p,y){a=null;for(var E=c,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var B=E.alternate;if(B===null)throw Error(n(387));if(B=B.memoizedProps,B!==null){var te=E.type;ls(E.pendingProps.value,B.value)||(a!==null?a.push(te):a=[te])}}else if(E===pe.current){if(B=E.alternate,B===null)throw Error(n(387));B.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(a!==null?a.push(t0):a=[t0])}E=E.return}a!==null&&Gd(c,a,p,y),c.flags|=262144}function th(a){for(a=a.firstContext;a!==null;){if(!ls(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Xl(a){Wl=a,wo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ln(a){return xy(Wl,a)}function Bu(a,c){return Wl===null&&Xl(a),xy(a,c)}function xy(a,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},wo===null){if(a===null)throw Error(n(308));wo=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else wo=wo.next=c;return p}var _y=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(p,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(p){return p()})}},aS=r.unstable_scheduleCallback,oS=r.unstable_NormalPriority,ur={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sg(){return{controller:new _y,data:new Map,refCount:0}}function zc(a){a.refCount--,a.refCount===0&&aS(oS,function(){a.controller.abort()})}var qs=null,Hd=0,il=0,_a=null;function ag(a,c){if(qs===null){var p=qs=[];Hd=0,il=Ze(),_a={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Hd++,c.then(og,og),c}function og(){if(--Hd===0&&qs!==null){_a!==null&&(_a.status="fulfilled");var a=qs;qs=null,il=0,_a=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function lg(a,c){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return a.then(function(){y.status="fulfilled",y.value=c;for(var E=0;E<p.length;E++)(0,p[E])(c)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var by=j.S;j.S=function(a,c){Zg=V(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&ag(a,c),by!==null&&by(a,c)};var Yl=z(null);function jd(){var a=Yl.current;return a!==null?a:hn.pooledCache}function nh(a,c){c===null?ae(Yl,Yl.current):ae(Yl,c.pool)}function cg(){var a=jd();return a===null?null:{parent:ur._currentValue,pool:a}}var Vc=Error(n(460)),ih=Error(n(474)),Mn=Error(n(542)),Wd={then:function(){}};function ws(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xd(a,c,p){switch(p=a[p],p===void 0?a.push(c):p!==c&&(c.then(qr,qr),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,jc(a),a;default:if(typeof c.status=="string")c.then(qr,qr);else{if(a=hn,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=c,a.status="pending",a.then(function(y){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=y}},function(y){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,jc(a),a}throw Co=c,Vc}}function Gc(a){try{var c=a._init;return c(a._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Co=p,Vc):p}}var Co=null;function Hc(){if(Co===null)throw Error(n(459));var a=Co;return Co=null,a}function jc(a){if(a===Vc||a===Mn)throw Error(n(483))}var Wc=null,Xc=0;function rh(a){var c=Xc;return Xc+=1,Wc===null&&(Wc=[]),Xd(Wc,a,c)}function ba(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function zu(a,c){throw c.$$typeof===v?Error(n(525)):(a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function Yd(a){function c(Pe,we){if(a){var Be=Pe.deletions;Be===null?(Pe.deletions=[we],Pe.flags|=16):Be.push(we)}}function p(Pe,we){if(!a)return null;for(;we!==null;)c(Pe,we),we=we.sibling;return null}function y(Pe){for(var we=new Map;Pe!==null;)Pe.key!==null?we.set(Pe.key,Pe):we.set(Pe.index,Pe),Pe=Pe.sibling;return we}function E(Pe,we){return Pe=Ms(Pe,we),Pe.index=0,Pe.sibling=null,Pe}function C(Pe,we,Be){return Pe.index=Be,a?(Be=Pe.alternate,Be!==null?(Be=Be.index,Be<we?(Pe.flags|=67108866,we):Be):(Pe.flags|=67108866,we)):(Pe.flags|=1048576,we)}function B(Pe){return a&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function te(Pe,we,Be,dt){return we===null||we.tag!==6?(we=Od(Be,Pe.mode,dt),we.return=Pe,we):(we=E(we,Be),we.return=Pe,we)}function ye(Pe,we,Be,dt){var nn=Be.type;return nn===w?lt(Pe,we,Be.props.children,dt,Be.key):we!==null&&(we.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===R&&Gc(nn)===we.type)?(we=E(we,Be.props),ba(we,Be),we.return=Pe,we):(we=_o(Be.type,Be.key,Be.props,null,Pe.mode,dt),ba(we,Be),we.return=Pe,we)}function ze(Pe,we,Be,dt){return we===null||we.tag!==4||we.stateNode.containerInfo!==Be.containerInfo||we.stateNode.implementation!==Be.implementation?(we=Fd(Be,Pe.mode,dt),we.return=Pe,we):(we=E(we,Be.children||[]),we.return=Pe,we)}function lt(Pe,we,Be,dt,nn){return we===null||we.tag!==7?(we=Vl(Be,Pe.mode,dt,nn),we.return=Pe,we):(we=E(we,Be),we.return=Pe,we)}function pt(Pe,we,Be){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=Od(""+we,Pe.mode,Be),we.return=Pe,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case _:return Be=_o(we.type,we.key,we.props,null,Pe.mode,Be),ba(Be,we),Be.return=Pe,Be;case b:return we=Fd(we,Pe.mode,Be),we.return=Pe,we;case R:return we=Gc(we),pt(Pe,we,Be)}if(ie(we)||X(we))return we=Vl(we,Pe.mode,Be,null),we.return=Pe,we;if(typeof we.then=="function")return pt(Pe,rh(we),Be);if(we.$$typeof===D)return pt(Pe,Bu(Pe,we),Be);zu(Pe,we)}return null}function Xe(Pe,we,Be,dt){var nn=we!==null?we.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return nn!==null?null:te(Pe,we,""+Be,dt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case _:return Be.key===nn?ye(Pe,we,Be,dt):null;case b:return Be.key===nn?ze(Pe,we,Be,dt):null;case R:return Be=Gc(Be),Xe(Pe,we,Be,dt)}if(ie(Be)||X(Be))return nn!==null?null:lt(Pe,we,Be,dt,null);if(typeof Be.then=="function")return Xe(Pe,we,rh(Be),dt);if(Be.$$typeof===D)return Xe(Pe,we,Bu(Pe,Be),dt);zu(Pe,Be)}return null}function et(Pe,we,Be,dt,nn){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Pe=Pe.get(Be)||null,te(we,Pe,""+dt,nn);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case _:return Pe=Pe.get(dt.key===null?Be:dt.key)||null,ye(we,Pe,dt,nn);case b:return Pe=Pe.get(dt.key===null?Be:dt.key)||null,ze(we,Pe,dt,nn);case R:return dt=Gc(dt),et(Pe,we,Be,dt,nn)}if(ie(dt)||X(dt))return Pe=Pe.get(Be)||null,lt(we,Pe,dt,nn,null);if(typeof dt.then=="function")return et(Pe,we,Be,rh(dt),nn);if(dt.$$typeof===D)return et(Pe,we,Be,Bu(we,dt),nn);zu(we,dt)}return null}function Yt(Pe,we,Be,dt){for(var nn=null,ti=null,Kt=we,Rn=we=0,jn=null;Kt!==null&&Rn<Be.length;Rn++){Kt.index>Rn?(jn=Kt,Kt=null):jn=Kt.sibling;var ni=Xe(Pe,Kt,Be[Rn],dt);if(ni===null){Kt===null&&(Kt=jn);break}a&&Kt&&ni.alternate===null&&c(Pe,Kt),we=C(ni,we,Rn),ti===null?nn=ni:ti.sibling=ni,ti=ni,Kt=jn}if(Rn===Be.length)return p(Pe,Kt),kn&&bo(Pe,Rn),nn;if(Kt===null){for(;Rn<Be.length;Rn++)Kt=pt(Pe,Be[Rn],dt),Kt!==null&&(we=C(Kt,we,Rn),ti===null?nn=Kt:ti.sibling=Kt,ti=Kt);return kn&&bo(Pe,Rn),nn}for(Kt=y(Kt);Rn<Be.length;Rn++)jn=et(Kt,Pe,Rn,Be[Rn],dt),jn!==null&&(a&&jn.alternate!==null&&Kt.delete(jn.key===null?Rn:jn.key),we=C(jn,we,Rn),ti===null?nn=jn:ti.sibling=jn,ti=jn);return a&&Kt.forEach(function(cf){return c(Pe,cf)}),kn&&bo(Pe,Rn),nn}function on(Pe,we,Be,dt){if(Be==null)throw Error(n(151));for(var nn=null,ti=null,Kt=we,Rn=we=0,jn=null,ni=Be.next();Kt!==null&&!ni.done;Rn++,ni=Be.next()){Kt.index>Rn?(jn=Kt,Kt=null):jn=Kt.sibling;var cf=Xe(Pe,Kt,ni.value,dt);if(cf===null){Kt===null&&(Kt=jn);break}a&&Kt&&cf.alternate===null&&c(Pe,Kt),we=C(cf,we,Rn),ti===null?nn=cf:ti.sibling=cf,ti=cf,Kt=jn}if(ni.done)return p(Pe,Kt),kn&&bo(Pe,Rn),nn;if(Kt===null){for(;!ni.done;Rn++,ni=Be.next())ni=pt(Pe,ni.value,dt),ni!==null&&(we=C(ni,we,Rn),ti===null?nn=ni:ti.sibling=ni,ti=ni);return kn&&bo(Pe,Rn),nn}for(Kt=y(Kt);!ni.done;Rn++,ni=Be.next())ni=et(Kt,Pe,Rn,ni.value,dt),ni!==null&&(a&&ni.alternate!==null&&Kt.delete(ni.key===null?Rn:ni.key),we=C(ni,we,Rn),ti===null?nn=ni:ti.sibling=ni,ti=ni);return a&&Kt.forEach(function(G4){return c(Pe,G4)}),kn&&bo(Pe,Rn),nn}function xi(Pe,we,Be,dt){if(typeof Be=="object"&&Be!==null&&Be.type===w&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case _:e:{for(var nn=Be.key;we!==null;){if(we.key===nn){if(nn=Be.type,nn===w){if(we.tag===7){p(Pe,we.sibling),dt=E(we,Be.props.children),dt.return=Pe,Pe=dt;break e}}else if(we.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===R&&Gc(nn)===we.type){p(Pe,we.sibling),dt=E(we,Be.props),ba(dt,Be),dt.return=Pe,Pe=dt;break e}p(Pe,we);break}else c(Pe,we);we=we.sibling}Be.type===w?(dt=Vl(Be.props.children,Pe.mode,dt,Be.key),dt.return=Pe,Pe=dt):(dt=_o(Be.type,Be.key,Be.props,null,Pe.mode,dt),ba(dt,Be),dt.return=Pe,Pe=dt)}return B(Pe);case b:e:{for(nn=Be.key;we!==null;){if(we.key===nn)if(we.tag===4&&we.stateNode.containerInfo===Be.containerInfo&&we.stateNode.implementation===Be.implementation){p(Pe,we.sibling),dt=E(we,Be.children||[]),dt.return=Pe,Pe=dt;break e}else{p(Pe,we);break}else c(Pe,we);we=we.sibling}dt=Fd(Be,Pe.mode,dt),dt.return=Pe,Pe=dt}return B(Pe);case R:return Be=Gc(Be),xi(Pe,we,Be,dt)}if(ie(Be))return Yt(Pe,we,Be,dt);if(X(Be)){if(nn=X(Be),typeof nn!="function")throw Error(n(150));return Be=nn.call(Be),on(Pe,we,Be,dt)}if(typeof Be.then=="function")return xi(Pe,we,rh(Be),dt);if(Be.$$typeof===D)return xi(Pe,we,Bu(Pe,Be),dt);zu(Pe,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,we!==null&&we.tag===6?(p(Pe,we.sibling),dt=E(we,Be),dt.return=Pe,Pe=dt):(p(Pe,we),dt=Od(Be,Pe.mode,dt),dt.return=Pe,Pe=dt),B(Pe)):p(Pe,we)}return function(Pe,we,Be,dt){try{Xc=0;var nn=xi(Pe,we,Be,dt);return Wc=null,nn}catch(Kt){if(Kt===Vc||Kt===Mn)throw Kt;var ti=Ui(29,Kt,null,Pe.mode);return ti.lanes=dt,ti.return=Pe,ti}}}var rl=Yd(!0),qd=Yd(!1),us=!1;function sh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ug(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function sl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ql(a,c,p){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Jt&2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,c=xa(a),Bl(a,null,p),c}return Nr(a,y,c,p),xa(a)}function Zl(a,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=a.pendingLanes,p|=y,c.lanes=p,Li(a,p)}}function tn(a,c){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var B={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?E=C=B:C=C.next=B,p=p.next}while(p!==null);C===null?E=C=c:C=C.next=c}else E=C=c;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=c}var fg=!1;function ah(){if(fg){var a=_a;if(a!==null)throw a}}function Vu(a,c,p,y){fg=!1;var E=a.updateQueue;us=!1;var C=E.firstBaseUpdate,B=E.lastBaseUpdate,te=E.shared.pending;if(te!==null){E.shared.pending=null;var ye=te,ze=ye.next;ye.next=null,B===null?C=ze:B.next=ze,B=ye;var lt=a.alternate;lt!==null&&(lt=lt.updateQueue,te=lt.lastBaseUpdate,te!==B&&(te===null?lt.firstBaseUpdate=ze:te.next=ze,lt.lastBaseUpdate=ye))}if(C!==null){var pt=E.baseState;B=0,lt=ze=ye=null,te=C;do{var Xe=te.lane&-536870913,et=Xe!==te.lane;if(et?(bn&Xe)===Xe:(y&Xe)===Xe){Xe!==0&&Xe===il&&(fg=!0),lt!==null&&(lt=lt.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Yt=a,on=te;Xe=c;var xi=p;switch(on.tag){case 1:if(Yt=on.payload,typeof Yt=="function"){pt=Yt.call(xi,pt,Xe);break e}pt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=on.payload,Xe=typeof Yt=="function"?Yt.call(xi,pt,Xe):Yt,Xe==null)break e;pt=g({},pt,Xe);break e;case 2:us=!0}}Xe=te.callback,Xe!==null&&(a.flags|=64,et&&(a.flags|=8192),et=E.callbacks,et===null?E.callbacks=[Xe]:et.push(Xe))}else et={lane:Xe,tag:te.tag,payload:te.payload,callback:te.callback,next:null},lt===null?(ze=lt=et,ye=pt):lt=lt.next=et,B|=Xe;if(te=te.next,te===null){if(te=E.shared.pending,te===null)break;et=te,te=et.next,et.next=null,E.lastBaseUpdate=et,E.shared.pending=null}}while(!0);lt===null&&(ye=pt),E.baseState=ye,E.firstBaseUpdate=ze,E.lastBaseUpdate=lt,C===null&&(E.shared.lanes=0),Io|=B,a.lanes=B,a.memoizedState=pt}}function Gu(a,c){if(typeof a!="function")throw Error(n(191,a));a.call(c)}function Sy(a,c){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)Gu(p[a],c)}var Hu=z(null),Zd=z(0);function My(a,c){a=Js,ae(Zd,a),ae(Hu,c),Js=a|c.baseLanes}function hg(){ae(Zd,Js),ae(Hu,Hu.current)}function oh(){Js=Zd.current,Z(Hu),Z(Zd)}var Es=z(null),fs=null;function al(a){var c=a.alternate;ae(Bn,Bn.current&1),ae(Es,a),fs===null&&(c===null||Hu.current!==null||c.memoizedState!==null)&&(fs=a)}function dg(a){ae(Bn,Bn.current),ae(Es,a),fs===null&&(fs=a)}function Ty(a){a.tag===22?(ae(Bn,Bn.current),ae(Es,a),fs===null&&(fs=a)):As()}function As(){ae(Bn,Bn.current),ae(Es,Es.current)}function Ki(a){Z(Es),fs===a&&(fs=null),Z(Bn)}var Bn=z(0);function Zs(a){for(var c=a;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||TS(p)||wS(p)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ci=0,gn=null,li=null,Un=null,Sa=!1,ju=!1,Yc=!1,Kd=0,lh=0,Wu=null,pg=0;function Oi(){throw Error(n(321))}function mg(a,c){if(c===null)return!1;for(var p=0;p<c.length&&p<a.length;p++)if(!ls(a[p],c[p]))return!1;return!0}function Qd(a,c,p,y,E,C){return Ci=C,gn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,j.H=a===null||a.memoizedState===null?nx:Ig,Yc=!1,C=p(y,E),Yc=!1,ju&&(C=qc(c,p,y,E)),wy(a),C}function wy(a){j.H=Xu;var c=li!==null&&li.next!==null;if(Ci=0,Un=li=gn=null,Sa=!1,lh=0,Wu=null,c)throw Error(n(300));a===null||fr||(a=a.dependencies,a!==null&&th(a)&&(fr=!0))}function qc(a,c,p,y){gn=a;var E=0;do{if(ju&&(Wu=null),lh=0,ju=!1,25<=E)throw Error(n(301));if(E+=1,Un=li=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}j.H=Ma,C=c(p,y)}while(ju);return C}function Zc(){var a=j.H,c=a.useState()[0];return c=typeof c.then=="function"?ch(c):c,a=a.useState()[0],(li!==null?li.memoizedState:null)!==a&&(gn.flags|=1024),c}function gg(){var a=Kd!==0;return Kd=0,a}function vg(a,c,p){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~p}function yg(a){if(Sa){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Sa=!1}Ci=0,Un=li=gn=null,ju=!1,lh=Kd=0,Wu=null}function _r(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?gn.memoizedState=Un=a:Un=Un.next=a,Un}function Qi(){if(li===null){var a=gn.alternate;a=a!==null?a.memoizedState:null}else a=li.next;var c=Un===null?gn.memoizedState:Un.next;if(c!==null)Un=c,li=a;else{if(a===null)throw gn.alternate===null?Error(n(467)):Error(n(310));li=a,a={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},Un===null?gn.memoizedState=Un=a:Un=Un.next=a}return Un}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ch(a){var c=lh;return lh+=1,Wu===null&&(Wu=[]),a=Xd(Wu,a,c),c=gn,(Un===null?c.memoizedState:Un.next)===null&&(c=c.alternate,j.H=c===null||c.memoizedState===null?nx:Ig),a}function Kl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ch(a);if(a.$$typeof===D)return ln(a)}throw Error(n(438,String(a)))}function xg(a){var c=null,p=gn.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=gn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Jd(),gn.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(a),y=0;y<a;y++)p[y]=H;return c.index++,p}function ol(a,c){return typeof c=="function"?c(a):c}function $d(a){var c=Qi();return _g(c,li,a)}function _g(a,c,p){var y=a.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var E=a.baseQueue,C=y.pending;if(C!==null){if(E!==null){var B=E.next;E.next=C.next,C.next=B}c.baseQueue=E=C,y.pending=null}if(C=a.baseState,E===null)a.memoizedState=C;else{c=E.next;var te=B=null,ye=null,ze=c,lt=!1;do{var pt=ze.lane&-536870913;if(pt!==ze.lane?(bn&pt)===pt:(Ci&pt)===pt){var Xe=ze.revertLane;if(Xe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,gesture:null,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),pt===il&&(lt=!0);else if((Ci&Xe)===Xe){ze=ze.next,Xe===il&&(lt=!0);continue}else pt={lane:0,revertLane:ze.revertLane,gesture:null,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ye===null?(te=ye=pt,B=C):ye=ye.next=pt,gn.lanes|=Xe,Io|=Xe;pt=ze.action,Yc&&p(C,pt),C=ze.hasEagerState?ze.eagerState:p(C,pt)}else Xe={lane:pt,revertLane:ze.revertLane,gesture:ze.gesture,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ye===null?(te=ye=Xe,B=C):ye=ye.next=Xe,gn.lanes|=pt,Io|=pt;ze=ze.next}while(ze!==null&&ze!==c);if(ye===null?B=C:ye.next=te,!ls(C,a.memoizedState)&&(fr=!0,lt&&(p=_a,p!==null)))throw p;a.memoizedState=C,a.baseState=B,a.baseQueue=ye,y.lastRenderedState=C}return E===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function bg(a){var c=Qi(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var y=p.dispatch,E=p.pending,C=c.memoizedState;if(E!==null){p.pending=null;var B=E=E.next;do C=a(C,B.action),B=B.next;while(B!==E);ls(C,c.memoizedState)||(fr=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),p.lastRenderedState=C}return[C,y]}function Ey(a,c,p){var y=gn,E=Qi(),C=kn;if(C){if(p===void 0)throw Error(n(407));p=p()}else p=c();var B=!ls((li||E).memoizedState,p);if(B&&(E.memoizedState=p,fr=!0),E=E.queue,Rg(Ry.bind(null,y,E,a),[a]),E.getSnapshot!==c||B||Un!==null&&Un.memoizedState.tag&1){if(y.flags|=2048,Ql(9,{destroy:void 0},Cy.bind(null,y,E,p,c),null),hn===null)throw Error(n(349));C||(Ci&127)!==0||Ay(y,c,p)}return p}function Ay(a,c,p){a.flags|=16384,a={getSnapshot:c,value:p},c=gn.updateQueue,c===null?(c=Jd(),gn.updateQueue=c,c.stores=[a]):(p=c.stores,p===null?c.stores=[a]:p.push(a))}function Cy(a,c,p,y){c.value=p,c.getSnapshot=y,Dy(c)&&Ny(a)}function Ry(a,c,p){return p(function(){Dy(c)&&Ny(a)})}function Dy(a){var c=a.getSnapshot;a=a.value;try{var p=c();return!ls(a,p)}catch{return!0}}function Ny(a){var c=cs(a,2);c!==null&&wn(c,a,2)}function Sg(a){var c=_r();if(typeof a=="function"){var p=a;if(a=p(),Yc){tt(!0);try{p()}finally{tt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:a},c}function Mg(a,c,p,y){return a.baseState=p,_g(a,li,typeof y=="function"?y:ol)}function lS(a,c,p,y,E){if(ip(a))throw Error(n(485));if(a=c.action,a!==null){var C={payload:E,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){C.listeners.push(B)}};j.T!==null?p(!0):C.isTransition=!1,y(C),p=c.pending,p===null?(C.next=c.pending=C,Py(c,C)):(C.next=p.next,c.pending=p.next=C)}}function Py(a,c){var p=c.action,y=c.payload,E=a.state;if(c.isTransition){var C=j.T,B={};j.T=B;try{var te=p(E,y),ye=j.S;ye!==null&&ye(B,te),Ly(a,c,te)}catch(ze){Tg(a,c,ze)}finally{C!==null&&B.types!==null&&(C.types=B.types),j.T=C}}else try{C=p(E,y),Ly(a,c,C)}catch(ze){Tg(a,c,ze)}}function Ly(a,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Uy(a,c,y)},function(y){return Tg(a,c,y)}):Uy(a,c,p)}function Uy(a,c,p){c.status="fulfilled",c.value=p,Iy(c),a.state=p,c=a.pending,c!==null&&(p=c.next,p===c?a.pending=null:(p=p.next,c.next=p,Py(a,p)))}function Tg(a,c,p){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,Iy(c),c=c.next;while(c!==y)}a.action=null}function Iy(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function wg(a,c){return c}function Eg(a,c){if(kn){var p=hn.formState;if(p!==null){e:{var y=gn;if(kn){if(gi){t:{for(var E=gi,C=Ys;E.nodeType!==8;){if(!C){E=null;break t}if(E=ko(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){gi=ko(E.nextSibling),y=E.data==="F!";break e}}Mo(y)}y=!1}y&&(c=p[0])}}return p=_r(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:c},p.queue=y,p=$y.bind(null,gn,y),y.dispatch=p,y=Sg(!1),C=Ug.bind(null,gn,!1,y.queue),y=_r(),E={state:c,dispatch:null,action:a,pending:null},y.queue=E,p=lS.bind(null,gn,E,C,p),E.dispatch=p,y.memoizedState=a,[c,p,!1]}function Oy(a){var c=Qi();return Ag(c,li,a)}function Ag(a,c,p){if(c=_g(a,c,wg)[0],a=$d(ol)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=ch(c)}catch(B){throw B===Vc?Mn:B}else y=c;c=Qi();var E=c.queue,C=E.dispatch;return p!==c.memoizedState&&(gn.flags|=2048,Ql(9,{destroy:void 0},Fy.bind(null,E,p),null)),[y,C,a]}function Fy(a,c){a.action=c}function Cg(a){var c=Qi(),p=li;if(p!==null)return Ag(c,p,a);Qi(),c=c.memoizedState,p=Qi();var y=p.queue.dispatch;return p.memoizedState=a,[c,y,!1]}function Ql(a,c,p,y){return a={tag:a,create:p,deps:y,inst:c,next:null},c=gn.updateQueue,c===null&&(c=Jd(),gn.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,c.lastEffect=a),a}function ep(){return Qi().memoizedState}function tp(a,c,p,y){var E=_r();gn.flags|=a,E.memoizedState=Ql(1|c,{destroy:void 0},p,y===void 0?null:y)}function np(a,c,p,y){var E=Qi();y=y===void 0?null:y;var C=E.memoizedState.inst;li!==null&&y!==null&&mg(y,li.memoizedState.deps)?E.memoizedState=Ql(c,C,p,y):(gn.flags|=a,E.memoizedState=Ql(1|c,C,p,y))}function ky(a,c){tp(8390656,8,a,c)}function Rg(a,c){np(2048,8,a,c)}function By(a){gn.flags|=4;var c=gn.updateQueue;if(c===null)c=Jd(),gn.updateQueue=c,c.events=[a];else{var p=c.events;p===null?c.events=[a]:p.push(a)}}function zy(a){var c=Qi().memoizedState;return By({ref:c,nextImpl:a}),function(){if((Jt&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function Vy(a,c){return np(4,2,a,c)}function Gy(a,c){return np(4,4,a,c)}function Hy(a,c){if(typeof c=="function"){a=a();var p=c(a);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function jy(a,c,p){p=p!=null?p.concat([a]):null,np(4,4,Hy.bind(null,c,a),p)}function Dg(){}function Wy(a,c){var p=Qi();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&mg(c,y[1])?y[0]:(p.memoizedState=[a,c],a)}function Xy(a,c){var p=Qi();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&mg(c,y[1]))return y[0];if(y=a(),Yc){tt(!0);try{a()}finally{tt(!1)}}return p.memoizedState=[y,c],y}function Ng(a,c,p){return p===void 0||(Ci&1073741824)!==0&&(bn&261930)===0?a.memoizedState=c:(a.memoizedState=p,a=Nn(),gn.lanes|=a,Io|=a,p)}function Yy(a,c,p,y){return ls(p,c)?p:Hu.current!==null?(a=Ng(a,p,y),ls(a,c)||(fr=!0),a):(Ci&42)===0||(Ci&1073741824)!==0&&(bn&261930)===0?(fr=!0,a.memoizedState=p):(a=Nn(),gn.lanes|=a,Io|=a,c)}function qy(a,c,p,y,E){var C=J.p;J.p=C!==0&&8>C?C:8;var B=j.T,te={};j.T=te,Ug(a,!1,c,p);try{var ye=E(),ze=j.S;if(ze!==null&&ze(te,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var lt=lg(ye,y);uh(a,c,lt,ea(a))}else uh(a,c,y,ea(a))}catch(pt){uh(a,c,{then:function(){},status:"rejected",reason:pt},ea())}finally{J.p=C,B!==null&&te.types!==null&&(B.types=te.types),j.T=B}}function cS(){}function Pg(a,c,p,y){if(a.tag!==5)throw Error(n(476));var E=Zy(a).queue;qy(a,E,c,de,p===null?cS:function(){return Ky(a),p(y)})}function Zy(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:de},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:p},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function Ky(a){var c=Zy(a);c.next===null&&(c=a.alternate.memoizedState),uh(a,c.next.queue,{},ea())}function Lg(){return ln(t0)}function Qy(){return Qi().memoizedState}function Jy(){return Qi().memoizedState}function uS(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var p=ea();a=sl(p);var y=ql(c,a,p);y!==null&&(wn(y,c,p),Zl(y,c,p)),c={cache:sg()},a.payload=c;return}c=c.return}}function fS(a,c,p){var y=ea();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},ip(a)?ex(c,p):(p=Ud(a,c,p,y),p!==null&&(wn(p,a,y),tx(p,c,y)))}function $y(a,c,p){var y=ea();uh(a,c,p,y)}function uh(a,c,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(ip(a))ex(c,E);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var B=c.lastRenderedState,te=C(B,p);if(E.hasEagerState=!0,E.eagerState=te,ls(te,B))return Nr(a,c,E,0),hn===null&&$f(),!1}catch{}if(p=Ud(a,c,E,y),p!==null)return wn(p,a,y),tx(p,c,y),!0}return!1}function Ug(a,c,p,y){if(y={lane:2,revertLane:Ze(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},ip(a)){if(c)throw Error(n(479))}else c=Ud(a,p,y,2),c!==null&&wn(c,a,2)}function ip(a){var c=a.alternate;return a===gn||c!==null&&c===gn}function ex(a,c){ju=Sa=!0;var p=a.pending;p===null?c.next=c:(c.next=p.next,p.next=c),a.pending=c}function tx(a,c,p){if((p&4194048)!==0){var y=c.lanes;y&=a.pendingLanes,p|=y,c.lanes=p,Li(a,p)}}var Xu={readContext:ln,use:Kl,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useLayoutEffect:Oi,useInsertionEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useSyncExternalStore:Oi,useId:Oi,useHostTransitionStatus:Oi,useFormState:Oi,useActionState:Oi,useOptimistic:Oi,useMemoCache:Oi,useCacheRefresh:Oi};Xu.useEffectEvent=Oi;var nx={readContext:ln,use:Kl,useCallback:function(a,c){return _r().memoizedState=[a,c===void 0?null:c],a},useContext:ln,useEffect:ky,useImperativeHandle:function(a,c,p){p=p!=null?p.concat([a]):null,tp(4194308,4,Hy.bind(null,c,a),p)},useLayoutEffect:function(a,c){return tp(4194308,4,a,c)},useInsertionEffect:function(a,c){tp(4,2,a,c)},useMemo:function(a,c){var p=_r();c=c===void 0?null:c;var y=a();if(Yc){tt(!0);try{a()}finally{tt(!1)}}return p.memoizedState=[y,c],y},useReducer:function(a,c,p){var y=_r();if(p!==void 0){var E=p(c);if(Yc){tt(!0);try{p(c)}finally{tt(!1)}}}else E=c;return y.memoizedState=y.baseState=E,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:E},y.queue=a,a=a.dispatch=fS.bind(null,gn,a),[y.memoizedState,a]},useRef:function(a){var c=_r();return a={current:a},c.memoizedState=a},useState:function(a){a=Sg(a);var c=a.queue,p=$y.bind(null,gn,c);return c.dispatch=p,[a.memoizedState,p]},useDebugValue:Dg,useDeferredValue:function(a,c){var p=_r();return Ng(p,a,c)},useTransition:function(){var a=Sg(!1);return a=qy.bind(null,gn,a.queue,!0,!1),_r().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,p){var y=gn,E=_r();if(kn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),hn===null)throw Error(n(349));(bn&127)!==0||Ay(y,c,p)}E.memoizedState=p;var C={value:p,getSnapshot:c};return E.queue=C,ky(Ry.bind(null,y,C,a),[a]),y.flags|=2048,Ql(9,{destroy:void 0},Cy.bind(null,y,C,p,c),null),p},useId:function(){var a=_r(),c=hn.identifierPrefix;if(kn){var p=Wa,y=Ii;p=(y&~(1<<32-oe(y)-1)).toString(32)+p,c="_"+c+"R_"+p,p=Kd++,0<p&&(c+="H"+p.toString(32)),c+="_"}else p=pg++,c="_"+c+"r_"+p.toString(32)+"_";return a.memoizedState=c},useHostTransitionStatus:Lg,useFormState:Eg,useActionState:Eg,useOptimistic:function(a){var c=_r();c.memoizedState=c.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=Ug.bind(null,gn,!0,p),p.dispatch=c,[a,c]},useMemoCache:xg,useCacheRefresh:function(){return _r().memoizedState=uS.bind(null,gn)},useEffectEvent:function(a){var c=_r(),p={impl:a};return c.memoizedState=p,function(){if((Jt&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},Ig={readContext:ln,use:Kl,useCallback:Wy,useContext:ln,useEffect:Rg,useImperativeHandle:jy,useInsertionEffect:Vy,useLayoutEffect:Gy,useMemo:Xy,useReducer:$d,useRef:ep,useState:function(){return $d(ol)},useDebugValue:Dg,useDeferredValue:function(a,c){var p=Qi();return Yy(p,li.memoizedState,a,c)},useTransition:function(){var a=$d(ol)[0],c=Qi().memoizedState;return[typeof a=="boolean"?a:ch(a),c]},useSyncExternalStore:Ey,useId:Qy,useHostTransitionStatus:Lg,useFormState:Oy,useActionState:Oy,useOptimistic:function(a,c){var p=Qi();return Mg(p,li,a,c)},useMemoCache:xg,useCacheRefresh:Jy};Ig.useEffectEvent=zy;var Ma={readContext:ln,use:Kl,useCallback:Wy,useContext:ln,useEffect:Rg,useImperativeHandle:jy,useInsertionEffect:Vy,useLayoutEffect:Gy,useMemo:Xy,useReducer:bg,useRef:ep,useState:function(){return bg(ol)},useDebugValue:Dg,useDeferredValue:function(a,c){var p=Qi();return li===null?Ng(p,a,c):Yy(p,li.memoizedState,a,c)},useTransition:function(){var a=bg(ol)[0],c=Qi().memoizedState;return[typeof a=="boolean"?a:ch(a),c]},useSyncExternalStore:Ey,useId:Qy,useHostTransitionStatus:Lg,useFormState:Cg,useActionState:Cg,useOptimistic:function(a,c){var p=Qi();return li!==null?Mg(p,li,a,c):(p.baseState=a,[a,p.queue.dispatch])},useMemoCache:xg,useCacheRefresh:Jy};Ma.useEffectEvent=zy;function rp(a,c,p,y){c=a.memoizedState,p=p(y,c),p=p==null?c:g({},c,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var fh={enqueueSetState:function(a,c,p){a=a._reactInternals;var y=ea(),E=sl(y);E.payload=c,p!=null&&(E.callback=p),c=ql(a,E,y),c!==null&&(wn(c,a,y),Zl(c,a,y))},enqueueReplaceState:function(a,c,p){a=a._reactInternals;var y=ea(),E=sl(y);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=ql(a,E,y),c!==null&&(wn(c,a,y),Zl(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var p=ea(),y=sl(p);y.tag=2,c!=null&&(y.callback=c),c=ql(a,y,p),c!==null&&(wn(c,a,p),Zl(c,a,p))}};function Og(a,c,p,y,E,C,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,C,B):c.prototype&&c.prototype.isPureReactComponent?!Cu(p,y)||!Cu(E,C):!0}function Fg(a,c,p,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==a&&fh.enqueueReplaceState(c,c.state,null)}function Jl(a,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(a=a.defaultProps){p===c&&(p=g({},p));for(var E in a)p[E]===void 0&&(p[E]=a[E])}return p}function ix(a){Jf(a)}function kg(a){console.error(a)}function Bg(a){Jf(a)}function sp(a,c){try{var p=a.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function rx(a,c,p){try{var y=a.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function zg(a,c,p){return p=sl(p),p.tag=3,p.payload={element:null},p.callback=function(){sp(a,c)},p}function Vg(a){return a=sl(a),a.tag=3,a}function sx(a,c,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var C=y.value;a.payload=function(){return E(C)},a.callback=function(){rx(c,p,y)}}var B=p.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(a.callback=function(){rx(c,p,y),typeof E!="function"&&(er===null?er=new Set([this]):er.add(this));var te=y.stack;this.componentDidCatch(y.value,{componentStack:te!==null?te:""})})}function br(a,c,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&Ao(c,p,E,!0),p=Es.current,p!==null){switch(p.tag){case 31:case 13:return fs===null?$u():p.alternate===null&&Fi===0&&(Fi=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Wd?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),Mh(a,y,E)),!1;case 22:return p.flags|=65536,y===Wd?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),Mh(a,y,E)),!1}throw Error(n(435,p.tag))}return Mh(a,y,E),$u(),!1}if(kn)return c=Es.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,y!==Ou&&(a=Error(n(422),{cause:y}),To(Xs(a,p)))):(y!==Ou&&(c=Error(n(423),{cause:y}),To(Xs(c,p))),a=a.current.alternate,a.flags|=65536,E&=-E,a.lanes|=E,y=Xs(y,p),E=zg(a.stateNode,y,E),tn(a,E),Fi!==4&&(Fi=2)),!1;var C=Error(n(520),{cause:y});if(C=Xs(C,p),iu===null?iu=[C]:iu.push(C),Fi!==4&&(Fi=2),c===null)return!0;y=Xs(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,a=E&-E,p.lanes|=a,a=zg(p.stateNode,y,a),tn(p,a),!1;case 1:if(c=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(er===null||!er.has(C))))return p.flags|=65536,E&=-E,p.lanes|=E,E=Vg(E),sx(E,a,p,y),tn(p,E),!1}p=p.return}while(p!==null);return!1}var ap=Error(n(461)),fr=!1;function Pr(a,c,p,y){c.child=a===null?qd(c,null,p,y):rl(c,a.child,p,y)}function Gg(a,c,p,y,E){p=p.render;var C=c.ref;if("ref"in y){var B={};for(var te in y)te!=="ref"&&(B[te]=y[te])}else B=y;return Xl(c),y=Qd(a,c,p,B,C,E),te=gg(),a!==null&&!fr?(vg(a,c,E),Ji(a,c,E)):(kn&&te&&So(c),c.flags|=1,Pr(a,c,y,E),c.child)}function Kc(a,c,p,y,E){if(a===null){var C=p.type;return typeof C=="function"&&!Id(C)&&C.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=C,op(a,c,C,y,E)):(a=_o(p.type,null,y,c,c.mode,E),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!dp(a,E)){var B=C.memoizedProps;if(p=p.compare,p=p!==null?p:Cu,p(B,y)&&a.ref===c.ref)return Ji(a,c,E)}return c.flags|=1,a=Ms(C,y),a.ref=c.ref,a.return=c,c.child=a}function op(a,c,p,y,E){if(a!==null){var C=a.memoizedProps;if(Cu(C,y)&&a.ref===c.ref)if(fr=!1,c.pendingProps=y=C,dp(a,E))(a.flags&131072)!==0&&(fr=!0);else return c.lanes=a.lanes,Ji(a,c,E)}return Yu(a,c,p,y,E)}function Qc(a,c,p,y){var E=y.children,C=a!==null?a.memoizedState:null;if(a===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((c.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,a!==null){for(y=c.child=a.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~C}else y=0,c.child=null;return Cs(a,c,C,p,y)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&nh(c,C!==null?C.cachePool:null),C!==null?My(c,C):hg(),Ty(c);else return y=c.lanes=536870912,Cs(a,c,C!==null?C.baseLanes|p:p,p,y)}else C!==null?(nh(c,C.cachePool),My(c,C),As(),c.memoizedState=null):(a!==null&&nh(c,null),hg(),As());return Pr(a,c,E,p),c.child}function Ro(a,c){return a!==null&&a.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Cs(a,c,p,y,E){var C=jd();return C=C===null?null:{parent:ur._currentValue,pool:C},c.memoizedState={baseLanes:p,cachePool:C},a!==null&&nh(c,null),hg(),Ty(c),a!==null&&Ao(a,c,y,!0),c.childLanes=E,null}function lp(a,c){return c=hp({mode:c.mode,children:c.children},a.mode),c.ref=a.ref,a.child=c,c.return=a,c}function ax(a,c,p){return rl(c,a.child,null,p),a=lp(c,c.pendingProps),a.flags|=2,Ki(c),c.memoizedState=null,a}function cp(a,c,p){var y=c.pendingProps,E=(c.flags&128)!==0;if(c.flags&=-129,a===null){if(kn){if(y.mode==="hidden")return a=lp(c,y),c.lanes=536870912,Ro(null,a);if(dg(c),(a=gi)?(a=JA(a,Ys),a=a!==null&&a.data==="&"?a:null,a!==null&&(c.memoizedState={dehydrated:a,treeContext:el!==null?{id:Ii,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},p=Lu(a),p.return=c,c.child=p,Gi=c,gi=null)):a=null,a===null)throw Mo(c);return c.lanes=536870912,null}return lp(c,y)}var C=a.memoizedState;if(C!==null){var B=C.dehydrated;if(dg(c),E)if(c.flags&256)c.flags&=-257,c=ax(a,c,p);else if(c.memoizedState!==null)c.child=a.child,c.flags|=128,c=null;else throw Error(n(558));else if(fr||Ao(a,c,p,!1),E=(p&a.childLanes)!==0,fr||E){if(y=hn,y!==null&&(B=xr(y,p),B!==0&&B!==C.retryLane))throw C.retryLane=B,cs(a,B),wn(y,a,B),ap;$u(),c=ax(a,c,p)}else a=C.treeContext,gi=ko(B.nextSibling),Gi=c,kn=!0,tl=null,Ys=!1,a!==null&&Bd(c,a),c=lp(c,y),c.flags|=4096;return c}return a=Ms(a.child,{mode:y.mode,children:y.children}),a.ref=c.ref,c.child=a,a.return=c,a}function Jc(a,c){var p=c.ref;if(p===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(a===null||a.ref!==p)&&(c.flags|=4194816)}}function Yu(a,c,p,y,E){return Xl(c),p=Qd(a,c,p,y,void 0,E),y=gg(),a!==null&&!fr?(vg(a,c,E),Ji(a,c,E)):(kn&&y&&So(c),c.flags|=1,Pr(a,c,p,E),c.child)}function hh(a,c,p,y,E,C){return Xl(c),c.updateQueue=null,p=qc(c,y,p,E),wy(a),y=gg(),a!==null&&!fr?(vg(a,c,C),Ji(a,c,C)):(kn&&y&&So(c),c.flags|=1,Pr(a,c,p,C),c.child)}function up(a,c,p,y,E){if(Xl(c),c.stateNode===null){var C=zl,B=p.contextType;typeof B=="object"&&B!==null&&(C=ln(B)),C=new p(y,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=fh,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=y,C.state=c.memoizedState,C.refs={},sh(c),B=p.contextType,C.context=typeof B=="object"&&B!==null?ln(B):zl,C.state=c.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(rp(c,p,B,y),C.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(B=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),B!==C.state&&fh.enqueueReplaceState(C,C.state,null),Vu(c,y,C,E),ah(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(a===null){C=c.stateNode;var te=c.memoizedProps,ye=Jl(p,te);C.props=ye;var ze=C.context,lt=p.contextType;B=zl,typeof lt=="object"&&lt!==null&&(B=ln(lt));var pt=p.getDerivedStateFromProps;lt=typeof pt=="function"||typeof C.getSnapshotBeforeUpdate=="function",te=c.pendingProps!==te,lt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(te||ze!==B)&&Fg(c,C,y,B),us=!1;var Xe=c.memoizedState;C.state=Xe,Vu(c,y,C,E),ah(),ze=c.memoizedState,te||Xe!==ze||us?(typeof pt=="function"&&(rp(c,p,pt,y),ze=c.memoizedState),(ye=us||Og(c,p,ye,y,Xe,ze,B))?(lt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=ze),C.props=y,C.state=ze,C.context=B,y=ye):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{C=c.stateNode,ug(a,c),B=c.memoizedProps,lt=Jl(p,B),C.props=lt,pt=c.pendingProps,Xe=C.context,ze=p.contextType,ye=zl,typeof ze=="object"&&ze!==null&&(ye=ln(ze)),te=p.getDerivedStateFromProps,(ze=typeof te=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B!==pt||Xe!==ye)&&Fg(c,C,y,ye),us=!1,Xe=c.memoizedState,C.state=Xe,Vu(c,y,C,E),ah();var et=c.memoizedState;B!==pt||Xe!==et||us||a!==null&&a.dependencies!==null&&th(a.dependencies)?(typeof te=="function"&&(rp(c,p,te,y),et=c.memoizedState),(lt=us||Og(c,p,lt,y,Xe,et,ye)||a!==null&&a.dependencies!==null&&th(a.dependencies))?(ze||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,et,ye),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,et,ye)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||B===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=et),C.props=y,C.state=et,C.context=ye,y=lt):(typeof C.componentDidUpdate!="function"||B===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=1024),y=!1)}return C=y,Jc(a,c),y=(c.flags&128)!==0,C||y?(C=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&y?(c.child=rl(c,a.child,null,E),c.child=rl(c,null,p,E)):Pr(a,c,p,E),c.memoizedState=C.state,a=c.child):a=Ji(a,c,E),a}function ox(a,c,p,y){return jl(),c.flags|=256,Pr(a,c,p,y),c.child}var Hg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jr(a){return{baseLanes:a,cachePool:cg()}}function fp(a,c,p){return a=a!==null?a.childLanes&~p:0,c&&(a|=ps),a}function lx(a,c,p){var y=c.pendingProps,E=!1,C=(c.flags&128)!==0,B;if((B=C)||(B=a!==null&&a.memoizedState===null?!1:(Bn.current&2)!==0),B&&(E=!0,c.flags&=-129),B=(c.flags&32)!==0,c.flags&=-33,a===null){if(kn){if(E?al(c):As(),(a=gi)?(a=JA(a,Ys),a=a!==null&&a.data!=="&"?a:null,a!==null&&(c.memoizedState={dehydrated:a,treeContext:el!==null?{id:Ii,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},p=Lu(a),p.return=c,c.child=p,Gi=c,gi=null)):a=null,a===null)throw Mo(c);return wS(a)?c.lanes=32:c.lanes=536870912,null}var te=y.children;return y=y.fallback,E?(As(),E=c.mode,te=hp({mode:"hidden",children:te},E),y=Vl(y,E,p,null),te.return=c,y.return=c,te.sibling=y,c.child=te,y=c.child,y.memoizedState=Jr(p),y.childLanes=fp(a,B,p),c.memoizedState=Hg,Ro(null,y)):(al(c),dh(c,te))}var ye=a.memoizedState;if(ye!==null&&(te=ye.dehydrated,te!==null)){if(C)c.flags&256?(al(c),c.flags&=-257,c=jg(a,c,p)):c.memoizedState!==null?(As(),c.child=a.child,c.flags|=128,c=null):(As(),te=y.fallback,E=c.mode,y=hp({mode:"visible",children:y.children},E),te=Vl(te,E,p,null),te.flags|=2,y.return=c,te.return=c,y.sibling=te,c.child=y,rl(c,a.child,null,p),y=c.child,y.memoizedState=Jr(p),y.childLanes=fp(a,B,p),c.memoizedState=Hg,c=Ro(null,y));else if(al(c),wS(te)){if(B=te.nextSibling&&te.nextSibling.dataset,B)var ze=B.dgst;B=ze,y=Error(n(419)),y.stack="",y.digest=B,To({value:y,source:null,stack:null}),c=jg(a,c,p)}else if(fr||Ao(a,c,p,!1),B=(p&a.childLanes)!==0,fr||B){if(B=hn,B!==null&&(y=xr(B,p),y!==0&&y!==ye.retryLane))throw ye.retryLane=y,cs(a,y),wn(B,a,y),ap;TS(te)||$u(),c=jg(a,c,p)}else TS(te)?(c.flags|=192,c.child=a.child,c=null):(a=ye.treeContext,gi=ko(te.nextSibling),Gi=c,kn=!0,tl=null,Ys=!1,a!==null&&Bd(c,a),c=dh(c,y.children),c.flags|=4096);return c}return E?(As(),te=y.fallback,E=c.mode,ye=a.child,ze=ye.sibling,y=Ms(ye,{mode:"hidden",children:y.children}),y.subtreeFlags=ye.subtreeFlags&65011712,ze!==null?te=Ms(ze,te):(te=Vl(te,E,p,null),te.flags|=2),te.return=c,y.return=c,y.sibling=te,c.child=y,Ro(null,y),y=c.child,te=a.child.memoizedState,te===null?te=Jr(p):(E=te.cachePool,E!==null?(ye=ur._currentValue,E=E.parent!==ye?{parent:ye,pool:ye}:E):E=cg(),te={baseLanes:te.baseLanes|p,cachePool:E}),y.memoizedState=te,y.childLanes=fp(a,B,p),c.memoizedState=Hg,Ro(a.child,y)):(al(c),p=a.child,a=p.sibling,p=Ms(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,a!==null&&(B=c.deletions,B===null?(c.deletions=[a],c.flags|=16):B.push(a)),c.child=p,c.memoizedState=null,p)}function dh(a,c){return c=hp({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function hp(a,c){return a=Ui(22,a,null,c),a.lanes=0,a}function jg(a,c,p){return rl(c,a.child,null,p),a=dh(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function cx(a,c,p){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),Vd(a.return,c,p)}function $c(a,c,p,y,E,C){var B=a.memoizedState;B===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:C}:(B.isBackwards=c,B.rendering=null,B.renderingStartTime=0,B.last=y,B.tail=p,B.tailMode=E,B.treeForkCount=C)}function Rs(a,c,p){var y=c.pendingProps,E=y.revealOrder,C=y.tail;y=y.children;var B=Bn.current,te=(B&2)!==0;if(te?(B=B&1|2,c.flags|=128):B&=1,ae(Bn,B),Pr(a,c,y,p),y=kn?Iu:0,!te&&a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&cx(a,p,c);else if(a.tag===19)cx(a,p,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(E){case"forwards":for(p=c.child,E=null;p!==null;)a=p.alternate,a!==null&&Zs(a)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),$c(c,!1,E,p,C,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(a=E.alternate,a!==null&&Zs(a)===null){c.child=E;break}a=E.sibling,E.sibling=p,p=E,E=a}$c(c,!0,p,null,C,y);break;case"together":$c(c,!1,null,null,void 0,y);break;default:c.memoizedState=null}return c.child}function Ji(a,c,p){if(a!==null&&(c.dependencies=a.dependencies),Io|=c.lanes,(p&c.childLanes)===0)if(a!==null){if(Ao(a,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,p=Ms(a,a.pendingProps),c.child=p,p.return=c;a.sibling!==null;)a=a.sibling,p=p.sibling=Ms(a,a.pendingProps),p.return=c;p.sibling=null}return c.child}function dp(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&th(a)))}function hS(a,c,p){switch(c.tag){case 3:Se(c,c.stateNode.containerInfo),nl(c,ur,a.memoizedState.cache),jl();break;case 27:case 5:ct(c);break;case 4:Se(c,c.stateNode.containerInfo);break;case 10:nl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,dg(c),null;break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(al(c),c.flags|=128,null):(p&c.child.childLanes)!==0?lx(a,c,p):(al(c),a=Ji(a,c,p),a!==null?a.sibling:null);al(c);break;case 19:var E=(a.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(Ao(a,c,p,!1),y=(p&c.childLanes)!==0),E){if(y)return Rs(a,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ae(Bn,Bn.current),y)break;return null;case 22:return c.lanes=0,Qc(a,c,p,c.pendingProps);case 24:nl(c,ur,a.memoizedState.cache)}return Ji(a,c,p)}function pp(a,c,p){if(a!==null)if(a.memoizedProps!==c.pendingProps)fr=!0;else{if(!dp(a,p)&&(c.flags&128)===0)return fr=!1,hS(a,c,p);fr=(a.flags&131072)!==0}else fr=!1,kn&&(c.flags&1048576)!==0&&gy(c,Iu,c.index);switch(c.lanes=0,c.tag){case 16:e:{var y=c.pendingProps;if(a=Gc(c.elementType),c.type=a,typeof a=="function")Id(a)?(y=Jl(a,y),c.tag=1,c=up(null,c,a,y,p)):(c.tag=0,c=Yu(null,c,a,y,p));else{if(a!=null){var E=a.$$typeof;if(E===N){c.tag=11,c=Gg(null,c,a,y,p);break e}else if(E===k){c.tag=14,c=Kc(null,c,a,y,p);break e}}throw c=Q(a)||a,Error(n(306,c,""))}}return c;case 0:return Yu(a,c,c.type,c.pendingProps,p);case 1:return y=c.type,E=Jl(y,c.pendingProps),up(a,c,y,E,p);case 3:e:{if(Se(c,c.stateNode.containerInfo),a===null)throw Error(n(387));y=c.pendingProps;var C=c.memoizedState;E=C.element,ug(a,c),Vu(c,y,null,p);var B=c.memoizedState;if(y=B.cache,nl(c,ur,y),y!==C.cache&&Gd(c,[ur],p,!0),ah(),y=B.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:B.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=ox(a,c,y,p);break e}else if(y!==E){E=Xs(Error(n(424)),c),To(E),c=ox(a,c,y,p);break e}else for(a=c.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,gi=ko(a.firstChild),Gi=c,kn=!0,tl=null,Ys=!0,p=qd(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(jl(),y===E){c=Ji(a,c,p);break e}Pr(a,c,y,p)}c=c.child}return c;case 26:return Jc(a,c),a===null?(p=rC(c.type,null,c.pendingProps,null))?c.memoizedState=p:kn||(p=c.type,a=c.pendingProps,y=dx(re.current).createElement(p),y[Xn]=c,y[W]=a,gs(y,p,a),me(y),c.stateNode=y):c.memoizedState=rC(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return ct(c),a===null&&kn&&(y=c.stateNode=tC(c.type,c.pendingProps,re.current),Gi=c,Ys=!0,E=gi,rf(c.type)?(ES=E,gi=ko(y.firstChild)):gi=E),Pr(a,c,c.pendingProps.children,p),Jc(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&kn&&((E=y=gi)&&(y=y4(y,c.type,c.pendingProps,Ys),y!==null?(c.stateNode=y,Gi=c,gi=ko(y.firstChild),Ys=!1,E=!0):E=!1),E||Mo(c)),ct(c),E=c.type,C=c.pendingProps,B=a!==null?a.memoizedProps:null,y=C.children,bS(E,C)?y=null:B!==null&&bS(E,B)&&(c.flags|=32),c.memoizedState!==null&&(E=Qd(a,c,Zc,null,null,p),t0._currentValue=E),Jc(a,c),Pr(a,c,y,p),c.child;case 6:return a===null&&kn&&((a=p=gi)&&(p=x4(p,c.pendingProps,Ys),p!==null?(c.stateNode=p,Gi=c,gi=null,a=!0):a=!1),a||Mo(c)),null;case 13:return lx(a,c,p);case 4:return Se(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=rl(c,null,y,p):Pr(a,c,y,p),c.child;case 11:return Gg(a,c,c.type,c.pendingProps,p);case 7:return Pr(a,c,c.pendingProps,p),c.child;case 8:return Pr(a,c,c.pendingProps.children,p),c.child;case 12:return Pr(a,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,nl(c,c.type,y.value),Pr(a,c,y.children,p),c.child;case 9:return E=c.type._context,y=c.pendingProps.children,Xl(c),E=ln(E),y=y(E),c.flags|=1,Pr(a,c,y,p),c.child;case 14:return Kc(a,c,c.type,c.pendingProps,p);case 15:return op(a,c,c.type,c.pendingProps,p);case 19:return Rs(a,c,p);case 31:return cp(a,c,p);case 22:return Qc(a,c,p,c.pendingProps);case 24:return Xl(c),y=ln(ur),a===null?(E=jd(),E===null&&(E=hn,C=sg(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=p),E=C),c.memoizedState={parent:y,cache:E},sh(c),nl(c,ur,E)):((a.lanes&p)!==0&&(ug(a,c),Vu(c,null,null,p),ah()),E=a.memoizedState,C=c.memoizedState,E.parent!==y?(E={parent:y,cache:y},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),nl(c,ur,y)):(y=C.cache,nl(c,ur,y),y!==E.cache&&Gd(c,[ur],p,!0))),Pr(a,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Do(a){a.flags|=4}function ph(a,c,p,y,E){if((c=(a.mode&32)!==0)&&(c=!1),c){if(a.flags|=16777216,(E&335544128)===E)if(a.stateNode.complete)a.flags|=8192;else if(Bi())a.flags|=8192;else throw Co=Wd,ih}else a.flags&=-16777217}function Wg(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!cC(c))if(Bi())a.flags|=8192;else throw Co=Wd,ih}function ll(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?It():536870912,a.lanes|=c,bi|=c)}function No(a,c){if(!kn)switch(a.tailMode){case"hidden":c=a.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function ci(a){var c=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(c)for(var E=a.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=y,a.childLanes=p,c}function mh(a,c,p){var y=c.pendingProps;switch(kd(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ci(c),null;case 1:return ci(c),null;case 3:return p=c.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Eo(ur),je(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(Fu(c)?Do(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,zd())),ci(c),null;case 26:var E=c.type,C=c.memoizedState;return a===null?(Do(c),C!==null?(ci(c),Wg(c,C)):(ci(c),ph(c,E,null,y,p))):C?C!==a.memoizedState?(Do(c),ci(c),Wg(c,C)):(ci(c),c.flags&=-16777217):(a=a.memoizedProps,a!==y&&Do(c),ci(c),ph(c,E,a,y,p)),null;case 27:if(Je(c),p=re.current,E=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&Do(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return ci(c),null}a=fe.current,Fu(c)?vy(c):(a=tC(E,y,p),c.stateNode=a,Do(c))}return ci(c),null;case 5:if(Je(c),E=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&Do(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return ci(c),null}if(C=fe.current,Fu(c))vy(c);else{var B=dx(re.current);switch(C){case 1:C=B.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:C=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":C=B.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":C=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":C=B.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof y.is=="string"?B.createElement("select",{is:y.is}):B.createElement("select"),y.multiple?C.multiple=!0:y.size&&(C.size=y.size);break;default:C=typeof y.is=="string"?B.createElement(E,{is:y.is}):B.createElement(E)}}C[Xn]=c,C[W]=y;e:for(B=c.child;B!==null;){if(B.tag===5||B.tag===6)C.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===c)break e;for(;B.sibling===null;){if(B.return===null||B.return===c)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}c.stateNode=C;e:switch(gs(C,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Do(c)}}return ci(c),ph(c,c.type,a===null?null:a.memoizedProps,c.pendingProps,p),null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==y&&Do(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(a=re.current,Fu(c)){if(a=c.stateNode,p=c.memoizedProps,y=null,E=Gi,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}a[Xn]=c,a=!!(a.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||jA(a.nodeValue,p)),a||Mo(c,!0)}else a=dx(a).createTextNode(y),a[Xn]=c,c.stateNode=a}return ci(c),null;case 31:if(p=c.memoizedState,a===null||a.memoizedState!==null){if(y=Fu(c),p!==null){if(a===null){if(!y)throw Error(n(318));if(a=c.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Xn]=c}else jl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ci(c),a=!1}else p=zd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),a=!0;if(!a)return c.flags&256?(Ki(c),c):(Ki(c),null);if((c.flags&128)!==0)throw Error(n(558))}return ci(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(E=Fu(c),y!==null&&y.dehydrated!==null){if(a===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Xn]=c}else jl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ci(c),E=!1}else E=zd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(Ki(c),c):(Ki(c),null)}return Ki(c),(c.flags&128)!==0?(c.lanes=p,c):(p=y!==null,a=a!==null&&a.memoizedState!==null,p&&(y=c.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),C=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==E&&(y.flags|=2048)),p!==a&&p&&(c.child.flags|=8192),ll(c,c.updateQueue),ci(c),null);case 4:return je(),a===null&&gS(c.stateNode.containerInfo),ci(c),null;case 10:return Eo(c.type),ci(c),null;case 19:if(Z(Bn),y=c.memoizedState,y===null)return ci(c),null;if(E=(c.flags&128)!==0,C=y.rendering,C===null)if(E)No(y,!1);else{if(Fi!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=Zs(a),C!==null){for(c.flags|=128,No(y,!1),a=C.updateQueue,c.updateQueue=a,ll(c,a),c.subtreeFlags=0,a=p,p=c.child;p!==null;)Pu(p,a),p=p.sibling;return ae(Bn,Bn.current&1|2),kn&&bo(c,y.treeForkCount),c.child}a=a.sibling}y.tail!==null&&V()>$i&&(c.flags|=128,E=!0,No(y,!1),c.lanes=4194304)}else{if(!E)if(a=Zs(C),a!==null){if(c.flags|=128,E=!0,a=a.updateQueue,c.updateQueue=a,ll(c,a),No(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!kn)return ci(c),null}else 2*V()-y.renderingStartTime>$i&&p!==536870912&&(c.flags|=128,E=!0,No(y,!1),c.lanes=4194304);y.isBackwards?(C.sibling=c.child,c.child=C):(a=y.last,a!==null?a.sibling=C:c.child=C,y.last=C)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=V(),a.sibling=null,p=Bn.current,ae(Bn,E?p&1|2:p&1),kn&&bo(c,y.treeForkCount),a):(ci(c),null);case 22:case 23:return Ki(c),oh(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(ci(c),c.subtreeFlags&6&&(c.flags|=8192)):ci(c),p=c.updateQueue,p!==null&&ll(c,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),a!==null&&Z(Yl),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Eo(ur),ci(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function Ta(a,c){switch(kd(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Eo(ur),je(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Je(c),null;case 31:if(c.memoizedState!==null){if(Ki(c),c.alternate===null)throw Error(n(340));jl()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 13:if(Ki(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));jl()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Z(Bn),null;case 4:return je(),null;case 10:return Eo(c.type),null;case 22:case 23:return Ki(c),oh(),a!==null&&Z(Yl),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Eo(ur),null;case 25:return null;default:return null}}function Ks(a,c){switch(kd(c),c.tag){case 3:Eo(ur),je();break;case 26:case 27:case 5:Je(c);break;case 4:je();break;case 31:c.memoizedState!==null&&Ki(c);break;case 13:Ki(c);break;case 19:Z(Bn);break;case 10:Eo(c.type);break;case 22:case 23:Ki(c),oh(),a!==null&&Z(Yl);break;case 24:Eo(ur)}}function wa(a,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&a)===a){y=void 0;var C=p.create,B=p.inst;y=C(),B.destroy=y}p=p.next}while(p!==E)}}catch(te){qn(c,c.return,te)}}function Vr(a,c,p){try{var y=c.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var C=E.next;y=C;do{if((y.tag&a)===a){var B=y.inst,te=B.destroy;if(te!==void 0){B.destroy=void 0,E=c;var ye=p,ze=te;try{ze()}catch(lt){qn(E,ye,lt)}}}y=y.next}while(y!==C)}}catch(lt){qn(c,c.return,lt)}}function Xa(a){var c=a.updateQueue;if(c!==null){var p=a.stateNode;try{Sy(c,p)}catch(y){qn(a,a.return,y)}}}function Lr(a,c,p){p.props=Jl(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(y){qn(a,c,y)}}function cl(a,c){try{var p=a.ref;if(p!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof p=="function"?a.refCleanup=p(y):p.current=y}}catch(E){qn(a,c,E)}}function Gr(a,c){var p=a.ref,y=a.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){qn(a,c,E)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){qn(a,c,E)}else p.current=null}function gh(a){var c=a.type,p=a.memoizedProps,y=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){qn(a,a.return,E)}}function Sr(a,c,p){try{var y=a.stateNode;h4(y,a.type,p,c),y[W]=c}catch(E){qn(a,a.return,E)}}function Ri(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&rf(a.type)||a.tag===4}function In(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Ri(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&rf(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Po(a,c,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(a,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(a),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=qr));else if(y!==4&&(y===27&&rf(a.type)&&(p=a.stateNode,c=null),a=a.child,a!==null))for(Po(a,c,p),a=a.sibling;a!==null;)Po(a,c,p),a=a.sibling}function hs(a,c,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?p.insertBefore(a,c):p.appendChild(a);else if(y!==4&&(y===27&&rf(a.type)&&(p=a.stateNode),a=a.child,a!==null))for(hs(a,c,p),a=a.sibling;a!==null;)hs(a,c,p),a=a.sibling}function mp(a){var c=a.stateNode,p=a.memoizedProps;try{for(var y=a.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);gs(c,y,p),c[Xn]=a,c[W]=p}catch(C){qn(a,a.return,C)}}var Ea=!1,vi=!1,Ya=!1,ux=typeof WeakSet=="function"?WeakSet:Set,Ur=null;function dS(a,c){if(a=a.containerInfo,xS=_x,a=hy(a),eg(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var B=0,te=-1,ye=-1,ze=0,lt=0,pt=a,Xe=null;t:for(;;){for(var et;pt!==p||E!==0&&pt.nodeType!==3||(te=B+E),pt!==C||y!==0&&pt.nodeType!==3||(ye=B+y),pt.nodeType===3&&(B+=pt.nodeValue.length),(et=pt.firstChild)!==null;)Xe=pt,pt=et;for(;;){if(pt===a)break t;if(Xe===p&&++ze===E&&(te=B),Xe===C&&++lt===y&&(ye=B),(et=pt.nextSibling)!==null)break;pt=Xe,Xe=pt.parentNode}pt=et}p=te===-1||ye===-1?null:{start:te,end:ye}}else p=null}p=p||{start:0,end:0}}else p=null;for(_S={focusedElem:a,selectionRange:p},_x=!1,Ur=c;Ur!==null;)if(c=Ur,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Ur=a;else for(;Ur!==null;){switch(c=Ur,C=c.alternate,a=c.flags,c.tag){case 0:if((a&4)!==0&&(a=c.updateQueue,a=a!==null?a.events:null,a!==null))for(p=0;p<a.length;p++)E=a[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,p=c,E=C.memoizedProps,C=C.memoizedState,y=p.stateNode;try{var Yt=Jl(p.type,E);a=y.getSnapshotBeforeUpdate(Yt,C),y.__reactInternalSnapshotBeforeUpdate=a}catch(on){qn(p,p.return,on)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,p=a.nodeType,p===9)MS(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":MS(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=c.sibling,a!==null){a.return=c.return,Ur=a;break}Ur=c.return}}function Di(a,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ra(a,p),y&4&&wa(5,p);break;case 1:if(Ra(a,p),y&4)if(a=p.stateNode,c===null)try{a.componentDidMount()}catch(B){qn(p,p.return,B)}else{var E=Jl(p.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(E,c,a.__reactInternalSnapshotBeforeUpdate)}catch(B){qn(p,p.return,B)}}y&64&&Xa(p),y&512&&cl(p,p.return);break;case 3:if(Ra(a,p),y&64&&(a=p.updateQueue,a!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{Sy(a,c)}catch(B){qn(p,p.return,B)}}break;case 27:c===null&&y&4&&mp(p);case 26:case 5:Ra(a,p),c===null&&y&4&&gh(p),y&512&&cl(p,p.return);break;case 12:Ra(a,p);break;case 31:Ra(a,p),y&4&&$l(a,p);break;case 13:Ra(a,p),y&4&&qu(a,p),y&64&&(a=p.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(p=x.bind(null,p),_4(a,p))));break;case 22:if(y=p.memoizedState!==null||Ea,!y){c=c!==null&&c.memoizedState!==null||vi,E=Ea;var C=vi;Ea=y,(vi=c)&&!C?ds(a,p,(p.subtreeFlags&8772)!==0):Ra(a,p),Ea=E,vi=C}break;case 30:break;default:Ra(a,p)}}function vh(a){var c=a.alternate;c!==null&&(a.alternate=null,vh(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&yt(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ii=null,$r=!1;function Aa(a,c,p){for(p=p.child;p!==null;)gp(a,c,p),p=p.sibling}function gp(a,c,p){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Ge,p)}catch{}switch(p.tag){case 26:vi||Gr(p,c),Aa(a,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:vi||Gr(p,c);var y=ii,E=$r;rf(p.type)&&(ii=p.stateNode,$r=!1),Aa(a,c,p),Jg(p.stateNode),ii=y,$r=E;break;case 5:vi||Gr(p,c);case 6:if(y=ii,E=$r,ii=null,Aa(a,c,p),ii=y,$r=E,ii!==null)if($r)try{(ii.nodeType===9?ii.body:ii.nodeName==="HTML"?ii.ownerDocument.body:ii).removeChild(p.stateNode)}catch(C){qn(p,c,C)}else try{ii.removeChild(p.stateNode)}catch(C){qn(p,c,C)}break;case 18:ii!==null&&($r?(a=ii,KA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,p.stateNode),Tp(a)):KA(ii,p.stateNode));break;case 4:y=ii,E=$r,ii=p.stateNode.containerInfo,$r=!0,Aa(a,c,p),ii=y,$r=E;break;case 0:case 11:case 14:case 15:Vr(2,p,c),vi||Vr(4,p,c),Aa(a,c,p);break;case 1:vi||(Gr(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Lr(p,c,y)),Aa(a,c,p);break;case 21:Aa(a,c,p);break;case 22:vi=(y=vi)||p.memoizedState!==null,Aa(a,c,p),vi=y;break;default:Aa(a,c,p)}}function $l(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Tp(a)}catch(p){qn(c,c.return,p)}}}function qu(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Tp(a)}catch(p){qn(c,c.return,p)}}function Xg(a){switch(a.tag){case 31:case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new ux),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new ux),c;default:throw Error(n(435,a.tag))}}function ul(a,c){var p=Xg(a);c.forEach(function(y){if(!p.has(y)){p.add(y);var E=M.bind(null,a,y);y.then(E,E)}})}function Mr(a,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],C=a,B=c,te=B;e:for(;te!==null;){switch(te.tag){case 27:if(rf(te.type)){ii=te.stateNode,$r=!1;break e}break;case 5:ii=te.stateNode,$r=!1;break e;case 3:case 4:ii=te.stateNode.containerInfo,$r=!0;break e}te=te.return}if(ii===null)throw Error(n(160));gp(C,B,E),ii=null,$r=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)ec(c,a),c=c.sibling}var Ca=null;function ec(a,c){var p=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Mr(c,a),Tr(a),y&4&&(Vr(3,a,a.return),wa(3,a),Vr(5,a,a.return));break;case 1:Mr(c,a),Tr(a),y&512&&(vi||p===null||Gr(p,p.return)),y&64&&Ea&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=Ca;if(Mr(c,a),Tr(a),y&512&&(vi||p===null||Gr(p,p.return)),y&4){var C=p!==null?p.memoizedState:null;if(y=a.memoizedState,p===null)if(y===null)if(a.stateNode===null){e:{y=a.type,p=a.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":C=E.getElementsByTagName("title")[0],(!C||C[St]||C[Xn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(y),E.head.insertBefore(C,E.querySelector("head > title"))),gs(C,y,p),C[Xn]=a,me(C),y=C;break e;case"link":var B=oC("link","href",E).get(y+(p.href||""));if(B){for(var te=0;te<B.length;te++)if(C=B[te],C.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&C.getAttribute("rel")===(p.rel==null?null:p.rel)&&C.getAttribute("title")===(p.title==null?null:p.title)&&C.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){B.splice(te,1);break t}}C=E.createElement(y),gs(C,y,p),E.head.appendChild(C);break;case"meta":if(B=oC("meta","content",E).get(y+(p.content||""))){for(te=0;te<B.length;te++)if(C=B[te],C.getAttribute("content")===(p.content==null?null:""+p.content)&&C.getAttribute("name")===(p.name==null?null:p.name)&&C.getAttribute("property")===(p.property==null?null:p.property)&&C.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&C.getAttribute("charset")===(p.charSet==null?null:p.charSet)){B.splice(te,1);break t}}C=E.createElement(y),gs(C,y,p),E.head.appendChild(C);break;default:throw Error(n(468,y))}C[Xn]=a,me(C),y=C}a.stateNode=y}else lC(E,a.type,a.stateNode);else a.stateNode=aC(E,y,a.memoizedProps);else C!==y?(C===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):C.count--,y===null?lC(E,a.type,a.stateNode):aC(E,y,a.memoizedProps)):y===null&&a.stateNode!==null&&Sr(a,a.memoizedProps,p.memoizedProps)}break;case 27:Mr(c,a),Tr(a),y&512&&(vi||p===null||Gr(p,p.return)),p!==null&&y&4&&Sr(a,a.memoizedProps,p.memoizedProps);break;case 5:if(Mr(c,a),Tr(a),y&512&&(vi||p===null||Gr(p,p.return)),a.flags&32){E=a.stateNode;try{lr(E,"")}catch(Yt){qn(a,a.return,Yt)}}y&4&&a.stateNode!=null&&(E=a.memoizedProps,Sr(a,E,p!==null?p.memoizedProps:E)),y&1024&&(Ya=!0);break;case 6:if(Mr(c,a),Tr(a),y&4){if(a.stateNode===null)throw Error(n(162));y=a.memoizedProps,p=a.stateNode;try{p.nodeValue=y}catch(Yt){qn(a,a.return,Yt)}}break;case 3:if(gx=null,E=Ca,Ca=px(c.containerInfo),Mr(c,a),Ca=E,Tr(a),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Tp(c.containerInfo)}catch(Yt){qn(a,a.return,Yt)}Ya&&(Ya=!1,vp(a));break;case 4:y=Ca,Ca=px(a.stateNode.containerInfo),Mr(c,a),Tr(a),Ca=y;break;case 12:Mr(c,a),Tr(a);break;case 31:Mr(c,a),Tr(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,ul(a,y)));break;case 13:Mr(c,a),Tr(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Zu=V()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,ul(a,y)));break;case 22:E=a.memoizedState!==null;var ye=p!==null&&p.memoizedState!==null,ze=Ea,lt=vi;if(Ea=ze||E,vi=lt||ye,Mr(c,a),vi=lt,Ea=ze,Tr(a),y&8192)e:for(c=a.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(p===null||ye||Ea||vi||Lo(a)),p=null,c=a;;){if(c.tag===5||c.tag===26){if(p===null){ye=p=c;try{if(C=ye.stateNode,E)B=C.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{te=ye.stateNode;var pt=ye.memoizedProps.style,Xe=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;te.style.display=Xe==null||typeof Xe=="boolean"?"":(""+Xe).trim()}}catch(Yt){qn(ye,ye.return,Yt)}}}else if(c.tag===6){if(p===null){ye=c;try{ye.stateNode.nodeValue=E?"":ye.memoizedProps}catch(Yt){qn(ye,ye.return,Yt)}}}else if(c.tag===18){if(p===null){ye=c;try{var et=ye.stateNode;E?QA(et,!0):QA(ye.stateNode,!1)}catch(Yt){qn(ye,ye.return,Yt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=a.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,ul(a,p))));break;case 19:Mr(c,a),Tr(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,ul(a,y)));break;case 30:break;case 21:break;default:Mr(c,a),Tr(a)}}function Tr(a){var c=a.flags;if(c&2){try{for(var p,y=a.return;y!==null;){if(Ri(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var E=p.stateNode,C=In(a);hs(a,C,E);break;case 5:var B=p.stateNode;p.flags&32&&(lr(B,""),p.flags&=-33);var te=In(a);hs(a,te,B);break;case 3:case 4:var ye=p.stateNode.containerInfo,ze=In(a);Po(a,ze,ye);break;default:throw Error(n(161))}}catch(lt){qn(a,a.return,lt)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function vp(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;vp(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Ra(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Di(a,c.alternate,c),c=c.sibling}function Lo(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Vr(4,c,c.return),Lo(c);break;case 1:Gr(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&Lr(c,c.return,p),Lo(c);break;case 27:Jg(c.stateNode);case 26:case 5:Gr(c,c.return),Lo(c);break;case 22:c.memoizedState===null&&Lo(c);break;case 30:Lo(c);break;default:Lo(c)}a=a.sibling}}function ds(a,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,E=a,C=c,B=C.flags;switch(C.tag){case 0:case 11:case 15:ds(E,C,p),wa(4,C);break;case 1:if(ds(E,C,p),y=C,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ze){qn(y,y.return,ze)}if(y=C,E=y.updateQueue,E!==null){var te=y.stateNode;try{var ye=E.shared.hiddenCallbacks;if(ye!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ye.length;E++)Gu(ye[E],te)}catch(ze){qn(y,y.return,ze)}}p&&B&64&&Xa(C),cl(C,C.return);break;case 27:mp(C);case 26:case 5:ds(E,C,p),p&&y===null&&B&4&&gh(C),cl(C,C.return);break;case 12:ds(E,C,p);break;case 31:ds(E,C,p),p&&B&4&&$l(E,C);break;case 13:ds(E,C,p),p&&B&4&&qu(E,C);break;case 22:C.memoizedState===null&&ds(E,C,p),cl(C,C.return);break;case 30:break;default:ds(E,C,p)}c=c.sibling}}function tc(a,c){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&zc(p))}function eu(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&zc(a))}function Hr(a,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Yg(a,c,p,y),c=c.sibling}function Yg(a,c,p,y){var E=c.flags;switch(c.tag){case 0:case 11:case 15:Hr(a,c,p,y),E&2048&&wa(9,c);break;case 1:Hr(a,c,p,y);break;case 3:Hr(a,c,p,y),E&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&zc(a)));break;case 12:if(E&2048){Hr(a,c,p,y),a=c.stateNode;try{var C=c.memoizedProps,B=C.id,te=C.onPostCommit;typeof te=="function"&&te(B,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ye){qn(c,c.return,ye)}}else Hr(a,c,p,y);break;case 31:Hr(a,c,p,y);break;case 13:Hr(a,c,p,y);break;case 23:break;case 22:C=c.stateNode,B=c.alternate,c.memoizedState!==null?C._visibility&2?Hr(a,c,p,y):Uo(a,c):C._visibility&2?Hr(a,c,p,y):(C._visibility|=2,jr(a,c,p,y,(c.subtreeFlags&10256)!==0||!1)),E&2048&&tc(B,c);break;case 24:Hr(a,c,p,y),E&2048&&eu(c.alternate,c);break;default:Hr(a,c,p,y)}}function jr(a,c,p,y,E){for(E=E&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var C=a,B=c,te=p,ye=y,ze=B.flags;switch(B.tag){case 0:case 11:case 15:jr(C,B,te,ye,E),wa(8,B);break;case 23:break;case 22:var lt=B.stateNode;B.memoizedState!==null?lt._visibility&2?jr(C,B,te,ye,E):Uo(C,B):(lt._visibility|=2,jr(C,B,te,ye,E)),E&&ze&2048&&tc(B.alternate,B);break;case 24:jr(C,B,te,ye,E),E&&ze&2048&&eu(B.alternate,B);break;default:jr(C,B,te,ye,E)}c=c.sibling}}function Uo(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=a,y=c,E=y.flags;switch(y.tag){case 22:Uo(p,y),E&2048&&tc(y.alternate,y);break;case 24:Uo(p,y),E&2048&&eu(y.alternate,y);break;default:Uo(p,y)}c=c.sibling}}var tu=8192;function Qs(a,c,p){if(a.subtreeFlags&tu)for(a=a.child;a!==null;)yp(a,c,p),a=a.sibling}function yp(a,c,p){switch(a.tag){case 26:Qs(a,c,p),a.flags&tu&&a.memoizedState!==null&&P4(p,Ca,a.memoizedState,a.memoizedProps);break;case 5:Qs(a,c,p);break;case 3:case 4:var y=Ca;Ca=px(a.stateNode.containerInfo),Qs(a,c,p),Ca=y;break;case 22:a.memoizedState===null&&(y=a.alternate,y!==null&&y.memoizedState!==null?(y=tu,tu=16777216,Qs(a,c,p),tu=y):Qs(a,c,p));break;default:Qs(a,c,p)}}function nu(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function nc(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];Ur=y,Hi(y,a)}nu(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ds(a),a=a.sibling}function Ds(a){switch(a.tag){case 0:case 11:case 15:nc(a),a.flags&2048&&Vr(9,a,a.return);break;case 3:nc(a);break;case 12:nc(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Ns(a)):nc(a);break;default:nc(a)}}function Ns(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];Ur=y,Hi(y,a)}nu(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Vr(8,c,c.return),Ns(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,Ns(c));break;default:Ns(c)}a=a.sibling}}function Hi(a,c){for(;Ur!==null;){var p=Ur;switch(p.tag){case 0:case 11:case 15:Vr(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:zc(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Ur=y;else e:for(p=a;Ur!==null;){y=Ur;var E=y.sibling,C=y.return;if(vh(y),y===p){Ur=null;break e}if(E!==null){E.return=C,Ur=E;break e}Ur=C}}}var fl={getCacheForType:function(a){var c=ln(ur),p=c.data.get(a);return p===void 0&&(p=a(),c.data.set(a,p)),p},cacheSignal:function(){return ln(ur).controller.signal}},vn=typeof WeakMap=="function"?WeakMap:Map,Jt=0,hn=null,Tn=null,bn=0,zn=0,es=null,Da=!1,qa=!1,qg=!1,Js=0,Fi=0,Io=0,ic=0,yh=0,ps=0,bi=0,iu=null,ji=null,Wi=!1,Zu=0,Zg=0,$i=1/0,ki=null,er=null,ri=0,$s=null,Ku=null,Na=0,Qu=0,Ju=null,xh=null,rc=0,ru=null;function ea(){return(Jt&2)!==0&&bn!==0?bn&-bn:j.T!==null?Ze():pi()}function Nn(){if(ps===0)if((bn&536870912)===0||kn){var a=$e;$e<<=1,($e&3932160)===0&&($e=262144),ps=a}else ps=536870912;return a=Es.current,a!==null&&(a.flags|=32),ps}function wn(a,c,p){(a===hn&&(zn===2||zn===9)||a.cancelPendingCommit!==null)&&(ac(a,0),hr(a,bn,ps,!1)),Sn(a,p),((Jt&2)===0||a!==hn)&&(a===hn&&((Jt&2)===0&&(ic|=p),Fi===4&&hr(a,bn,ps,!1)),Tt(a))}function Pn(a,c,p){if((Jt&6)!==0)throw Error(n(327));var y=!p&&(c&127)===0&&(c&a.expiredLanes)===0||bt(a,c),E=y?_h(a,c):ms(a,c,!0),C=y;do{if(E===0){qa&&!y&&hr(a,c,0,!1);break}else{if(p=a.current.alternate,C&&!si(p)){E=ms(a,c,!1),C=!1;continue}if(E===2){if(C=c,a.errorRecoveryDisabledLanes&C)var B=0;else B=a.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){c=B;e:{var te=a;E=iu;var ye=te.current.memoizedState.isDehydrated;if(ye&&(ac(te,B).flags|=256),B=ms(te,B,!1),B!==2){if(qg&&!ye){te.errorRecoveryDisabledLanes|=C,ic|=C,E=4;break e}C=ji,ji=E,C!==null&&(ji===null?ji=C:ji.push.apply(ji,C))}E=B}if(C=!1,E!==2)continue}}if(E===1){ac(a,0),hr(a,c,0,!0);break}e:{switch(y=a,C=E,C){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:hr(y,c,ps,!Da);break e;case 2:ji=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(E=Zu+300-V(),10<E)){if(hr(y,c,ps,!Da),Ne(y,0,!0)!==0)break e;Na=c,y.timeoutHandle=qA(On.bind(null,y,p,ji,ki,Wi,c,ps,ic,bi,Da,C,"Throttled",-0,0),E);break e}On(y,p,ji,ki,Wi,c,ps,ic,bi,Da,C,null,-0,0)}}break}while(!0);Tt(a)}function On(a,c,p,y,E,C,B,te,ye,ze,lt,pt,Xe,et){if(a.timeoutHandle=-1,pt=c.subtreeFlags,pt&8192||(pt&16785408)===16785408){pt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},yp(c,C,pt);var Yt=(C&62914560)===C?Zu-V():(C&4194048)===C?Zg-V():0;if(Yt=L4(pt,Yt),Yt!==null){Na=C,a.cancelPendingCommit=Yt(dl.bind(null,a,c,C,p,y,E,B,te,ye,lt,pt,null,Xe,et)),hr(a,C,B,!ze);return}}dl(a,c,C,p,y,E,B,te,ye)}function si(a){for(var c=a;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],C=E.getSnapshot;E=E.value;try{if(!ls(C(),E))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hr(a,c,p,y){c&=~yh,c&=~ic,a.suspendedLanes|=c,a.pingedLanes&=~c,y&&(a.warmLanes|=c),y=a.expirationTimes;for(var E=c;0<E;){var C=31-oe(E),B=1<<C;y[C]=-1,E&=~B}p!==0&&Qn(a,p,c)}function Za(){return(Jt&6)===0?(Gt(0),!1):!0}function sc(){if(Tn!==null){if(zn===0)var a=Tn.return;else a=Tn,wo=Wl=null,yg(a),Wc=null,Xc=0,a=Tn;for(;a!==null;)Ks(a.alternate,a),a=a.return;Tn=null}}function ac(a,c){var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,m4(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),Na=0,sc(),hn=a,Tn=p=Ms(a.current,null),bn=c,zn=0,es=null,Da=!1,qa=bt(a,c),qg=!1,bi=ps=yh=ic=Io=Fi=0,ji=iu=null,Wi=!1,(c&8)!==0&&(c|=c&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=c;0<y;){var E=31-oe(y),C=1<<E;c|=a[E],y&=~C}return Js=c,$f(),p}function Oo(a,c){gn=null,j.H=Xu,c===Vc||c===Mn?(c=Hc(),zn=3):c===ih?(c=Hc(),zn=4):zn=c===ap?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,es=c,Tn===null&&(Fi=1,sp(a,Xs(c,a.current)))}function Bi(){var a=Es.current;return a===null?!0:(bn&4194048)===bn?fs===null:(bn&62914560)===bn||(bn&536870912)!==0?a===fs:!1}function hl(){var a=j.H;return j.H=Xu,a===null?Xu:a}function oc(){var a=j.A;return j.A=fl,a}function $u(){Fi=4,Da||(bn&4194048)!==bn&&Es.current!==null||(qa=!0),(Io&134217727)===0&&(ic&134217727)===0||hn===null||hr(hn,bn,ps,!1)}function ms(a,c,p){var y=Jt;Jt|=2;var E=hl(),C=oc();(hn!==a||bn!==c)&&(ki=null,ac(a,c)),c=!1;var B=Fi;e:do try{if(zn!==0&&Tn!==null){var te=Tn,ye=es;switch(zn){case 8:sc(),B=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(c=!0);var ze=zn;if(zn=0,es=null,su(a,te,ye,ze),p&&qa){B=0;break e}break;default:ze=zn,zn=0,es=null,su(a,te,ye,ze)}}ef(),B=Fi;break}catch(lt){Oo(a,lt)}while(!0);return c&&a.shellSuspendCounter++,wo=Wl=null,Jt=y,j.H=E,j.A=C,Tn===null&&(hn=null,bn=0,$f()),B}function ef(){for(;Tn!==null;)xp(Tn)}function _h(a,c){var p=Jt;Jt|=2;var y=hl(),E=oc();hn!==a||bn!==c?(ki=null,$i=V()+500,ac(a,c)):qa=bt(a,c);e:do try{if(zn!==0&&Tn!==null){c=Tn;var C=es;t:switch(zn){case 1:zn=0,es=null,su(a,c,C,1);break;case 2:case 9:if(ws(C)){zn=0,es=null,bh(c);break}c=function(){zn!==2&&zn!==9||hn!==a||(zn=7),Tt(a)},C.then(c,c);break e;case 3:zn=7;break e;case 4:zn=5;break e;case 7:ws(C)?(zn=0,es=null,bh(c)):(zn=0,es=null,su(a,c,C,7));break;case 5:var B=null;switch(Tn.tag){case 26:B=Tn.memoizedState;case 5:case 27:var te=Tn;if(B?cC(B):te.stateNode.complete){zn=0,es=null;var ye=te.sibling;if(ye!==null)Tn=ye;else{var ze=te.return;ze!==null?(Tn=ze,lc(ze)):Tn=null}break t}}zn=0,es=null,su(a,c,C,5);break;case 6:zn=0,es=null,su(a,c,C,6);break;case 8:sc(),Fi=6;break e;default:throw Error(n(462))}}Ps();break}catch(lt){Oo(a,lt)}while(!0);return wo=Wl=null,j.H=y,j.A=E,Jt=p,Tn!==null?0:(hn=null,bn=0,$f(),Fi)}function Ps(){for(;Tn!==null&&!We();)xp(Tn)}function xp(a){var c=pp(a.alternate,a,Js);a.memoizedProps=a.pendingProps,c===null?lc(a):Tn=c}function bh(a){var c=a,p=c.alternate;switch(c.tag){case 15:case 0:c=hh(p,c,c.pendingProps,c.type,void 0,bn);break;case 11:c=hh(p,c,c.pendingProps,c.type.render,c.ref,bn);break;case 5:yg(c);default:Ks(p,c),c=Tn=Pu(c,Js),c=pp(p,c,Js)}a.memoizedProps=a.pendingProps,c===null?lc(a):Tn=c}function su(a,c,p,y){wo=Wl=null,yg(c),Wc=null,Xc=0;var E=c.return;try{if(br(a,E,c,p,bn)){Fi=1,sp(a,Xs(p,a.current)),Tn=null;return}}catch(C){if(E!==null)throw Tn=E,C;Fi=1,sp(a,Xs(p,a.current)),Tn=null;return}c.flags&32768?(kn||y===1?a=!0:qa||(bn&536870912)!==0?a=!1:(Da=a=!0,(y===2||y===9||y===3||y===6)&&(y=Es.current,y!==null&&y.tag===13&&(y.flags|=16384))),Sh(c,a)):lc(c)}function lc(a){var c=a;do{if((c.flags&32768)!==0){Sh(c,Da);return}a=c.return;var p=mh(c.alternate,c,Js);if(p!==null){Tn=p;return}if(c=c.sibling,c!==null){Tn=c;return}Tn=c=a}while(c!==null);Fi===0&&(Fi=5)}function Sh(a,c){do{var p=Ta(a.alternate,a);if(p!==null){p.flags&=32767,Tn=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(a=a.sibling,a!==null)){Tn=a;return}Tn=a=p}while(a!==null);Fi=6,Tn=null}function dl(a,c,p,y,E,C,B,te,ye){a.cancelPendingCommit=null;do tf();while(ri!==0);if((Jt&6)!==0)throw Error(n(327));if(c!==null){if(c===a.current)throw Error(n(177));if(C=c.lanes|c.childLanes,C|=Dr,Dn(a,p,C,B,te,ye),a===hn&&(Tn=hn=null,bn=0),Ku=c,$s=a,Na=p,Qu=C,Ju=E,xh=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,P(Ee,function(){return _p(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,E=J.p,J.p=2,B=Jt,Jt|=4;try{dS(a,c,p)}finally{Jt=B,J.p=E,j.T=y}}ri=1,dr(),pl(),au()}}function dr(){if(ri===1){ri=0;var a=$s,c=Ku,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=j.T,j.T=null;var y=J.p;J.p=2;var E=Jt;Jt|=4;try{ec(c,a);var C=_S,B=hy(a.containerInfo),te=C.focusedElem,ye=C.selectionRange;if(B!==te&&te&&te.ownerDocument&&mi(te.ownerDocument.documentElement,te)){if(ye!==null&&eg(te)){var ze=ye.start,lt=ye.end;if(lt===void 0&&(lt=ze),"selectionStart"in te)te.selectionStart=ze,te.selectionEnd=Math.min(lt,te.value.length);else{var pt=te.ownerDocument||document,Xe=pt&&pt.defaultView||window;if(Xe.getSelection){var et=Xe.getSelection(),Yt=te.textContent.length,on=Math.min(ye.start,Yt),xi=ye.end===void 0?on:Math.min(ye.end,Yt);!et.extend&&on>xi&&(B=xi,xi=on,on=B);var Pe=Ru(te,on),we=Ru(te,xi);if(Pe&&we&&(et.rangeCount!==1||et.anchorNode!==Pe.node||et.anchorOffset!==Pe.offset||et.focusNode!==we.node||et.focusOffset!==we.offset)){var Be=pt.createRange();Be.setStart(Pe.node,Pe.offset),et.removeAllRanges(),on>xi?(et.addRange(Be),et.extend(we.node,we.offset)):(Be.setEnd(we.node,we.offset),et.addRange(Be))}}}}for(pt=[],et=te;et=et.parentNode;)et.nodeType===1&&pt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<pt.length;te++){var dt=pt[te];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}_x=!!xS,_S=xS=null}finally{Jt=E,J.p=y,j.T=p}}a.current=c,ri=2}}function pl(){if(ri===2){ri=0;var a=$s,c=Ku,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=j.T,j.T=null;var y=J.p;J.p=2;var E=Jt;Jt|=4;try{Di(a,c.alternate,c)}finally{Jt=E,J.p=y,j.T=p}}ri=3}}function au(){if(ri===4||ri===3){ri=0,K();var a=$s,c=Ku,p=Na,y=xh;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ri=5:(ri=0,Ku=$s=null,Fo(a,a.pendingLanes));var E=a.pendingLanes;if(E===0&&(er=null),Ti(p),c=c.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Ge,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=j.T,E=J.p,J.p=2,j.T=null;try{for(var C=a.onRecoverableError,B=0;B<y.length;B++){var te=y[B];C(te.value,{componentStack:te.stack})}}finally{j.T=c,J.p=E}}(Na&3)!==0&&tf(),Tt(a),E=a.pendingLanes,(p&261930)!==0&&(E&42)!==0?a===ru?rc++:(rc=0,ru=a):rc=0,Gt(0)}}function Fo(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,zc(c)))}function tf(){return dr(),pl(),au(),_p()}function _p(){if(ri!==5)return!1;var a=$s,c=Qu;Qu=0;var p=Ti(Na),y=j.T,E=J.p;try{J.p=32>p?32:p,j.T=null,p=Ju,Ju=null;var C=$s,B=Na;if(ri=0,Ku=$s=null,Na=0,(Jt&6)!==0)throw Error(n(331));var te=Jt;if(Jt|=4,Ds(C.current),Yg(C,C.current,B,p),Jt=te,Gt(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Ge,C)}catch{}return!0}finally{J.p=E,j.T=y,Fo(a,c)}}function Kg(a,c,p){c=Xs(p,c),c=zg(a.stateNode,c,2),a=ql(a,c,2),a!==null&&(Sn(a,2),Tt(a))}function qn(a,c,p){if(a.tag===3)Kg(a,a,p);else for(;c!==null;){if(c.tag===3){Kg(c,a,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(er===null||!er.has(y))){a=Xs(p,a),p=Vg(2),y=ql(c,p,2),y!==null&&(sx(p,y,c,a),Sn(y,2),Tt(y));break}}c=c.return}}function Mh(a,c,p){var y=a.pingCache;if(y===null){y=a.pingCache=new vn;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&&(E=new Set,y.set(c,E));E.has(p)||(qg=!0,E.add(p),a=f.bind(null,a,c,p),c.then(a,a))}function f(a,c,p){var y=a.pingCache;y!==null&&y.delete(c),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,hn===a&&(bn&p)===p&&(Fi===4||Fi===3&&(bn&62914560)===bn&&300>V()-Zu?(Jt&2)===0&&ac(a,0):yh|=p,bi===bn&&(bi=0)),Tt(a)}function d(a,c){c===0&&(c=It()),a=cs(a,c),a!==null&&(Sn(a,c),Tt(a))}function x(a){var c=a.memoizedState,p=0;c!==null&&(p=c.retryLane),d(a,p)}function M(a,c){var p=0;switch(a.tag){case 31:case 13:var y=a.stateNode,E=a.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),d(a,p)}function P(a,c){return Ye(a,c)}var O=null,$=null,xe=!1,Qe=!1,_t=!1,Ut=0;function Tt(a){a!==$&&a.next===null&&($===null?O=$=a:$=$.next=a),Qe=!0,xe||(xe=!0,Le())}function Gt(a,c){if(!_t&&Qe){_t=!0;do for(var p=!1,y=O;y!==null;){if(a!==0){var E=y.pendingLanes;if(E===0)var C=0;else{var B=y.suspendedLanes,te=y.pingedLanes;C=(1<<31-oe(42|a)+1)-1,C&=E&~(B&~te),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,He(y,C))}else C=bn,C=Ne(y,y===hn?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||bt(y,C)||(p=!0,He(y,C));y=y.next}while(p);_t=!1}}function pn(){tr()}function tr(){Qe=xe=!1;var a=0;Ut!==0&&p4()&&(a=Ut);for(var c=V(),p=null,y=O;y!==null;){var E=y.next,C=nf(y,c);C===0?(y.next=null,p===null?O=E:p.next=E,E===null&&($=p)):(p=y,(a!==0||(C&3)!==0)&&(Qe=!0)),y=E}ri!==0&&ri!==5||Gt(a),Ut!==0&&(Ut=0)}function nf(a,c){for(var p=a.suspendedLanes,y=a.pingedLanes,E=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var B=31-oe(C),te=1<<B,ye=E[B];ye===-1?((te&p)===0||(te&y)!==0)&&(E[B]=Ot(te,c)):ye<=c&&(a.expiredLanes|=te),C&=~te}if(c=hn,p=bn,p=Ne(a,a===c?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,p===0||a===c&&(zn===2||zn===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&De(y),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||bt(a,p)){if(c=p&-p,c===a.callbackPriority)return c;switch(y!==null&&De(y),Ti(p)){case 2:case 8:p=Ce;break;case 32:p=Ee;break;case 268435456:p=at;break;default:p=Ee}return y=cc.bind(null,a),p=Ye(p,y),a.callbackPriority=c,a.callbackNode=p,c}return y!==null&&y!==null&&De(y),a.callbackPriority=2,a.callbackNode=null,2}function cc(a,c){if(ri!==0&&ri!==5)return a.callbackNode=null,a.callbackPriority=0,null;var p=a.callbackNode;if(tf()&&a.callbackNode!==p)return null;var y=bn;return y=Ne(a,a===hn?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(Pn(a,y,c),nf(a,V()),a.callbackNode!=null&&a.callbackNode===p?cc.bind(null,a):null)}function He(a,c){if(tf())return null;Pn(a,c,!0)}function Le(){g4(function(){(Jt&6)!==0?Ye(Ie,pn):tr()})}function Ze(){if(Ut===0){var a=il;a===0&&(a=_e,_e<<=1,(_e&261888)===0&&(_e=256)),Ut=a}return Ut}function Pt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ha(""+a)}function rn(a,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,a.id&&p.setAttribute("form",a.id),c.parentNode.insertBefore(p,c),a=new FormData(a),p.parentNode.removeChild(p),a}function zi(a,c,p,y,E){if(c==="submit"&&p&&p.stateNode===E){var C=Pt((E[W]||null).action),B=y.submitter;B&&(c=(c=B[W]||null)?Pt(c.formAction):B.getAttribute("formAction"),c!==null&&(C=c,B=null));var te=new Qo("action","action",null,y,E);a.push({event:te,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Ut!==0){var ye=B?rn(E,B):new FormData(E);Pg(p,{pending:!0,data:ye,method:E.method,action:C},null,ye)}}else typeof C=="function"&&(te.preventDefault(),ye=B?rn(E,B):new FormData(E),Pg(p,{pending:!0,data:ye,method:E.method,action:C},C,ye))},currentTarget:E}]})}}for(var sn=0;sn<Qf.length;sn++){var Hn=Qf[sn],Ir=Hn.toLowerCase(),Kn=Hn[0].toUpperCase()+Hn.slice(1);va(Ir,"on"+Kn)}va(Ld,"onAnimationEnd"),va(Kf,"onAnimationIteration"),va(ng,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(py,"onTransitionRun"),va(sS,"onTransitionStart"),va(my,"onTransitionCancel"),va(ig,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),Me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Me("onBeforeInput",["compositionend","keypress","textInput","paste"]),Me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pa));function zA(a,c){c=(c&4)!==0;for(var p=0;p<a.length;p++){var y=a[p],E=y.event;y=y.listeners;e:{var C=void 0;if(c)for(var B=y.length-1;0<=B;B--){var te=y[B],ye=te.instance,ze=te.currentTarget;if(te=te.listener,ye!==C&&E.isPropagationStopped())break e;C=te,E.currentTarget=ze;try{C(E)}catch(lt){Jf(lt)}E.currentTarget=null,C=ye}else for(B=0;B<y.length;B++){if(te=y[B],ye=te.instance,ze=te.currentTarget,te=te.listener,ye!==C&&E.isPropagationStopped())break e;C=te,E.currentTarget=ze;try{C(E)}catch(lt){Jf(lt)}E.currentTarget=null,C=ye}}}}function Vn(a,c){var p=c[ge];p===void 0&&(p=c[ge]=new Set);var y=a+"__bubble";p.has(y)||(VA(c,a,2,!1),p.add(y))}function mS(a,c,p){var y=0;c&&(y|=4),VA(p,a,y,c)}var fx="_reactListening"+Math.random().toString(36).slice(2);function gS(a){if(!a[fx]){a[fx]=!0,Te.forEach(function(p){p!=="selectionchange"&&(pS.has(p)||mS(p,!1,a),mS(p,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[fx]||(c[fx]=!0,mS("selectionchange",!1,c))}}function VA(a,c,p,y){switch(gC(c)){case 2:var E=O4;break;case 8:E=F4;break;default:E=NS}p=E.bind(null,c,p,a),E=void 0,!os||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),y?E!==void 0?a.addEventListener(c,p,{capture:!0,passive:E}):a.addEventListener(c,p,!0):E!==void 0?a.addEventListener(c,p,{passive:E}):a.addEventListener(c,p,!1)}function vS(a,c,p,y,E){var C=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var B=y.tag;if(B===3||B===4){var te=y.stateNode.containerInfo;if(te===E)break;if(B===4)for(B=y.return;B!==null;){var ye=B.tag;if((ye===3||ye===4)&&B.stateNode.containerInfo===E)return;B=B.return}for(;te!==null;){if(B=At(te),B===null)return;if(ye=B.tag,ye===5||ye===6||ye===26||ye===27){y=C=B;continue e}te=te.parentNode}}y=y.return}Nl(function(){var ze=C,lt=Rc(p),pt=[];e:{var Xe=ga.get(a);if(Xe!==void 0){var et=Qo,Yt=a;switch(a){case"keypress":if(Ll(p)===0)break e;case"keydown":case"keyup":et=Ic;break;case"focusin":Yt="focus",et=wu;break;case"focusout":Yt="blur",et=wu;break;case"beforeblur":case"afterblur":et=wu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=ey;break;case Ld:case Kf:case ng:et=Ws;break;case ig:et=rS;break;case"scroll":case"scrollend":et=Il;break;case"wheel":et=ny;break;case"copy":case"cut":case"paste":et=ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Gm;break;case"toggle":case"beforetoggle":et=ry}var on=(c&4)!==0,xi=!on&&(a==="scroll"||a==="scrollend"),Pe=on?Xe!==null?Xe+"Capture":null:Xe;on=[];for(var we=ze,Be;we!==null;){var dt=we;if(Be=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||Be===null||Pe===null||(dt=fo(we,Pe),dt!=null&&on.push(Qg(we,dt,Be))),xi)break;we=we.return}0<on.length&&(Xe=new et(Xe,Yt,null,p,lt),pt.push({event:Xe,listeners:on}))}}if((c&7)===0){e:{if(Xe=a==="mouseover"||a==="pointerover",et=a==="mouseout"||a==="pointerout",Xe&&p!==uo&&(Yt=p.relatedTarget||p.fromElement)&&(At(Yt)||Yt[ne]))break e;if((et||Xe)&&(Xe=lt.window===lt?lt:(Xe=lt.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,et?(Yt=p.relatedTarget||p.toElement,et=ze,Yt=Yt?At(Yt):null,Yt!==null&&(xi=s(Yt),on=Yt.tag,Yt!==xi||on!==5&&on!==27&&on!==6)&&(Yt=null)):(et=null,Yt=ze),et!==Yt)){if(on=jf,dt="onMouseLeave",Pe="onMouseEnter",we="mouse",(a==="pointerout"||a==="pointerover")&&(on=Gm,dt="onPointerLeave",Pe="onPointerEnter",we="pointer"),xi=et==null?Xe:Dt(et),Be=Yt==null?Xe:Dt(Yt),Xe=new on(dt,we+"leave",et,p,lt),Xe.target=xi,Xe.relatedTarget=Be,dt=null,At(lt)===ze&&(on=new on(Pe,we+"enter",Yt,p,lt),on.target=Be,on.relatedTarget=xi,dt=on),xi=dt,et&&Yt)t:{for(on=c4,Pe=et,we=Yt,Be=0,dt=Pe;dt;dt=on(dt))Be++;dt=0;for(var nn=we;nn;nn=on(nn))dt++;for(;0<Be-dt;)Pe=on(Pe),Be--;for(;0<dt-Be;)we=on(we),dt--;for(;Be--;){if(Pe===we||we!==null&&Pe===we.alternate){on=Pe;break t}Pe=on(Pe),we=on(we)}on=null}else on=null;et!==null&&GA(pt,Xe,et,on,!1),Yt!==null&&xi!==null&&GA(pt,xi,Yt,on,!0)}}e:{if(Xe=ze?Dt(ze):window,et=Xe.nodeName&&Xe.nodeName.toLowerCase(),et==="select"||et==="input"&&Xe.type==="file")var ti=Zm;else if(qm(Xe))if(vo)ti=fy;else{ti=Jm;var Kt=cy}else et=Xe.nodeName,!et||et.toLowerCase()!=="input"||Xe.type!=="checkbox"&&Xe.type!=="radio"?ze&&Gs(ze.elementType)&&(ti=Zm):ti=uy;if(ti&&(ti=ti(a,ze))){Nd(pt,ti,p,lt);break e}Kt&&Kt(a,Xe,ze),a==="focusout"&&ze&&Xe.type==="number"&&ze.memoizedProps.value!=null&&Cn(Xe,"number",Xe.value)}switch(Kt=ze?Dt(ze):window,a){case"focusin":(qm(Kt)||Kt.contentEditable==="true")&&(yo=Kt,xo=ze,Du=null);break;case"focusout":Du=xo=yo=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Nu(pt,p,lt);break;case"selectionchange":if(dy)break;case"keydown":case"keyup":Nu(pt,p,lt)}var Rn;if(Oc)e:{switch(a){case"compositionstart":var jn="onCompositionStart";break e;case"compositionend":jn="onCompositionEnd";break e;case"compositionupdate":jn="onCompositionUpdate";break e}jn=void 0}else Fc?Dd(a,p)&&(jn="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(jn="onCompositionStart");jn&&(jm&&p.locale!=="ko"&&(Fc||jn!=="onCompositionStart"?jn==="onCompositionEnd"&&Fc&&(Rn=Pl()):(Zr=lt,Pc="value"in Zr?Zr.value:Zr.textContent,Fc=!0)),Kt=hx(ze,jn),0<Kt.length&&(jn=new wd(jn,a,null,p,lt),pt.push({event:jn,listeners:Kt}),Rn?jn.data=Rn:(Rn=Wm(p),Rn!==null&&(jn.data=Rn)))),(Rn=Rd?oy(a,p):Xm(a,p))&&(jn=hx(ze,"onBeforeInput"),0<jn.length&&(Kt=new wd("onBeforeInput","beforeinput",null,p,lt),pt.push({event:Kt,listeners:jn}),Kt.data=Rn)),zi(pt,a,ze,p,lt)}zA(pt,c)})}function Qg(a,c,p){return{instance:a,listener:c,currentTarget:p}}function hx(a,c){for(var p=c+"Capture",y=[];a!==null;){var E=a,C=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=fo(a,p),E!=null&&y.unshift(Qg(a,E,C)),E=fo(a,c),E!=null&&y.push(Qg(a,E,C))),a.tag===3)return y;a=a.return}return[]}function c4(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function GA(a,c,p,y,E){for(var C=c._reactName,B=[];p!==null&&p!==y;){var te=p,ye=te.alternate,ze=te.stateNode;if(te=te.tag,ye!==null&&ye===y)break;te!==5&&te!==26&&te!==27||ze===null||(ye=ze,E?(ze=fo(p,C),ze!=null&&B.unshift(Qg(p,ze,ye))):E||(ze=fo(p,C),ze!=null&&B.push(Qg(p,ze,ye)))),p=p.return}B.length!==0&&a.push({event:c,listeners:B})}var u4=/\r\n?/g,f4=/\u0000|\uFFFD/g;function HA(a){return(typeof a=="string"?a:""+a).replace(u4,`
`).replace(f4,"")}function jA(a,c){return c=HA(c),HA(a)===c}function yi(a,c,p,y,E,C){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||lr(a,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&lr(a,""+y);break;case"className":Zt(a,"class",y);break;case"tabIndex":Zt(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Zt(a,p,y);break;case"style":Ss(a,y,C);break;case"data":if(c!=="object"){Zt(a,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){a.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(p);break}y=ha(""+y),a.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(p==="formAction"?(c!=="input"&&yi(a,c,"name",E.name,E,null),yi(a,c,"formEncType",E.formEncType,E,null),yi(a,c,"formMethod",E.formMethod,E,null),yi(a,c,"formTarget",E.formTarget,E,null)):(yi(a,c,"encType",E.encType,E,null),yi(a,c,"method",E.method,E,null),yi(a,c,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(p);break}y=ha(""+y),a.setAttribute(p,y);break;case"onClick":y!=null&&(a.onclick=qr);break;case"onScroll":y!=null&&Vn("scroll",a);break;case"onScrollEnd":y!=null&&Vn("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}p=ha(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,""+y):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":y===!0?a.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,y):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(p,y):a.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(p):a.setAttribute(p,y);break;case"popover":Vn("beforetoggle",a),Vn("toggle",a),Ft(a,"popover",y);break;case"xlinkActuate":Et(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Et(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Et(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Et(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Et(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Et(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Et(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Et(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Et(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ft(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Hf.get(p)||p,Ft(a,p,y))}}function yS(a,c,p,y,E,C){switch(p){case"style":Ss(a,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"children":typeof y=="string"?lr(a,y):(typeof y=="number"||typeof y=="bigint")&&lr(a,""+y);break;case"onScroll":y!=null&&Vn("scroll",a);break;case"onScrollEnd":y!=null&&Vn("scrollend",a);break;case"onClick":y!=null&&(a.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!be.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),c=p.slice(2,E?p.length-7:void 0),C=a[W]||null,C=C!=null?C[p]:null,typeof C=="function"&&a.removeEventListener(c,C,E),typeof y=="function")){typeof C!="function"&&C!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(c,y,E);break e}p in a?a[p]=y:y===!0?a.setAttribute(p,""):Ft(a,p,y)}}}function gs(a,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vn("error",a),Vn("load",a);var y=!1,E=!1,C;for(C in p)if(p.hasOwnProperty(C)){var B=p[C];if(B!=null)switch(C){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:yi(a,c,C,B,p,null)}}E&&yi(a,c,"srcSet",p.srcSet,p,null),y&&yi(a,c,"src",p.src,p,null);return;case"input":Vn("invalid",a);var te=C=B=E=null,ye=null,ze=null;for(y in p)if(p.hasOwnProperty(y)){var lt=p[y];if(lt!=null)switch(y){case"name":E=lt;break;case"type":B=lt;break;case"checked":ye=lt;break;case"defaultChecked":ze=lt;break;case"value":C=lt;break;case"defaultValue":te=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,c));break;default:yi(a,c,y,lt,p,null)}}ai(a,C,te,ye,ze,B,E,!1);return;case"select":Vn("invalid",a),y=B=C=null;for(E in p)if(p.hasOwnProperty(E)&&(te=p[E],te!=null))switch(E){case"value":C=te;break;case"defaultValue":B=te;break;case"multiple":y=te;default:yi(a,c,E,te,p,null)}c=C,p=B,a.multiple=!!y,c!=null?oi(a,!!y,c,!1):p!=null&&oi(a,!!y,p,!0);return;case"textarea":Vn("invalid",a),C=E=y=null;for(B in p)if(p.hasOwnProperty(B)&&(te=p[B],te!=null))switch(B){case"value":y=te;break;case"defaultValue":E=te;break;case"children":C=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(91));break;default:yi(a,c,B,te,p,null)}fi(a,y,E,C);return;case"option":for(ye in p)p.hasOwnProperty(ye)&&(y=p[ye],y!=null)&&(ye==="selected"?a.selected=y&&typeof y!="function"&&typeof y!="symbol":yi(a,c,ye,y,p,null));return;case"dialog":Vn("beforetoggle",a),Vn("toggle",a),Vn("cancel",a),Vn("close",a);break;case"iframe":case"object":Vn("load",a);break;case"video":case"audio":for(y=0;y<Pa.length;y++)Vn(Pa[y],a);break;case"image":Vn("error",a),Vn("load",a);break;case"details":Vn("toggle",a);break;case"embed":case"source":case"link":Vn("error",a),Vn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ze in p)if(p.hasOwnProperty(ze)&&(y=p[ze],y!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:yi(a,c,ze,y,p,null)}return;default:if(Gs(c)){for(lt in p)p.hasOwnProperty(lt)&&(y=p[lt],y!==void 0&&yS(a,c,lt,y,p,void 0));return}}for(te in p)p.hasOwnProperty(te)&&(y=p[te],y!=null&&yi(a,c,te,y,p,null))}function h4(a,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,B=null,te=null,ye=null,ze=null,lt=null;for(et in p){var pt=p[et];if(p.hasOwnProperty(et)&&pt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":ye=pt;default:y.hasOwnProperty(et)||yi(a,c,et,null,y,pt)}}for(var Xe in y){var et=y[Xe];if(pt=p[Xe],y.hasOwnProperty(Xe)&&(et!=null||pt!=null))switch(Xe){case"type":C=et;break;case"name":E=et;break;case"checked":ze=et;break;case"defaultChecked":lt=et;break;case"value":B=et;break;case"defaultValue":te=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,c));break;default:et!==pt&&yi(a,c,Xe,et,y,pt)}}Yn(a,B,te,ye,ze,lt,C,E);return;case"select":et=B=te=Xe=null;for(C in p)if(ye=p[C],p.hasOwnProperty(C)&&ye!=null)switch(C){case"value":break;case"multiple":et=ye;default:y.hasOwnProperty(C)||yi(a,c,C,null,y,ye)}for(E in y)if(C=y[E],ye=p[E],y.hasOwnProperty(E)&&(C!=null||ye!=null))switch(E){case"value":Xe=C;break;case"defaultValue":te=C;break;case"multiple":B=C;default:C!==ye&&yi(a,c,E,C,y,ye)}c=te,p=B,y=et,Xe!=null?oi(a,!!p,Xe,!1):!!y!=!!p&&(c!=null?oi(a,!!p,c,!0):oi(a,!!p,p?[]:"",!1));return;case"textarea":et=Xe=null;for(te in p)if(E=p[te],p.hasOwnProperty(te)&&E!=null&&!y.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:yi(a,c,te,null,y,E)}for(B in y)if(E=y[B],C=p[B],y.hasOwnProperty(B)&&(E!=null||C!=null))switch(B){case"value":Xe=E;break;case"defaultValue":et=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==C&&yi(a,c,B,E,y,C)}Ln(a,Xe,et);return;case"option":for(var Yt in p)Xe=p[Yt],p.hasOwnProperty(Yt)&&Xe!=null&&!y.hasOwnProperty(Yt)&&(Yt==="selected"?a.selected=!1:yi(a,c,Yt,null,y,Xe));for(ye in y)Xe=y[ye],et=p[ye],y.hasOwnProperty(ye)&&Xe!==et&&(Xe!=null||et!=null)&&(ye==="selected"?a.selected=Xe&&typeof Xe!="function"&&typeof Xe!="symbol":yi(a,c,ye,Xe,y,et));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var on in p)Xe=p[on],p.hasOwnProperty(on)&&Xe!=null&&!y.hasOwnProperty(on)&&yi(a,c,on,null,y,Xe);for(ze in y)if(Xe=y[ze],et=p[ze],y.hasOwnProperty(ze)&&Xe!==et&&(Xe!=null||et!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(n(137,c));break;default:yi(a,c,ze,Xe,y,et)}return;default:if(Gs(c)){for(var xi in p)Xe=p[xi],p.hasOwnProperty(xi)&&Xe!==void 0&&!y.hasOwnProperty(xi)&&yS(a,c,xi,void 0,y,Xe);for(lt in y)Xe=y[lt],et=p[lt],!y.hasOwnProperty(lt)||Xe===et||Xe===void 0&&et===void 0||yS(a,c,lt,Xe,y,et);return}}for(var Pe in p)Xe=p[Pe],p.hasOwnProperty(Pe)&&Xe!=null&&!y.hasOwnProperty(Pe)&&yi(a,c,Pe,null,y,Xe);for(pt in y)Xe=y[pt],et=p[pt],!y.hasOwnProperty(pt)||Xe===et||Xe==null&&et==null||yi(a,c,pt,Xe,y,et)}function WA(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function d4(){if(typeof performance.getEntriesByType=="function"){for(var a=0,c=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],C=E.transferSize,B=E.initiatorType,te=E.duration;if(C&&te&&WA(B)){for(B=0,te=E.responseEnd,y+=1;y<p.length;y++){var ye=p[y],ze=ye.startTime;if(ze>te)break;var lt=ye.transferSize,pt=ye.initiatorType;lt&&WA(pt)&&(ye=ye.responseEnd,B+=lt*(ye<te?1:(te-ze)/(ye-ze)))}if(--y,c+=8*(C+B)/(E.duration/1e3),a++,10<a)break}}if(0<a)return c/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var xS=null,_S=null;function dx(a){return a.nodeType===9?a:a.ownerDocument}function XA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YA(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function bS(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var SS=null;function p4(){var a=window.event;return a&&a.type==="popstate"?a===SS?!1:(SS=a,!0):(SS=null,!1)}var qA=typeof setTimeout=="function"?setTimeout:void 0,m4=typeof clearTimeout=="function"?clearTimeout:void 0,ZA=typeof Promise=="function"?Promise:void 0,g4=typeof queueMicrotask=="function"?queueMicrotask:typeof ZA<"u"?function(a){return ZA.resolve(null).then(a).catch(v4)}:qA;function v4(a){setTimeout(function(){throw a})}function rf(a){return a==="head"}function KA(a,c){var p=c,y=0;do{var E=p.nextSibling;if(a.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){a.removeChild(E),Tp(c);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")Jg(a.ownerDocument.documentElement);else if(p==="head"){p=a.ownerDocument.head,Jg(p);for(var C=p.firstChild;C;){var B=C.nextSibling,te=C.nodeName;C[St]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&C.rel.toLowerCase()==="stylesheet"||p.removeChild(C),C=B}}else p==="body"&&Jg(a.ownerDocument.body);p=E}while(p);Tp(c)}function QA(a,c){var p=a;a=0;do{var y=p.nextSibling;if(p.nodeType===1?c?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(c?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(a===0)break;a--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||a++;p=y}while(p)}function MS(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":MS(p),yt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function y4(a,c,p,y){for(;a.nodeType===1;){var E=p;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[St])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==E.rel||a.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||a.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||a.getAttribute("title")!==(E.title==null?null:E.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(E.src==null?null:E.src)||a.getAttribute("type")!==(E.type==null?null:E.type)||a.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=ko(a.nextSibling),a===null)break}return null}function x4(a,c,p){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=ko(a.nextSibling),a===null))return null;return a}function JA(a,c){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=ko(a.nextSibling),a===null))return null;return a}function TS(a){return a.data==="$?"||a.data==="$~"}function wS(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function _4(a,c){var p=a.ownerDocument;if(a.data==="$~")a._reactRetry=c;else if(a.data!=="$?"||p.readyState!=="loading")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function ko(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return a}var ES=null;function $A(a){a=a.nextSibling;for(var c=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"||p==="/&"){if(c===0)return ko(a.nextSibling);c--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||c++}a=a.nextSibling}return null}function eC(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(c===0)return a;c--}else p!=="/$"&&p!=="/&"||c++}a=a.previousSibling}return null}function tC(a,c,p){switch(c=dx(p),a){case"html":if(a=c.documentElement,!a)throw Error(n(452));return a;case"head":if(a=c.head,!a)throw Error(n(453));return a;case"body":if(a=c.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Jg(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);yt(a)}var Bo=new Map,nC=new Set;function px(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ou=J.d;J.d={f:b4,r:S4,D:M4,C:T4,L:w4,m:E4,X:C4,S:A4,M:R4};function b4(){var a=ou.f(),c=Za();return a||c}function S4(a){var c=Ct(a);c!==null&&c.tag===5&&c.type==="form"?Ky(c):ou.r(a)}var bp=typeof document>"u"?null:document;function iC(a,c,p){var y=bp;if(y&&typeof c=="string"&&c){var E=Nt(c);E='link[rel="'+a+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),nC.has(E)||(nC.add(E),a={rel:a,crossOrigin:p,href:c},y.querySelector(E)===null&&(c=y.createElement("link"),gs(c,"link",a),me(c),y.head.appendChild(c)))}}function M4(a){ou.D(a),iC("dns-prefetch",a,null)}function T4(a,c){ou.C(a,c),iC("preconnect",a,c)}function w4(a,c,p){ou.L(a,c,p);var y=bp;if(y&&a&&c){var E='link[rel="preload"][as="'+Nt(c)+'"]';c==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Nt(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Nt(p.imageSizes)+'"]')):E+='[href="'+Nt(a)+'"]';var C=E;switch(c){case"style":C=Sp(a);break;case"script":C=Mp(a)}Bo.has(C)||(a=g({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:a,as:c},p),Bo.set(C,a),y.querySelector(E)!==null||c==="style"&&y.querySelector($g(C))||c==="script"&&y.querySelector(e0(C))||(c=y.createElement("link"),gs(c,"link",a),me(c),y.head.appendChild(c)))}}function E4(a,c){ou.m(a,c);var p=bp;if(p&&a){var y=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+Nt(y)+'"][href="'+Nt(a)+'"]',C=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Mp(a)}if(!Bo.has(C)&&(a=g({rel:"modulepreload",href:a},c),Bo.set(C,a),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(e0(C)))return}y=p.createElement("link"),gs(y,"link",a),me(y),p.head.appendChild(y)}}}function A4(a,c,p){ou.S(a,c,p);var y=bp;if(y&&a){var E=G(y).hoistableStyles,C=Sp(a);c=c||"default";var B=E.get(C);if(!B){var te={loading:0,preload:null};if(B=y.querySelector($g(C)))te.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":c},p),(p=Bo.get(C))&&AS(a,p);var ye=B=y.createElement("link");me(ye),gs(ye,"link",a),ye._p=new Promise(function(ze,lt){ye.onload=ze,ye.onerror=lt}),ye.addEventListener("load",function(){te.loading|=1}),ye.addEventListener("error",function(){te.loading|=2}),te.loading|=4,mx(B,c,y)}B={type:"stylesheet",instance:B,count:1,state:te},E.set(C,B)}}}function C4(a,c){ou.X(a,c);var p=bp;if(p&&a){var y=G(p).hoistableScripts,E=Mp(a),C=y.get(E);C||(C=p.querySelector(e0(E)),C||(a=g({src:a,async:!0},c),(c=Bo.get(E))&&CS(a,c),C=p.createElement("script"),me(C),gs(C,"link",a),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(E,C))}}function R4(a,c){ou.M(a,c);var p=bp;if(p&&a){var y=G(p).hoistableScripts,E=Mp(a),C=y.get(E);C||(C=p.querySelector(e0(E)),C||(a=g({src:a,async:!0,type:"module"},c),(c=Bo.get(E))&&CS(a,c),C=p.createElement("script"),me(C),gs(C,"link",a),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(E,C))}}function rC(a,c,p,y){var E=(E=re.current)?px(E):null;if(!E)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=Sp(p.href),p=G(E).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=Sp(p.href);var C=G(E).hoistableStyles,B=C.get(a);if(B||(E=E.ownerDocument||E,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,B),(C=E.querySelector($g(a)))&&!C._p&&(B.instance=C,B.state.loading=5),Bo.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Bo.set(a,p),C||D4(E,a,p,B.state))),c&&y===null)throw Error(n(528,""));return B}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Mp(p),p=G(E).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Sp(a){return'href="'+Nt(a)+'"'}function $g(a){return'link[rel="stylesheet"]['+a+"]"}function sC(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function D4(a,c,p,y){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=a.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),gs(c,"link",p),me(c),a.head.appendChild(c))}function Mp(a){return'[src="'+Nt(a)+'"]'}function e0(a){return"script[async]"+a}function aC(a,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=a.querySelector('style[data-href~="'+Nt(p.href)+'"]');if(y)return c.instance=y,me(y),y;var E=g({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),me(y),gs(y,"style",E),mx(y,p.precedence,a),c.instance=y;case"stylesheet":E=Sp(p.href);var C=a.querySelector($g(E));if(C)return c.state.loading|=4,c.instance=C,me(C),C;y=sC(p),(E=Bo.get(E))&&AS(y,E),C=(a.ownerDocument||a).createElement("link"),me(C);var B=C;return B._p=new Promise(function(te,ye){B.onload=te,B.onerror=ye}),gs(C,"link",y),c.state.loading|=4,mx(C,p.precedence,a),c.instance=C;case"script":return C=Mp(p.src),(E=a.querySelector(e0(C)))?(c.instance=E,me(E),E):(y=p,(E=Bo.get(C))&&(y=g({},p),CS(y,E)),a=a.ownerDocument||a,E=a.createElement("script"),me(E),gs(E,"link",y),a.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,mx(y,p.precedence,a));return c.instance}function mx(a,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,C=E,B=0;B<y.length;B++){var te=y[B];if(te.dataset.precedence===c)C=te;else if(C!==E)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(a,c.firstChild))}function AS(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function CS(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var gx=null;function oC(a,c,p){if(gx===null){var y=new Map,E=gx=new Map;E.set(p,y)}else E=gx,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(a))return y;for(y.set(a,null),p=p.getElementsByTagName(a),E=0;E<p.length;E++){var C=p[E];if(!(C[St]||C[Xn]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var B=C.getAttribute(c)||"";B=a+B;var te=y.get(B);te?te.push(C):y.set(B,[C])}}return y}function lC(a,c,p){a=a.ownerDocument||a,a.head.insertBefore(p,c==="title"?a.querySelector("head > title"):null)}function N4(a,c,p){if(p===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;return c.rel==="stylesheet"?(a=c.disabled,typeof c.precedence=="string"&&a==null):!0;case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function cC(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function P4(a,c,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=Sp(y.href),C=c.querySelector($g(E));if(C){c=C._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(a.count++,a=vx.bind(a),c.then(a,a)),p.state.loading|=4,p.instance=C,me(C);return}C=c.ownerDocument||c,y=sC(y),(E=Bo.get(E))&&AS(y,E),C=C.createElement("link"),me(C);var B=C;B._p=new Promise(function(te,ye){B.onload=te,B.onerror=ye}),gs(C,"link",y),p.instance=C}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(p,c),(c=p.state.preload)&&(p.state.loading&3)===0&&(a.count++,p=vx.bind(a),c.addEventListener("load",p),c.addEventListener("error",p))}}var RS=0;function L4(a,c){return a.stylesheets&&a.count===0&&xx(a,a.stylesheets),0<a.count||0<a.imgCount?function(p){var y=setTimeout(function(){if(a.stylesheets&&xx(a,a.stylesheets),a.unsuspend){var C=a.unsuspend;a.unsuspend=null,C()}},6e4+c);0<a.imgBytes&&RS===0&&(RS=62500*d4());var E=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&xx(a,a.stylesheets),a.unsuspend)){var C=a.unsuspend;a.unsuspend=null,C()}},(a.imgBytes>RS?50:800)+c);return a.unsuspend=p,function(){a.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function vx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xx(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var yx=null;function xx(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,yx=new Map,c.forEach(U4,a),yx=null,vx.call(a))}function U4(a,c){if(!(c.state.loading&4)){var p=yx.get(a);if(p)var y=p.get(null);else{p=new Map,yx.set(a,p);for(var E=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var B=E[C];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(p.set(B.dataset.precedence,B),y=B)}y&&p.set(null,y)}E=c.instance,B=E.getAttribute("data-precedence"),C=p.get(B)||y,C===y&&p.set(null,E),p.set(B,E),this.count++,y=vx.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),C?C.parentNode.insertBefore(E,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(E,a.firstChild)),c.state.loading|=4}}var t0={$$typeof:D,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function I4(a,c,p,y,E,C,B,te,ye){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ht(0),this.hiddenUpdates=Ht(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function uC(a,c,p,y,E,C,B,te,ye,ze,lt,pt){return a=new I4(a,c,p,B,ye,ze,lt,pt,te),c=1,C===!0&&(c|=24),C=Ui(3,null,null,c),a.current=C,C.stateNode=a,c=sg(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:y,isDehydrated:p,cache:c},sh(C),a}function fC(a){return a?(a=zl,a):zl}function hC(a,c,p,y,E,C){E=fC(E),y.context===null?y.context=E:y.pendingContext=E,y=sl(c),y.payload={element:p},C=C===void 0?null:C,C!==null&&(y.callback=C),p=ql(a,y,c),p!==null&&(wn(p,a,c),Zl(p,a,c))}function dC(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<c?p:c}}function DS(a,c){dC(a,c),(a=a.alternate)&&dC(a,c)}function pC(a){if(a.tag===13||a.tag===31){var c=cs(a,67108864);c!==null&&wn(c,a,67108864),DS(a,67108864)}}function mC(a){if(a.tag===13||a.tag===31){var c=ea();c=Zi(c);var p=cs(a,c);p!==null&&wn(p,a,c),DS(a,c)}}var _x=!0;function O4(a,c,p,y){var E=j.T;j.T=null;var C=J.p;try{J.p=2,NS(a,c,p,y)}finally{J.p=C,j.T=E}}function F4(a,c,p,y){var E=j.T;j.T=null;var C=J.p;try{J.p=8,NS(a,c,p,y)}finally{J.p=C,j.T=E}}function NS(a,c,p,y){if(_x){var E=PS(y);if(E===null)vS(a,c,y,bx,p),vC(a,y);else if(B4(E,a,c,p,y))y.stopPropagation();else if(vC(a,y),c&4&&-1<k4.indexOf(a)){for(;E!==null;){var C=Ct(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var B=rt(C.pendingLanes);if(B!==0){var te=C;for(te.pendingLanes|=2,te.entangledLanes|=2;B;){var ye=1<<31-oe(B);te.entanglements[1]|=ye,B&=~ye}Tt(C),(Jt&6)===0&&($i=V()+500,Gt(0))}}break;case 31:case 13:te=cs(C,2),te!==null&&wn(te,C,2),Za(),DS(C,2)}if(C=PS(y),C===null&&vS(a,c,y,bx,p),C===E)break;E=C}E!==null&&y.stopPropagation()}else vS(a,c,y,null,p)}}function PS(a){return a=Rc(a),LS(a)}var bx=null;function LS(a){if(bx=null,a=At(a),a!==null){var c=s(a);if(c===null)a=null;else{var p=c.tag;if(p===13){if(a=o(c),a!==null)return a;a=null}else if(p===31){if(a=l(c),a!==null)return a;a=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return bx=a,null}function gC(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case Ie:return 2;case Ce:return 8;case Ee:case st:return 32;case at:return 268435456;default:return 32}default:return 32}}var US=!1,sf=null,af=null,of=null,n0=new Map,i0=new Map,lf=[],k4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vC(a,c){switch(a){case"focusin":case"focusout":sf=null;break;case"dragenter":case"dragleave":af=null;break;case"mouseover":case"mouseout":of=null;break;case"pointerover":case"pointerout":n0.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":i0.delete(c.pointerId)}}function r0(a,c,p,y,E,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:C,targetContainers:[E]},c!==null&&(c=Ct(c),c!==null&&pC(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),a)}function B4(a,c,p,y,E){switch(c){case"focusin":return sf=r0(sf,a,c,p,y,E),!0;case"dragenter":return af=r0(af,a,c,p,y,E),!0;case"mouseover":return of=r0(of,a,c,p,y,E),!0;case"pointerover":var C=E.pointerId;return n0.set(C,r0(n0.get(C)||null,a,c,p,y,E)),!0;case"gotpointercapture":return C=E.pointerId,i0.set(C,r0(i0.get(C)||null,a,c,p,y,E)),!0}return!1}function yC(a){var c=At(a.target);if(c!==null){var p=s(c);if(p!==null){if(c=p.tag,c===13){if(c=o(p),c!==null){a.blockedOn=c,Qt(a.priority,function(){mC(p)});return}}else if(c===31){if(c=l(p),c!==null){a.blockedOn=c,Qt(a.priority,function(){mC(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Sx(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var p=PS(a.nativeEvent);if(p===null){p=a.nativeEvent;var y=new p.constructor(p.type,p);uo=y,p.target.dispatchEvent(y),uo=null}else return c=Ct(p),c!==null&&pC(c),a.blockedOn=p,!1;c.shift()}return!0}function xC(a,c,p){Sx(a)&&p.delete(c)}function z4(){US=!1,sf!==null&&Sx(sf)&&(sf=null),af!==null&&Sx(af)&&(af=null),of!==null&&Sx(of)&&(of=null),n0.forEach(xC),i0.forEach(xC)}function Mx(a,c){a.blockedOn===c&&(a.blockedOn=null,US||(US=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,z4)))}var Tx=null;function _C(a){Tx!==a&&(Tx=a,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Tx===a&&(Tx=null);for(var c=0;c<a.length;c+=3){var p=a[c],y=a[c+1],E=a[c+2];if(typeof y!="function"){if(LS(y||p)===null)continue;break}var C=Ct(p);C!==null&&(a.splice(c,3),c-=3,Pg(C,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function Tp(a){function c(ye){return Mx(ye,a)}sf!==null&&Mx(sf,a),af!==null&&Mx(af,a),of!==null&&Mx(of,a),n0.forEach(c),i0.forEach(c);for(var p=0;p<lf.length;p++){var y=lf[p];y.blockedOn===a&&(y.blockedOn=null)}for(;0<lf.length&&(p=lf[0],p.blockedOn===null);)yC(p),p.blockedOn===null&&lf.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],C=p[y+1],B=E[W]||null;if(typeof C=="function")B||_C(p);else if(B){var te=null;if(C&&C.hasAttribute("formAction")){if(E=C,B=C[W]||null)te=B.formAction;else if(LS(E)!==null)continue}else te=B.action;typeof te=="function"?p[y+1]=te:(p.splice(y,3),y-=3),_C(p)}}}function bC(){function a(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(B){return E=B})},focusReset:"manual",scroll:"manual"})}function c(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),E!==null&&(E(),E=null)}}}function IS(a){this._internalRoot=a}wx.prototype.render=IS.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));var p=c.current,y=ea();hC(p,y,a,c,null,null)},wx.prototype.unmount=IS.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;hC(a.current,2,null,a,null,null),Za(),c[ne]=null}};function wx(a){this._internalRoot=a}wx.prototype.unstable_scheduleHydration=function(a){if(a){var c=pi();a={blockedOn:null,target:a,priority:c};for(var p=0;p<lf.length&&c!==0&&c<lf[p].priority;p++);lf.splice(p,0,a),p===0&&yC(a)}};var SC=e.version;if(SC!=="19.2.4")throw Error(n(527,SC,"19.2.4"));J.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(c),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var V4={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ex=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ex.isDisabled&&Ex.supportsFiber)try{Ge=Ex.inject(V4),Fe=Ex}catch{}}return a0.createRoot=function(a,c){if(!i(a))throw Error(n(299));var p=!1,y="",E=ix,C=kg,B=Bg;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(B=c.onRecoverableError)),c=uC(a,1,!1,null,null,p,y,null,E,C,B,bC),a[ne]=c.current,gS(a),new IS(c)},a0.hydrateRoot=function(a,c,p){if(!i(a))throw Error(n(299));var y=!1,E="",C=ix,B=kg,te=Bg,ye=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(C=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(te=p.onRecoverableError),p.formState!==void 0&&(ye=p.formState)),c=uC(a,1,!0,c,p??null,y,E,ye,C,B,te,bC),c.context=fC(null),p=c.current,y=ea(),y=Zi(y),E=sl(y),E.callback=null,ql(p,E,y),p=y,c.current.lanes=p,Sn(c,p),Tt(c),a[ne]=c.current,gS(a),new wx(c)},a0.version="19.2.4",a0}var PC;function K4(){if(PC)return kS.exports;PC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),kS.exports=Z4(),kS.exports}var Q4=K4();const kw=Re.createContext({});function Bw(r){const e=Re.useRef(null);return e.current===null&&(e.current=r()),e.current}const IN=typeof window<"u",ON=IN?Re.useLayoutEffect:Re.useEffect,ub=Re.createContext(null);function zw(r,e){r.indexOf(e)===-1&&r.push(e)}function q_(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const Mc=(r,e,t)=>t>e?e:t<r?r:t;let Vw=()=>{};const _u={},FN=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function kN(r){return typeof r=="object"&&r!==null}const BN=r=>/^0[^.\s]+$/u.test(r);function zN(r){let e;return()=>(e===void 0&&(e=r()),e)}const Yo=r=>r,J4=(r,e)=>t=>e(r(t)),Dv=(...r)=>r.reduce(J4),$0=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class Gw{constructor(){this.subscriptions=[]}add(e){return zw(this.subscriptions,e),()=>q_(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ml=r=>r*1e3,jo=r=>r/1e3;function VN(r,e){return e?r*(1e3/e):0}const GN=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,$4=1e-7,eF=12;function tF(r,e,t,n,i){let s,o,l=0;do o=e+(t-e)/2,s=GN(o,n,i)-r,s>0?t=o:e=o;while(Math.abs(s)>$4&&++l<eF);return o}function Nv(r,e,t,n){if(r===e&&t===n)return Yo;const i=s=>tF(s,0,1,r,t);return s=>s===0||s===1?s:GN(i(s),e,n)}const HN=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,jN=r=>e=>1-r(1-e),WN=Nv(.33,1.53,.69,.99),Hw=jN(WN),XN=HN(Hw),YN=r=>(r*=2)<1?.5*Hw(r):.5*(2-Math.pow(2,-10*(r-1))),jw=r=>1-Math.sin(Math.acos(r)),qN=jN(jw),ZN=HN(jw),nF=Nv(.42,0,1,1),iF=Nv(0,0,.58,1),KN=Nv(.42,0,.58,1),rF=r=>Array.isArray(r)&&typeof r[0]!="number",QN=r=>Array.isArray(r)&&typeof r[0]=="number",sF={linear:Yo,easeIn:nF,easeInOut:KN,easeOut:iF,circIn:jw,circInOut:ZN,circOut:qN,backIn:Hw,backInOut:XN,backOut:WN,anticipate:YN},aF=r=>typeof r=="string",LC=r=>{if(QN(r)){Vw(r.length===4);const[e,t,n,i]=r;return Nv(e,t,n,i)}else if(aF(r))return sF[r];return r},Ax=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oF(r,e){let t=new Set,n=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(m){o.has(m)&&(h.schedule(m),r()),m(l)}const h={schedule:(m,g=!1,v=!1)=>{const b=v&&i?t:n;return g&&o.add(m),b.has(m)||b.add(m),m},cancel:m=>{n.delete(m),o.delete(m)},process:m=>{if(l=m,i){s=!0;return}i=!0,[t,n]=[n,t],t.forEach(u),t.clear(),i=!1,s&&(s=!1,h.process(m))}};return h}const lF=40;function JN(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Ax.reduce((D,N)=>(D[N]=oF(s),D),{}),{setup:l,read:u,resolveKeyframes:h,preUpdate:m,update:g,preRender:v,render:_,postRender:b}=o,w=()=>{const D=_u.useManualTiming?i.timestamp:performance.now();t=!1,_u.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(D-i.timestamp,lF),1)),i.timestamp=D,i.isProcessing=!0,l.process(i),u.process(i),h.process(i),m.process(i),g.process(i),v.process(i),_.process(i),b.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(w))},S=()=>{t=!0,n=!0,i.isProcessing||r(w)};return{schedule:Ax.reduce((D,N)=>{const L=o[N];return D[N]=(I,k=!1,R=!1)=>(t||S(),L.schedule(I,k,R)),D},{}),cancel:D=>{for(let N=0;N<Ax.length;N++)o[Ax[N]].cancel(D)},state:i,steps:o}}const{schedule:Ni,cancel:Df,state:ys,steps:GS}=JN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yo,!0);let P_;function cF(){P_=void 0}const aa={now:()=>(P_===void 0&&aa.set(ys.isProcessing||_u.useManualTiming?ys.timestamp:performance.now()),P_),set:r=>{P_=r,queueMicrotask(cF)}},$N=r=>e=>typeof e=="string"&&e.startsWith(r),eP=$N("--"),uF=$N("var(--"),Ww=r=>uF(r)?fF.test(r.split("/*")[0].trim()):!1,fF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function UC(r){return typeof r!="string"?!1:r.split("/*")[0].includes("var(--")}const Pm={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},ev={...Pm,transform:r=>Mc(0,1,r)},Cx={...Pm,default:1},P0=r=>Math.round(r*1e5)/1e5,Xw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hF(r){return r==null}const dF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yw=(r,e)=>t=>!!(typeof t=="string"&&dF.test(t)&&t.startsWith(r)||e&&!hF(t)&&Object.prototype.hasOwnProperty.call(t,e)),tP=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,o,l]=n.match(Xw);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},pF=r=>Mc(0,255,r),HS={...Pm,transform:r=>Math.round(pF(r))},qh={test:Yw("rgb","red"),parse:tP("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+HS.transform(r)+", "+HS.transform(e)+", "+HS.transform(t)+", "+P0(ev.transform(n))+")"};function mF(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const _T={test:Yw("#"),parse:mF,transform:qh.transform},Pv=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),yf=Pv("deg"),bc=Pv("%"),qt=Pv("px"),gF=Pv("vh"),vF=Pv("vw"),IC={...bc,parse:r=>bc.parse(r)/100,transform:r=>bc.transform(r*100)},Jp={test:Yw("hsl","hue"),parse:tP("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+bc.transform(P0(e))+", "+bc.transform(P0(t))+", "+P0(ev.transform(n))+")"},Fr={test:r=>qh.test(r)||_T.test(r)||Jp.test(r),parse:r=>qh.test(r)?qh.parse(r):Jp.test(r)?Jp.parse(r):_T.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?qh.transform(r):Jp.transform(r),getAnimatableNone:r=>{const e=Fr.parse(r);return e.alpha=0,Fr.transform(e)}},yF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xF(r){return isNaN(r)&&typeof r=="string"&&(r.match(Xw)?.length||0)+(r.match(yF)?.length||0)>0}const nP="number",iP="color",_F="var",bF="var(",OC="${}",SF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tv(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(SF,u=>(Fr.test(u)?(n.color.push(s),i.push(iP),t.push(Fr.parse(u))):u.startsWith(bF)?(n.var.push(s),i.push(_F),t.push(u)):(n.number.push(s),i.push(nP),t.push(parseFloat(u))),++s,OC)).split(OC);return{values:t,split:l,indexes:n,types:i}}function rP(r){return tv(r).values}function sP(r){const{split:e,types:t}=tv(r),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const l=t[o];l===nP?s+=P0(i[o]):l===iP?s+=Fr.transform(i[o]):s+=i[o]}return s}}const MF=r=>typeof r=="number"?0:Fr.test(r)?Fr.getAnimatableNone(r):r;function TF(r){const e=rP(r);return sP(r)(e.map(MF))}const Tl={test:xF,parse:rP,createTransformer:sP,getAnimatableNone:TF};function jS(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function wF({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;i=jS(u,l,r+1/3),s=jS(u,l,r),o=jS(u,l,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function Z_(r,e){return t=>t>0?e:r}const rr=(r,e,t)=>r+(e-r)*t,WS=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},EF=[_T,qh,Jp],AF=r=>EF.find(e=>e.test(r));function FC(r){const e=AF(r);if(!e)return!1;let t=e.parse(r);return e===Jp&&(t=wF(t)),t}const kC=(r,e)=>{const t=FC(r),n=FC(e);if(!t||!n)return Z_(r,e);const i={...t};return s=>(i.red=WS(t.red,n.red,s),i.green=WS(t.green,n.green,s),i.blue=WS(t.blue,n.blue,s),i.alpha=rr(t.alpha,n.alpha,s),qh.transform(i))},bT=new Set(["none","hidden"]);function CF(r,e){return bT.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function RF(r,e){return t=>rr(r,e,t)}function qw(r){return typeof r=="number"?RF:typeof r=="string"?Ww(r)?Z_:Fr.test(r)?kC:PF:Array.isArray(r)?aP:typeof r=="object"?Fr.test(r)?kC:DF:Z_}function aP(r,e){const t=[...r],n=t.length,i=r.map((s,o)=>qw(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=i[o](s);return t}}function DF(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=qw(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function NF(r,e){const t=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=r.indexes[s][n[s]],l=r.values[o]??0;t[i]=l,n[s]++}return t}const PF=(r,e)=>{const t=Tl.createTransformer(e),n=tv(r),i=tv(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?bT.has(r)&&!i.values.length||bT.has(e)&&!n.values.length?CF(r,e):Dv(aP(NF(n,i),i.values),t):Z_(r,e)};function oP(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?rr(r,e,t):qw(r)(r,e)}const LF=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>Ni.update(e,t),stop:()=>Df(e),now:()=>ys.isProcessing?ys.timestamp:aa.now()}},lP=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=Math.round(r(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},K_=2e4;function Zw(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<K_;)e+=t,n=r.next(e);return e>=K_?1/0:e}function UF(r,e=100,t){const n=t({...r,keyframes:[0,e]}),i=Math.min(Zw(n),K_);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:jo(i)}}const IF=5;function cP(r,e,t){const n=Math.max(e-IF,0);return VN(t-r(n),e-n)}const mr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},XS=.001;function OF({duration:r=mr.duration,bounce:e=mr.bounce,velocity:t=mr.velocity,mass:n=mr.mass}){let i,s,o=1-e;o=Mc(mr.minDamping,mr.maxDamping,o),r=Mc(mr.minDuration,mr.maxDuration,jo(r)),o<1?(i=h=>{const m=h*o,g=m*r,v=m-t,_=ST(h,o),b=Math.exp(-g);return XS-v/_*b},s=h=>{const g=h*o*r,v=g*t+t,_=Math.pow(o,2)*Math.pow(h,2)*r,b=Math.exp(-g),w=ST(Math.pow(h,2),o);return(-i(h)+XS>0?-1:1)*((v-_)*b)/w}):(i=h=>{const m=Math.exp(-h*r),g=(h-t)*r+1;return-XS+m*g},s=h=>{const m=Math.exp(-h*r),g=(t-h)*(r*r);return m*g});const l=5/r,u=kF(i,s,l);if(r=Ml(r),isNaN(u))return{stiffness:mr.stiffness,damping:mr.damping,duration:r};{const h=Math.pow(u,2)*n;return{stiffness:h,damping:o*2*Math.sqrt(n*h),duration:r}}}const FF=12;function kF(r,e,t){let n=t;for(let i=1;i<FF;i++)n=n-r(n)/e(n);return n}function ST(r,e){return r*Math.sqrt(1-e*e)}const BF=["duration","bounce"],zF=["stiffness","damping","mass"];function BC(r,e){return e.some(t=>r[t]!==void 0)}function VF(r){let e={velocity:mr.velocity,stiffness:mr.stiffness,damping:mr.damping,mass:mr.mass,isResolvedFromDuration:!1,...r};if(!BC(r,zF)&&BC(r,BF))if(e.velocity=0,r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*Mc(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:mr.mass,stiffness:i,damping:s}}else{const t=OF({...r,velocity:0});e={...e,...t,mass:mr.mass},e.isResolvedFromDuration=!0}return e}function Q_(r=mr.visualDuration,e=mr.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:h,mass:m,duration:g,velocity:v,isResolvedFromDuration:_}=VF({...t,velocity:-jo(t.velocity||0)}),b=v||0,w=h/(2*Math.sqrt(u*m)),S=o-s,T=jo(Math.sqrt(u/m)),A=Math.abs(S)<5;n||(n=A?mr.restSpeed.granular:mr.restSpeed.default),i||(i=A?mr.restDelta.granular:mr.restDelta.default);let D;if(w<1){const L=ST(T,w);D=I=>{const k=Math.exp(-w*T*I);return o-k*((b+w*T*S)/L*Math.sin(L*I)+S*Math.cos(L*I))}}else if(w===1)D=L=>o-Math.exp(-T*L)*(S+(b+T*S)*L);else{const L=T*Math.sqrt(w*w-1);D=I=>{const k=Math.exp(-w*T*I),R=Math.min(L*I,300);return o-k*((b+w*T*S)*Math.sinh(R)+L*S*Math.cosh(R))/L}}const N={calculatedDuration:_&&g||null,next:L=>{const I=D(L);if(_)l.done=L>=g;else{let k=L===0?b:0;w<1&&(k=L===0?Ml(b):cP(D,L,I));const R=Math.abs(k)<=n,U=Math.abs(o-I)<=i;l.done=R&&U}return l.value=l.done?o:I,l},toString:()=>{const L=Math.min(Zw(N),K_),I=lP(k=>N.next(L*k).value,L,30);return L+"ms "+I},toTransition:()=>{}};return N}Q_.applyToOptions=r=>{const e=UF(r,100,Q_);return r.ease=e.ease,r.duration=Ml(e.duration),r.type="keyframes",r};function MT({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:h=.5,restSpeed:m}){const g=r[0],v={done:!1,value:g},_=R=>l!==void 0&&R<l||u!==void 0&&R>u,b=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let w=t*e;const S=g+w,T=o===void 0?S:o(S);T!==S&&(w=T-g);const A=R=>-w*Math.exp(-R/n),D=R=>T+A(R),N=R=>{const U=A(R),H=D(R);v.done=Math.abs(U)<=h,v.value=v.done?T:H};let L,I;const k=R=>{_(v.value)&&(L=R,I=Q_({keyframes:[v.value,b(v.value)],velocity:cP(D,R,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return k(0),{calculatedDuration:null,next:R=>{let U=!1;return!I&&L===void 0&&(U=!0,N(R),k(R)),L!==void 0&&R>=L?I.next(R-L):(!U&&N(R),v)}}}function GF(r,e,t){const n=[],i=t||_u.mix||oP,s=r.length-1;for(let o=0;o<s;o++){let l=i(r[o],r[o+1]);if(e){const u=Array.isArray(e)?e[o]||Yo:e;l=Dv(u,l)}n.push(l)}return n}function HF(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(Vw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const l=GF(e,n,i),u=l.length,h=m=>{if(o&&m<r[0])return e[0];let g=0;if(u>1)for(;g<r.length-2&&!(m<r[g+1]);g++);const v=$0(r[g],r[g+1],m);return l[g](v)};return t?m=>h(Mc(r[0],r[s-1],m)):h}function jF(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=$0(0,e,n);r.push(rr(t,1,i))}}function WF(r){const e=[0];return jF(e,r.length-1),e}function XF(r,e){return r.map(t=>t*e)}function YF(r,e){return r.map(()=>e||KN).splice(0,r.length-1)}function L0({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=rF(n)?n.map(LC):LC(n),s={done:!1,value:e[0]},o=XF(t&&t.length===e.length?t:WF(e),r),l=HF(o,e,{ease:Array.isArray(i)?i:YF(e,i)});return{calculatedDuration:r,next:u=>(s.value=l(u),s.done=u>=r,s)}}const qF=r=>r!==null;function Kw(r,{repeat:e,repeatType:t="loop"},n,i=1){const s=r.filter(qF),l=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!l||n===void 0?s[l]:n}const ZF={decay:MT,inertia:MT,tween:L0,keyframes:L0,spring:Q_};function uP(r){typeof r.type=="string"&&(r.type=ZF[r.type])}class Qw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const KF=r=>r/100;class Jw extends Qw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==aa.now()&&this.tick(aa.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;uP(e);const{type:t=L0,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const u=t||L0;u!==L0&&typeof l[0]!="number"&&(this.mixKeyframes=Dv(KF,oP(l[0],l[1])),l=[0,100]);const h=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=Zw(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:m,repeat:g,repeatType:v,repeatDelay:_,type:b,onUpdate:w,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let D=this.currentTime,N=n;if(g){const R=Math.min(this.currentTime,i)/l;let U=Math.floor(R),H=R%1;!H&&R>=1&&(H=1),H===1&&U--,U=Math.min(U,g+1),U%2&&(v==="reverse"?(H=1-H,_&&(H-=_/l)):v==="mirror"&&(N=o)),D=Mc(0,1,H)*l}const L=A?{done:!1,value:m[0]}:N.next(D);s&&(L.value=s(L.value));let{done:I}=L;!A&&u!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return k&&b!==MT&&(L.value=Kw(m,this.options,S,this.speed)),w&&w(L.value),k&&this.finish(),L}then(e,t){return this.finished.then(e,t)}get duration(){return jo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jo(e)}get time(){return jo(this.currentTime)}set time(e){e=Ml(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(aa.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=jo(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=LF,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(aa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function QF(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const Zh=r=>r*180/Math.PI,TT=r=>{const e=Zh(Math.atan2(r[1],r[0]));return wT(e)},JF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:TT,rotateZ:TT,skewX:r=>Zh(Math.atan(r[1])),skewY:r=>Zh(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},wT=r=>(r=r%360,r<0&&(r+=360),r),zC=TT,VC=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),GC=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),$F={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:VC,scaleY:GC,scale:r=>(VC(r)+GC(r))/2,rotateX:r=>wT(Zh(Math.atan2(r[6],r[5]))),rotateY:r=>wT(Zh(Math.atan2(-r[2],r[0]))),rotateZ:zC,rotate:zC,skewX:r=>Zh(Math.atan(r[4])),skewY:r=>Zh(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function ET(r){return r.includes("scale")?1:0}function AT(r,e){if(!r||r==="none")return ET(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=$F,i=t;else{const l=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=JF,i=l}if(!i)return ET(e);const s=n[e],o=i[1].split(",").map(t5);return typeof s=="function"?s(o):o[s]}const e5=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return AT(t,e)};function t5(r){return parseFloat(r.trim())}const Lm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Um=new Set(Lm),HC=r=>r===Pm||r===qt,n5=new Set(["x","y","z"]),i5=Lm.filter(r=>!n5.has(r));function r5(r){const e=[];return i5.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const _f={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>AT(e,"x"),y:(r,{transform:e})=>AT(e,"y")};_f.translateX=_f.x;_f.translateY=_f.y;const id=new Set;let CT=!1,RT=!1,DT=!1;function fP(){if(RT){const r=Array.from(id).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=r5(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,o])=>{n.getValue(s)?.set(o)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}RT=!1,CT=!1,id.forEach(r=>r.complete(DT)),id.clear()}function hP(){id.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(RT=!0)})}function s5(){DT=!0,hP(),fP(),DT=!1}class $w{constructor(e,t,n,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(id.add(this),CT||(CT=!0,Ni.read(hP),Ni.resolveKeyframes(fP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&t){const l=n.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}QF(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),id.delete(this)}cancel(){this.state==="scheduled"&&(id.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const a5=r=>r.startsWith("--");function o5(r,e,t){a5(e)?r.style.setProperty(e,t):r.style[e]=t}const l5={};function dP(r,e){const t=zN(r);return()=>l5[e]??t()}const c5=dP(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),pP=dP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),w0=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,jC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:w0([0,.65,.55,1]),circOut:w0([.55,0,1,.45]),backIn:w0([.31,.01,.66,-.59]),backOut:w0([.33,1.53,.69,.99])};function mP(r,e){if(r)return typeof r=="function"?pP()?lP(r,e):"ease-out":QN(r)?w0(r):Array.isArray(r)?r.map(t=>mP(t,e)||jC.easeOut):jC[r]}function u5(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},h=void 0){const m={[e]:t};u&&(m.offset=u);const g=mP(l,i);Array.isArray(g)&&(m.easing=g);const v={delay:n,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),r.animate(m,v)}function gP(r){return typeof r=="function"&&"applyToOptions"in r}function f5({type:r,...e}){return gP(r)&&pP()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class vP extends Qw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Vw(typeof e.type!="string");const h=f5(e);this.animation=u5(t,n,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const m=Kw(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):o5(t,n,m),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return jo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jo(e)}get time(){return jo(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ml(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&c5()?(this.animation.timeline=e,Yo):t(this)}}const yP={anticipate:YN,backInOut:XN,circInOut:ZN};function h5(r){return r in yP}function d5(r){typeof r.ease=="string"&&h5(r.ease)&&(r.ease=yP[r.ease])}const YS=10;class p5 extends vP{constructor(e){d5(e),uP(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new Jw({...o,autoplay:!1}),u=Math.max(YS,aa.now()-this.startTime),h=Mc(0,YS,u-YS);t.setWithVelocity(l.sample(Math.max(0,u-h)).value,l.sample(u).value,h),l.stop()}}const WC=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Tl.test(r)||r==="0")&&!r.startsWith("url("));function m5(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function g5(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],o=WC(i,e),l=WC(s,e);return!o||!l?!1:m5(r)||(t==="spring"||gP(t))&&n}function NT(r){r.duration=0,r.type="keyframes"}const v5=new Set(["opacity","clipPath","filter","transform"]),y5=zN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x5(r){const{motionValue:e,name:t,repeatDelay:n,repeatType:i,damping:s,type:o}=r;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return y5()&&t&&v5.has(t)&&(t!=="transform"||!h)&&!u&&!n&&i!=="mirror"&&s!==0&&o!=="inertia"}const _5=40;class b5 extends Qw{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:h,element:m,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=aa.now();const v={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:h,element:m,...g},_=m?.KeyframeResolver||$w;this.keyframeResolver=new _(l,(b,w,S)=>this.onKeyframesResolved(b,w,v,!S),u,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:h,onUpdate:m}=n;this.resolvedAt=aa.now(),g5(e,s,o,l)||((_u.instantAnimations||!u)&&m?.(Kw(e,n,t)),e[0]=e[e.length-1],NT(n),n.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>_5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},_=!h&&x5(v),b=v.motionValue?.owner?.current,w=_?new p5({...v,element:b}):new Jw(v);w.finished.then(()=>{this.notifyFinished()}).catch(Yo),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),s5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function xP(r,e,t,n=0,i=1){const s=Array.from(r).sort((h,m)=>h.sortNodePosition(m)).indexOf(e),o=r.size,l=(o-1)*n;return typeof t=="function"?t(s,o):i===1?s*n:l-s*n}const S5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function M5(r){const e=S5.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function _P(r,e,t=1){const[n,i]=M5(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return FN(o)?parseFloat(o):o}return Ww(i)?_P(i,e,t+1):i}const T5={type:"spring",stiffness:500,damping:25,restSpeed:10},w5=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),E5={type:"keyframes",duration:.8},A5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C5=(r,{keyframes:e})=>e.length>2?E5:Um.has(r)?r.startsWith("scale")?w5(e[1]):T5:A5,R5=r=>r!==null;function D5(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(R5),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}function bP(r,e){if(r?.inherit&&e){const{inherit:t,...n}=r;return{...e,...n}}return r}function eE(r,e){const t=r?.[e]??r?.default??r;return t!==r?bP(t,r):t}function N5({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const tE=(r,e,t,n={},i,s)=>o=>{const l=eE(n,r)||{},u=l.delay||n.delay||0;let{elapsed:h=0}=n;h=h-Ml(u);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:r,motionValue:e,element:s?void 0:i};N5(l)||Object.assign(m,C5(r,m)),m.duration&&(m.duration=Ml(m.duration)),m.repeatDelay&&(m.repeatDelay=Ml(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(NT(m),m.delay===0&&(g=!0)),(_u.instantAnimations||_u.skipAnimations||i?.shouldSkipAnimations)&&(g=!0,NT(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,g&&!s&&e.get()!==void 0){const v=D5(m.keyframes,l);if(v!==void 0){Ni.update(()=>{m.onUpdate(v),m.onComplete()});return}}return l.isSync?new Jw(m):new b5(m)};function XC(r){const e=[{},{}];return r?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function nE(r,e,t,n){if(typeof e=="function"){const[i,s]=XC(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=XC(n);e=e(t!==void 0?t:r.custom,i,s)}return e}function lm(r,e,t){const n=r.getProps();return nE(n,e,t!==void 0?t:n.custom,r)}const SP=new Set(["width","height","top","left","right","bottom",...Lm]),YC=30,P5=r=>!isNaN(parseFloat(r));class L5{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=aa.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=aa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=P5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Gw);const n=this.events[e].add(t);return e==="change"?()=>{n(),Ni.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=aa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>YC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,YC);return VN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gm(r,e){return new L5(r,e)}const PT=r=>Array.isArray(r);function U5(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,gm(t))}function I5(r){return PT(r)?r[r.length-1]||0:r}function O5(r,e){const t=lm(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const o in s){const l=I5(s[o]);U5(r,o,l)}}const ks=r=>!!(r&&r.getVelocity);function F5(r){return!!(ks(r)&&r.add)}function LT(r,e){const t=r.getValue("willChange");if(F5(t))return t.add(e);if(!t&&_u.WillChange){const n=new _u.WillChange("auto");r.addValue("willChange",n),n.add(e)}}function iE(r){return r.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const k5="framerAppearId",MP="data-"+iE(k5);function TP(r){return r.props[MP]}function B5({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function wP(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s,transitionEnd:o,...l}=e;const u=r.getDefaultTransition();s=s?bP(s,u):u;const h=s?.reduceMotion;n&&(s=n);const m=[],g=i&&r.animationState&&r.animationState.getState()[i];for(const v in l){const _=r.getValue(v,r.latestValues[v]??null),b=l[v];if(b===void 0||g&&B5(g,v))continue;const w={delay:t,...eE(s||{},v)},S=_.get();if(S!==void 0&&!_.isAnimating&&!Array.isArray(b)&&b===S&&!w.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const N=TP(r);if(N){const L=window.MotionHandoffAnimation(N,v,Ni);L!==null&&(w.startTime=L,T=!0)}}LT(r,v);const A=h??r.shouldReduceMotion;_.start(tE(v,_,b,A&&SP.has(v)?{type:!1}:w,r,T));const D=_.animation;D&&m.push(D)}if(o){const v=()=>Ni.update(()=>{o&&O5(r,o)});m.length?Promise.all(m).then(v):v()}return m}function UT(r,e,t={}){const n=lm(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(wP(r,n,t)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return z5(r,e,u,h,m,g,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,h]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>h())}else return Promise.all([s(),o(t.delay)])}function z5(r,e,t=0,n=0,i=0,s=1,o){const l=[];for(const u of r.variantChildren)u.notify("AnimationStart",e),l.push(UT(u,e,{...o,delay:t+(typeof n=="function"?0:n)+xP(r.variantChildren,u,n,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function V5(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>UT(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=UT(r,e,t);else{const i=typeof e=="function"?lm(r,e,t.custom):e;n=Promise.all(wP(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}const G5={test:r=>r==="auto",parse:r=>r},EP=r=>e=>e.test(r),AP=[Pm,qt,bc,yf,vF,gF,G5],qC=r=>AP.find(EP(r));function H5(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||BN(r):!0}const j5=new Set(["brightness","contrast","saturate","opacity"]);function W5(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(Xw)||[];if(!n)return r;const i=t.replace(n,"");let s=j5.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const X5=/\b([a-z-]*)\(.*?\)/gu,IT={...Tl,getAnimatableNone:r=>{const e=r.match(X5);return e?e.map(W5).join(" "):r}},OT={...Tl,getAnimatableNone:r=>{const e=Tl.parse(r);return Tl.createTransformer(r)(e.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},ZC={...Pm,transform:Math.round},Y5={rotate:yf,rotateX:yf,rotateY:yf,rotateZ:yf,scale:Cx,scaleX:Cx,scaleY:Cx,scaleZ:Cx,skew:yf,skewX:yf,skewY:yf,distance:qt,translateX:qt,translateY:qt,translateZ:qt,x:qt,y:qt,z:qt,perspective:qt,transformPerspective:qt,opacity:ev,originX:IC,originY:IC,originZ:qt},rE={borderWidth:qt,borderTopWidth:qt,borderRightWidth:qt,borderBottomWidth:qt,borderLeftWidth:qt,borderRadius:qt,borderTopLeftRadius:qt,borderTopRightRadius:qt,borderBottomRightRadius:qt,borderBottomLeftRadius:qt,width:qt,maxWidth:qt,height:qt,maxHeight:qt,top:qt,right:qt,bottom:qt,left:qt,inset:qt,insetBlock:qt,insetBlockStart:qt,insetBlockEnd:qt,insetInline:qt,insetInlineStart:qt,insetInlineEnd:qt,padding:qt,paddingTop:qt,paddingRight:qt,paddingBottom:qt,paddingLeft:qt,paddingBlock:qt,paddingBlockStart:qt,paddingBlockEnd:qt,paddingInline:qt,paddingInlineStart:qt,paddingInlineEnd:qt,margin:qt,marginTop:qt,marginRight:qt,marginBottom:qt,marginLeft:qt,marginBlock:qt,marginBlockStart:qt,marginBlockEnd:qt,marginInline:qt,marginInlineStart:qt,marginInlineEnd:qt,fontSize:qt,backgroundPositionX:qt,backgroundPositionY:qt,...Y5,zIndex:ZC,fillOpacity:ev,strokeOpacity:ev,numOctaves:ZC},q5={...rE,color:Fr,backgroundColor:Fr,outlineColor:Fr,fill:Fr,stroke:Fr,borderColor:Fr,borderTopColor:Fr,borderRightColor:Fr,borderBottomColor:Fr,borderLeftColor:Fr,filter:IT,WebkitFilter:IT,mask:OT,WebkitMask:OT},CP=r=>q5[r],Z5=new Set([IT,OT]);function RP(r,e){let t=CP(r);return Z5.has(t)||(t=Tl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const K5=new Set(["auto","none","0"]);function Q5(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!K5.has(s)&&tv(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=RP(t,i)}class J5 extends $w{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),Ww(g))){const v=_P(g,t.current);v!==void 0&&(e[m]=v),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!SP.has(n)||e.length!==2)return;const[i,s]=e,o=qC(i),l=qC(s),u=UC(i),h=UC(s);if(u!==h&&_f[n]){this.needsMeasurement=!0;return}if(o!==l)if(HC(o)&&HC(l))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else _f[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||H5(e[i]))&&n.push(i);n.length&&Q5(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_f[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=_f[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const $5=new Set(["opacity","clipPath","filter","transform"]);function sE(r,e,t){if(r==null)return[];if(r instanceof EventTarget)return[r];if(typeof r=="string"){const i=document.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r).filter(n=>n!=null)}const DP=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function FT(r){return kN(r)&&"offsetHeight"in r}const{schedule:aE}=JN(queueMicrotask,!1),_l={x:!1,y:!1};function NP(){return _l.x||_l.y}function e2(r){return r==="x"||r==="y"?_l[r]?null:(_l[r]=!0,()=>{_l[r]=!1}):_l.x||_l.y?null:(_l.x=_l.y=!0,()=>{_l.x=_l.y=!1})}function PP(r,e){const t=sE(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function t2(r){return!(r.pointerType==="touch"||NP())}function n2(r,e,t={}){const[n,i,s]=PP(r,t);return n.forEach(o=>{let l=!1,u=!1,h;const m=()=>{o.removeEventListener("pointerleave",b)},g=S=>{h&&(h(S),h=void 0),m()},v=S=>{l=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),u&&(u=!1,g(S))},_=()=>{l=!0,window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",v,i)},b=S=>{if(S.pointerType!=="touch"){if(l){u=!0;return}g(S)}},w=S=>{if(!t2(S))return;u=!1;const T=e(o,S);typeof T=="function"&&(h=T,o.addEventListener("pointerleave",b,i))};o.addEventListener("pointerenter",w,i),o.addEventListener("pointerdown",_,i)}),s}const LP=(r,e)=>e?r===e?!0:LP(r,e.parentElement):!1,oE=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,i2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function r2(r){return i2.has(r.tagName)||r.isContentEditable===!0}const s2=new Set(["INPUT","SELECT","TEXTAREA"]);function a2(r){return s2.has(r.tagName)||r.isContentEditable===!0}const L_=new WeakSet;function KC(r){return e=>{e.key==="Enter"&&r(e)}}function qS(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const o2=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=KC(()=>{if(L_.has(t))return;qS(t,"down");const i=KC(()=>{qS(t,"up")}),s=()=>qS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function QC(r){return oE(r)&&!NP()}const JC=new WeakSet;function l2(r,e,t={}){const[n,i,s]=PP(r,t),o=l=>{const u=l.currentTarget;if(!QC(l)||JC.has(l))return;L_.add(u),t.stopPropagation&&JC.add(l);const h=e(u,l),m=(_,b)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),L_.has(u)&&L_.delete(u),QC(_)&&typeof h=="function"&&h(_,{success:b})},g=_=>{m(_,u===window||u===document||t.useGlobalTarget||LP(u,_.target))},v=_=>{m(_,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return n.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),FT(l)&&(l.addEventListener("focus",h=>o2(h,i)),!r2(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function lE(r){return kN(r)&&"ownerSVGElement"in r}const U_=new WeakMap;let I_;const UP=(r,e,t)=>(n,i)=>i&&i[0]?i[0][r+"Size"]:lE(n)&&"getBBox"in n?n.getBBox()[e]:n[t],c2=UP("inline","width","offsetWidth"),u2=UP("block","height","offsetHeight");function f2({target:r,borderBoxSize:e}){U_.get(r)?.forEach(t=>{t(r,{get width(){return c2(r,e)},get height(){return u2(r,e)}})})}function h2(r){r.forEach(f2)}function d2(){typeof ResizeObserver>"u"||(I_=new ResizeObserver(h2))}function p2(r,e){I_||d2();const t=sE(r);return t.forEach(n=>{let i=U_.get(n);i||(i=new Set,U_.set(n,i)),i.add(e),I_?.observe(n)}),()=>{t.forEach(n=>{const i=U_.get(n);i?.delete(e),i?.size||I_?.unobserve(n)})}}const O_=new Set;let $p;function m2(){$p=()=>{const r={get width(){return window.innerWidth},get height(){return window.innerHeight}};O_.forEach(e=>e(r))},window.addEventListener("resize",$p)}function g2(r){return O_.add(r),$p||m2(),()=>{O_.delete(r),!O_.size&&typeof $p=="function"&&(window.removeEventListener("resize",$p),$p=void 0)}}function $C(r,e){return typeof r=="function"?g2(r):p2(r,e)}function v2(r){return lE(r)&&r.tagName==="svg"}const y2=[...AP,Fr,Tl],x2=r=>y2.find(EP(r)),e3=()=>({translate:0,scale:1,origin:0,originPoint:0}),em=()=>({x:e3(),y:e3()}),t3=()=>({min:0,max:0}),Wr=()=>({x:t3(),y:t3()}),_2=new WeakMap;function fb(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function nv(r){return typeof r=="string"||Array.isArray(r)}const cE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uE=["initial",...cE];function hb(r){return fb(r.animate)||uE.some(e=>nv(r[e]))}function IP(r){return!!(hb(r)||r.variants)}function b2(r,e,t){for(const n in e){const i=e[n],s=t[n];if(ks(i))r.addValue(n,i);else if(ks(s))r.addValue(n,gm(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const o=r.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=r.getStaticValue(n);r.addValue(n,gm(o!==void 0?o:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const kT={current:null},OP={current:!1},S2=typeof window<"u";function M2(){if(OP.current=!0,!!S2)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>kT.current=r.matches;r.addEventListener("change",e),e()}else kT.current=!1}const n3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let J_={};function FP(r){J_=r}function T2(){return J_}class w2{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=$w,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=aa.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Ni.render(this.render,!1,!0))};const{latestValues:h,renderState:m}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=hb(t),this.isVariantNode=IP(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const b=v[_];h[_]!==void 0&&ks(b)&&b.set(h[_])}}mount(e){if(this.hasBeenMounted)for(const t in this.initialValues)this.values.get(t)?.jump(this.initialValues[t]),this.latestValues[t]=this.initialValues[t];this.current=e,_2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(OP.current||M2(),this.shouldReduceMotion=kT.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),Df(this.notifyUpdate),Df(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&$5.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:l,times:u,ease:h,duration:m}=t.accelerate,g=new vP({element:this.current,name:e,keyframes:l,times:u,ease:h,duration:Ml(m)}),v=o(g);this.valueSubscriptions.set(e,()=>{v(),g.cancel()});return}const n=Um.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ni.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in J_){const t=J_[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<n3.length;n++){const i=n3[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=b2(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=gm(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(FN(n)||BN(n))?n=parseFloat(n):!x2(n)&&Tl.test(t)&&(n=RP(e,t)),this.setBaseTarget(e,ks(n)?n.get():n)),ks(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const s=nE(this.props,t,this.presenceContext?.custom);s&&(n=s[e])}if(t&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ks(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Gw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){aE.render(this.render)}}class kP extends w2{constructor(){super(...arguments),this.KeyframeResolver=J5}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ks(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class kf{constructor(e){this.isMounted=!1,this.node=e}update(){}}function BP({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function E2({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function A2(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function ZS(r){return r===void 0||r===1}function BT({scale:r,scaleX:e,scaleY:t}){return!ZS(r)||!ZS(e)||!ZS(t)}function Gh(r){return BT(r)||zP(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function zP(r){return i3(r.x)||i3(r.y)}function i3(r){return r&&r!=="0%"}function $_(r,e,t){const n=r-t,i=e*n;return t+i}function r3(r,e,t,n,i){return i!==void 0&&(r=$_(r,i,n)),$_(r,t,n)+e}function zT(r,e=0,t=1,n,i){r.min=r3(r.min,e,t,n,i),r.max=r3(r.max,e,t,n,i)}function VP(r,{x:e,y:t}){zT(r.x,e.translate,e.scale,e.originPoint),zT(r.y,t.translate,t.scale,t.originPoint)}const s3=.999999999999,a3=1.0000000000001;function C2(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=t[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&nm(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VP(r,o)),n&&Gh(s.latestValues)&&nm(r,s.latestValues))}e.x<a3&&e.x>s3&&(e.x=1),e.y<a3&&e.y>s3&&(e.y=1)}function tm(r,e){r.min=r.min+e,r.max=r.max+e}function o3(r,e,t,n,i=.5){const s=rr(r.min,r.max,i);zT(r,e,t,s,n)}function nm(r,e){o3(r.x,e.x,e.scaleX,e.scale,e.originX),o3(r.y,e.y,e.scaleY,e.scale,e.originY)}function GP(r,e){return BP(A2(r.getBoundingClientRect(),e))}function R2(r,e,t){const n=GP(r,t),{scroll:i}=e;return i&&(tm(n.x,i.offset.x),tm(n.y,i.offset.y)),n}const D2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},N2=Lm.length;function P2(r,e,t){let n="",i=!0;for(let s=0;s<N2;s++){const o=Lm[s],l=r[o];if(l===void 0)continue;let u=!0;if(typeof l=="number")u=l===(o.startsWith("scale")?1:0);else{const h=parseFloat(l);u=o.startsWith("scale")?h===1:h===0}if(!u||t){const h=DP(l,rE[o]);if(!u){i=!1;const m=D2[o]||o;n+=`${m}(${h}) `}t&&(e[o]=h)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function fE(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let o=!1,l=!1;for(const u in e){const h=e[u];if(Um.has(u)){o=!0;continue}else if(eP(u)){i[u]=h;continue}else{const m=DP(h,rE[u]);u.startsWith("origin")?(l=!0,s[u]=m):n[u]=m}}if(e.transform||(o||t?n.transform=P2(e,r.transform,t):n.transform&&(n.transform="none")),l){const{originX:u="50%",originY:h="50%",originZ:m=0}=s;n.transformOrigin=`${u} ${h} ${m}`}}function HP(r,{style:e,vars:t},n,i){const s=r.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,n);for(o in t)s.setProperty(o,t[o])}function l3(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const o0={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(qt.test(r))r=parseFloat(r);else return r;const t=l3(r,e.target.x),n=l3(r,e.target.y);return`${t}% ${n}%`}},L2={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=Tl.parse(r);if(i.length>5)return n;const s=Tl.createTransformer(r),o=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const h=rr(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),s(i)}},VT={borderRadius:{...o0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:o0,borderTopRightRadius:o0,borderBottomLeftRadius:o0,borderBottomRightRadius:o0,boxShadow:L2};function jP(r,{layout:e,layoutId:t}){return Um.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!VT[r]||r==="opacity")}function hE(r,e,t){const n=r.style,i=e?.style,s={};if(!n)return s;for(const o in n)(ks(n[o])||i&&ks(i[o])||jP(o,r)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=n[o]);return s}function U2(r){return window.getComputedStyle(r)}class I2 extends kP{constructor(){super(...arguments),this.type="html",this.renderInstance=HP}readValueFromInstance(e,t){if(Um.has(t))return this.projection?.isProjecting?ET(t):e5(e,t);{const n=U2(e),i=(eP(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return GP(e,t)}build(e,t,n){fE(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return hE(e,t,n)}}const O2={offset:"stroke-dashoffset",array:"stroke-dasharray"},F2={offset:"strokeDashoffset",array:"strokeDasharray"};function k2(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?O2:F2;r[s.offset]=`${-n}`,r[s.array]=`${e} ${t}`}const B2=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function WP(r,{attrX:e,attrY:t,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,h,m){if(fE(r,l,h),u){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:g,style:v}=r;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete g.transformBox);for(const _ of B2)g[_]!==void 0&&(v[_]=g[_],delete g[_]);e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),n!==void 0&&(g.scale=n),i!==void 0&&k2(g,i,s,o,!1)}const XP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),YP=r=>typeof r=="string"&&r.toLowerCase()==="svg";function z2(r,e,t,n){HP(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(XP.has(i)?i:iE(i),e.attrs[i])}function qP(r,e,t){const n=hE(r,e,t);for(const i in r)if(ks(r[i])||ks(e[i])){const s=Lm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}class V2 extends kP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Um.has(t)){const n=CP(t);return n&&n.default||0}return t=XP.has(t)?t:iE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return qP(e,t,n)}build(e,t,n){WP(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){z2(e,t,n,i)}mount(e){this.isSVGTag=YP(e.tagName),super.mount(e)}}const G2=uE.length;function ZP(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?ZP(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<G2;t++){const n=uE[t],i=r.props[n];(nv(i)||i===!1)&&(e[n]=i)}return e}function KP(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const H2=[...cE].reverse(),j2=cE.length;function W2(r){return e=>Promise.all(e.map(({animation:t,options:n})=>V5(r,t,n)))}function X2(r){let e=W2(r),t=c3(),n=!0;const i=u=>(h,m)=>{const g=lm(r,m,u==="exit"?r.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:_,...b}=g;h={...h,...b,..._}}return h};function s(u){e=u(r)}function o(u){const{props:h}=r,m=ZP(r.parent)||{},g=[],v=new Set;let _={},b=1/0;for(let S=0;S<j2;S++){const T=H2[S],A=t[T],D=h[T]!==void 0?h[T]:m[T],N=nv(D),L=T===u?A.isActive:null;L===!1&&(b=S);let I=D===m[T]&&D!==h[T]&&N;if(I&&n&&r.manuallyAnimateOnMount&&(I=!1),A.protectedKeys={..._},!A.isActive&&L===null||!D&&!A.prevProp||fb(D)||typeof D=="boolean")continue;if(T==="exit"&&A.isActive&&L!==!0){A.prevResolvedValues&&(_={..._,...A.prevResolvedValues});continue}const k=Y2(A.prevProp,D);let R=k||T===u&&A.isActive&&!I&&N||S>b&&N,U=!1;const H=Array.isArray(D)?D:[D];let Y=H.reduce(i(T),{});L===!1&&(Y={});const{prevResolvedValues:X={}}=A,q={...X,...Y},Q=J=>{R=!0,v.has(J)&&(U=!0,v.delete(J)),A.needsAnimating[J]=!0;const de=r.getValue(J);de&&(de.liveStyle=!1)};for(const J in q){const de=Y[J],le=X[J];if(_.hasOwnProperty(J))continue;let ce=!1;PT(de)&&PT(le)?ce=!KP(de,le):ce=de!==le,ce?de!=null?Q(J):v.add(J):de!==void 0&&v.has(J)?Q(J):A.protectedKeys[J]=!0}A.prevProp=D,A.prevResolvedValues=Y,A.isActive&&(_={..._,...Y}),n&&r.blockInitialAnimation&&(R=!1);const ie=I&&k;R&&(!ie||U)&&g.push(...H.map(J=>{const de={type:T};if(typeof J=="string"&&n&&!ie&&r.manuallyAnimateOnMount&&r.parent){const{parent:le}=r,ce=lm(le,J);if(le.enteringChildren&&ce){const{delayChildren:z}=ce.transition||{};de.delay=xP(le.enteringChildren,r,z)}}return{animation:J,options:de}}))}if(v.size){const S={};if(typeof h.initial!="boolean"){const T=lm(r,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(S.transition=T.transition)}v.forEach(T=>{const A=r.getBaseTarget(T),D=r.getValue(T);D&&(D.liveStyle=!0),S[T]=A??null}),g.push({animation:S})}let w=!!g.length;return n&&(h.initial===!1||h.initial===h.animate)&&!r.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(g):Promise.resolve()}function l(u,h){if(t[u].isActive===h)return Promise.resolve();r.variantChildren?.forEach(g=>g.animationState?.setActive(u,h)),t[u].isActive=h;const m=o(u);for(const g in t)t[g].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=c3()}}}function Y2(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!KP(e,r):!1}function Th(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function c3(){return{animate:Th(!0),whileInView:Th(),whileHover:Th(),whileTap:Th(),whileDrag:Th(),whileFocus:Th(),exit:Th()}}function u3(r,e){r.min=e.min,r.max=e.max}function ml(r,e){u3(r.x,e.x),u3(r.y,e.y)}function f3(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}const QP=1e-4,q2=1-QP,Z2=1+QP,JP=.01,K2=0-JP,Q2=0+JP;function oa(r){return r.max-r.min}function J2(r,e,t){return Math.abs(r-e)<=t}function h3(r,e,t,n=.5){r.origin=n,r.originPoint=rr(e.min,e.max,r.origin),r.scale=oa(t)/oa(e),r.translate=rr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=q2&&r.scale<=Z2||isNaN(r.scale))&&(r.scale=1),(r.translate>=K2&&r.translate<=Q2||isNaN(r.translate))&&(r.translate=0)}function U0(r,e,t,n){h3(r.x,e.x,t.x,n?n.originX:void 0),h3(r.y,e.y,t.y,n?n.originY:void 0)}function d3(r,e,t){r.min=t.min+e.min,r.max=r.min+oa(e)}function $2(r,e,t){d3(r.x,e.x,t.x),d3(r.y,e.y,t.y)}function p3(r,e,t){r.min=e.min-t.min,r.max=r.min+oa(e)}function e1(r,e,t){p3(r.x,e.x,t.x),p3(r.y,e.y,t.y)}function m3(r,e,t,n,i){return r-=e,r=$_(r,1/t,n),i!==void 0&&(r=$_(r,1/i,n)),r}function ek(r,e=0,t=1,n=.5,i,s=r,o=r){if(bc.test(e)&&(e=parseFloat(e),e=rr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=rr(s.min,s.max,n);r===s&&(l-=e),r.min=m3(r.min,e,t,l,i),r.max=m3(r.max,e,t,l,i)}function g3(r,e,[t,n,i],s,o){ek(r,e[t],e[n],e[i],e.scale,s,o)}const tk=["x","scaleX","originX"],nk=["y","scaleY","originY"];function v3(r,e,t,n){g3(r.x,e,tk,t?t.x:void 0,n?n.x:void 0),g3(r.y,e,nk,t?t.y:void 0,n?n.y:void 0)}function y3(r){return r.translate===0&&r.scale===1}function $P(r){return y3(r.x)&&y3(r.y)}function x3(r,e){return r.min===e.min&&r.max===e.max}function ik(r,e){return x3(r.x,e.x)&&x3(r.y,e.y)}function _3(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function eL(r,e){return _3(r.x,e.x)&&_3(r.y,e.y)}function b3(r){return oa(r.x)/oa(r.y)}function S3(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}function pc(r){return[r("x"),r("y")]}function rk(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,o=t?.z||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:v,skewX:_,skewY:b}=t;h&&(n=`perspective(${h}px) ${n}`),m&&(n+=`rotate(${m}deg) `),g&&(n+=`rotateX(${g}deg) `),v&&(n+=`rotateY(${v}deg) `),_&&(n+=`skewX(${_}deg) `),b&&(n+=`skewY(${b}deg) `)}const l=r.x.scale*e.x,u=r.y.scale*e.y;return(l!==1||u!==1)&&(n+=`scale(${l}, ${u})`),n||"none"}const tL=["TopLeft","TopRight","BottomLeft","BottomRight"],sk=tL.length,M3=r=>typeof r=="string"?parseFloat(r):r,T3=r=>typeof r=="number"||qt.test(r);function ak(r,e,t,n,i,s){i?(r.opacity=rr(0,t.opacity??1,ok(n)),r.opacityExit=rr(e.opacity??1,0,lk(n))):s&&(r.opacity=rr(e.opacity??1,t.opacity??1,n));for(let o=0;o<sk;o++){const l=`border${tL[o]}Radius`;let u=w3(e,l),h=w3(t,l);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||T3(u)===T3(h)?(r[l]=Math.max(rr(M3(u),M3(h),n),0),(bc.test(h)||bc.test(u))&&(r[l]+="%")):r[l]=h}(e.rotate||t.rotate)&&(r.rotate=rr(e.rotate||0,t.rotate||0,n))}function w3(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const ok=nL(0,.5,qN),lk=nL(.5,.95,Yo);function nL(r,e,t){return n=>n<r?0:n>e?1:t($0(r,e,n))}function ck(r,e,t){const n=ks(r)?r:gm(r);return n.start(tE("",n,e,t)),n.animation}function iv(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}const uk=(r,e)=>r.depth-e.depth;class fk{constructor(){this.children=[],this.isDirty=!1}add(e){zw(this.children,e),this.isDirty=!0}remove(e){q_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uk),this.isDirty=!1,this.children.forEach(e)}}function hk(r,e){const t=aa.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(Df(n),r(s-e))};return Ni.setup(n,!0),()=>Df(n)}function F_(r){return ks(r)?r.get():r}class dk{constructor(){this.members=[]}add(e){zw(this.members,e);for(let t=this.members.length-1;t>=0;t--){const n=this.members[t];if(n===e||n===this.lead||n===this.prevLead)continue;const i=n.instance;i&&i.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&q_(this.members,n)}e.scheduleRender()}remove(e){if(q_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i],o=s.instance;if(s.isPresent!==!1&&(!o||o.isConnected!==!1)){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const i=n.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const u=n.instance;u&&u.isConnected===!1&&!n.snapshot||(e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const k_={hasAnimatedSinceResize:!0,hasEverUpdated:!1},KS=["","X","Y","Z"],pk=1e3;let mk=0;function QS(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function iL(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=TP(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Ni,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&iL(n)}function rL({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e?.()){this.id=mk++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yk),this.nodes.forEach(Sk),this.nodes.forEach(Mk),this.nodes.forEach(xk)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new fk)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Gw),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=lE(o)&&!v2(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),r){let m,g=0;const v=()=>this.root.updateBlockedByResize=!1;Ni.read(()=>{g=window.innerWidth}),r(o,()=>{const _=window.innerWidth;_!==g&&(g=_,this.root.updateBlockedByResize=!0,m&&m(),m=hk(v,250),k_.hasAnimatedSinceResize&&(k_.hasAnimatedSinceResize=!1,this.nodes.forEach(C3)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||Ck,{onLayoutAnimationStart:w,onLayoutAnimationComplete:S}=h.getProps(),T=!this.targetLayout||!eL(this.targetLayout,_),A=!g&&v;if(this.options.layoutRoot||this.resumeFrom||A||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...eE(b,"layout"),onPlay:w,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(m,A)}else g||C3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Df(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Tk),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(E3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(A3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bk),this.nodes.forEach(gk),this.nodes.forEach(vk)):this.nodes.forEach(A3),this.clearAllSnapshots();const l=aa.now();ys.delta=Mc(0,1e3/60,l-ys.timestamp),ys.timestamp=l,ys.isProcessing=!0,GS.update.process(ys),GS.preRender.process(ys),GS.render.process(ys),ys.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,aE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_k),this.sharedNodes.forEach(wk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ni.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ni.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!oa(this.snapshot.measuredBox.x)&&!oa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Wr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!$P(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&this.instance&&(l||Gh(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),Rk(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Wr();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Dk))){const{scroll:h}=this.root;h&&(tm(l.x,h.offset.x),tm(l.y,h.offset.y))}return l}removeElementScroll(o){const l=Wr();if(ml(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:m,options:g}=h;h!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&ml(l,o),tm(l.x,m.offset.x),tm(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const u=Wr();ml(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&nm(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Gh(m.latestValues)&&nm(u,m.latestValues)}return Gh(this.latestValues)&&nm(u,this.latestValues),u}removeTransform(o){const l=Wr();ml(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Gh(h.latestValues))continue;BT(h.latestValues)&&h.updateSnapshot();const m=Wr(),g=h.measurePageBox();ml(m,g),v3(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Gh(this.latestValues)&&v3(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ys.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!this.layout||!(m||g))return;this.resolvedRelativeTargetAt=ys.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Wr(),this.targetWithTransforms=Wr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ml(this.target,this.layout.layoutBox),VP(this.target,this.targetDelta)):ml(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||BT(this.parent.latestValues)||zP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wr(),this.relativeTargetOrigin=Wr(),e1(this.relativeTargetOrigin,l,u),ml(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ys.timestamp&&(u=!1),u)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;ml(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;C2(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Wr());const{target:_}=o;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(f3(this.prevProjectionDelta.x,this.projectionDelta.x),f3(this.prevProjectionDelta.y,this.projectionDelta.y)),U0(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!S3(this.projectionDelta.x,this.prevProjectionDelta.x)||!S3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=em(),this.projectionDelta=em(),this.projectionDeltaWithTransform=em()}setAnimationOrigin(o,l=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=em();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Wr(),_=u?u.source:void 0,b=this.layout?this.layout.source:void 0,w=_!==b,S=this.getStack(),T=!S||S.members.length<=1,A=!!(w&&!T&&this.options.crossfade===!0&&!this.path.some(Ak));this.animationProgress=0;let D;this.mixTargetDelta=N=>{const L=N/1e3;R3(g.x,o.x,L),R3(g.y,o.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(e1(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ek(this.relativeTarget,this.relativeTargetOrigin,v,L),D&&ik(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Wr()),ml(D,this.relativeTarget)),w&&(this.animationValues=m,ak(m,h,this.latestValues,L,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Df(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ni.update(()=>{k_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gm(0)),this.motionValue.jump(0,!1),this.currentAnimation=ck(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:h,latestValues:m}=o;if(!(!l||!u||!h)){if(this!==o&&this.layout&&h&&sL(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Wr();const g=oa(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const v=oa(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+v}ml(l,u),nm(l,m),U0(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new dk),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const h={};u.z&&QS("z",o,h,this.animationValues);for(let m=0;m<KS.length;m++)QS(`rotate${KS[m]}`,o,h,this.animationValues),QS(`skew${KS[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=F_(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=F_(l?.pointerEvents)||""),this.hasProjected&&!Gh(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=rk(this.projectionDeltaWithTransform,this.treeScale,m);u&&(g=u(m,g)),o.transform=g;const{x:v,y:_}=this.projectionDelta;o.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,h.animationValues?o.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in VT){if(m[b]===void 0)continue;const{correct:w,applyTo:S,isCSSVariable:T}=VT[b],A=g==="none"?m[b]:w(m[b],h);if(S){const D=S.length;for(let N=0;N<D;N++)o[S[N]]=A}else T?this.options.visualElement.renderState.vars[b]=A:o[b]=A}this.options.layoutId&&(o.pointerEvents=h===this?F_(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(E3),this.root.sharedNodes.clear()}}}function gk(r){r.updateLayout()}function vk(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=r.layout,{animationType:i}=r.options,s=e.source!==r.layout.source;i==="size"?pc(m=>{const g=s?e.measuredBox[m]:e.layoutBox[m],v=oa(g);g.min=t[m].min,g.max=g.min+v}):sL(i,e.layoutBox,t)&&pc(m=>{const g=s?e.measuredBox[m]:e.layoutBox[m],v=oa(t[m]);g.max=g.min+v,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[m].max=r.relativeTarget[m].min+v)});const o=em();U0(o,t,e.layoutBox);const l=em();s?U0(l,r.applyTransform(n,!0),e.measuredBox):U0(l,t,e.layoutBox);const u=!$P(o);let h=!1;if(!r.resumeFrom){const m=r.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:v}=m;if(g&&v){const _=Wr();e1(_,e.layoutBox,g.layoutBox);const b=Wr();e1(b,t,v.layoutBox),eL(_,b)||(h=!0),m.options.layoutRoot&&(r.relativeTarget=b,r.relativeTargetOrigin=_,r.relativeParent=m)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function yk(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function xk(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function _k(r){r.clearSnapshot()}function E3(r){r.clearMeasurements()}function A3(r){r.isLayoutDirty=!1}function bk(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function C3(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function Sk(r){r.resolveTargetDelta()}function Mk(r){r.calcProjection()}function Tk(r){r.resetSkewAndRotation()}function wk(r){r.removeLeadSnapshot()}function R3(r,e,t){r.translate=rr(e.translate,0,t),r.scale=rr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function D3(r,e,t,n){r.min=rr(e.min,t.min,n),r.max=rr(e.max,t.max,n)}function Ek(r,e,t,n){D3(r.x,e.x,t.x,n),D3(r.y,e.y,t.y,n)}function Ak(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const Ck={duration:.45,ease:[.4,0,.1,1]},N3=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),P3=N3("applewebkit/")&&!N3("chrome/")?Math.round:Yo;function L3(r){r.min=P3(r.min),r.max=P3(r.max)}function Rk(r){L3(r.x),L3(r.y)}function sL(r,e,t){return r==="position"||r==="preserve-aspect"&&!J2(b3(e),b3(t),.2)}function Dk(r){return r!==r.root&&r.scroll?.wasRoot}const Nk=rL({attachResizeListener:(r,e)=>iv(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),JS={current:void 0},aL=rL({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!JS.current){const r=new Nk({});r.mount(window),r.setOptions({layoutScroll:!0}),JS.current=r}return JS.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),dE=Re.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function U3(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Pk(...r){return e=>{let t=!1;const n=r.map(i=>{const s=U3(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():U3(r[i],null)}}}}function Lk(...r){return Re.useCallback(Pk(...r),r)}class Uk extends Re.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=t.offsetParent,i=FT(n)&&n.offsetWidth||0,s=FT(n)&&n.offsetHeight||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Ik({children:r,isPresent:e,anchorX:t,anchorY:n,root:i,pop:s}){const o=Re.useId(),l=Re.useRef(null),u=Re.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=Re.useContext(dE),m=r.props?.ref??r?.ref,g=Lk(l,m);return Re.useInsertionEffect(()=>{const{width:v,height:_,top:b,left:w,right:S,bottom:T}=u.current;if(e||s===!1||!l.current||!v||!_)return;const A=t==="left"?`left: ${w}`:`right: ${S}`,D=n==="bottom"?`bottom: ${T}`:`top: ${b}`;l.current.dataset.motionPopId=o;const N=document.createElement("style");h&&(N.nonce=h);const L=i??document.head;return L.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${_}px !important;
            ${A}px !important;
            ${D}px !important;
          }
        `),()=>{L.contains(N)&&L.removeChild(N)}},[e]),F.jsx(Uk,{isPresent:e,childRef:l,sizeRef:u,pop:s,children:s===!1?r:Re.cloneElement(r,{ref:g})})}const Ok=({children:r,initial:e,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,anchorY:u,root:h})=>{const m=Bw(Fk),g=Re.useId();let v=!0,_=Re.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:i,onExitComplete:b=>{m.set(b,!0);for(const w of m.values())if(!w)return;n&&n()},register:b=>(m.set(b,!1),()=>m.delete(b))}),[t,m,n]);return s&&v&&(_={..._}),Re.useMemo(()=>{m.forEach((b,w)=>m.set(w,!1))},[t]),Re.useEffect(()=>{!t&&!m.size&&n&&n()},[t]),r=F.jsx(Ik,{pop:o==="popLayout",isPresent:t,anchorX:l,anchorY:u,root:h,children:r}),F.jsx(ub.Provider,{value:_,children:r})};function Fk(){return new Map}function oL(r=!0){const e=Re.useContext(ub);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=Re.useId();Re.useEffect(()=>{if(r)return i(s)},[r]);const o=Re.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,o]:[!0]}const Rx=r=>r.key||"";function I3(r){const e=[];return Re.Children.forEach(r,t=>{Re.isValidElement(t)&&e.push(t)}),e}const t1=({children:r,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",anchorY:u="top",root:h})=>{const[m,g]=oL(o),v=Re.useMemo(()=>I3(r),[r]),_=o&&!m?[]:v.map(Rx),b=Re.useRef(!0),w=Re.useRef(v),S=Bw(()=>new Map),T=Re.useRef(new Set),[A,D]=Re.useState(v),[N,L]=Re.useState(v);ON(()=>{b.current=!1,w.current=v;for(let R=0;R<N.length;R++){const U=Rx(N[R]);_.includes(U)?(S.delete(U),T.current.delete(U)):S.get(U)!==!0&&S.set(U,!1)}},[N,_.length,_.join("-")]);const I=[];if(v!==A){let R=[...v];for(let U=0;U<N.length;U++){const H=N[U],Y=Rx(H);_.includes(Y)||(R.splice(U,0,H),I.push(H))}return s==="wait"&&I.length&&(R=I),L(I3(R)),D(v),null}const{forceRender:k}=Re.useContext(kw);return F.jsx(F.Fragment,{children:N.map(R=>{const U=Rx(R),H=o&&!m?!1:v===N||_.includes(U),Y=()=>{if(T.current.has(U))return;if(T.current.add(U),S.has(U))S.set(U,!0);else return;let X=!0;S.forEach(q=>{q||(X=!1)}),X&&(k?.(),L(w.current),o&&g?.(),n&&n())};return F.jsx(Ok,{isPresent:H,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:h,onExitComplete:H?void 0:Y,anchorX:l,anchorY:u,children:R},U)})})},lL=Re.createContext({strict:!1}),O3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let F3=!1;function kk(){if(F3)return;const r={};for(const e in O3)r[e]={isEnabled:t=>O3[e].some(n=>!!t[n])};FP(r),F3=!0}function cL(){return kk(),T2()}function Bk(r){const e=cL();for(const t in r)e[t]={...e[t],...r[t]};FP(e)}const zk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function n1(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||zk.has(r)}let uL=r=>!n1(r);function Vk(r){typeof r=="function"&&(uL=e=>e.startsWith("on")?!n1(e):r(e))}try{Vk(require("@emotion/is-prop-valid").default)}catch{}function Gk(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(uL(i)||t===!0&&n1(i)||!e&&!n1(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}const db=Re.createContext({});function Hk(r,e){if(hb(r)){const{initial:t,animate:n}=r;return{initial:t===!1||nv(t)?t:void 0,animate:nv(n)?n:void 0}}return r.inherit!==!1?e:{}}function jk(r){const{initial:e,animate:t}=Hk(r,Re.useContext(db));return Re.useMemo(()=>({initial:e,animate:t}),[k3(e),k3(t)])}function k3(r){return Array.isArray(r)?r.join(" "):r}const pE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fL(r,e,t){for(const n in e)!ks(e[n])&&!jP(n,t)&&(r[n]=e[n])}function Wk({transformTemplate:r},e){return Re.useMemo(()=>{const t=pE();return fE(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Xk(r,e){const t=r.style||{},n={};return fL(n,t,r),Object.assign(n,Wk(r,e)),n}function Yk(r,e){const t={},n=Xk(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const hL=()=>({...pE(),attrs:{}});function qk(r,e,t,n){const i=Re.useMemo(()=>{const s=hL();return WP(s,e,YP(n),r.transformTemplate,r.style),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};fL(s,r.style,r),i.style={...s,...i.style}}return i}const Zk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mE(r){return typeof r!="string"||r.includes("-")?!1:!!(Zk.indexOf(r)>-1||/[A-Z]/u.test(r))}function Kk(r,e,t,{latestValues:n},i,s=!1,o){const u=(o??mE(r)?qk:Yk)(e,n,i,r),h=Gk(e,typeof r=="string",s),m=r!==Re.Fragment?{...h,...u,ref:t}:{},{children:g}=e,v=Re.useMemo(()=>ks(g)?g.get():g,[g]);return Re.createElement(r,{...m,children:v})}function Qk({scrapeMotionValuesFromProps:r,createRenderState:e},t,n,i){return{latestValues:Jk(t,n,i,r),renderState:e()}}function Jk(r,e,t,n){const i={},s=n(r,{});for(const v in s)i[v]=F_(s[v]);let{initial:o,animate:l}=r;const u=hb(r),h=IP(r);e&&h&&!u&&r.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let m=t?t.initial===!1:!1;m=m||o===!1;const g=m?l:o;if(g&&typeof g!="boolean"&&!fb(g)){const v=Array.isArray(g)?g:[g];for(let _=0;_<v.length;_++){const b=nE(r,v[_]);if(b){const{transitionEnd:w,transition:S,...T}=b;for(const A in T){let D=T[A];if(Array.isArray(D)){const N=m?D.length-1:0;D=D[N]}D!==null&&(i[A]=D)}for(const A in w)i[A]=w[A]}}}return i}const dL=r=>(e,t)=>{const n=Re.useContext(db),i=Re.useContext(ub),s=()=>Qk(r,e,n,i);return t?s():Bw(s)},$k=dL({scrapeMotionValuesFromProps:hE,createRenderState:pE}),eB=dL({scrapeMotionValuesFromProps:qP,createRenderState:hL}),tB=Symbol.for("motionComponentSymbol");function nB(r,e,t){const n=Re.useRef(t);Re.useInsertionEffect(()=>{n.current=t});const i=Re.useRef(null);return Re.useCallback(s=>{s&&r.onMount?.(s),e&&(s?e.mount(s):e.unmount());const o=n.current;if(typeof o=="function")if(s){const l=o(s);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[e])}const pL=Re.createContext({});function Qp(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function iB(r,e,t,n,i,s){const{visualElement:o}=Re.useContext(db),l=Re.useContext(lL),u=Re.useContext(ub),h=Re.useContext(dE),m=h.reducedMotion,g=h.skipAnimations,v=Re.useRef(null),_=Re.useRef(!1);n=n||l.renderer,!v.current&&n&&(v.current=n(r,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:m,skipAnimations:g,isSVG:s}),_.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const b=v.current,w=Re.useContext(pL);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&rB(v.current,t,i,w);const S=Re.useRef(!1);Re.useInsertionEffect(()=>{b&&S.current&&b.update(t,u)});const T=t[MP],A=Re.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return ON(()=>{_.current=!0,b&&(S.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),A.current&&b.animationState&&b.animationState.animateChanges())}),Re.useEffect(()=>{b&&(!A.current&&b.animationState&&b.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),A.current=!1),b.enteringChildren=void 0)}),b}function rB(r,e,t,n){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:h,layoutCrossfade:m}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:mL(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Qp(l),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:m,layoutScroll:u,layoutRoot:h})}function mL(r){if(r)return r.options.allowProjection!==!1?r.projection:mL(r.parent)}function $S(r,{forwardMotionProps:e=!1,type:t}={},n,i){n&&Bk(n);const s=t?t==="svg":mE(r),o=s?eB:$k;function l(h,m){let g;const v={...Re.useContext(dE),...h,layoutId:sB(h)},{isStatic:_}=v,b=jk(h),w=o(h,_);if(!_&&IN){aB();const S=oB(v);g=S.MeasureLayout,b.visualElement=iB(r,w,v,i,S.ProjectionNode,s)}return F.jsxs(db.Provider,{value:b,children:[g&&b.visualElement?F.jsx(g,{visualElement:b.visualElement,...v}):null,Kk(r,h,nB(w,b.visualElement,m),w,_,e,s)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const u=Re.forwardRef(l);return u[tB]=r,u}function sB({layoutId:r}){const e=Re.useContext(kw).id;return e&&r!==void 0?e+"-"+r:r}function aB(r,e){Re.useContext(lL).strict}function oB(r){const e=cL(),{drag:t,layout:n}=e;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(r)||n?.isEnabled(r)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function lB(r,e){if(typeof Proxy>"u")return $S;const t=new Map,n=(s,o)=>$S(s,o,r,e),i=(s,o)=>n(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?n:(t.has(o)||t.set(o,$S(o,void 0,r,e)),t.get(o))})}const cB=(r,e)=>e.isSVG??mE(r)?new V2(e):new I2(e,{allowProjection:r!==Re.Fragment});class uB extends kf{constructor(e){super(e),e.animationState||(e.animationState=X2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();fb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let fB=0;class hB extends kf{constructor(){super(...arguments),this.id=fB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dB={animation:{Feature:uB},exit:{Feature:hB}};function Lv(r){return{point:{x:r.pageX,y:r.pageY}}}const pB=r=>e=>oE(e)&&r(e,Lv(e));function I0(r,e,t,n){return iv(r,e,pB(t),n)}const gL=({current:r})=>r?r.ownerDocument.defaultView:null,B3=(r,e)=>Math.abs(r-e);function mB(r,e){const t=B3(r.x,e.x),n=B3(r.y,e.y);return Math.sqrt(t**2+n**2)}const z3=new Set(["auto","scroll"]);class vL{constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=tM(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=mB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:S}=_,{timestamp:T}=ys;this.history.push({...S,timestamp:T});const{onStart:A,onMove:D}=this.handlers;b||(A&&A(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,_)},this.handlePointerMove=(_,b)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=eM(b,this.transformPagePoint),Ni.update(this.updatePoint,!0)},this.handlePointerUp=(_,b)=>{this.end();const{onEnd:w,onSessionEnd:S,resumeAnimation:T}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=tM(_.type==="pointercancel"?this.lastMoveEventInfo:eM(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(_,A),S&&S(_,A)},!oE(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const u=Lv(e),h=eM(u,this.transformPagePoint),{point:m}=h,{timestamp:g}=ys;this.history=[{...m,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,tM(h,this.history)),this.removeListeners=Dv(I0(this.contextWindow,"pointermove",this.handlePointerMove),I0(this.contextWindow,"pointerup",this.handlePointerUp),I0(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let t=e.parentElement;for(;t;){const n=getComputedStyle(t);(z3.has(n.overflowX)||z3.has(n.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-t.x,y:i.y-t.y};s.x===0&&s.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),Ni.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Df(this.updatePoint)}}function eM(r,e){return e?{point:e(r.point)}:r}function V3(r,e){return{x:r.x-e.x,y:r.y-e.y}}function tM({point:r},e){return{point:r,delta:V3(r,yL(e)),offset:V3(r,gB(e)),velocity:vB(e,.1)}}function gB(r){return r[0]}function yL(r){return r[r.length-1]}function vB(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=yL(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>Ml(e)));)t--;if(!n)return{x:0,y:0};n===r[0]&&r.length>2&&i.timestamp-n.timestamp>Ml(e)*2&&(n=r[1]);const s=jo(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function yB(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?rr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?rr(t,r,n.max):Math.min(r,t)),r}function G3(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function xB(r,{top:e,left:t,bottom:n,right:i}){return{x:G3(r.x,t,i),y:G3(r.y,e,n)}}function H3(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function _B(r,e){return{x:H3(r.x,e.x),y:H3(r.y,e.y)}}function bB(r,e){let t=.5;const n=oa(r),i=oa(e);return i>n?t=$0(e.min,e.max-n,r.min):n>i&&(t=$0(r.min,r.max-i,e.min)),Mc(0,1,t)}function SB(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const GT=.35;function MB(r=GT){return r===!1?r=0:r===!0&&(r=GT),{x:j3(r,"left","right"),y:j3(r,"top","bottom")}}function j3(r,e,t){return{min:W3(r,e),max:W3(r,t)}}function W3(r,e){return typeof r=="number"?r:r[e]||0}const TB=new WeakMap;class wB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=g=>{t&&this.snapToCursor(Lv(g).point),this.stopAnimation()},o=(g,v)=>{const{drag:_,dragPropagation:b,onDragStart:w}=this.getProps();if(_&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=e2(_),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pc(T=>{let A=this.getAxisMotionValue(T).get()||0;if(bc.test(A)){const{projection:D}=this.visualElement;if(D&&D.layout){const N=D.layout.layoutBox[T];N&&(A=oa(N)*(parseFloat(A)/100))}}this.originPoint[T]=A}),w&&Ni.update(()=>w(g,v),!1,!0),LT(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:_,dragDirectionLock:b,onDirectionLock:w,onDrag:S}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:T}=v;if(b&&this.currentDirection===null){this.currentDirection=AB(T),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),S&&Ni.update(()=>S(g,v),!1,!0)},u=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>{const{dragSnapToOrigin:g}=this.getProps();(g||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new vL(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:n,contextWindow:gL(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ni.postRender(()=>l(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Dx(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=yB(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Qp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=xB(n.layoutBox,e):this.constraints=!1,this.elastic=MB(t),i!==this.constraints&&!Qp(e)&&n&&this.constraints&&!this.hasMutatedConstraints&&pc(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=SB(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Qp(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=R2(n,i.root,this.visualElement.getTransformPagePoint());let o=_B(i.layout.layoutBox,s);if(t){const l=t(E2(o));this.hasMutatedConstraints=!!l,l&&(o=BP(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},h=pc(m=>{if(!Dx(m,t,this.currentDirection))return;let g=u&&u[m]||{};o&&(g={min:0,max:0});const v=i?200:1e6,_=i?40:1e7,b={type:"inertia",velocity:n?e[m]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,b)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return LT(this.visualElement,e),n.start(tE(e,n,0,t,this.visualElement,!1))}stopAnimation(){pc(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){pc(t=>{const{drag:n}=this.getProps();if(!Dx(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[t],u=s.get()||0;s.set(e[t]-rr(o,l,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Qp(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};pc(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=bB({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),pc(o=>{if(!Dx(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];l.set(rr(u,h,i[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;TB.set(this.visualElement,this);const e=this.visualElement.current,t=I0(e,"pointerdown",h=>{const{drag:m,dragListener:g=!0}=this.getProps(),v=h.target,_=v!==e&&a2(v);m&&g&&!_&&this.start(h)});let n;const i=()=>{const{dragConstraints:h}=this.getProps();Qp(h)&&h.current&&(this.constraints=this.resolveRefConstraints(),n||(n=EB(e,h.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ni.read(i);const l=iv(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(pc(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=h[g].translate,v.set(v.get()+h[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),u&&u(),n&&n()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=GT,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function X3(r){let e=!0;return()=>{if(e){e=!1;return}r()}}function EB(r,e,t){const n=$C(r,X3(t)),i=$C(e,X3(t));return()=>{n(),i()}}function Dx(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function AB(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class CB extends kf{constructor(e){super(e),this.removeGroupControls=Yo,this.removeListeners=Yo,this.controls=new wB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yo}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const nM=r=>(e,t)=>{r&&Ni.update(()=>r(e,t),!1,!0)};class RB extends kf{constructor(){super(...arguments),this.removePointerDownListener=Yo}onPointerDown(e){this.session=new vL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:nM(e),onStart:nM(t),onMove:nM(n),onEnd:(s,o)=>{delete this.session,i&&Ni.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=I0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let iM=!1;class DB extends Re.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),iM&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),k_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,e.layoutDependency!==t&&o.setOptions({...o.options,layoutDependency:t}),iM=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ni.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),aE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;iM=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xL(r){const[e,t]=oL(),n=Re.useContext(kw);return F.jsx(DB,{...r,layoutGroup:n,switchLayoutGroup:Re.useContext(pL),isPresent:e,safeToRemove:t})}const NB={pan:{Feature:RB},drag:{Feature:CB,ProjectionNode:aL,MeasureLayout:xL}};function Y3(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Ni.postRender(()=>s(e,Lv(e)))}class PB extends kf{mount(){const{current:e}=this.node;e&&(this.unmount=n2(e,(t,n)=>(Y3(this.node,n,"Start"),i=>Y3(this.node,i,"End"))))}unmount(){}}class LB extends kf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Dv(iv(this.node.current,"focus",()=>this.onFocus()),iv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function q3(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Ni.postRender(()=>s(e,Lv(e)))}class UB extends kf{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:n}=this.node.props;this.unmount=l2(e,(i,s)=>(q3(this.node,s,"Start"),(o,{success:l})=>q3(this.node,o,l?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:n?.tap===!1})}unmount(){}}const HT=new WeakMap,rM=new WeakMap,IB=r=>{const e=HT.get(r.target);e&&e(r)},OB=r=>{r.forEach(IB)};function FB({root:r,...e}){const t=r||document;rM.has(t)||rM.set(t,{});const n=rM.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(OB,{root:r,...e})),n[i]}function kB(r,e,t){const n=FB(e);return HT.set(r,t),n.observe(r),()=>{HT.delete(r),n.unobserve(r)}}const BB={some:0,all:1};class zB extends kf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:BB[i]},l=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(u)};return kB(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(VB(e,t))&&this.startObserver()}unmount(){}}function VB({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const GB={inView:{Feature:zB},tap:{Feature:UB},focus:{Feature:LB},hover:{Feature:PB}},HB={layout:{ProjectionNode:aL,MeasureLayout:xL}},jB={...dB,...GB,...NB,...HB},dn=lB(jB,cB),WB={some:0,all:1};function XB(r,e,{root:t,margin:n,amount:i="some"}={}){const s=sE(r),o=new WeakMap,l=h=>{h.forEach(m=>{const g=o.get(m.target);if(m.isIntersecting!==!!g)if(m.isIntersecting){const v=e(m.target,m);typeof v=="function"?o.set(m.target,v):u.unobserve(m.target)}else typeof g=="function"&&(g(m),o.delete(m.target))})},u=new IntersectionObserver(l,{root:t,rootMargin:n,threshold:typeof i=="number"?i:WB[i]});return s.forEach(h=>u.observe(h)),()=>u.disconnect()}function YB(r,{root:e,margin:t,amount:n,once:i=!1,initial:s=!1}={}){const[o,l]=Re.useState(s);return Re.useEffect(()=>{if(!r.current||i&&o)return;const u=()=>(l(!0),i?void 0:()=>l(!1)),h={root:e&&e.current||void 0,margin:t,amount:n};return XB(r.current,u,h)},[e,r,t,i,n]),o}function pu(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _L(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var io={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},vm={duration:.5,overwrite:!1,delay:0},gE,_s,Yi,Wo=1e8,Mi=1/Wo,jT=Math.PI*2,qB=jT/4,ZB=0,bL=Math.sqrt,KB=Math.cos,QB=Math.sin,ss=function(e){return typeof e=="string"},gr=function(e){return typeof e=="function"},bu=function(e){return typeof e=="number"},vE=function(e){return typeof e>"u"},Tc=function(e){return typeof e=="object"},Fa=function(e){return e!==!1},yE=function(){return typeof window<"u"},Nx=function(e){return gr(e)||ss(e)},SL=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Bs=Array.isArray,JB=/random\([^)]+\)/g,$B=/,\s*/g,Z3=/(?:-?\.?\d|\.)+/gi,ML=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,im=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,sM=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,TL=/[+-]=-?[.\d]+/,ez=/[^,'"\[\]\s]+/gi,tz=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ir,mc,WT,xE,ao={},i1={},wL,EL=function(e){return(i1=ym(e,ao))&&Va},_E=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},rv=function(e,t){return!t&&console.warn(e)},AL=function(e,t){return e&&(ao[e]=t)&&i1&&(i1[e]=t)||ao},sv=function(){return 0},nz={suppressEvents:!0,isStart:!0,kill:!1},B_={suppressEvents:!0,kill:!1},iz={suppressEvents:!0},bE={},Cf=[],XT={},CL,Ja={},aM={},K3=30,z_=[],SE="",ME=function(e){var t=e[0],n,i;if(Tc(t)||gr(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=z_.length;i--&&!z_[i].targetTest(t););n=z_[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new JL(e[i],n)))||e.splice(i,1);return e},rd=function(e){return e._gsap||ME(Xo(e))[0]._gsap},RL=function(e,t,n){return(n=e[t])&&gr(n)?e[t]():vE(n)&&e.getAttribute&&e.getAttribute(t)||n},ka=function(e,t){return(e=e.split(",")).forEach(t)||e},Er=function(e){return Math.round(e*1e5)/1e5||0},nr=function(e){return Math.round(e*1e7)/1e7||0},cm=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},rz=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},r1=function(){var e=Cf.length,t=Cf.slice(0),n,i;for(XT={},Cf.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},TE=function(e){return!!(e._initted||e._startAt||e.add)},DL=function(e,t,n,i){Cf.length&&!_s&&r1(),e.render(t,n,!!(_s&&t<0&&TE(e))),Cf.length&&!_s&&r1()},NL=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(ez).length<2?t:ss(e)?e.trim():e},PL=function(e){return e},oo=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},sz=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},ym=function(e,t){for(var n in t)e[n]=t[n];return e},Q3=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Tc(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},s1=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},O0=function(e){var t=e.parent||ir,n=e.keyframes?sz(Bs(e.keyframes)):oo;if(Fa(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},az=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},LL=function(e,t,n,i,s){var o=e[i],l;if(s)for(l=t[s];o&&o[s]>l;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},pb=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Nf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},sd=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},oz=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},YT=function(e,t,n,i){return e._startAt&&(_s?e._startAt.revert(B_):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},lz=function r(e){return!e||e._ts&&r(e.parent)},J3=function(e){return e._repeat?xm(e._tTime,e=e.duration()+e._rDelay)*e:0},xm=function(e,t){var n=Math.floor(e=nr(e/t));return e&&n===e?n-1:n},a1=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},mb=function(e){return e._end=nr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Mi)||0))},gb=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=nr(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),mb(e),n._dirty||sd(n,e)),e},UL=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=a1(e.rawTime(),t),(!t._dur||Uv(0,t.totalDuration(),n)-t._tTime>Mi)&&t.render(n,!0)),sd(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Mi}},gc=function(e,t,n,i){return t.parent&&Nf(t),t._start=nr((bu(n)?n:n||e!==ir?Vo(e,n,t):e._time)+t._delay),t._end=nr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),LL(e,t,"_first","_last",e._sort?"_start":0),qT(t)||(e._recent=t),i||UL(e,t),e._ts<0&&gb(e,e._tTime),e},IL=function(e,t){return(ao.ScrollTrigger||_E("scrollTrigger",t))&&ao.ScrollTrigger.create(t,e)},OL=function(e,t,n,i,s){if(EE(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!_s&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&CL!==$a.frame)return Cf.push(e),e._lazy=[s,i],1},cz=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},qT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},uz=function(e,t,n,i){var s=e.ratio,o=t<0||!t&&(!e._start&&cz(e)&&!(!e._initted&&qT(e))||(e._ts<0||e._dp._ts<0)&&!qT(e))?0:1,l=e._rDelay,u=0,h,m,g;if(l&&e._repeat&&(u=Uv(0,e._tDur,t),m=xm(u,l),e._yoyo&&m&1&&(o=1-o),m!==xm(e._tTime,l)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||_s||i||e._zTime===Mi||!t&&e._zTime){if(!e._initted&&OL(e,t,i,n,u))return;for(g=e._zTime,e._zTime=t||(n?Mi:0),n||(n=t&&!g),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=u,h=e._pt;h;)h.r(o,h.d),h=h._next;t<0&&YT(e,t,n,!0),e._onUpdate&&!n&&eo(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&eo(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Nf(e,1),!n&&!_s&&(eo(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},fz=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},_m=function(e,t,n,i){var s=e._repeat,o=nr(t)||0,l=e._tTime/e._tDur;return l&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:nr(o*(s+1)+e._rDelay*s):o,l>0&&!i&&gb(e,e._tTime=e._tDur*l),e.parent&&mb(e),n||sd(e.parent,e),e},$3=function(e){return e instanceof ra?sd(e):_m(e,e._dur)},hz={_start:0,endTime:sv,totalDuration:sv},Vo=function r(e,t,n){var i=e.labels,s=e._recent||hz,o=e.duration()>=Wo?s.endTime(!1):e._dur,l,u,h;return ss(t)&&(isNaN(t)||t in i)?(u=t.charAt(0),h=t.substr(-1)==="%",l=t.indexOf("="),u==="<"||u===">"?(l>=0&&(t=t.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(l<0?s:n).totalDuration()/100:1)):l<0?(t in i||(i[t]=o),i[t]):(u=parseFloat(t.charAt(l-1)+t.substr(l+1)),h&&n&&(u=u/100*(Bs(n)?n[0]:n).totalDuration()),l>1?r(e,t.substr(0,l-1),n)+u:o+u)):t==null?o:+t},F0=function(e,t,n){var i=bu(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],l,u;if(i&&(o.duration=t[1]),o.parent=n,e){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Fa(u.vars.inherit)&&u.parent;o.immediateRender=Fa(l.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new kr(t[0],o,t[s+1])},Bf=function(e,t){return e||e===0?t(e):t},Uv=function(e,t,n){return n<e?e:n>t?t:n},Fs=function(e,t){return!ss(e)||!(t=tz.exec(e))?"":t[1]},dz=function(e,t,n){return Bf(n,function(i){return Uv(e,t,i)})},ZT=[].slice,FL=function(e,t){return e&&Tc(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Tc(e[0]))&&!e.nodeType&&e!==mc},pz=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return ss(i)&&!t||FL(i,1)?(s=n).push.apply(s,Xo(i)):n.push(i)})||n},Xo=function(e,t,n){return Yi&&!t&&Yi.selector?Yi.selector(e):ss(e)&&!n&&(WT||!bm())?ZT.call((t||xE).querySelectorAll(e),0):Bs(e)?pz(e,n):FL(e)?ZT.call(e,0):e?[e]:[]},KT=function(e){return e=Xo(e)[0]||rv("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Xo(t,n.querySelectorAll?n:n===e?rv("Invalid scope")||xE.createElement("div"):e)}},kL=function(e){return e.sort(function(){return .5-Math.random()})},BL=function(e){if(gr(e))return e;var t=Tc(e)?e:{each:e},n=ad(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},l=i>0&&i<1,u=isNaN(i)||l,h=t.axis,m=i,g=i;return ss(i)?m=g={center:.5,edges:.5,end:1}[i]||0:!l&&u&&(m=i[0],g=i[1]),function(v,_,b){var w=(b||t).length,S=o[w],T,A,D,N,L,I,k,R,U;if(!S){if(U=t.grid==="auto"?0:(t.grid||[1,Wo])[1],!U){for(k=-Wo;k<(k=b[U++].getBoundingClientRect().left)&&U<w;);U<w&&U--}for(S=o[w]=[],T=u?Math.min(U,w)*m-.5:i%U,A=U===Wo?0:u?w*g/U-.5:i/U|0,k=0,R=Wo,I=0;I<w;I++)D=I%U-T,N=A-(I/U|0),S[I]=L=h?Math.abs(h==="y"?N:D):bL(D*D+N*N),L>k&&(k=L),L<R&&(R=L);i==="random"&&kL(S),S.max=k-R,S.min=R,S.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(U>w?w-1:h?h==="y"?w/U:U:Math.max(U,w/U))||0)*(i==="edges"?-1:1),S.b=w<0?s-w:s,S.u=Fs(t.amount||t.each)||0,n=n&&w<0?ZL(n):n}return w=(S[v]-S.min)/S.max||0,nr(S.b+(n?n(w):w)*S.v)+S.u}},QT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=nr(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(bu(n)?0:Fs(n))}},zL=function(e,t){var n=Bs(e),i,s;return!n&&Tc(e)&&(i=n=e.radius||Wo,e.values?(e=Xo(e.values),(s=!bu(e[0]))&&(i*=i)):e=QT(e.increment)),Bf(t,n?gr(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),h=Wo,m=0,g=e.length,v,_;g--;)s?(v=e[g].x-l,_=e[g].y-u,v=v*v+_*_):v=Math.abs(e[g]-l),v<h&&(h=v,m=g);return m=!i||h<=i?e[m]:o,s||m===o||bu(o)?m:m+Fs(o)}:QT(e))},VL=function(e,t,n,i){return Bf(Bs(e)?!t:n===!0?!!(n=0):!i,function(){return Bs(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},mz=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,o){return o(s)},i)}},gz=function(e,t){return function(n){return e(parseFloat(n))+(t||Fs(n))}},vz=function(e,t,n){return HL(e,t,0,1,n)},GL=function(e,t,n){return Bf(n,function(i){return e[~~t(i)]})},yz=function r(e,t,n){var i=t-e;return Bs(e)?GL(e,r(0,e.length),t):Bf(n,function(s){return(i+(s-e)%i)%i+e})},xz=function r(e,t,n){var i=t-e,s=i*2;return Bs(e)?GL(e,r(0,e.length-1),t):Bf(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},av=function(e){return e.replace(JB,function(t){var n=t.indexOf("[")+1,i=t.substring(n||7,n?t.indexOf("]"):t.length-1).split($B);return VL(n?i:+i[0],n?0:+i[1],+i[2]||1e-5)})},HL=function(e,t,n,i,s){var o=t-e,l=i-n;return Bf(s,function(u){return n+((u-e)/o*l||0)})},_z=function r(e,t,n,i){var s=isNaN(e+t)?0:function(_){return(1-_)*e+_*t};if(!s){var o=ss(e),l={},u,h,m,g,v;if(n===!0&&(i=1)&&(n=null),o)e={p:e},t={p:t};else if(Bs(e)&&!Bs(t)){for(m=[],g=e.length,v=g-2,h=1;h<g;h++)m.push(r(e[h-1],e[h]));g--,s=function(b){b*=g;var w=Math.min(v,~~b);return m[w](b-w)},n=t}else i||(e=ym(Bs(e)?[]:{},e));if(!m){for(u in t)wE.call(l,e,u,"get",t[u]);s=function(b){return RE(b,l)||(o?e.p:e)}}}return Bf(n,s)},eR=function(e,t,n){var i=e.labels,s=Wo,o,l,u;for(o in i)l=i[o]-t,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},eo=function(e,t,n){var i=e.vars,s=i[t],o=Yi,l=e._ctx,u,h,m;if(s)return u=i[t+"Params"],h=i.callbackScope||e,n&&Cf.length&&r1(),l&&(Yi=l),m=u?s.apply(h,u):s.call(h),Yi=o,m},E0=function(e){return Nf(e),e.scrollTrigger&&e.scrollTrigger.kill(!!_s),e.progress()<1&&eo(e,"onInterrupt"),e},rm,jL=[],WL=function(e){if(e)if(e=!e.name&&e.default||e,yE()||e.headless){var t=e.name,n=gr(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:sv,render:RE,add:wE,kill:Oz,modifier:Iz,rawVars:0},o={targetTest:0,get:0,getSetter:CE,aliases:{},register:0};if(bm(),e!==i){if(Ja[t])return;oo(i,oo(s1(e,s),o)),ym(i.prototype,ym(s,s1(e,o))),Ja[i.prop=t]=i,e.targetTest&&(z_.push(i),bE[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}AL(t,i),e.register&&e.register(Va,i,Ba)}else jL.push(e)},Si=255,A0={aqua:[0,Si,Si],lime:[0,Si,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Si],navy:[0,0,128],white:[Si,Si,Si],olive:[128,128,0],yellow:[Si,Si,0],orange:[Si,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Si,0,0],pink:[Si,192,203],cyan:[0,Si,Si],transparent:[Si,Si,Si,0]},oM=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Si+.5|0},XL=function(e,t,n){var i=e?bu(e)?[e>>16,e>>8&Si,e&Si]:0:A0.black,s,o,l,u,h,m,g,v,_,b;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),A0[e])i=A0[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+s+s+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Si,i&Si,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Si,e&Si]}else if(e.substr(0,3)==="hsl"){if(i=b=e.match(Z3),!t)u=+i[0]%360/360,h=+i[1]/100,m=+i[2]/100,o=m<=.5?m*(h+1):m+h-m*h,s=m*2-o,i.length>3&&(i[3]*=1),i[0]=oM(u+1/3,s,o),i[1]=oM(u,s,o),i[2]=oM(u-1/3,s,o);else if(~e.indexOf("="))return i=e.match(ML),n&&i.length<4&&(i[3]=1),i}else i=e.match(Z3)||A0.transparent;i=i.map(Number)}return t&&!b&&(s=i[0]/Si,o=i[1]/Si,l=i[2]/Si,g=Math.max(s,o,l),v=Math.min(s,o,l),m=(g+v)/2,g===v?u=h=0:(_=g-v,h=m>.5?_/(2-g-v):_/(g+v),u=g===s?(o-l)/_+(o<l?6:0):g===o?(l-s)/_+2:(s-o)/_+4,u*=60),i[0]=~~(u+.5),i[1]=~~(h*100+.5),i[2]=~~(m*100+.5)),n&&i.length<4&&(i[3]=1),i},YL=function(e){var t=[],n=[],i=-1;return e.split(Rf).forEach(function(s){var o=s.match(im)||[];t.push.apply(t,o),n.push(i+=o.length+1)}),t.c=n,t},tR=function(e,t,n){var i="",s=(e+i).match(Rf),o=t?"hsla(":"rgba(",l=0,u,h,m,g;if(!s)return e;if(s=s.map(function(v){return(v=XL(v,t,1))&&o+(t?v[0]+","+v[1]+"%,"+v[2]+"%,"+v[3]:v.join(","))+")"}),n&&(m=YL(e),u=n.c,u.join(i)!==m.c.join(i)))for(h=e.replace(Rf,"1").split(im),g=h.length-1;l<g;l++)i+=h[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(m.length?m:s.length?s:n).shift());if(!h)for(h=e.split(Rf),g=h.length-1;l<g;l++)i+=h[l]+s[l];return i+h[g]},Rf=(function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in A0)r+="|"+e+"\\b";return new RegExp(r+")","gi")})(),bz=/hsl[a]?\(/,qL=function(e){var t=e.join(" "),n;if(Rf.lastIndex=0,Rf.test(t))return n=bz.test(t),e[1]=tR(e[1],n),e[0]=tR(e[0],n,YL(e[1])),!0},ov,$a=(function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,o=s,l=[],u,h,m,g,v,_,b=function w(S){var T=r()-i,A=S===!0,D,N,L,I;if((T>e||T<0)&&(n+=T-t),i+=T,L=i-n,D=L-o,(D>0||A)&&(I=++g.frame,v=L-g.time*1e3,g.time=L=L/1e3,o+=D+(D>=s?4:s-D),N=1),A||(u=h(w)),N)for(_=0;_<l.length;_++)l[_](L,v,I,S)};return g={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(S){return v/(1e3/(S||60))},wake:function(){wL&&(!WT&&yE()&&(mc=WT=window,xE=mc.document||{},ao.gsap=Va,(mc.gsapVersions||(mc.gsapVersions=[])).push(Va.version),EL(i1||mc.GreenSockGlobals||!mc.gsap&&mc||{}),jL.forEach(WL)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&g.sleep(),h=m||function(S){return setTimeout(S,o-g.time*1e3+1|0)},ov=1,b(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(u),ov=0,h=sv},lagSmoothing:function(S,T){e=S||1/0,t=Math.min(T||33,e)},fps:function(S){s=1e3/(S||240),o=g.time*1e3+s},add:function(S,T,A){var D=T?function(N,L,I,k){S(N,L,I,k),g.remove(D)}:S;return g.remove(S),l[A?"unshift":"push"](D),bm(),D},remove:function(S,T){~(T=l.indexOf(S))&&l.splice(T,1)&&_>=T&&_--},_listeners:l},g})(),bm=function(){return!ov&&$a.wake()},Zn={},Sz=/^[\d.\-M][\d.\-,\s]/,Mz=/["']/g,Tz=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,o=n.length,l,u,h;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,h=u.substr(0,l),t[i]=isNaN(h)?h.replace(Mz,"").trim():+h,i=u.substr(l+1).trim();return t},wz=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},Ez=function(e){var t=(e+"").split("("),n=Zn[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Tz(t[1])]:wz(e).split(",").map(NL)):Zn._CE&&Sz.test(e)?Zn._CE("",e):n},ZL=function(e){return function(t){return 1-e(1-t)}},KL=function r(e,t){for(var n=e._first,i;n;)n instanceof ra?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},ad=function(e,t){return e&&(gr(e)?e:Zn[e]||Ez(e))||t},_d=function(e,t,n,i){n===void 0&&(n=function(u){return 1-t(1-u)}),i===void 0&&(i=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},o;return ka(e,function(l){Zn[l]=ao[l]=s,Zn[o=l.toLowerCase()]=n;for(var u in s)Zn[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Zn[l+"."+u]=s[u]}),s},QL=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},lM=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/jT*(Math.asin(1/i)||0),l=function(m){return m===1?1:i*Math.pow(2,-10*m)*QB((m-o)*s)+1},u=e==="out"?l:e==="in"?function(h){return 1-l(1-h)}:QL(l);return s=jT/s,u.config=function(h,m){return r(e,h,m)},u},cM=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:QL(n);return i.config=function(s){return r(e,s)},i};ka("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;_d(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Zn.Linear.easeNone=Zn.none=Zn.Linear.easeIn;_d("Elastic",lM("in"),lM("out"),lM());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(l){return l<t?r*l*l:l<n?r*Math.pow(l-1.5/e,2)+.75:l<i?r*(l-=2.25/e)*l+.9375:r*Math.pow(l-2.625/e,2)+.984375};_d("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);_d("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});_d("Circ",function(r){return-(bL(1-r*r)-1)});_d("Sine",function(r){return r===1?1:-KB(r*qB)+1});_d("Back",cM("in"),cM("out"),cM());Zn.SteppedEase=Zn.steps=ao.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,o=1-Mi;return function(l){return((i*Uv(0,o,l)|0)+s)*n}}};vm.ease=Zn["quad.out"];ka("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return SE+=r+","+r+"Params,"});var JL=function(e,t){this.id=ZB++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:RL,this.set=t?t.getSetter:CE},lv=(function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,_m(this,+t.duration,1,1),this.data=t.data,Yi&&(this._ctx=Yi,Yi.data.push(this)),ov||$a.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,_m(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(bm(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(gb(this,n),!s._dp||s.parent||UL(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&gc(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Mi||!this._initted&&this._dur&&n||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),DL(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+J3(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+J3(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?xm(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-Mi?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?a1(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Mi?0:this._rts,this.totalTime(Uv(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),mb(this),oz(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(bm(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Mi&&(this._tTime-=Mi)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=nr(n);var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&gc(i,this,this._start-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Fa(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?a1(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=iz);var i=_s;return _s=n,TE(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),_s=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,$3(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,$3(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(Vo(this,n),Fa(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Fa(i)),this._dur||(this._zTime=-Mi),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Mi:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Mi,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-Mi)},e.eventCallback=function(n,i,s){var o=this.vars;return arguments.length>1?(i?(o[n]=i,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete o[n],this):o[n]},e.then=function(n){var i=this,s=i._prom;return new Promise(function(o){var l=gr(n)?n:PL,u=function(){var m=i.then;i.then=null,s&&s(),gr(l)&&(l=l(i))&&(l.then||l===i)&&(i.then=m),o(l),i.then=m};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?u():i._prom=u})},e.kill=function(){E0(this)},r})();oo(lv.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Mi,_prom:0,_ps:!1,_rts:1});var ra=(function(r){_L(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Fa(n.sortChildren),ir&&gc(n.parent||ir,pu(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&IL(pu(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return F0(0,arguments,this),this},t.from=function(i,s,o){return F0(1,arguments,this),this},t.fromTo=function(i,s,o,l){return F0(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,O0(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new kr(i,s,Vo(this,o),1),this},t.call=function(i,s,o){return gc(this,kr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,l,u,h,m){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=h,o.onCompleteParams=m,o.parent=this,new kr(i,o,Vo(this,u)),this},t.staggerFrom=function(i,s,o,l,u,h,m){return o.runBackwards=1,O0(o).immediateRender=Fa(o.immediateRender),this.staggerTo(i,s,o,l,u,h,m)},t.staggerFromTo=function(i,s,o,l,u,h,m,g){return l.startAt=o,O0(l).immediateRender=Fa(l.immediateRender),this.staggerTo(i,s,l,u,h,m,g)},t.render=function(i,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,m=i<=0?0:nr(i),g=this._zTime<0!=i<0&&(this._initted||!h),v,_,b,w,S,T,A,D,N,L,I,k;if(this!==ir&&m>u&&i>=0&&(m=u),m!==this._tTime||o||g){if(l!==this._time&&h&&(m+=this._time-l,i+=this._time-l),v=m,N=this._start,D=this._ts,T=!D,g&&(h||(l=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(I=this._yoyo,S=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(S*100+i,s,o);if(v=nr(m%S),m===u?(w=this._repeat,v=h):(L=nr(m/S),w=~~L,w&&w===L&&(v=h,w--),v>h&&(v=h)),L=xm(this._tTime,S),!l&&this._tTime&&L!==w&&this._tTime-L*S-this._dur<=0&&(L=w),I&&w&1&&(v=h-v,k=1),w!==L&&!this._lock){var R=I&&L&1,U=R===(I&&w&1);if(w<L&&(R=!R),l=R?0:m%h?h:m,this._lock=1,this.render(l||(k?0:nr(w*S)),s,!h)._lock=0,this._tTime=m,!s&&this.parent&&eo(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1,L=w),l&&l!==this._time||T!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,U&&(this._lock=2,l=R?h:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!T)return this;KL(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(A=fz(this,nr(l),nr(v)),A&&(m-=v-(v=A._start))),this._tTime=m,this._time=v,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&m&&h&&!s&&!L&&(eo(this,"onStart"),this._tTime!==m))return this;if(v>=l&&i>=0)for(_=this._first;_;){if(b=_._next,(_._act||v>=_._start)&&_._ts&&A!==_){if(_.parent!==this)return this.render(i,s,o);if(_.render(_._ts>0?(v-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(v-_._start)*_._ts,s,o),v!==this._time||!this._ts&&!T){A=0,b&&(m+=this._zTime=-Mi);break}}_=b}else{_=this._last;for(var H=i<0?i:v;_;){if(b=_._prev,(_._act||H<=_._end)&&_._ts&&A!==_){if(_.parent!==this)return this.render(i,s,o);if(_.render(_._ts>0?(H-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(H-_._start)*_._ts,s,o||_s&&TE(_)),v!==this._time||!this._ts&&!T){A=0,b&&(m+=this._zTime=H?-Mi:Mi);break}}_=b}}if(A&&!s&&(this.pause(),A.render(v>=l?0:-Mi)._zTime=v>=l?1:-1,this._ts))return this._start=N,mb(this),this.render(i,s,o);this._onUpdate&&!s&&eo(this,"onUpdate",!0),(m===u&&this._tTime>=this.totalDuration()||!m&&l)&&(N===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((i||!h)&&(m===u&&this._ts>0||!m&&this._ts<0)&&Nf(this,1),!s&&!(i<0&&!l)&&(m||l||!u)&&(eo(this,m===u&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(bu(s)||(s=Vo(this,s,i)),!(i instanceof lv)){if(Bs(i))return i.forEach(function(l){return o.add(l,s)}),this;if(ss(i))return this.addLabel(i,s);if(gr(i))i=kr.delayedCall(0,i);else return this}return this!==i?gc(this,i,s):this},t.getChildren=function(i,s,o,l){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-Wo);for(var u=[],h=this._first;h;)h._start>=l&&(h instanceof kr?s&&u.push(h):(o&&u.push(h),i&&u.push.apply(u,h.getChildren(!0,s,o)))),h=h._next;return u},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return ss(i)?this.removeLabel(i):gr(i)?this.killTweensOf(i):(i.parent===this&&pb(this,i),i===this._recent&&(this._recent=this._last),sd(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=nr($a.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Vo(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var l=kr.delayedCall(0,s||sv,o);return l.data="isPause",this._hasPause=1,gc(this,l,Vo(this,i))},t.removePause=function(i){var s=this._first;for(i=Vo(this,i);s;)s._start===i&&s.data==="isPause"&&Nf(s),s=s._next},t.killTweensOf=function(i,s,o){for(var l=this.getTweensOf(i,o),u=l.length;u--;)bf!==l[u]&&l[u].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],l=Xo(i),u=this._first,h=bu(s),m;u;)u instanceof kr?rz(u._targets,l)&&(h?(!bf||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(m=u.getTweensOf(l,s)).length&&o.push.apply(o,m),u=u._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,l=Vo(o,i),u=s,h=u.startAt,m=u.onStart,g=u.onStartParams,v=u.immediateRender,_,b=kr.to(o,oo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(h&&"time"in h?h.time:o._time))/o.timeScale())||Mi,onStart:function(){if(o.pause(),!_){var S=s.duration||Math.abs((l-(h&&"time"in h?h.time:o._time))/o.timeScale());b._dur!==S&&_m(b,S,0,1).render(b._time,!0,!0),_=1}m&&m.apply(b,g||[])}},s));return v?b.render(0):b},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,oo({startAt:{time:Vo(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),eR(this,Vo(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),eR(this,Vo(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Mi)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);var l=this._first,u=this.labels,h;for(i=nr(i);l;)l._start>=o&&(l._start+=i,l._end+=i),l=l._next;if(s)for(h in u)u[h]>=o&&(u[h]+=i);return sd(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),sd(this)},t.totalDuration=function(i){var s=0,o=this,l=o._last,u=Wo,h,m,g;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(g=o.parent;l;)h=l._prev,l._dirty&&l.totalDuration(),m=l._start,m>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,gc(o,l,m-l._delay,1)._lock=0):u=m,m<0&&l._ts&&(s-=m,(!g&&!o._dp||g&&g.smoothChildTiming)&&(o._start+=nr(m/o._ts),o._time-=m,o._tTime-=m),o.shiftChildren(-m,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=h;_m(o,o===ir&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(ir._ts&&(DL(ir,a1(i,ir)),CL=$a.frame),$a.frame>=K3){K3+=io.autoSleep||120;var s=ir._first;if((!s||!s._ts)&&io.autoSleep&&$a._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||$a.sleep()}}},e})(lv);oo(ra.prototype,{_lock:0,_hasPause:0,_forcing:0});var Az=function(e,t,n,i,s,o,l){var u=new Ba(this._pt,e,t,0,1,rU,null,s),h=0,m=0,g,v,_,b,w,S,T,A;for(u.b=n,u.e=i,n+="",i+="",(T=~i.indexOf("random("))&&(i=av(i)),o&&(A=[n,i],o(A,e,t),n=A[0],i=A[1]),v=n.match(sM)||[];g=sM.exec(i);)b=g[0],w=i.substring(h,g.index),_?_=(_+1)%5:w.substr(-5)==="rgba("&&(_=1),b!==v[m++]&&(S=parseFloat(v[m-1])||0,u._pt={_next:u._pt,p:w||m===1?w:",",s:S,c:b.charAt(1)==="="?cm(S,b)-S:parseFloat(b)-S,m:_&&_<4?Math.round:0},h=sM.lastIndex);return u.c=h<i.length?i.substring(h,i.length):"",u.fp=l,(TL.test(i)||T)&&(u.e=0),this._pt=u,u},wE=function(e,t,n,i,s,o,l,u,h,m){gr(i)&&(i=i(s||0,e,o));var g=e[t],v=n!=="get"?n:gr(g)?h?e[t.indexOf("set")||!gr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():g,_=gr(g)?h?Pz:nU:AE,b;if(ss(i)&&(~i.indexOf("random(")&&(i=av(i)),i.charAt(1)==="="&&(b=cm(v,i)+(Fs(v)||0),(b||b===0)&&(i=b))),!m||v!==i||JT)return!isNaN(v*i)&&i!==""?(b=new Ba(this._pt,e,t,+v||0,i-(v||0),typeof g=="boolean"?Uz:iU,0,_),h&&(b.fp=h),l&&b.modifier(l,this,e),this._pt=b):(!g&&!(t in e)&&_E(t,i),Az.call(this,e,t,v,i,_,u||io.stringFilter,h))},Cz=function(e,t,n,i,s){if(gr(e)&&(e=k0(e,s,t,n,i)),!Tc(e)||e.style&&e.nodeType||Bs(e)||SL(e))return ss(e)?k0(e,s,t,n,i):e;var o={},l;for(l in e)o[l]=k0(e[l],s,t,n,i);return o},$L=function(e,t,n,i,s,o){var l,u,h,m;if(Ja[e]&&(l=new Ja[e]).init(s,l.rawVars?t[e]:Cz(t[e],i,s,o,n),n,i,o)!==!1&&(n._pt=u=new Ba(n._pt,s,e,0,1,l.render,l,0,l.priority),n!==rm))for(h=n._ptLookup[n._targets.indexOf(s)],m=l._props.length;m--;)h[l._props[m]]=u;return l},bf,JT,EE=function r(e,t,n){var i=e.vars,s=i.ease,o=i.startAt,l=i.immediateRender,u=i.lazy,h=i.onUpdate,m=i.runBackwards,g=i.yoyoEase,v=i.keyframes,_=i.autoRevert,b=e._dur,w=e._startAt,S=e._targets,T=e.parent,A=T&&T.data==="nested"?T.vars.targets:S,D=e._overwrite==="auto"&&!gE,N=e.timeline,L,I,k,R,U,H,Y,X,q,Q,ie,j,J;if(N&&(!v||!s)&&(s="none"),e._ease=ad(s,vm.ease),e._yEase=g?ZL(ad(g===!0?s:g,vm.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!N&&!!i.runBackwards,!N||v&&!i.stagger){if(X=S[0]?rd(S[0]).harness:0,j=X&&i[X.prop],L=s1(i,bE),w&&(w._zTime<0&&w.progress(1),t<0&&m&&l&&!_?w.render(-1,!0):w.revert(m&&b?B_:nz),w._lazy=0),o){if(Nf(e._startAt=kr.set(S,oo({data:"isStart",overwrite:!1,parent:T,immediateRender:!0,lazy:!w&&Fa(u),startAt:null,delay:0,onUpdate:h&&function(){return eo(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_s||!l&&!_)&&e._startAt.revert(B_),l&&b&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(m&&b&&!w){if(t&&(l=!1),k=oo({overwrite:!1,data:"isFromStart",lazy:l&&!w&&Fa(u),immediateRender:l,stagger:0,parent:T},L),j&&(k[X.prop]=j),Nf(e._startAt=kr.set(S,k)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_s?e._startAt.revert(B_):e._startAt.render(-1,!0)),e._zTime=t,!l)r(e._startAt,Mi,Mi);else if(!t)return}for(e._pt=e._ptCache=0,u=b&&Fa(u)||u&&!b,I=0;I<S.length;I++){if(U=S[I],Y=U._gsap||ME(S)[I]._gsap,e._ptLookup[I]=Q={},XT[Y.id]&&Cf.length&&r1(),ie=A===S?I:A.indexOf(U),X&&(q=new X).init(U,j||L,e,ie,A)!==!1&&(e._pt=R=new Ba(e._pt,U,q.name,0,1,q.render,q,0,q.priority),q._props.forEach(function(de){Q[de]=R}),q.priority&&(H=1)),!X||j)for(k in L)Ja[k]&&(q=$L(k,L,e,ie,U,A))?q.priority&&(H=1):Q[k]=R=wE.call(e,U,k,"get",L[k],ie,A,0,i.stringFilter);e._op&&e._op[I]&&e.kill(U,e._op[I]),D&&e._pt&&(bf=e,ir.killTweensOf(U,Q,e.globalTime(t)),J=!e.parent,bf=0),e._pt&&u&&(XT[Y.id]=1)}H&&sU(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!J,v&&t<=0&&N.render(Wo,!0,!0)},Rz=function(e,t,n,i,s,o,l,u){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],m,g,v,_;if(!h)for(h=e._ptCache[t]=[],v=e._ptLookup,_=e._targets.length;_--;){if(m=v[_][t],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==t&&m.fp!==t;)m=m._next;if(!m)return JT=1,e.vars[t]="+=0",EE(e,l),JT=0,u?rv(t+" not eligible for reset"):1;h.push(m)}for(_=h.length;_--;)g=h[_],m=g._pt||g,m.s=(i||i===0)&&!s?i:m.s+(i||0)+o*m.c,m.c=n-m.s,g.e&&(g.e=Er(n)+Fs(g.e)),g.b&&(g.b=m.s+Fs(g.b))},Dz=function(e,t){var n=e[0]?rd(e[0]).harness:0,i=n&&n.aliases,s,o,l,u;if(!i)return t;s=ym({},t);for(o in i)if(o in s)for(u=i[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},Nz=function(e,t,n,i){var s=t.ease||i||"power1.inOut",o,l;if(Bs(t))l=n[e]||(n[e]=[]),t.forEach(function(u,h){return l.push({t:h/(t.length-1)*100,v:u,e:s})});else for(o in t)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:t[o],e:s})},k0=function(e,t,n,i,s){return gr(e)?e.call(t,n,i,s):ss(e)&&~e.indexOf("random(")?av(e):e},eU=SE+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",tU={};ka(eU+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return tU[r]=1});var kr=(function(r){_L(e,r);function e(n,i,s,o){var l;typeof i=="number"&&(s.duration=i,i=s,s=null),l=r.call(this,o?i:O0(i))||this;var u=l.vars,h=u.duration,m=u.delay,g=u.immediateRender,v=u.stagger,_=u.overwrite,b=u.keyframes,w=u.defaults,S=u.scrollTrigger,T=u.yoyoEase,A=i.parent||ir,D=(Bs(n)||SL(n)?bu(n[0]):"length"in i)?[n]:Xo(n),N,L,I,k,R,U,H,Y;if(l._targets=D.length?ME(D):rv("GSAP target "+n+" not found. https://gsap.com",!io.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=_,b||v||Nx(h)||Nx(m)){if(i=l.vars,N=l.timeline=new ra({data:"nested",defaults:w||{},targets:A&&A.data==="nested"?A.vars.targets:D}),N.kill(),N.parent=N._dp=pu(l),N._start=0,v||Nx(h)||Nx(m)){if(k=D.length,H=v&&BL(v),Tc(v))for(R in v)~eU.indexOf(R)&&(Y||(Y={}),Y[R]=v[R]);for(L=0;L<k;L++)I=s1(i,tU),I.stagger=0,T&&(I.yoyoEase=T),Y&&ym(I,Y),U=D[L],I.duration=+k0(h,pu(l),L,U,D),I.delay=(+k0(m,pu(l),L,U,D)||0)-l._delay,!v&&k===1&&I.delay&&(l._delay=m=I.delay,l._start+=m,I.delay=0),N.to(U,I,H?H(L,U,D):0),N._ease=Zn.none;N.duration()?h=m=0:l.timeline=0}else if(b){O0(oo(N.vars.defaults,{ease:"none"})),N._ease=ad(b.ease||i.ease||"none");var X=0,q,Q,ie;if(Bs(b))b.forEach(function(j){return N.to(D,j,">")}),N.duration();else{I={};for(R in b)R==="ease"||R==="easeEach"||Nz(R,b[R],I,b.easeEach);for(R in I)for(q=I[R].sort(function(j,J){return j.t-J.t}),X=0,L=0;L<q.length;L++)Q=q[L],ie={ease:Q.e,duration:(Q.t-(L?q[L-1].t:0))/100*h},ie[R]=Q.v,N.to(D,ie,X),X+=ie.duration;N.duration()<h&&N.to({},{duration:h-N.duration()})}}h||l.duration(h=N.duration())}else l.timeline=0;return _===!0&&!gE&&(bf=pu(l),ir.killTweensOf(D),bf=0),gc(A,pu(l),s),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(g||!h&&!b&&l._start===nr(A._time)&&Fa(g)&&lz(pu(l))&&A.data!=="nested")&&(l._tTime=-Mi,l.render(Math.max(0,-m)||0)),S&&IL(pu(l),S),l}var t=e.prototype;return t.render=function(i,s,o){var l=this._time,u=this._tDur,h=this._dur,m=i<0,g=i>u-Mi&&!m?u:i<Mi?0:i,v,_,b,w,S,T,A,D,N;if(!h)uz(this,i,s,o);else if(g!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(v=g,D=this.timeline,this._repeat){if(w=h+this._rDelay,this._repeat<-1&&m)return this.totalTime(w*100+i,s,o);if(v=nr(g%w),g===u?(b=this._repeat,v=h):(S=nr(g/w),b=~~S,b&&b===S?(v=h,b--):v>h&&(v=h)),T=this._yoyo&&b&1,T&&(N=this._yEase,v=h-v),S=xm(this._tTime,w),v===l&&!o&&this._initted&&b===S)return this._tTime=g,this;b!==S&&(D&&this._yEase&&KL(D,T),this.vars.repeatRefresh&&!T&&!this._lock&&v!==w&&this._initted&&(this._lock=o=1,this.render(nr(w*b),!0).invalidate()._lock=0))}if(!this._initted){if(OL(this,m?i:v,o,s,g))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&b!==S))return this;if(h!==this._dur)return this.render(i,s,o)}if(this._tTime=g,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=A=(N||this._ease)(v/h),this._from&&(this.ratio=A=1-A),!l&&g&&!s&&!S&&(eo(this,"onStart"),this._tTime!==g))return this;for(_=this._pt;_;)_.r(A,_.d),_=_._next;D&&D.render(i<0?i:D._dur*D._ease(v/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(m&&YT(this,i,s,o),eo(this,"onUpdate")),this._repeat&&b!==S&&this.vars.onRepeat&&!s&&this.parent&&eo(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(m&&!this._onUpdate&&YT(this,i,!0,!0),(i||!h)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Nf(this,1),!s&&!(m&&!l)&&(g||l||T)&&(eo(this,g===u?"onComplete":"onReverseComplete",!0),this._prom&&!(g<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,l,u){ov||$a.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||EE(this,h),m=this._ease(h/this._dur),Rz(this,i,s,o,l,m,h,u)?this.resetTo(i,s,o,l,1):(gb(this,0),this.parent||LL(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?E0(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_s),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,bf&&bf.vars.overwrite!==!0)._first||E0(this),this.parent&&o!==this.timeline.totalDuration()&&_m(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=i?Xo(i):l,h=this._ptLookup,m=this._pt,g,v,_,b,w,S,T;if((!s||s==="all")&&az(l,u))return s==="all"&&(this._pt=0),E0(this);for(g=this._op=this._op||[],s!=="all"&&(ss(s)&&(w={},ka(s,function(A){return w[A]=1}),s=w),s=Dz(l,s)),T=l.length;T--;)if(~u.indexOf(l[T])){v=h[T],s==="all"?(g[T]=s,b=v,_={}):(_=g[T]=g[T]||{},b=s);for(w in b)S=v&&v[w],S&&((!("kill"in S.d)||S.d.kill(w)===!0)&&pb(this,S,"_pt"),delete v[w]),_!=="all"&&(_[w]=1)}return this._initted&&!this._pt&&m&&E0(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return F0(1,arguments)},e.delayedCall=function(i,s,o,l){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(i,s,o){return F0(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return ir.killTweensOf(i,s,o)},e})(lv);oo(kr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ka("staggerTo,staggerFrom,staggerFromTo",function(r){kr[r]=function(){var e=new ra,t=ZT.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var AE=function(e,t,n){return e[t]=n},nU=function(e,t,n){return e[t](n)},Pz=function(e,t,n,i){return e[t](i.fp,n)},Lz=function(e,t,n){return e.setAttribute(t,n)},CE=function(e,t){return gr(e[t])?nU:vE(e[t])&&e.setAttribute?Lz:AE},iU=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Uz=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},rU=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},RE=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Iz=function(e,t,n,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,n),s=o},Oz=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?pb(this,t,"_pt"):t.dep||(n=1),t=i;return!n},Fz=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},sU=function(e){for(var t=e._pt,n,i,s,o;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=n}e._pt=s},Ba=(function(){function r(t,n,i,s,o,l,u,h,m){this.t=n,this.s=s,this.c=o,this.p=i,this.r=l||iU,this.d=u||this,this.set=h||AE,this.pr=m||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=Fz,this.m=n,this.mt=s,this.tween=i},r})();ka(SE+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return bE[r]=1});ao.TweenMax=ao.TweenLite=kr;ao.TimelineLite=ao.TimelineMax=ra;ir=new ra({sortChildren:!1,defaults:vm,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});io.stringFilter=qL;var od=[],V_={},kz=[],nR=0,Bz=0,uM=function(e){return(V_[e]||kz).map(function(t){return t()})},$T=function(){var e=Date.now(),t=[];e-nR>2&&(uM("matchMediaInit"),od.forEach(function(n){var i=n.queries,s=n.conditions,o,l,u,h;for(l in i)o=mc.matchMedia(i[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,h=1);h&&(n.revert(),u&&t.push(n))}),uM("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),nR=e,uM("matchMedia"))},aU=(function(){function r(t,n){this.selector=n&&KT(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Bz++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){gr(n)&&(s=i,i=n,n=gr);var o=this,l=function(){var h=Yi,m=o.selector,g;return h&&h!==o&&h.data.push(o),s&&(o.selector=KT(s)),Yi=o,g=i.apply(o,arguments),gr(g)&&o._r.push(g),Yi=h,o.selector=m,o.isReverted=!1,g};return o.last=l,n===gr?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},e.ignore=function(n){var i=Yi;Yi=null,n(this),Yi=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof kr&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?(function(){for(var l=s.getTweens(),u=s.data.length,h;u--;)h=s.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(m){return l.splice(l.indexOf(m),1)}));for(l.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,g){return g.g-m.g||-1/0}).forEach(function(m){return m.t.revert(n)}),u=s.data.length;u--;)h=s.data[u],h instanceof ra?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof kr)&&h.revert&&h.revert(n);s._r.forEach(function(m){return m(n,s)}),s.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var o=od.length;o--;)od[o].id===this.id&&od.splice(o,1)},e.revert=function(n){this.kill(n||{})},r})(),zz=(function(){function r(t){this.contexts=[],this.scope=t,Yi&&Yi.data.push(this)}var e=r.prototype;return e.add=function(n,i,s){Tc(n)||(n={matches:n});var o=new aU(0,s||this.scope),l=o.conditions={},u,h,m;Yi&&!o.selector&&(o.selector=Yi.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=n;for(h in n)h==="all"?m=1:(u=mc.matchMedia(n[h]),u&&(od.indexOf(o)<0&&od.push(o),(l[h]=u.matches)&&(m=1),u.addListener?u.addListener($T):u.addEventListener("change",$T)));return m&&i(o,function(g){return o.add(null,g)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r})(),o1={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return WL(i)})},timeline:function(e){return new ra(e)},getTweensOf:function(e,t){return ir.getTweensOf(e,t)},getProperty:function(e,t,n,i){ss(e)&&(e=Xo(e)[0]);var s=rd(e||{}).get,o=n?PL:NL;return n==="native"&&(n=""),e&&(t?o((Ja[t]&&Ja[t].get||s)(e,t,n,i)):function(l,u,h){return o((Ja[l]&&Ja[l].get||s)(e,l,u,h))})},quickSetter:function(e,t,n){if(e=Xo(e),e.length>1){var i=e.map(function(m){return Va.quickSetter(m,t,n)}),s=i.length;return function(m){for(var g=s;g--;)i[g](m)}}e=e[0]||{};var o=Ja[t],l=rd(e),u=l.harness&&(l.harness.aliases||{})[t]||t,h=o?function(m){var g=new o;rm._pt=0,g.init(e,n?m+n:m,rm,0,[e]),g.render(1,g),rm._pt&&RE(1,rm)}:l.set(e,u);return o?h:function(m){return h(e,u,n?m+n:m,l,1)}},quickTo:function(e,t,n){var i,s=Va.to(e,oo((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),o=function(u,h,m){return s.resetTo(t,u,h,m)};return o.tween=s,o},isTweening:function(e){return ir.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ad(e.ease,vm.ease)),Q3(vm,e||{})},config:function(e){return Q3(io,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Ja[l]&&!ao[l]&&rv(t+" effect requires "+l+" plugin.")}),aM[t]=function(l,u,h){return n(Xo(l),oo(u||{},s),h)},o&&(ra.prototype[t]=function(l,u,h){return this.add(aM[t](l,Tc(u)?u:(h=u)&&{},this),h)})},registerEase:function(e,t){Zn[e]=ad(t)},parseEase:function(e,t){return arguments.length?ad(e,t):Zn},getById:function(e){return ir.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new ra(e),i,s;for(n.smoothChildTiming=Fa(e.smoothChildTiming),ir.remove(n),n._dp=0,n._time=n._tTime=ir._time,i=ir._first;i;)s=i._next,(t||!(!i._dur&&i instanceof kr&&i.vars.onComplete===i._targets[0]))&&gc(n,i,i._start-i._delay),i=s;return gc(ir,n,0),n},context:function(e,t){return e?new aU(e,t):Yi},matchMedia:function(e){return new zz(e)},matchMediaRefresh:function(){return od.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||$T()},addEventListener:function(e,t){var n=V_[e]||(V_[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=V_[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:yz,wrapYoyo:xz,distribute:BL,random:VL,snap:zL,normalize:vz,getUnit:Fs,clamp:dz,splitColor:XL,toArray:Xo,selector:KT,mapRange:HL,pipe:mz,unitize:gz,interpolate:_z,shuffle:kL},install:EL,effects:aM,ticker:$a,updateRoot:ra.updateRoot,plugins:Ja,globalTimeline:ir,core:{PropTween:Ba,globals:AL,Tween:kr,Timeline:ra,Animation:lv,getCache:rd,_removeLinkedListItem:pb,reverting:function(){return _s},context:function(e){return e&&Yi&&(Yi.data.push(e),e._ctx=Yi),Yi},suppressOverwrites:function(e){return gE=e}}};ka("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return o1[r]=kr[r]});$a.add(ra.updateRoot);rm=o1.to({},{duration:0});var Vz=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Gz=function(e,t){var n=e._targets,i,s,o;for(i in t)for(s=n.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Vz(o,i)),o&&o.modifier&&o.modifier(t[i],e,n[s],i))},fM=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,o){o._onInit=function(l){var u,h;if(ss(s)&&(u={},ka(s,function(m){return u[m]=1}),s=u),t){u={};for(h in s)u[h]=t(s[h]);s=u}Gz(l,s)}}}},Va=o1.registerPlugin({name:"attr",init:function(e,t,n,i,s){var o,l,u;this.tween=n;for(o in t)u=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(u||0)+"",t[o],i,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)_s?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},fM("roundProps",QT),fM("modifiers"),fM("snap",zL))||o1;kr.version=ra.version=Va.version="3.14.2";wL=1;yE()&&bm();Zn.Power0;Zn.Power1;Zn.Power2;Zn.Power3;Zn.Power4;Zn.Linear;Zn.Quad;Zn.Cubic;Zn.Quart;Zn.Quint;Zn.Strong;Zn.Elastic;Zn.Back;Zn.SteppedEase;Zn.Bounce;Zn.Sine;Zn.Expo;Zn.Circ;var iR,Sf,um,DE,Kh,rR,NE,Hz=function(){return typeof window<"u"},Su={},Hh=180/Math.PI,fm=Math.PI/180,wp=Math.atan2,sR=1e8,PE=/([A-Z])/g,jz=/(left|right|width|margin|padding|x)/i,Wz=/[\s,\(]\S/,yc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ew=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Xz=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Yz=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},qz=function(e,t){return t.set(t.t,t.p,e===1?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Zz=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},oU=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},lU=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Kz=function(e,t,n){return e.style[t]=n},Qz=function(e,t,n){return e.style.setProperty(t,n)},Jz=function(e,t,n){return e._gsap[t]=n},$z=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},e6=function(e,t,n,i,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},t6=function(e,t,n,i,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},sr="transform",za=sr+"Origin",n6=function r(e,t){var n=this,i=this.target,s=i.style,o=i._gsap;if(e in Su&&s){if(this.tfm=this.tfm||{},e!=="transform")e=yc[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return n.tfm[l]=mu(i,l)}):this.tfm[e]=o.x?o[e]:mu(i,e),e===za&&(this.tfm.zOrigin=o.zOrigin);else return yc.transform.split(",").forEach(function(l){return r.call(n,l,t)});if(this.props.indexOf(sr)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(za,t,"")),e=sr}(s||t)&&this.props.push(e,t,s[e])},cU=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},i6=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(PE,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=NE(),(!s||!s.isStart)&&!n[sr]&&(cU(n),i.zOrigin&&n[za]&&(n[za]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},uU=function(e,t){var n={target:e,props:[],revert:i6,save:n6};return e._gsap||Va.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},fU,tw=function(e,t){var n=Sf.createElementNS?Sf.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Sf.createElement(e);return n&&n.style?n:Sf.createElement(e)},to=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(PE,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,Sm(t)||t,1)||""},aR="O,Moz,ms,Ms,Webkit".split(","),Sm=function(e,t,n){var i=t||Kh,s=i.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(aR[o]+e in s););return o<0?null:(o===3?"ms":o>=0?aR[o]:"")+e},nw=function(){Hz()&&window.document&&(iR=window,Sf=iR.document,um=Sf.documentElement,Kh=tw("div")||{style:{}},tw("div"),sr=Sm(sr),za=sr+"Origin",Kh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",fU=!!Sm("perspective"),NE=Va.core.reverting,DE=1)},oR=function(e){var t=e.ownerSVGElement,n=tw("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),um.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),um.removeChild(n),s},lR=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},hU=function(e){var t,n;try{t=e.getBBox()}catch{t=oR(e),n=1}return t&&(t.width||t.height)||n||(t=oR(e)),t&&!t.width&&!t.x&&!t.y?{x:+lR(e,["x","cx","x1"])||0,y:+lR(e,["y","cy","y1"])||0,width:0,height:0}:t},dU=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&hU(e))},Pf=function(e,t){if(t){var n=e.style,i;t in Su&&t!==za&&(t=sr),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(PE,"-$1").toLowerCase())):n.removeAttribute(t)}},Mf=function(e,t,n,i,s,o){var l=new Ba(e._pt,t,n,0,1,o?lU:oU);return e._pt=l,l.b=i,l.e=s,e._props.push(n),l},cR={deg:1,rad:1,turn:1},r6={grid:1,flex:1},Lf=function r(e,t,n,i){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=Kh.style,u=jz.test(t),h=e.tagName.toLowerCase()==="svg",m=(h?"client":"offset")+(u?"Width":"Height"),g=100,v=i==="px",_=i==="%",b,w,S,T;if(i===o||!s||cR[i]||cR[o])return s;if(o!=="px"&&!v&&(s=r(e,t,n,"px")),T=e.getCTM&&dU(e),(_||o==="%")&&(Su[t]||~t.indexOf("adius")))return b=T?e.getBBox()[u?"width":"height"]:e[m],Er(_?s/b*g:s/100*b);if(l[u?"width":"height"]=g+(v?o:i),w=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!h?e:e.parentNode,T&&(w=(e.ownerSVGElement||{}).parentNode),(!w||w===Sf||!w.appendChild)&&(w=Sf.body),S=w._gsap,S&&_&&S.width&&u&&S.time===$a.time&&!S.uncache)return Er(s/S.width*g);if(_&&(t==="height"||t==="width")){var A=e.style[t];e.style[t]=g+i,b=e[m],A?e.style[t]=A:Pf(e,t)}else(_||o==="%")&&!r6[to(w,"display")]&&(l.position=to(e,"position")),w===e&&(l.position="static"),w.appendChild(Kh),b=Kh[m],w.removeChild(Kh),l.position="absolute";return u&&_&&(S=rd(w),S.time=$a.time,S.width=w[m]),Er(v?b*s/g:b&&s?g/b*s:0)},mu=function(e,t,n,i){var s;return DE||nw(),t in yc&&t!=="transform"&&(t=yc[t],~t.indexOf(",")&&(t=t.split(",")[0])),Su[t]&&t!=="transform"?(s=uv(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:c1(to(e,za))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=l1[t]&&l1[t](e,t,n)||to(e,t)||RL(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Lf(e,t,s,n)+n:s},s6=function(e,t,n,i){if(!n||n==="none"){var s=Sm(t,e,1),o=s&&to(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=to(e,"borderTopColor"))}var l=new Ba(this._pt,e.style,t,0,1,rU),u=0,h=0,m,g,v,_,b,w,S,T,A,D,N,L;if(l.b=n,l.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=to(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(w=e.style[t],e.style[t]=i,i=to(e,t)||i,w?e.style[t]=w:Pf(e,t)),m=[n,i],qL(m),n=m[0],i=m[1],v=n.match(im)||[],L=i.match(im)||[],L.length){for(;g=im.exec(i);)S=g[0],A=i.substring(u,g.index),b?b=(b+1)%5:(A.substr(-5)==="rgba("||A.substr(-5)==="hsla(")&&(b=1),S!==(w=v[h++]||"")&&(_=parseFloat(w)||0,N=w.substr((_+"").length),S.charAt(1)==="="&&(S=cm(_,S)+N),T=parseFloat(S),D=S.substr((T+"").length),u=im.lastIndex-D.length,D||(D=D||io.units[t]||N,u===i.length&&(i+=D,l.e+=D)),N!==D&&(_=Lf(e,t,w,D)||0),l._pt={_next:l._pt,p:A||h===1?A:",",s:_,c:T-_,m:b&&b<4||t==="zIndex"?Math.round:0});l.c=u<i.length?i.substring(u,i.length):""}else l.r=t==="display"&&i==="none"?lU:oU;return TL.test(i)&&(l.e=0),this._pt=l,l},uR={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},a6=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=uR[n]||n,t[1]=uR[i]||i,t.join(" ")},o6=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,o=n._gsap,l,u,h;if(s==="all"||s===!0)i.cssText="",u=1;else for(s=s.split(","),h=s.length;--h>-1;)l=s[h],Su[l]&&(u=1,l=l==="transformOrigin"?za:sr),Pf(n,l);u&&(Pf(n,sr),o&&(o.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",uv(n,1),o.uncache=1,cU(i)))}},l1={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Ba(e._pt,t,n,0,0,o6);return o.u=i,o.pr=-10,o.tween=s,e._props.push(n),1}}},cv=[1,0,0,1,0,0],pU={},mU=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},fR=function(e){var t=to(e,sr);return mU(t)?cv:t.substr(7).match(ML).map(Er)},LE=function(e,t){var n=e._gsap||rd(e),i=e.style,s=fR(e),o,l,u,h;return n.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?cv:s):(s===cv&&!e.offsetParent&&e!==um&&!n.svg&&(u=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,l=e.nextElementSibling,um.appendChild(e)),s=fR(e),u?i.display=u:Pf(e,"display"),h&&(l?o.insertBefore(e,l):o?o.appendChild(e):um.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},iw=function(e,t,n,i,s,o){var l=e._gsap,u=s||LE(e,!0),h=l.xOrigin||0,m=l.yOrigin||0,g=l.xOffset||0,v=l.yOffset||0,_=u[0],b=u[1],w=u[2],S=u[3],T=u[4],A=u[5],D=t.split(" "),N=parseFloat(D[0])||0,L=parseFloat(D[1])||0,I,k,R,U;n?u!==cv&&(k=_*S-b*w)&&(R=N*(S/k)+L*(-w/k)+(w*A-S*T)/k,U=N*(-b/k)+L*(_/k)-(_*A-b*T)/k,N=R,L=U):(I=hU(e),N=I.x+(~D[0].indexOf("%")?N/100*I.width:N),L=I.y+(~(D[1]||D[0]).indexOf("%")?L/100*I.height:L)),i||i!==!1&&l.smooth?(T=N-h,A=L-m,l.xOffset=g+(T*_+A*w)-T,l.yOffset=v+(T*b+A*S)-A):l.xOffset=l.yOffset=0,l.xOrigin=N,l.yOrigin=L,l.smooth=!!i,l.origin=t,l.originIsAbsolute=!!n,e.style[za]="0px 0px",o&&(Mf(o,l,"xOrigin",h,N),Mf(o,l,"yOrigin",m,L),Mf(o,l,"xOffset",g,l.xOffset),Mf(o,l,"yOffset",v,l.yOffset)),e.setAttribute("data-svg-origin",N+" "+L)},uv=function(e,t){var n=e._gsap||new JL(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(e),h=to(e,za)||"0",m,g,v,_,b,w,S,T,A,D,N,L,I,k,R,U,H,Y,X,q,Q,ie,j,J,de,le,ce,z,Z,ae,fe,ve;return m=g=v=w=S=T=A=D=N=0,_=b=1,n.svg=!!(e.getCTM&&dU(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(i[sr]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[sr]!=="none"?u[sr]:"")),i.scale=i.rotate=i.translate="none"),k=LE(e,n.svg),n.svg&&(n.uncache?(de=e.getBBox(),h=n.xOrigin-de.x+"px "+(n.yOrigin-de.y)+"px",J=""):J=!t&&e.getAttribute("data-svg-origin"),iw(e,J||h,!!J||n.originIsAbsolute,n.smooth!==!1,k)),L=n.xOrigin||0,I=n.yOrigin||0,k!==cv&&(Y=k[0],X=k[1],q=k[2],Q=k[3],m=ie=k[4],g=j=k[5],k.length===6?(_=Math.sqrt(Y*Y+X*X),b=Math.sqrt(Q*Q+q*q),w=Y||X?wp(X,Y)*Hh:0,A=q||Q?wp(q,Q)*Hh+w:0,A&&(b*=Math.abs(Math.cos(A*fm))),n.svg&&(m-=L-(L*Y+I*q),g-=I-(L*X+I*Q))):(ve=k[6],ae=k[7],ce=k[8],z=k[9],Z=k[10],fe=k[11],m=k[12],g=k[13],v=k[14],R=wp(ve,Z),S=R*Hh,R&&(U=Math.cos(-R),H=Math.sin(-R),J=ie*U+ce*H,de=j*U+z*H,le=ve*U+Z*H,ce=ie*-H+ce*U,z=j*-H+z*U,Z=ve*-H+Z*U,fe=ae*-H+fe*U,ie=J,j=de,ve=le),R=wp(-q,Z),T=R*Hh,R&&(U=Math.cos(-R),H=Math.sin(-R),J=Y*U-ce*H,de=X*U-z*H,le=q*U-Z*H,fe=Q*H+fe*U,Y=J,X=de,q=le),R=wp(X,Y),w=R*Hh,R&&(U=Math.cos(R),H=Math.sin(R),J=Y*U+X*H,de=ie*U+j*H,X=X*U-Y*H,j=j*U-ie*H,Y=J,ie=de),S&&Math.abs(S)+Math.abs(w)>359.9&&(S=w=0,T=180-T),_=Er(Math.sqrt(Y*Y+X*X+q*q)),b=Er(Math.sqrt(j*j+ve*ve)),R=wp(ie,j),A=Math.abs(R)>2e-4?R*Hh:0,N=fe?1/(fe<0?-fe:fe):0),n.svg&&(J=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!mU(to(e,sr)),J&&e.setAttribute("transform",J))),Math.abs(A)>90&&Math.abs(A)<270&&(s?(_*=-1,A+=w<=0?180:-180,w+=w<=0?180:-180):(b*=-1,A+=A<=0?180:-180)),t=t||n.uncache,n.x=m-((n.xPercent=m&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-m)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=g-((n.yPercent=g&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=v+o,n.scaleX=Er(_),n.scaleY=Er(b),n.rotation=Er(w)+l,n.rotationX=Er(S)+l,n.rotationY=Er(T)+l,n.skewX=A+l,n.skewY=D+l,n.transformPerspective=N+o,(n.zOrigin=parseFloat(h.split(" ")[2])||!t&&n.zOrigin||0)&&(i[za]=c1(h)),n.xOffset=n.yOffset=0,n.force3D=io.force3D,n.renderTransform=n.svg?c6:fU?gU:l6,n.uncache=0,n},c1=function(e){return(e=e.split(" "))[0]+" "+e[1]},hM=function(e,t,n){var i=Fs(t);return Er(parseFloat(t)+parseFloat(Lf(e,"x",n+"px",i)))+i},l6=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,gU(e,t)},wh="0deg",l0="0px",Eh=") ",gU=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,h=n.rotation,m=n.rotationY,g=n.rotationX,v=n.skewX,_=n.skewY,b=n.scaleX,w=n.scaleY,S=n.transformPerspective,T=n.force3D,A=n.target,D=n.zOrigin,N="",L=T==="auto"&&e&&e!==1||T===!0;if(D&&(g!==wh||m!==wh)){var I=parseFloat(m)*fm,k=Math.sin(I),R=Math.cos(I),U;I=parseFloat(g)*fm,U=Math.cos(I),o=hM(A,o,k*U*-D),l=hM(A,l,-Math.sin(I)*-D),u=hM(A,u,R*U*-D+D)}S!==l0&&(N+="perspective("+S+Eh),(i||s)&&(N+="translate("+i+"%, "+s+"%) "),(L||o!==l0||l!==l0||u!==l0)&&(N+=u!==l0||L?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+Eh),h!==wh&&(N+="rotate("+h+Eh),m!==wh&&(N+="rotateY("+m+Eh),g!==wh&&(N+="rotateX("+g+Eh),(v!==wh||_!==wh)&&(N+="skew("+v+", "+_+Eh),(b!==1||w!==1)&&(N+="scale("+b+", "+w+Eh),A.style[sr]=N||"translate(0, 0)"},c6=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,h=n.skewX,m=n.skewY,g=n.scaleX,v=n.scaleY,_=n.target,b=n.xOrigin,w=n.yOrigin,S=n.xOffset,T=n.yOffset,A=n.forceCSS,D=parseFloat(o),N=parseFloat(l),L,I,k,R,U;u=parseFloat(u),h=parseFloat(h),m=parseFloat(m),m&&(m=parseFloat(m),h+=m,u+=m),u||h?(u*=fm,h*=fm,L=Math.cos(u)*g,I=Math.sin(u)*g,k=Math.sin(u-h)*-v,R=Math.cos(u-h)*v,h&&(m*=fm,U=Math.tan(h-m),U=Math.sqrt(1+U*U),k*=U,R*=U,m&&(U=Math.tan(m),U=Math.sqrt(1+U*U),L*=U,I*=U)),L=Er(L),I=Er(I),k=Er(k),R=Er(R)):(L=g,R=v,I=k=0),(D&&!~(o+"").indexOf("px")||N&&!~(l+"").indexOf("px"))&&(D=Lf(_,"x",o,"px"),N=Lf(_,"y",l,"px")),(b||w||S||T)&&(D=Er(D+b-(b*L+w*k)+S),N=Er(N+w-(b*I+w*R)+T)),(i||s)&&(U=_.getBBox(),D=Er(D+i/100*U.width),N=Er(N+s/100*U.height)),U="matrix("+L+","+I+","+k+","+R+","+D+","+N+")",_.setAttribute("transform",U),A&&(_.style[sr]=U)},u6=function(e,t,n,i,s){var o=360,l=ss(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?Hh:1),h=u-i,m=i+h+"deg",g,v;return l&&(g=s.split("_")[1],g==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),g==="cw"&&h<0?h=(h+o*sR)%o-~~(h/o)*o:g==="ccw"&&h>0&&(h=(h-o*sR)%o-~~(h/o)*o)),e._pt=v=new Ba(e._pt,t,n,i,h,Xz),v.e=m,v.u="deg",e._props.push(n),v},hR=function(e,t){for(var n in t)e[n]=t[n];return e},f6=function(e,t,n){var i=hR({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,h,m,g,v,_,b;i.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),o[sr]=t,l=uv(n,1),Pf(n,sr),n.setAttribute("transform",h)):(h=getComputedStyle(n)[sr],o[sr]=t,l=uv(n,1),o[sr]=h);for(u in Su)h=i[u],m=l[u],h!==m&&s.indexOf(u)<0&&(_=Fs(h),b=Fs(m),g=_!==b?Lf(n,u,h,b):parseFloat(h),v=parseFloat(m),e._pt=new Ba(e._pt,l,u,g,v-g,ew),e._pt.u=b||0,e._props.push(u));hR(l,i)};ka("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",o=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(l){return e<2?r+l:"border"+l+r});l1[e>1?"border"+r:r]=function(l,u,h,m,g){var v,_;if(arguments.length<4)return v=o.map(function(b){return mu(l,b,h)}),_=v.join(" "),_.split(v[0]).length===5?v[0]:_;v=(m+"").split(" "),_={},o.forEach(function(b,w){return _[b]=v[w]=v[w]||v[(w-1)/2|0]}),l.init(u,_,g)}});var vU={name:"css",register:nw,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var o=this._props,l=e.style,u=n.vars.startAt,h,m,g,v,_,b,w,S,T,A,D,N,L,I,k,R,U;DE||nw(),this.styles=this.styles||uU(e),R=this.styles.props,this.tween=n;for(w in t)if(w!=="autoRound"&&(m=t[w],!(Ja[w]&&$L(w,t,n,i,e,s)))){if(_=typeof m,b=l1[w],_==="function"&&(m=m.call(n,i,e,s),_=typeof m),_==="string"&&~m.indexOf("random(")&&(m=av(m)),b)b(this,e,w,m,n)&&(k=1);else if(w.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(w)+"").trim(),m+="",Rf.lastIndex=0,Rf.test(h)||(S=Fs(h),T=Fs(m),T?S!==T&&(h=Lf(e,w,h,T)+T):S&&(m+=S)),this.add(l,"setProperty",h,m,i,s,0,0,w),o.push(w),R.push(w,0,l[w]);else if(_!=="undefined"){if(u&&w in u?(h=typeof u[w]=="function"?u[w].call(n,i,e,s):u[w],ss(h)&&~h.indexOf("random(")&&(h=av(h)),Fs(h+"")||h==="auto"||(h+=io.units[w]||Fs(mu(e,w))||""),(h+"").charAt(1)==="="&&(h=mu(e,w))):h=mu(e,w),v=parseFloat(h),A=_==="string"&&m.charAt(1)==="="&&m.substr(0,2),A&&(m=m.substr(2)),g=parseFloat(m),w in yc&&(w==="autoAlpha"&&(v===1&&mu(e,"visibility")==="hidden"&&g&&(v=0),R.push("visibility",0,l.visibility),Mf(this,l,"visibility",v?"inherit":"hidden",g?"inherit":"hidden",!g)),w!=="scale"&&w!=="transform"&&(w=yc[w],~w.indexOf(",")&&(w=w.split(",")[0]))),D=w in Su,D){if(this.styles.save(w),U=m,_==="string"&&m.substring(0,6)==="var(--"){if(m=to(e,m.substring(4,m.indexOf(")"))),m.substring(0,5)==="calc("){var H=e.style.perspective;e.style.perspective=m,m=to(e,"perspective"),H?e.style.perspective=H:Pf(e,"perspective")}g=parseFloat(m)}if(N||(L=e._gsap,L.renderTransform&&!t.parseTransform||uv(e,t.parseTransform),I=t.smoothOrigin!==!1&&L.smooth,N=this._pt=new Ba(this._pt,l,sr,0,1,L.renderTransform,L,0,-1),N.dep=1),w==="scale")this._pt=new Ba(this._pt,L,"scaleY",L.scaleY,(A?cm(L.scaleY,A+g):g)-L.scaleY||0,ew),this._pt.u=0,o.push("scaleY",w),w+="X";else if(w==="transformOrigin"){R.push(za,0,l[za]),m=a6(m),L.svg?iw(e,m,0,I,0,this):(T=parseFloat(m.split(" ")[2])||0,T!==L.zOrigin&&Mf(this,L,"zOrigin",L.zOrigin,T),Mf(this,l,w,c1(h),c1(m)));continue}else if(w==="svgOrigin"){iw(e,m,1,I,0,this);continue}else if(w in pU){u6(this,L,w,v,A?cm(v,A+m):m);continue}else if(w==="smoothOrigin"){Mf(this,L,"smooth",L.smooth,m);continue}else if(w==="force3D"){L[w]=m;continue}else if(w==="transform"){f6(this,m,e);continue}}else w in l||(w=Sm(w)||w);if(D||(g||g===0)&&(v||v===0)&&!Wz.test(m)&&w in l)S=(h+"").substr((v+"").length),g||(g=0),T=Fs(m)||(w in io.units?io.units[w]:S),S!==T&&(v=Lf(e,w,h,T)),this._pt=new Ba(this._pt,D?L:l,w,v,(A?cm(v,A+g):g)-v,!D&&(T==="px"||w==="zIndex")&&t.autoRound!==!1?Zz:ew),this._pt.u=T||0,D&&U!==m?(this._pt.b=h,this._pt.e=U,this._pt.r=qz):S!==T&&T!=="%"&&(this._pt.b=h,this._pt.r=Yz);else if(w in l)s6.call(this,e,w,h,A?A+m:m);else if(w in e)this.add(e,w,h||e[w],A?A+m:m,i,s);else if(w!=="parseTransform"){_E(w,m);continue}D||(w in l?R.push(w,0,l[w]):typeof e[w]=="function"?R.push(w,2,e[w]()):R.push(w,1,h||e[w])),o.push(w)}}k&&sU(this)},render:function(e,t){if(t.tween._time||!NE())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:mu,aliases:yc,getSetter:function(e,t,n){var i=yc[t];return i&&i.indexOf(",")<0&&(t=i),t in Su&&t!==za&&(e._gsap.x||mu(e,"x"))?n&&rR===n?t==="scale"?$z:Jz:(rR=n||{})&&(t==="scale"?e6:t6):e.style&&!vE(e.style[t])?Kz:~t.indexOf("-")?Qz:CE(e,t)},core:{_removeProperty:Pf,_getMatrix:LE}};Va.utils.checkPrefix=Sm;Va.core.getStyleSaver=uU;(function(r,e,t,n){var i=ka(r+","+e+","+t,function(s){Su[s]=1});ka(e,function(s){io.units[s]="deg",pU[s]=1}),yc[i[13]]=r+","+e,ka(n,function(s){var o=s.split(":");yc[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ka("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){io.units[r]="px"});Va.registerPlugin(vU);var yU=Va.registerPlugin(vU)||Va;yU.core.Tween;const xU=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();const h6=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const d6=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());const dR=r=>{const e=d6(r);return e.charAt(0).toUpperCase()+e.slice(1)};var p6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const m6=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const g6=Re.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...l},u)=>Re.createElement("svg",{ref:u,...p6,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:xU("lucide",i),...!s&&!m6(l)&&{"aria-hidden":"true"},...l},[...o.map(([h,m])=>Re.createElement(h,m)),...Array.isArray(s)?s:[s]]));const or=(r,e)=>{const t=Re.forwardRef(({className:n,...i},s)=>Re.createElement(g6,{ref:s,iconNode:e,className:xU(`lucide-${h6(dR(r))}`,`lucide-${r}`,n),...i}));return t.displayName=dR(r),t};const v6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],pR=or("award",v6);const y6=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],x6=or("book-open",y6);const _6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],b6=or("chevron-down",_6);const S6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mR=or("chevron-right",S6);const M6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],gR=or("clock",M6);const T6=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],w6=or("code",T6);const E6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_U=or("external-link",E6);const A6=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vR=or("file-text",A6);const C6=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],UE=or("github",C6);const R6=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],D6=or("graduation-cap",R6);const N6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],P6=or("heart",N6);const L6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],U6=or("lightbulb",L6);const I6=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],O6=or("linkedin",I6);const F6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],bU=or("mail",F6);const k6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yR=or("map-pin",k6);const B6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],z6=or("menu",B6);const V6=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],G6=or("message-square",V6);const H6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],j6=or("send",H6);const W6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],u1=or("target",W6);const X6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],f1=or("trending-up",X6);const Y6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],h1=or("trophy",Y6);const q6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],IE=or("x",q6);const Z6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],K6=or("zap",Z6);const Iv="183",jh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Wh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},SU=0,rw=1,MU=2,Q6=3,TU=0,hm=1,B0=2,Qh=3,Mu=0,zs=1,Go=2,wl=0,ld=1,sw=2,aw=3,ow=4,wU=5,J6=6,xf=100,EU=101,AU=102,CU=103,RU=104,DU=200,NU=201,PU=202,LU=203,d1=204,p1=205,UU=206,IU=207,OU=208,FU=209,kU=210,BU=211,zU=212,VU=213,GU=214,m1=0,g1=1,v1=2,hd=3,y1=4,x1=5,_1=6,b1=7,Ov=0,HU=1,jU=2,qo=0,OE=1,FE=2,kE=3,Fv=4,BE=5,zE=6,VE=7,lw="attached",WU="detached",Uf=300,El=301,If=302,dm=303,z0=304,Im=306,dd=1e3,vr=1001,fv=1002,Cr=1003,GE=1004,$6=1004,sm=1005,e8=1005,Gn=1006,V0=1007,t8=1007,xc=1008,cw=1008,ns=1009,vb=1010,yb=1011,Mm=1012,kv=1013,lo=1014,qi=1015,yr=1016,xb=1017,_b=1018,Tm=1020,HE=35902,jE=35899,WE=1021,XE=1022,Rr=1023,wc=1026,Tf=1027,Bv=1028,zv=1029,pd=1030,bb=1031,n8=1032,Sb=1033,G0=33776,H0=33777,j0=33778,W0=33779,S1=35840,M1=35841,T1=35842,w1=35843,E1=36196,A1=37492,C1=37496,R1=37488,D1=37489,N1=37490,P1=37491,L1=37808,U1=37809,I1=37810,O1=37811,F1=37812,k1=37813,B1=37814,z1=37815,V1=37816,G1=37817,H1=37818,j1=37819,W1=37820,X1=37821,Y1=36492,q1=36494,Z1=36495,K1=36283,Q1=36284,J1=36285,$1=36286,XU=2200,YU=2201,qU=2202,hv=2300,eb=2301,G_=2302,uw=2303,Jh=2400,$h=2401,dv=2402,Mb=2500,YE=2501,i8=0,r8=1,s8=2,ZU=3200,KU=3201,a8=3202,o8=3203,zf=0,QU=1,vu="",xs="srgb",Al="srgb-linear",pv="linear",ui="srgb",l8="",c8="rg",u8="ga",f8=0,Xh=7680,h8=7681,d8=7682,p8=7683,m8=34055,g8=34056,v8=5386,y8=512,x8=513,_8=514,b8=515,S8=516,M8=517,T8=518,fw=519,JU=512,$U=513,eI=514,Tb=515,tI=516,nI=517,wb=518,iI=519,mv=35044,w8=35048,E8=35040,A8=35045,C8=35049,R8=35041,D8=35046,N8=35050,P8=35042,L8="100",hw="300 es",no=2e3,md=2001,U8={COMPUTE:"compute",RENDER:"render"},I8={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},O8={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"},F8={TEXTURE_COMPARE:"depthTextureCompare"};function k8(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const B8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function am(r,e){return new B8[r](e)}function rI(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function gv(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function sI(){const r=gv("canvas");return r.style.display="block",r}const xR={};let Of=null;function z8(r){Of=r}function V8(){return Of}function vv(...r){const e="THREE."+r.shift();Of?Of("log",e,...r):console.log(e,...r)}function aI(r){const e=r[0];if(typeof e=="string"&&e.startsWith("TSL:")){const t=r[1];t&&t.isStackTrace?r[0]+=" "+t.getLocation():r[1]='Stack trace not available. Enable "THREE.Node.captureStackTrace" to capture stack traces.'}return r}function Bt(...r){r=aI(r);const e="THREE."+r.shift();if(Of)Of("warn",e,...r);else{const t=r[0];t&&t.isStackTrace?console.warn(t.getError(e)):console.warn(e,...r)}}function $t(...r){r=aI(r);const e="THREE."+r.shift();if(Of)Of("error",e,...r);else{const t=r[0];t&&t.isStackTrace?console.error(t.getError(e)):console.error(e,...r)}}function yv(...r){const e=r.join(" ");e in xR||(xR[e]=!0,Bt(...r))}function G8(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}const H8={[m1]:g1,[v1]:_1,[y1]:b1,[hd]:x1,[g1]:m1,[_1]:v1,[b1]:y1,[x1]:hd};let Ec=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Us=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _R=1234567;const cd=Math.PI/180,wm=180/Math.PI;function ro(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Us[r&255]+Us[r>>8&255]+Us[r>>16&255]+Us[r>>24&255]+"-"+Us[e&255]+Us[e>>8&255]+"-"+Us[e>>16&15|64]+Us[e>>24&255]+"-"+Us[t&63|128]+Us[t>>8&255]+"-"+Us[t>>16&255]+Us[t>>24&255]+Us[n&255]+Us[n>>8&255]+Us[n>>16&255]+Us[n>>24&255]).toLowerCase()}function un(r,e,t){return Math.max(e,Math.min(t,r))}function qE(r,e){return(r%e+e)%e}function j8(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function W8(r,e,t){return r!==e?(t-r)/(e-r):0}function X0(r,e,t){return(1-t)*r+t*e}function X8(r,e,t,n){return X0(r,e,1-Math.exp(-t*n))}function Y8(r,e=1){return e-Math.abs(qE(r,e*2)-e)}function q8(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function Z8(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function K8(r,e){return r+Math.floor(Math.random()*(e-r+1))}function Q8(r,e){return r+Math.random()*(e-r)}function J8(r){return r*(.5-Math.random())}function $8(r){r!==void 0&&(_R=r);let e=_R+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function eV(r){return r*cd}function tV(r){return r*wm}function nV(r){return(r&r-1)===0&&r!==0}function iV(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function rV(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function sV(r,e,t,n,i){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),h=s((e+n)/2),m=o((e+n)/2),g=s((e-n)/2),v=o((e-n)/2),_=s((n-e)/2),b=o((n-e)/2);switch(i){case"XYX":r.set(l*m,u*g,u*v,l*h);break;case"YZY":r.set(u*v,l*m,u*g,l*h);break;case"ZXZ":r.set(u*g,u*v,l*m,l*h);break;case"XZX":r.set(l*m,u*b,u*_,l*h);break;case"YXY":r.set(u*_,l*m,u*b,l*h);break;case"ZYZ":r.set(u*b,u*_,l*m,l*h);break;default:Bt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function sa(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function An(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const aV={DEG2RAD:cd,RAD2DEG:wm,generateUUID:ro,clamp:un,euclideanModulo:qE,mapLinear:j8,inverseLerp:W8,lerp:X0,damp:X8,pingpong:Y8,smoothstep:q8,smootherstep:Z8,randInt:K8,randFloat:Q8,randFloatSpread:J8,seededRandom:$8,degToRad:eV,radToDeg:tV,isPowerOfTwo:nV,ceilPowerOfTwo:iV,floorPowerOfTwo:rV,setQuaternionFromProperEuler:sV,normalize:An,denormalize:sa};class ft{constructor(e=0,t=0){ft.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=un(this.x,e.x,t.x),this.y=un(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=un(this.x,e,t),this.y=un(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(un(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(un(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bs{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,l){let u=n[i+0],h=n[i+1],m=n[i+2],g=n[i+3],v=s[o+0],_=s[o+1],b=s[o+2],w=s[o+3];if(g!==w||u!==v||h!==_||m!==b){let S=u*v+h*_+m*b+g*w;S<0&&(v=-v,_=-_,b=-b,w=-w,S=-S);let T=1-l;if(S<.9995){const A=Math.acos(S),D=Math.sin(A);T=Math.sin(T*A)/D,l=Math.sin(l*A)/D,u=u*T+v*l,h=h*T+_*l,m=m*T+b*l,g=g*T+w*l}else{u=u*T+v*l,h=h*T+_*l,m=m*T+b*l,g=g*T+w*l;const A=1/Math.sqrt(u*u+h*h+m*m+g*g);u*=A,h*=A,m*=A,g*=A}}e[t]=u,e[t+1]=h,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,i,s,o){const l=n[i],u=n[i+1],h=n[i+2],m=n[i+3],g=s[o],v=s[o+1],_=s[o+2],b=s[o+3];return e[t]=l*b+m*g+u*_-h*v,e[t+1]=u*b+m*v+h*g-l*_,e[t+2]=h*b+m*_+l*v-u*g,e[t+3]=m*b-l*g-u*v-h*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,h=l(n/2),m=l(i/2),g=l(s/2),v=u(n/2),_=u(i/2),b=u(s/2);switch(o){case"XYZ":this._x=v*m*g+h*_*b,this._y=h*_*g-v*m*b,this._z=h*m*b+v*_*g,this._w=h*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+h*_*b,this._y=h*_*g-v*m*b,this._z=h*m*b-v*_*g,this._w=h*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-h*_*b,this._y=h*_*g+v*m*b,this._z=h*m*b+v*_*g,this._w=h*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-h*_*b,this._y=h*_*g+v*m*b,this._z=h*m*b-v*_*g,this._w=h*m*g+v*_*b;break;case"YZX":this._x=v*m*g+h*_*b,this._y=h*_*g+v*m*b,this._z=h*m*b-v*_*g,this._w=h*m*g-v*_*b;break;case"XZY":this._x=v*m*g-h*_*b,this._y=h*_*g-v*m*b,this._z=h*m*b+v*_*g,this._w=h*m*g+v*_*b;break;default:Bt("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],l=t[5],u=t[9],h=t[2],m=t[6],g=t[10],v=n+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-u)*_,this._y=(s-h)*_,this._z=(o-i)*_}else if(n>l&&n>g){const _=2*Math.sqrt(1+n-l-g);this._w=(m-u)/_,this._x=.25*_,this._y=(i+o)/_,this._z=(s+h)/_}else if(l>g){const _=2*Math.sqrt(1+l-n-g);this._w=(s-h)/_,this._x=(i+o)/_,this._y=.25*_,this._z=(u+m)/_}else{const _=2*Math.sqrt(1+g-n-l);this._w=(o-i)/_,this._x=(s+h)/_,this._y=(u+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(un(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,l=t._x,u=t._y,h=t._z,m=t._w;return this._x=n*m+o*l+i*h-s*u,this._y=i*m+o*u+s*l-n*h,this._z=s*m+o*h+n*u-i*l,this._w=o*m-n*l-i*u-s*h,this._onChangeCallback(),this}slerp(e,t){let n=e._x,i=e._y,s=e._z,o=e._w,l=this.dot(e);l<0&&(n=-n,i=-i,s=-s,o=-o,l=-l);let u=1-t;if(l<.9995){const h=Math.acos(l),m=Math.sin(h);u=Math.sin(u*h)/m,t=Math.sin(t*h)/m,this._x=this._x*u+n*t,this._y=this._y*u+i*t,this._z=this._z*u+s*t,this._w=this._w*u+o*t,this._onChangeCallback()}else this._x=this._x*u+n*t,this._y=this._y*u+i*t,this._z=this._z*u+s*t,this._w=this._w*u+o*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,t=0,n=0){se.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(bR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(bR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,l=e.z,u=e.w,h=2*(o*i-l*n),m=2*(l*t-s*i),g=2*(s*n-o*t);return this.x=t+u*h+o*g-l*m,this.y=n+u*m+l*h-s*g,this.z=i+u*g+s*m-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=un(this.x,e.x,t.x),this.y=un(this.y,e.y,t.y),this.z=un(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=un(this.x,e,t),this.y=un(this.y,e,t),this.z=un(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(un(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=i*u-s*l,this.y=s*o-n*u,this.z=n*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return dM.copy(this).projectOnVector(e),this.sub(dM)}reflect(e){return this.sub(dM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(un(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dM=new se,bR=new bs;class xn{constructor(e,t,n,i,s,o,l,u,h){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,u,h)}set(e,t,n,i,s,o,l,u,h){const m=this.elements;return m[0]=e,m[1]=i,m[2]=l,m[3]=t,m[4]=s,m[5]=u,m[6]=n,m[7]=o,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[3],u=n[6],h=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],w=i[0],S=i[3],T=i[6],A=i[1],D=i[4],N=i[7],L=i[2],I=i[5],k=i[8];return s[0]=o*w+l*A+u*L,s[3]=o*S+l*D+u*I,s[6]=o*T+l*N+u*k,s[1]=h*w+m*A+g*L,s[4]=h*S+m*D+g*I,s[7]=h*T+m*N+g*k,s[2]=v*w+_*A+b*L,s[5]=v*S+_*D+b*I,s[8]=v*T+_*N+b*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],m=e[8];return t*o*m-t*l*h-n*s*m+n*l*u+i*s*h-i*o*u}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],m=e[8],g=m*o-l*h,v=l*u-m*s,_=h*s-o*u,b=t*g+n*v+i*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=g*w,e[1]=(i*h-m*n)*w,e[2]=(l*n-i*o)*w,e[3]=v*w,e[4]=(m*t-i*u)*w,e[5]=(i*s-l*t)*w,e[6]=_*w,e[7]=(n*u-h*t)*w,e[8]=(o*t-n*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,l){const u=Math.cos(s),h=Math.sin(s);return this.set(n*u,n*h,-n*(u*o+h*l)+o+e,-i*h,i*u,-i*(-h*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(pM.makeScale(e,t)),this}rotate(e){return this.premultiply(pM.makeRotation(-e)),this}translate(e,t){return this.premultiply(pM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pM=new xn,SR=new xn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),MR=new xn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function oV(){const r={enabled:!0,workingColorSpace:Al,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ui&&(i.r=xu(i.r),i.g=xu(i.g),i.b=xu(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ui&&(i.r=pm(i.r),i.g=pm(i.g),i.b=pm(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===vu?pv:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return yv("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return yv("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[Al]:{primaries:e,whitePoint:n,transfer:pv,toXYZ:SR,fromXYZ:MR,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:xs},outputColorSpaceConfig:{drawingBufferColorSpace:xs}},[xs]:{primaries:e,whitePoint:n,transfer:ui,toXYZ:SR,fromXYZ:MR,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:xs}}}),r}const Wn=oV();function xu(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function pm(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Ep;class oI{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ep===void 0&&(Ep=gv("canvas")),Ep.width=e.width,Ep.height=e.height;const i=Ep.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Ep}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=gv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=xu(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(xu(t[n]/255)*255):t[n]=xu(t[n]);return{data:t,width:e.width,height:e.height}}else return Bt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lV=0;class wf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lV++}),this.uuid=ro(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?s.push(mM(i[o].image)):s.push(mM(i[o]))}else s=mM(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function mM(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?oI.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(Bt("Texture: Unable to serialize Texture."),{})}let cV=0;const gM=new se;class di extends Ec{constructor(e=di.DEFAULT_IMAGE,t=di.DEFAULT_MAPPING,n=vr,i=vr,s=Gn,o=xc,l=Rr,u=ns,h=di.DEFAULT_ANISOTROPY,m=vu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cV++}),this.uuid=ro(),this.name="",this.source=new wf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(gM).x}get height(){return this.source.getSize(gM).y}get depth(){return this.source.getSize(gM).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){Bt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){Bt(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Uf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case dd:e.x=e.x-Math.floor(e.x);break;case vr:e.x=e.x<0?0:1;break;case fv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case dd:e.y=e.y-Math.floor(e.y);break;case vr:e.y=e.y<0?0:1;break;case fv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}di.DEFAULT_IMAGE=null;di.DEFAULT_MAPPING=Uf;di.DEFAULT_ANISOTROPY=1;class hi{constructor(e=0,t=0,n=0,i=1){hi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const u=e.elements,h=u[0],m=u[4],g=u[8],v=u[1],_=u[5],b=u[9],w=u[2],S=u[6],T=u[10];if(Math.abs(m-v)<.01&&Math.abs(g-w)<.01&&Math.abs(b-S)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+w)<.1&&Math.abs(b+S)<.1&&Math.abs(h+_+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(h+1)/2,N=(_+1)/2,L=(T+1)/2,I=(m+v)/4,k=(g+w)/4,R=(b+S)/4;return D>N&&D>L?D<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(D),i=I/n,s=k/n):N>L?N<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(N),n=I/i,s=R/i):L<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(L),n=k/s,i=R/s),this.set(n,i,s,t),this}let A=Math.sqrt((S-b)*(S-b)+(g-w)*(g-w)+(v-m)*(v-m));return Math.abs(A)<.001&&(A=1),this.x=(S-b)/A,this.y=(g-w)/A,this.z=(v-m)/A,this.w=Math.acos((h+_+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=un(this.x,e.x,t.x),this.y=un(this.y,e.y,t.y),this.z=un(this.z,e.z,t.z),this.w=un(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=un(this.x,e,t),this.y=un(this.y,e,t),this.z=un(this.z,e,t),this.w=un(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(un(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ZE extends Ec{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Gn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new hi(0,0,e,t),this.scissorTest=!1,this.viewport=new hi(0,0,e,t),this.textures=[];const i={width:e,height:t,depth:n.depth},s=new di(i),o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Gn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new wf(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class la extends ZE{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Eb extends di{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Cr,this.minFilter=Cr,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class uV extends la{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Eb(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Ab extends di{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Cr,this.minFilter=Cr,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fV extends la{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ab(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class fn{constructor(e,t,n,i,s,o,l,u,h,m,g,v,_,b,w,S){fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,u,h,m,g,v,_,b,w,S)}set(e,t,n,i,s,o,l,u,h,m,g,v,_,b,w,S){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=i,T[1]=s,T[5]=o,T[9]=l,T[13]=u,T[2]=h,T[6]=m,T[10]=g,T[14]=v,T[3]=_,T[7]=b,T[11]=w,T[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new fn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,n=e.elements,i=1/Ap.setFromMatrixColumn(e,0).length(),s=1/Ap.setFromMatrixColumn(e,1).length(),o=1/Ap.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(i),h=Math.sin(i),m=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const v=o*m,_=o*g,b=l*m,w=l*g;t[0]=u*m,t[4]=-u*g,t[8]=h,t[1]=_+b*h,t[5]=v-w*h,t[9]=-l*u,t[2]=w-v*h,t[6]=b+_*h,t[10]=o*u}else if(e.order==="YXZ"){const v=u*m,_=u*g,b=h*m,w=h*g;t[0]=v+w*l,t[4]=b*l-_,t[8]=o*h,t[1]=o*g,t[5]=o*m,t[9]=-l,t[2]=_*l-b,t[6]=w+v*l,t[10]=o*u}else if(e.order==="ZXY"){const v=u*m,_=u*g,b=h*m,w=h*g;t[0]=v-w*l,t[4]=-o*g,t[8]=b+_*l,t[1]=_+b*l,t[5]=o*m,t[9]=w-v*l,t[2]=-o*h,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const v=o*m,_=o*g,b=l*m,w=l*g;t[0]=u*m,t[4]=b*h-_,t[8]=v*h+w,t[1]=u*g,t[5]=w*h+v,t[9]=_*h-b,t[2]=-h,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const v=o*u,_=o*h,b=l*u,w=l*h;t[0]=u*m,t[4]=w-v*g,t[8]=b*g+_,t[1]=g,t[5]=o*m,t[9]=-l*m,t[2]=-h*m,t[6]=_*g+b,t[10]=v-w*g}else if(e.order==="XZY"){const v=o*u,_=o*h,b=l*u,w=l*h;t[0]=u*m,t[4]=-g,t[8]=h*m,t[1]=v*g+w,t[5]=o*m,t[9]=_*g-b,t[2]=b*g-_,t[6]=l*m,t[10]=w*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hV,e,dV)}lookAt(e,t,n){const i=this.elements;return Ka.subVectors(e,t),Ka.lengthSq()===0&&(Ka.z=1),Ka.normalize(),uf.crossVectors(n,Ka),uf.lengthSq()===0&&(Math.abs(n.z)===1?Ka.x+=1e-4:Ka.z+=1e-4,Ka.normalize(),uf.crossVectors(n,Ka)),uf.normalize(),Px.crossVectors(Ka,uf),i[0]=uf.x,i[4]=Px.x,i[8]=Ka.x,i[1]=uf.y,i[5]=Px.y,i[9]=Ka.y,i[2]=uf.z,i[6]=Px.z,i[10]=Ka.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[4],u=n[8],h=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],w=n[6],S=n[10],T=n[14],A=n[3],D=n[7],N=n[11],L=n[15],I=i[0],k=i[4],R=i[8],U=i[12],H=i[1],Y=i[5],X=i[9],q=i[13],Q=i[2],ie=i[6],j=i[10],J=i[14],de=i[3],le=i[7],ce=i[11],z=i[15];return s[0]=o*I+l*H+u*Q+h*de,s[4]=o*k+l*Y+u*ie+h*le,s[8]=o*R+l*X+u*j+h*ce,s[12]=o*U+l*q+u*J+h*z,s[1]=m*I+g*H+v*Q+_*de,s[5]=m*k+g*Y+v*ie+_*le,s[9]=m*R+g*X+v*j+_*ce,s[13]=m*U+g*q+v*J+_*z,s[2]=b*I+w*H+S*Q+T*de,s[6]=b*k+w*Y+S*ie+T*le,s[10]=b*R+w*X+S*j+T*ce,s[14]=b*U+w*q+S*J+T*z,s[3]=A*I+D*H+N*Q+L*de,s[7]=A*k+D*Y+N*ie+L*le,s[11]=A*R+D*X+N*j+L*ce,s[15]=A*U+D*q+N*J+L*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],l=e[5],u=e[9],h=e[13],m=e[2],g=e[6],v=e[10],_=e[14],b=e[3],w=e[7],S=e[11],T=e[15],A=u*_-h*v,D=l*_-h*g,N=l*v-u*g,L=o*_-h*m,I=o*v-u*m,k=o*g-l*m;return t*(w*A-S*D+T*N)-n*(b*A-S*L+T*I)+i*(b*D-w*L+T*k)-s*(b*N-w*I+S*k)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],m=e[8],g=e[9],v=e[10],_=e[11],b=e[12],w=e[13],S=e[14],T=e[15],A=t*l-n*o,D=t*u-i*o,N=t*h-s*o,L=n*u-i*l,I=n*h-s*l,k=i*h-s*u,R=m*w-g*b,U=m*S-v*b,H=m*T-_*b,Y=g*S-v*w,X=g*T-_*w,q=v*T-_*S,Q=A*q-D*X+N*Y+L*H-I*U+k*R;if(Q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ie=1/Q;return e[0]=(l*q-u*X+h*Y)*ie,e[1]=(i*X-n*q-s*Y)*ie,e[2]=(w*k-S*I+T*L)*ie,e[3]=(v*I-g*k-_*L)*ie,e[4]=(u*H-o*q-h*U)*ie,e[5]=(t*q-i*H+s*U)*ie,e[6]=(S*N-b*k-T*D)*ie,e[7]=(m*k-v*N+_*D)*ie,e[8]=(o*X-l*H+h*R)*ie,e[9]=(n*H-t*X-s*R)*ie,e[10]=(b*I-w*N+T*A)*ie,e[11]=(g*N-m*I-_*A)*ie,e[12]=(l*U-o*Y-u*R)*ie,e[13]=(t*Y-n*U+i*R)*ie,e[14]=(w*D-b*L-S*A)*ie,e[15]=(m*L-g*D+v*A)*ie,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,l=e.y,u=e.z,h=s*o,m=s*l;return this.set(h*o+n,h*l-i*u,h*u+i*l,0,h*l+i*u,m*l+n,m*u-i*o,0,h*u-i*l,m*u+i*o,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,h=s+s,m=o+o,g=l+l,v=s*h,_=s*m,b=s*g,w=o*m,S=o*g,T=l*g,A=u*h,D=u*m,N=u*g,L=n.x,I=n.y,k=n.z;return i[0]=(1-(w+T))*L,i[1]=(_+N)*L,i[2]=(b-D)*L,i[3]=0,i[4]=(_-N)*I,i[5]=(1-(v+T))*I,i[6]=(S+A)*I,i[7]=0,i[8]=(b+D)*k,i[9]=(S-A)*k,i[10]=(1-(v+w))*k,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;e.x=i[12],e.y=i[13],e.z=i[14];const s=this.determinant();if(s===0)return n.set(1,1,1),t.identity(),this;let o=Ap.set(i[0],i[1],i[2]).length();const l=Ap.set(i[4],i[5],i[6]).length(),u=Ap.set(i[8],i[9],i[10]).length();s<0&&(o=-o),gl.copy(this);const h=1/o,m=1/l,g=1/u;return gl.elements[0]*=h,gl.elements[1]*=h,gl.elements[2]*=h,gl.elements[4]*=m,gl.elements[5]*=m,gl.elements[6]*=m,gl.elements[8]*=g,gl.elements[9]*=g,gl.elements[10]*=g,t.setFromRotationMatrix(gl),n.x=o,n.y=l,n.z=u,this}makePerspective(e,t,n,i,s,o,l=no,u=!1){const h=this.elements,m=2*s/(t-e),g=2*s/(n-i),v=(t+e)/(t-e),_=(n+i)/(n-i);let b,w;if(u)b=s/(o-s),w=o*s/(o-s);else if(l===no)b=-(o+s)/(o-s),w=-2*o*s/(o-s);else if(l===md)b=-o/(o-s),w=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return h[0]=m,h[4]=0,h[8]=v,h[12]=0,h[1]=0,h[5]=g,h[9]=_,h[13]=0,h[2]=0,h[6]=0,h[10]=b,h[14]=w,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,n,i,s,o,l=no,u=!1){const h=this.elements,m=2/(t-e),g=2/(n-i),v=-(t+e)/(t-e),_=-(n+i)/(n-i);let b,w;if(u)b=1/(o-s),w=o/(o-s);else if(l===no)b=-2/(o-s),w=-(o+s)/(o-s);else if(l===md)b=-1/(o-s),w=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return h[0]=m,h[4]=0,h[8]=0,h[12]=v,h[1]=0,h[5]=g,h[9]=0,h[13]=_,h[2]=0,h[6]=0,h[10]=b,h[14]=w,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ap=new se,gl=new fn,hV=new se(0,0,0),dV=new se(1,1,1),uf=new se,Px=new se,Ka=new se,TR=new fn,wR=new bs;class co{constructor(e=0,t=0,n=0,i=co.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],l=i[8],u=i[1],h=i[5],m=i[9],g=i[2],v=i[6],_=i[10];switch(t){case"XYZ":this._y=Math.asin(un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-un(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(un(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-un(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(un(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-un(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-m,_),this._y=0);break;default:Bt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return TR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TR,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return wR.setFromEuler(this),this.setFromQuaternion(wR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}co.DEFAULT_ORDER="XYZ";class Em{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let pV=0;const ER=new se,Cp=new bs,lu=new fn,Lx=new se,c0=new se,mV=new se,gV=new bs,AR=new se(1,0,0),CR=new se(0,1,0),RR=new se(0,0,1),DR={type:"added"},vV={type:"removed"},Rp={type:"childadded",child:null},vM={type:"childremoved",child:null};class ei extends Ec{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pV++}),this.uuid=ro(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ei.DEFAULT_UP.clone();const e=new se,t=new co,n=new bs,i=new se(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new fn},normalMatrix:{value:new xn}}),this.matrix=new fn,this.matrixWorld=new fn,this.matrixAutoUpdate=ei.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Em,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.static=!1,this.userData={},this.pivot=null}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Cp.setFromAxisAngle(e,t),this.quaternion.multiply(Cp),this}rotateOnWorldAxis(e,t){return Cp.setFromAxisAngle(e,t),this.quaternion.premultiply(Cp),this}rotateX(e){return this.rotateOnAxis(AR,e)}rotateY(e){return this.rotateOnAxis(CR,e)}rotateZ(e){return this.rotateOnAxis(RR,e)}translateOnAxis(e,t){return ER.copy(e).applyQuaternion(this.quaternion),this.position.add(ER.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AR,e)}translateY(e){return this.translateOnAxis(CR,e)}translateZ(e){return this.translateOnAxis(RR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Lx.copy(e):Lx.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),c0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lu.lookAt(c0,Lx,this.up):lu.lookAt(Lx,c0,this.up),this.quaternion.setFromRotationMatrix(lu),i&&(lu.extractRotation(i.matrixWorld),Cp.setFromRotationMatrix(lu),this.quaternion.premultiply(Cp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?($t("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(DR),Rp.child=e,this.dispatchEvent(Rp),Rp.child=null):$t("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vV),vM.child=e,this.dispatchEvent(vM),vM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),lu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lu.multiply(e.parent.matrixWorld)),e.applyMatrix4(lu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(DR),Rp.child=e,this.dispatchEvent(Rp),Rp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(c0,e,mV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(c0,gV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);const e=this.pivot;if(e!==null){const t=e.x,n=e.y,i=e.z,s=this.matrix.elements;s[12]+=t-s[0]*t-s[4]*n-s[8]*i,s[13]+=n-s[1]*t-s[5]*n-s[9]*i,s[14]+=i-s[2]*t-s[6]*n-s[10]*i}this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),this.static!==!1&&(i.static=this.static),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.pivot!==null&&(i.pivot=this.pivot.toArray()),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.morphTargetDictionary!==void 0&&(i.morphTargetDictionary=Object.assign({},this.morphTargetDictionary)),this.morphTargetInfluences!==void 0&&(i.morphTargetInfluences=this.morphTargetInfluences.slice()),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(l=>({...l})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,m=u.length;h<m;h++){const g=u[h];s(e.shapes,g)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u<h;u++)l.push(s(e.materials,this.material[u]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];i.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),h=o(e.textures),m=o(e.images),g=o(e.shapes),v=o(e.skeletons),_=o(e.animations),b=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),h.length>0&&(n.textures=h),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=i,n;function o(l){const u=[];for(const h in l){const m=l[h];delete m.metadata,u.push(m)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),e.pivot!==null&&(this.pivot=e.pivot.clone()),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.static=e.static,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}ei.DEFAULT_UP=new se(0,1,0);ei.DEFAULT_MATRIX_AUTO_UPDATE=!0;ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class om extends ei{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yV={type:"move"};class H_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new om,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new om,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new om,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const w of e.hand.values()){const S=t.getJointPose(w,n),T=this._getHandJoint(h,w);S!==null&&(T.matrix.fromArray(S.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=S.radius),T.visible=S!==null}const m=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],v=m.position.distanceTo(g.position),_=.02,b=.005;h.inputState.pinching&&v>_+b?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=_-b&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(yV)))}return l!==null&&(l.visible=i!==null),u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new om;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const lI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ff={h:0,s:0,l:0},Ux={h:0,s:0,l:0};function yM(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class Vt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=xs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=Wn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Wn.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=Wn.workingColorSpace){if(e=qE(e,1),t=un(t,0,1),n=un(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=yM(o,s,e+1/3),this.g=yM(o,s,e),this.b=yM(o,s,e-1/3)}return Wn.colorSpaceToWorking(this,i),this}setStyle(e,t=xs){function n(s){s!==void 0&&parseFloat(s)<1&&Bt("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],l=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:Bt("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);Bt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=xs){const n=lI[e.toLowerCase()];return n!==void 0?this.setHex(n,t):Bt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xu(e.r),this.g=xu(e.g),this.b=xu(e.b),this}copyLinearToSRGB(e){return this.r=pm(e.r),this.g=pm(e.g),this.b=pm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=xs){return Wn.workingToColorSpace(Is.copy(this),e),Math.round(un(Is.r*255,0,255))*65536+Math.round(un(Is.g*255,0,255))*256+Math.round(un(Is.b*255,0,255))}getHexString(e=xs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wn.workingColorSpace){Wn.workingToColorSpace(Is.copy(this),t);const n=Is.r,i=Is.g,s=Is.b,o=Math.max(n,i,s),l=Math.min(n,i,s);let u,h;const m=(l+o)/2;if(l===o)u=0,h=0;else{const g=o-l;switch(h=m<=.5?g/(o+l):g/(2-o-l),o){case n:u=(i-s)/g+(i<s?6:0);break;case i:u=(s-n)/g+2;break;case s:u=(n-i)/g+4;break}u/=6}return e.h=u,e.s=h,e.l=m,e}getRGB(e,t=Wn.workingColorSpace){return Wn.workingToColorSpace(Is.copy(this),t),e.r=Is.r,e.g=Is.g,e.b=Is.b,e}getStyle(e=xs){Wn.workingToColorSpace(Is.copy(this),e);const t=Is.r,n=Is.g,i=Is.b;return e!==xs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(ff),this.setHSL(ff.h+e,ff.s+t,ff.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ff),e.getHSL(Ux);const n=X0(ff.h,Ux.h,t),i=X0(ff.s,Ux.s,t),s=X0(ff.l,Ux.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Is=new Vt;Vt.NAMES=lI;class Cb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Vt(e),this.density=t}clone(){return new Cb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Rb{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Vt(e),this.near=t,this.far=n}clone(){return new Rb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Vv extends ei{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new co,this.environmentIntensity=1,this.environmentRotation=new co,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const vl=new se,cu=new se,xM=new se,uu=new se,Dp=new se,Np=new se,NR=new se,_M=new se,bM=new se,SM=new se,MM=new hi,TM=new hi,wM=new hi;class Oa{constructor(e=new se,t=new se,n=new se){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),vl.subVectors(e,t),i.cross(vl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){vl.subVectors(i,t),cu.subVectors(n,t),xM.subVectors(e,t);const o=vl.dot(vl),l=vl.dot(cu),u=vl.dot(xM),h=cu.dot(cu),m=cu.dot(xM),g=o*h-l*l;if(g===0)return s.set(0,0,0),null;const v=1/g,_=(h*u-l*m)*v,b=(o*m-l*u)*v;return s.set(1-_-b,b,_)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,uu)===null?!1:uu.x>=0&&uu.y>=0&&uu.x+uu.y<=1}static getInterpolation(e,t,n,i,s,o,l,u){return this.getBarycoord(e,t,n,i,uu)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,uu.x),u.addScaledVector(o,uu.y),u.addScaledVector(l,uu.z),u)}static getInterpolatedAttribute(e,t,n,i,s,o){return MM.setScalar(0),TM.setScalar(0),wM.setScalar(0),MM.fromBufferAttribute(e,t),TM.fromBufferAttribute(e,n),wM.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(MM,s.x),o.addScaledVector(TM,s.y),o.addScaledVector(wM,s.z),o}static isFrontFacing(e,t,n,i){return vl.subVectors(n,t),cu.subVectors(e,t),vl.cross(cu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vl.subVectors(this.c,this.b),cu.subVectors(this.a,this.b),vl.cross(cu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Oa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Oa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return Oa.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Oa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Oa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,l;Dp.subVectors(i,n),Np.subVectors(s,n),_M.subVectors(e,n);const u=Dp.dot(_M),h=Np.dot(_M);if(u<=0&&h<=0)return t.copy(n);bM.subVectors(e,i);const m=Dp.dot(bM),g=Np.dot(bM);if(m>=0&&g<=m)return t.copy(i);const v=u*g-m*h;if(v<=0&&u>=0&&m<=0)return o=u/(u-m),t.copy(n).addScaledVector(Dp,o);SM.subVectors(e,s);const _=Dp.dot(SM),b=Np.dot(SM);if(b>=0&&_<=b)return t.copy(s);const w=_*h-u*b;if(w<=0&&h>=0&&b<=0)return l=h/(h-b),t.copy(n).addScaledVector(Np,l);const S=m*b-_*g;if(S<=0&&g-m>=0&&_-b>=0)return NR.subVectors(s,i),l=(g-m)/(g-m+(_-b)),t.copy(i).addScaledVector(NR,l);const T=1/(S+w+v);return o=w*T,l=v*T,t.copy(n).addScaledVector(Dp,o).addScaledVector(Np,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}class is{constructor(e=new se(1/0,1/0,1/0),t=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(yl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(yl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,yl):yl.fromBufferAttribute(s,o),yl.applyMatrix4(e.matrixWorld),this.expandByPoint(yl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ix.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Ix.copy(n.boundingBox)),Ix.applyMatrix4(e.matrixWorld),this.union(Ix)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,yl),yl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(u0),Ox.subVectors(this.max,u0),Pp.subVectors(e.a,u0),Lp.subVectors(e.b,u0),Up.subVectors(e.c,u0),hf.subVectors(Lp,Pp),df.subVectors(Up,Lp),Ah.subVectors(Pp,Up);let t=[0,-hf.z,hf.y,0,-df.z,df.y,0,-Ah.z,Ah.y,hf.z,0,-hf.x,df.z,0,-df.x,Ah.z,0,-Ah.x,-hf.y,hf.x,0,-df.y,df.x,0,-Ah.y,Ah.x,0];return!EM(t,Pp,Lp,Up,Ox)||(t=[1,0,0,0,1,0,0,0,1],!EM(t,Pp,Lp,Up,Ox))?!1:(Fx.crossVectors(hf,df),t=[Fx.x,Fx.y,Fx.z],EM(t,Pp,Lp,Up,Ox))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(yl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(fu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const fu=[new se,new se,new se,new se,new se,new se,new se,new se],yl=new se,Ix=new is,Pp=new se,Lp=new se,Up=new se,hf=new se,df=new se,Ah=new se,u0=new se,Ox=new se,Fx=new se,Ch=new se;function EM(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){Ch.fromArray(r,s);const l=i.x*Math.abs(Ch.x)+i.y*Math.abs(Ch.y)+i.z*Math.abs(Ch.z),u=e.dot(Ch),h=t.dot(Ch),m=n.dot(Ch);if(Math.max(-Math.max(u,h,m),Math.min(u,h,m))>l)return!1}return!0}const yu=xV();function xV(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(n[u]=0,n[u|256]=32768,i[u]=24,i[u|256]=24):h<-14?(n[u]=1024>>-h-14,n[u|256]=1024>>-h-14|32768,i[u]=-h-1,i[u|256]=-h-1):h<=15?(n[u]=h+15<<10,n[u|256]=h+15<<10|32768,i[u]=13,i[u|256]=13):h<128?(n[u]=31744,n[u|256]=64512,i[u]=24,i[u|256]=24):(n[u]=31744,n[u|256]=64512,i[u]=13,i[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,m=0;for(;(h&8388608)===0;)h<<=1,m-=8388608;h&=-8388609,m+=947912704,s[u]=h|m}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:l}}function Ua(r){Math.abs(r)>65504&&Bt("DataUtils.toHalfFloat(): Value out of range."),r=un(r,-65504,65504),yu.floatView[0]=r;const e=yu.uint32View[0],t=e>>23&511;return yu.baseTable[t]+((e&8388607)>>yu.shiftTable[t])}function C0(r){const e=r>>10;return yu.uint32View[0]=yu.mantissaTable[yu.offsetTable[e]+(r&1023)]+yu.exponentTable[e],yu.floatView[0]}class ed{static toHalfFloat(e){return Ua(e)}static fromHalfFloat(e){return C0(e)}}const Or=new se,kx=new ft;let _V=0;class _i{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_V++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=mv,this.updateRanges=[],this.gpuType=qi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)kx.fromBufferAttribute(this,t),kx.applyMatrix3(e),this.setXY(t,kx.x,kx.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix3(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix4(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Or.fromBufferAttribute(this,t),Or.applyNormalMatrix(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Or.fromBufferAttribute(this,t),Or.transformDirection(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=sa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=An(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sa(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sa(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sa(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array),i=An(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array),i=An(i,this.array),s=An(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==mv&&(e.usage=this.usage),e}}class bV extends _i{constructor(e,t,n){super(new Int8Array(e),t,n)}}class SV extends _i{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class MV extends _i{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class TV extends _i{constructor(e,t,n){super(new Int16Array(e),t,n)}}class KE extends _i{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class wV extends _i{constructor(e,t,n){super(new Int32Array(e),t,n)}}class QE extends _i{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class EV extends _i{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=C0(this.array[e*this.itemSize]);return this.normalized&&(t=sa(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=Ua(t),this}getY(e){let t=C0(this.array[e*this.itemSize+1]);return this.normalized&&(t=sa(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=Ua(t),this}getZ(e){let t=C0(this.array[e*this.itemSize+2]);return this.normalized&&(t=sa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=Ua(t),this}getW(e){let t=C0(this.array[e*this.itemSize+3]);return this.normalized&&(t=sa(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=Ua(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array)),this.array[e+0]=Ua(t),this.array[e+1]=Ua(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array),i=An(i,this.array)),this.array[e+0]=Ua(t),this.array[e+1]=Ua(n),this.array[e+2]=Ua(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array),i=An(i,this.array),s=An(s,this.array)),this.array[e+0]=Ua(t),this.array[e+1]=Ua(n),this.array[e+2]=Ua(i),this.array[e+3]=Ua(s),this}}class Wt extends _i{constructor(e,t,n){super(new Float32Array(e),t,n)}}const AV=new is,f0=new se,AM=new se;class rs{constructor(e=new se,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):AV.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;f0.subVectors(e,this.center);const t=f0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(f0,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(AM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(f0.copy(e.center).add(AM)),this.expandByPoint(f0.copy(e.center).sub(AM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}let CV=0;const zo=new fn,CM=new ei,Ip=new se,Qa=new is,h0=new is,ts=new se;class _n extends Ec{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CV++}),this.uuid=ro(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(k8(e)?QE:KE)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new xn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return zo.makeRotationFromQuaternion(e),this.applyMatrix4(zo),this}rotateX(e){return zo.makeRotationX(e),this.applyMatrix4(zo),this}rotateY(e){return zo.makeRotationY(e),this.applyMatrix4(zo),this}rotateZ(e){return zo.makeRotationZ(e),this.applyMatrix4(zo),this}translate(e,t,n){return zo.makeTranslation(e,t,n),this.applyMatrix4(zo),this}scale(e,t,n){return zo.makeScale(e,t,n),this.applyMatrix4(zo),this}lookAt(e){return CM.lookAt(e),CM.updateMatrix(),this.applyMatrix4(CM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ip).negate(),this.translate(Ip.x,Ip.y,Ip.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Wt(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&Bt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new is);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){$t("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Qa.setFromBufferAttribute(s),this.morphTargetsRelative?(ts.addVectors(this.boundingBox.min,Qa.min),this.boundingBox.expandByPoint(ts),ts.addVectors(this.boundingBox.max,Qa.max),this.boundingBox.expandByPoint(ts)):(this.boundingBox.expandByPoint(Qa.min),this.boundingBox.expandByPoint(Qa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&$t('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){$t("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new se,1/0);return}if(e){const n=this.boundingSphere.center;if(Qa.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];h0.setFromBufferAttribute(l),this.morphTargetsRelative?(ts.addVectors(Qa.min,h0.min),Qa.expandByPoint(ts),ts.addVectors(Qa.max,h0.max),Qa.expandByPoint(ts)):(Qa.expandByPoint(h0.min),Qa.expandByPoint(h0.max))}Qa.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)ts.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(ts));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,m=l.count;h<m;h++)ts.fromBufferAttribute(l,h),u&&(Ip.fromBufferAttribute(e,h),ts.add(Ip)),i=Math.max(i,n.distanceToSquared(ts))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&$t('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){$t("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _i(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let R=0;R<n.count;R++)l[R]=new se,u[R]=new se;const h=new se,m=new se,g=new se,v=new ft,_=new ft,b=new ft,w=new se,S=new se;function T(R,U,H){h.fromBufferAttribute(n,R),m.fromBufferAttribute(n,U),g.fromBufferAttribute(n,H),v.fromBufferAttribute(s,R),_.fromBufferAttribute(s,U),b.fromBufferAttribute(s,H),m.sub(h),g.sub(h),_.sub(v),b.sub(v);const Y=1/(_.x*b.y-b.x*_.y);isFinite(Y)&&(w.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(Y),S.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(Y),l[R].add(w),l[U].add(w),l[H].add(w),u[R].add(S),u[U].add(S),u[H].add(S))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let R=0,U=A.length;R<U;++R){const H=A[R],Y=H.start,X=H.count;for(let q=Y,Q=Y+X;q<Q;q+=3)T(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const D=new se,N=new se,L=new se,I=new se;function k(R){L.fromBufferAttribute(i,R),I.copy(L);const U=l[R];D.copy(U),D.sub(L.multiplyScalar(L.dot(U))).normalize(),N.crossVectors(I,U);const Y=N.dot(u[R])<0?-1:1;o.setXYZW(R,D.x,D.y,D.z,Y)}for(let R=0,U=A.length;R<U;++R){const H=A[R],Y=H.start,X=H.count;for(let q=Y,Q=Y+X;q<Q;q+=3)k(e.getX(q+0)),k(e.getX(q+1)),k(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new _i(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,_=n.count;v<_;v++)n.setXYZ(v,0,0,0);const i=new se,s=new se,o=new se,l=new se,u=new se,h=new se,m=new se,g=new se;if(e)for(let v=0,_=e.count;v<_;v+=3){const b=e.getX(v+0),w=e.getX(v+1),S=e.getX(v+2);i.fromBufferAttribute(t,b),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,S),m.subVectors(o,s),g.subVectors(i,s),m.cross(g),l.fromBufferAttribute(n,b),u.fromBufferAttribute(n,w),h.fromBufferAttribute(n,S),l.add(m),u.add(m),h.add(m),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(w,u.x,u.y,u.z),n.setXYZ(S,h.x,h.y,h.z)}else for(let v=0,_=t.count;v<_;v+=3)i.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),o.fromBufferAttribute(t,v+2),m.subVectors(o,s),g.subVectors(i,s),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ts.fromBufferAttribute(e,t),ts.normalize(),e.setXYZ(t,ts.x,ts.y,ts.z)}toNonIndexed(){function e(l,u){const h=l.array,m=l.itemSize,g=l.normalized,v=new h.constructor(u.length*m);let _=0,b=0;for(let w=0,S=u.length;w<S;w++){l.isInterleavedBufferAttribute?_=u[w]*l.data.stride+l.offset:_=u[w]*m;for(let T=0;T<m;T++)v[b++]=h[_++]}return new _i(v,m,g)}if(this.index===null)return Bt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new _n,n=this.index.array,i=this.attributes;for(const l in i){const u=i[l],h=e(u,n);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let m=0,g=h.length;m<g;m++){const v=h[m],_=e(v,n);u.push(_)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const h=n[u];e.data.attributes[u]=h.toJSON(e.data)}const i={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],m=[];for(let g=0,v=h.length;g<v;g++){const _=h[g];m.push(_.toJSON(e.data))}m.length>0&&(i[u]=m,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const h in i){const m=i[h];this.setAttribute(h,m.clone(t))}const s=e.morphAttributes;for(const h in s){const m=[],g=s[h];for(let v=0,_=g.length;v<_;v++)m.push(g[v].clone(t));this.morphAttributes[h]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,m=o.length;h<m;h++){const g=o[h];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Db{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=mv,this.updateRanges=[],this.version=0,this.uuid=ro()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ta=new se;class gd{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix4(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.applyNormalMatrix(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.transformDirection(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=sa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=An(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=sa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=sa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=sa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=sa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),n=An(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),n=An(n,this.array),i=An(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),n=An(n,this.array),i=An(i,this.array),s=An(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){vv("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new _i(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new gd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){vv("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}let RV=0;class Vs extends Ec{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RV++}),this.uuid=ro(),this.name="",this.type="Material",this.blending=ld,this.side=Mu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=d1,this.blendDst=p1,this.blendEquation=xf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Vt(0,0,0),this.blendAlpha=0,this.depthFunc=hd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xh,this.stencilZFail=Xh,this.stencilZPass=Xh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){Bt(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){Bt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ld&&(n.blending=this.blending),this.side!==Mu&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==d1&&(n.blendSrc=this.blendSrc),this.blendDst!==p1&&(n.blendDst=this.blendDst),this.blendEquation!==xf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==hd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==fw&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Xh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Xh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Xh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class JE extends Vs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Op;const d0=new se,Fp=new se,kp=new se,Bp=new ft,p0=new ft,cI=new fn,Bx=new se,m0=new se,zx=new se,PR=new ft,RM=new ft,LR=new ft;class uI extends ei{constructor(e=new JE){if(super(),this.isSprite=!0,this.type="Sprite",Op===void 0){Op=new _n;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Db(t,5);Op.setIndex([0,1,2,0,2,3]),Op.setAttribute("position",new gd(n,3,0,!1)),Op.setAttribute("uv",new gd(n,2,3,!1))}this.geometry=Op,this.material=e,this.center=new ft(.5,.5),this.count=1}raycast(e,t){e.camera===null&&$t('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fp.setFromMatrixScale(this.matrixWorld),cI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fp.multiplyScalar(-kp.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const o=this.center;Vx(Bx.set(-.5,-.5,0),kp,o,Fp,i,s),Vx(m0.set(.5,-.5,0),kp,o,Fp,i,s),Vx(zx.set(.5,.5,0),kp,o,Fp,i,s),PR.set(0,0),RM.set(1,0),LR.set(1,1);let l=e.ray.intersectTriangle(Bx,m0,zx,!1,d0);if(l===null&&(Vx(m0.set(-.5,.5,0),kp,o,Fp,i,s),RM.set(0,1),l=e.ray.intersectTriangle(Bx,zx,m0,!1,d0),l===null))return;const u=e.ray.origin.distanceTo(d0);u<e.near||u>e.far||t.push({distance:u,point:d0.clone(),uv:Oa.getInterpolation(d0,Bx,m0,zx,PR,RM,LR,new ft),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Vx(r,e,t,n,i,s){Bp.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(p0.x=s*Bp.x-i*Bp.y,p0.y=i*Bp.x+s*Bp.y):p0.copy(Bp),r.copy(e),r.x+=p0.x,r.y+=p0.y,r.applyMatrix4(cI)}const Gx=new se,UR=new se;class fI extends ei{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Gx.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Gx);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Gx.setFromMatrixPosition(e.matrixWorld),UR.setFromMatrixPosition(this.matrixWorld);const n=Gx.distanceTo(UR)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const hu=new se,DM=new se,Hx=new se,pf=new se,NM=new se,jx=new se,PM=new se;class bd{constructor(e=new se,t=new se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,hu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=hu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(hu.copy(this.origin).addScaledVector(this.direction,t),hu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){DM.copy(e).add(t).multiplyScalar(.5),Hx.copy(t).sub(e).normalize(),pf.copy(this.origin).sub(DM);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Hx),l=pf.dot(this.direction),u=-pf.dot(Hx),h=pf.lengthSq(),m=Math.abs(1-o*o);let g,v,_,b;if(m>0)if(g=o*u-l,v=o*l-u,b=s*m,g>=0)if(v>=-b)if(v<=b){const w=1/m;g*=w,v*=w,_=g*(g+o*v+2*l)+v*(o*g+v+2*u)+h}else v=s,g=Math.max(0,-(o*v+l)),_=-g*g+v*(v+2*u)+h;else v=-s,g=Math.max(0,-(o*v+l)),_=-g*g+v*(v+2*u)+h;else v<=-b?(g=Math.max(0,-(-o*s+l)),v=g>0?-s:Math.min(Math.max(-s,-u),s),_=-g*g+v*(v+2*u)+h):v<=b?(g=0,v=Math.min(Math.max(-s,-u),s),_=v*(v+2*u)+h):(g=Math.max(0,-(o*s+l)),v=g>0?s:Math.min(Math.max(-s,-u),s),_=-g*g+v*(v+2*u)+h);else v=o>0?-s:s,g=Math.max(0,-(o*v+l)),_=-g*g+v*(v+2*u)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(DM).addScaledVector(Hx,v),_}intersectSphere(e,t){hu.subVectors(e.center,this.origin);const n=hu.dot(this.direction),i=hu.dot(hu)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,l,u;const h=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return h>=0?(n=(e.min.x-v.x)*h,i=(e.max.x-v.x)*h):(n=(e.max.x-v.x)*h,i=(e.min.x-v.x)*h),m>=0?(s=(e.min.y-v.y)*m,o=(e.max.y-v.y)*m):(s=(e.max.y-v.y)*m,o=(e.min.y-v.y)*m),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),g>=0?(l=(e.min.z-v.z)*g,u=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,u=(e.min.z-v.z)*g),n>u||l>i)||((l>n||n!==n)&&(n=l),(u<i||i!==i)&&(i=u),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,hu)!==null}intersectTriangle(e,t,n,i,s){NM.subVectors(t,e),jx.subVectors(n,e),PM.crossVectors(NM,jx);let o=this.direction.dot(PM),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;pf.subVectors(this.origin,e);const u=l*this.direction.dot(jx.crossVectors(pf,jx));if(u<0)return null;const h=l*this.direction.dot(NM.cross(pf));if(h<0||u+h>o)return null;const m=-l*pf.dot(PM);return m<0?null:this.at(m/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ac extends Vs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new co,this.combine=Ov,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const IR=new fn,Rh=new bd,Wx=new rs,OR=new se,Xx=new se,Yx=new se,qx=new se,LM=new se,Zx=new se,FR=new se,Kx=new se;class Pi extends ei{constructor(e=new _n,t=new Ac){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){Zx.set(0,0,0);for(let u=0,h=s.length;u<h;u++){const m=l[u],g=s[u];m!==0&&(LM.fromBufferAttribute(g,e),o?Zx.addScaledVector(LM,m):Zx.addScaledVector(LM.sub(t),m))}t.add(Zx)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Wx.copy(n.boundingSphere),Wx.applyMatrix4(s),Rh.copy(e.ray).recast(e.near),!(Wx.containsPoint(Rh.origin)===!1&&(Rh.intersectSphere(Wx,OR)===null||Rh.origin.distanceToSquared(OR)>(e.far-e.near)**2))&&(IR.copy(s).invert(),Rh.copy(e.ray).applyMatrix4(IR),!(n.boundingBox!==null&&Rh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Rh)))}_computeIntersections(e,t,n){let i;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,v=s.groups,_=s.drawRange;if(l!==null)if(Array.isArray(o))for(let b=0,w=v.length;b<w;b++){const S=v[b],T=o[S.materialIndex],A=Math.max(S.start,_.start),D=Math.min(l.count,Math.min(S.start+S.count,_.start+_.count));for(let N=A,L=D;N<L;N+=3){const I=l.getX(N),k=l.getX(N+1),R=l.getX(N+2);i=Qx(this,T,e,n,h,m,g,I,k,R),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=S.materialIndex,t.push(i))}}else{const b=Math.max(0,_.start),w=Math.min(l.count,_.start+_.count);for(let S=b,T=w;S<T;S+=3){const A=l.getX(S),D=l.getX(S+1),N=l.getX(S+2);i=Qx(this,o,e,n,h,m,g,A,D,N),i&&(i.faceIndex=Math.floor(S/3),t.push(i))}}else if(u!==void 0)if(Array.isArray(o))for(let b=0,w=v.length;b<w;b++){const S=v[b],T=o[S.materialIndex],A=Math.max(S.start,_.start),D=Math.min(u.count,Math.min(S.start+S.count,_.start+_.count));for(let N=A,L=D;N<L;N+=3){const I=N,k=N+1,R=N+2;i=Qx(this,T,e,n,h,m,g,I,k,R),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=S.materialIndex,t.push(i))}}else{const b=Math.max(0,_.start),w=Math.min(u.count,_.start+_.count);for(let S=b,T=w;S<T;S+=3){const A=S,D=S+1,N=S+2;i=Qx(this,o,e,n,h,m,g,A,D,N),i&&(i.faceIndex=Math.floor(S/3),t.push(i))}}}}function DV(r,e,t,n,i,s,o,l){let u;if(e.side===zs?u=n.intersectTriangle(o,s,i,!0,l):u=n.intersectTriangle(i,s,o,e.side===Mu,l),u===null)return null;Kx.copy(l),Kx.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(Kx);return h<t.near||h>t.far?null:{distance:h,point:Kx.clone(),object:r}}function Qx(r,e,t,n,i,s,o,l,u,h){r.getVertexPosition(l,Xx),r.getVertexPosition(u,Yx),r.getVertexPosition(h,qx);const m=DV(r,e,t,n,Xx,Yx,qx,FR);if(m){const g=new se;Oa.getBarycoord(FR,Xx,Yx,qx,g),i&&(m.uv=Oa.getInterpolatedAttribute(i,l,u,h,g,new ft)),s&&(m.uv1=Oa.getInterpolatedAttribute(s,l,u,h,g,new ft)),o&&(m.normal=Oa.getInterpolatedAttribute(o,l,u,h,g,new se),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:l,b:u,c:h,normal:new se,materialIndex:0};Oa.getNormal(Xx,Yx,qx,v.normal),m.face=v,m.barycoord=g}return m}const kR=new se,BR=new hi,zR=new hi,NV=new se,VR=new fn,Jx=new se,UM=new rs,GR=new fn,IM=new bd;class hI extends Pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=lw,this.bindMatrix=new fn,this.bindMatrixInverse=new fn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new is),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Jx),this.boundingBox.expandByPoint(Jx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new rs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Jx),this.boundingSphere.expandByPoint(Jx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),UM.copy(this.boundingSphere),UM.applyMatrix4(i),e.ray.intersectsSphere(UM)!==!1&&(GR.copy(i).invert(),IM.copy(e.ray).applyMatrix4(GR),!(this.boundingBox!==null&&IM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,IM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new hi,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===lw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===WU?this.bindMatrixInverse.copy(this.bindMatrix).invert():Bt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;BR.fromBufferAttribute(i.attributes.skinIndex,e),zR.fromBufferAttribute(i.attributes.skinWeight,e),kR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=zR.getComponent(s);if(o!==0){const l=BR.getComponent(s);VR.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(NV.copy(kR).applyMatrix4(VR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class $E extends ei{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Zo extends di{constructor(e=null,t=1,n=1,i,s,o,l,u,h=Cr,m=Cr,g,v){super(null,o,l,u,h,m,i,s,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const HR=new fn,PV=new fn;class Nb{constructor(e=[],t=[]){this.uuid=ro(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Bt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new fn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new fn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:PV;HR.multiplyMatrices(l,t[s]),HR.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Nb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Zo(t,e,e,Rr,qi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(Bt("Skeleton: No bone found with UUID:",s),o=new $E),this.bones.push(o),this.boneInverses.push(new fn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class vd extends _i{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const zp=new fn,jR=new fn,$x=[],WR=new is,LV=new fn,g0=new Pi,v0=new rs;class dI extends Pi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new vd(new Float32Array(n*16),16),this.previousInstanceMatrix=null,this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,LV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new is),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,zp),WR.copy(e.boundingBox).applyMatrix4(zp),this.boundingBox.union(WR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new rs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,zp),v0.copy(e.boundingSphere).applyMatrix4(zp),this.boundingSphere.union(v0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.previousInstanceMatrix!==null&&(this.previousInstanceMatrix=e.previousInstanceMatrix.clone()),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=i[o+l]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(g0.geometry=this.geometry,g0.material=this.material,g0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),v0.copy(this.boundingSphere),v0.applyMatrix4(n),e.ray.intersectsSphere(v0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,zp),jR.multiplyMatrices(n,zp),g0.matrixWorld=jR,g0.raycast(e,$x);for(let o=0,l=$x.length;o<l;o++){const u=$x[o];u.instanceId=s,u.object=this,t.push(u)}$x.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new vd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Zo(new Float32Array(i*this.count),i,this.count,Bv,qi));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h<n.length;h++)o+=n[h];const l=this.geometry.morphTargetsRelative?1:1-o,u=i*e;s[u]=l,s.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const OM=new se,UV=new se,IV=new xn;class gu{constructor(e=new se(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=OM.subVectors(n,t).cross(UV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(OM),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||IV.getNormalMatrix(e),i=this.coplanarPoint(OM).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Dh=new rs,OV=new ft(.5,.5),e_=new se;class Om{constructor(e=new gu,t=new gu,n=new gu,i=new gu,s=new gu,o=new gu){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=no,n=!1){const i=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],h=s[3],m=s[4],g=s[5],v=s[6],_=s[7],b=s[8],w=s[9],S=s[10],T=s[11],A=s[12],D=s[13],N=s[14],L=s[15];if(i[0].setComponents(h-o,_-m,T-b,L-A).normalize(),i[1].setComponents(h+o,_+m,T+b,L+A).normalize(),i[2].setComponents(h+l,_+g,T+w,L+D).normalize(),i[3].setComponents(h-l,_-g,T-w,L-D).normalize(),n)i[4].setComponents(u,v,S,N).normalize(),i[5].setComponents(h-u,_-v,T-S,L-N).normalize();else if(i[4].setComponents(h-u,_-v,T-S,L-N).normalize(),t===no)i[5].setComponents(h+u,_+v,T+S,L+N).normalize();else if(t===md)i[5].setComponents(u,v,S,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Dh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Dh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Dh)}intersectsSprite(e){Dh.center.set(0,0,0);const t=OV.distanceTo(e.center);return Dh.radius=.7071067811865476+t,Dh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Dh)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(e_.x=i.normal.x>0?e.max.x:e.min.x,e_.y=i.normal.y>0?e.max.y:e.min.y,e_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(e_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const uc=new fn,fc=new Om;class Pb{constructor(){this.coordinateSystem=no}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fc.setFromProjectionMatrix(uc,i.coordinateSystem,i.reversedDepth),fc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fc.setFromProjectionMatrix(uc,i.coordinateSystem,i.reversedDepth),fc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fc.setFromProjectionMatrix(uc,i.coordinateSystem,i.reversedDepth),fc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fc.setFromProjectionMatrix(uc,i.coordinateSystem,i.reversedDepth),fc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fc.setFromProjectionMatrix(uc,i.coordinateSystem,i.reversedDepth),fc.containsPoint(e))return!0}return!1}clone(){return new Pb}}function FM(r,e){return r-e}function FV(r,e){return r.z-e.z}function kV(r,e){return e.z-r.z}class BV{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=i}reset(){this.list.length=0,this.index=0}}const La=new fn,zV=new Vt(1,1,1),XR=new Om,VV=new Pb,t_=new is,Nh=new rs,y0=new se,YR=new se,GV=new se,kM=new BV,Os=new Pi,n_=[];function HV(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,r.getComponent(s,o))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function Ph(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class pI extends Pi{constructor(e,t,n=t*2,i){super(new _n,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Zo(t,e,e,Rr,qi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Zo(t,e,e,zv,lo);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Zo(t,e,e,Rr,qi);n.colorSpace=Wn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:u,normalized:h}=o,m=new l.constructor(n*u),g=new _i(m,u,h);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new _i(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new is);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,La),this.getBoundingBoxAt(s,t_).applyMatrix4(La),e.union(t_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,La),this.getBoundingSphereAt(s,Nh).applyMatrix4(La),e.union(Nh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(FM),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;La.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(zV.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?o.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(FM),u=this._availableGeometryIds.shift(),s[u]=i):(u=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(u,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(i&&o.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const g=t.getAttribute(m),v=n.getAttribute(m);HV(g,v,u);const _=g.itemSize;for(let b=g.count,w=h;b<w;b++){const S=u+b;for(let T=0;T<_;T++)v.setComponent(S,T,0)}v.needsUpdate=!0,v.addUpdateRange(u*_,h*_)}if(i){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<o.count;v++)s.setX(m+v,u+o.getX(v));for(let v=o.count,_=g;v<_;v++)s.setX(m+v,u);s.needsUpdate=!0,s.addUpdateRange(m,l.reservedIndexCount)}return l.start=i?l.indexStart:l.vertexStart,l.count=i?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((o,l)=>l).sort((o,l)=>n[o].vertexStart-n[l].vertexStart),s=this.geometry;for(let o=0,l=n.length;o<l;o++){const u=i[o],h=n[u];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=h,_=s.index,b=_.array,w=e-g;for(let S=m;S<m+v;S++)b[S]=b[S]+w;_.array.copyWithin(t,m,m+v),_.addUpdateRange(t,v),_.needsUpdate=!0,h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=h,v=s.attributes;for(const _ in v){const b=v[_],{array:w,itemSize:S}=b;w.copyWithin(e*S,m*S,(m+g)*S),b.addUpdateRange(e*S,g*S),b.needsUpdate=!0}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart}}return this._nextIndexStart=t,this._nextVertexStart=e,this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new is,o=n.index,l=n.attributes.position;for(let u=i.start,h=i.start+i.count;u<h;u++){let m=u;o&&(m=o.getX(m)),s.expandByPoint(y0.fromBufferAttribute(l,m))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new rs;this.getBoundingBoxAt(e,t_),t_.getCenter(s.center);const o=n.index,l=n.attributes.position;let u=0;for(let h=i.start,m=i.start+i.count;h<m;h++){let g=h;o&&(g=o.getX(g)),y0.fromBufferAttribute(l,g),u=Math.max(u,s.center.distanceToSquared(y0))}s.radius=Math.sqrt(u),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(FM);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Ph(this._multiDrawCounts,i),Ph(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ph(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Ph(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),Ph(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new _n,this._initializeGeometry(s));const o=this.geometry;s.index&&Ph(s.index.array,o.index.array);for(const l in s.attributes)Ph(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Os.material=this.material,Os.geometry.index=o.index,Os.geometry.attributes=o.attributes,Os.geometry.boundingBox===null&&(Os.geometry.boundingBox=new is),Os.geometry.boundingSphere===null&&(Os.geometry.boundingSphere=new rs);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const h=n[l].geometryIndex,m=i[h];Os.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,Os.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,Os.geometry.boundingBox),this.getBoundingSphereAt(h,Os.geometry.boundingSphere),Os.raycast(e,n_);for(let g=0,v=n_.length;g<v;g++){const _=n_[g];_.object=this,_.batchId=l,t.push(_)}n_.length=0}Os.material=null,Os.geometry.index=null,Os.geometry.attributes={},Os.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex();let l=o===null?1:o.array.BYTES_PER_ELEMENT,u=1;s.wireframe&&(u=2,l=i.attributes.position.count>65535?4:2);const h=this._instanceInfo,m=this._multiDrawStarts,g=this._multiDrawCounts,v=this._geometryInfo,_=this.perObjectFrustumCulled,b=this._indirectTexture,w=b.image.data,S=n.isArrayCamera?VV:XR;_&&!n.isArrayCamera&&(La.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),XR.setFromProjectionMatrix(La,n.coordinateSystem,n.reversedDepth));let T=0;if(this.sortObjects){La.copy(this.matrixWorld).invert(),y0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(La),YR.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(La);for(let N=0,L=h.length;N<L;N++)if(h[N].visible&&h[N].active){const I=h[N].geometryIndex;this.getMatrixAt(N,La),this.getBoundingSphereAt(I,Nh).applyMatrix4(La);let k=!1;if(_&&(k=!S.intersectsSphere(Nh,n)),!k){const R=v[I],U=GV.subVectors(Nh.center,y0).dot(YR);kM.push(R.start,R.count,U,N)}}const A=kM.list,D=this.customSort;D===null?A.sort(s.transparent?kV:FV):D.call(this,A,n);for(let N=0,L=A.length;N<L;N++){const I=A[N];m[T]=I.start*l*u,g[T]=I.count*u,w[T]=I.index,T++}kM.reset()}else for(let A=0,D=h.length;A<D;A++)if(h[A].visible&&h[A].active){const N=h[A].geometryIndex;let L=!1;if(_&&(this.getMatrixAt(A,La),this.getBoundingSphereAt(N,Nh).applyMatrix4(La),L=!S.intersectsSphere(Nh,n)),!L){const I=v[N];m[T]=I.start*l*u,g[T]=I.count*u,w[T]=A,T++}}b.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class ua extends Vs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const tb=new se,nb=new se,qR=new fn,x0=new bd,i_=new rs,BM=new se,ZR=new se;class Ff extends ei{constructor(e=new _n,t=new ua){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)tb.fromBufferAttribute(t,i-1),nb.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=tb.distanceTo(nb);e.setAttribute("lineDistance",new Wt(n,1))}else Bt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),i_.copy(n.boundingSphere),i_.applyMatrix4(i),i_.radius+=s,e.ray.intersectsSphere(i_)===!1)return;qR.copy(i).invert(),x0.copy(e.ray).applyMatrix4(qR);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const _=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let w=_,S=b-1;w<S;w+=h){const T=m.getX(w),A=m.getX(w+1),D=r_(this,e,x0,u,T,A,w);D&&t.push(D)}if(this.isLineLoop){const w=m.getX(b-1),S=m.getX(_),T=r_(this,e,x0,u,w,S,b-1);T&&t.push(T)}}else{const _=Math.max(0,o.start),b=Math.min(v.count,o.start+o.count);for(let w=_,S=b-1;w<S;w+=h){const T=r_(this,e,x0,u,w,w+1,w);T&&t.push(T)}if(this.isLineLoop){const w=r_(this,e,x0,u,b-1,_,b-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function r_(r,e,t,n,i,s,o){const l=r.geometry.attributes.position;if(tb.fromBufferAttribute(l,i),nb.fromBufferAttribute(l,s),t.distanceSqToSegment(tb,nb,BM,ZR)>n)return;BM.applyMatrix4(r.matrixWorld);const h=e.ray.origin.distanceTo(BM);if(!(h<e.near||h>e.far))return{distance:h,point:ZR.clone().applyMatrix4(r.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:r}}const KR=new se,QR=new se;class Cc extends Ff{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)KR.fromBufferAttribute(t,i),QR.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+KR.distanceTo(QR);e.setAttribute("lineDistance",new Wt(n,1))}else Bt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mI extends Ff{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class eA extends Vs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const JR=new fn,dw=new bd,s_=new rs,a_=new se;class gI extends ei{constructor(e=new _n,t=new eA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),s_.copy(n.boundingSphere),s_.applyMatrix4(i),s_.radius+=s,e.ray.intersectsSphere(s_)===!1)return;JR.copy(i).invert(),dw.copy(e.ray).applyMatrix4(JR);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=n.index,g=n.attributes.position;if(h!==null){const v=Math.max(0,o.start),_=Math.min(h.count,o.start+o.count);for(let b=v,w=_;b<w;b++){const S=h.getX(b);a_.fromBufferAttribute(g,S),$R(a_,S,u,i,e,t,this)}}else{const v=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let b=v,w=_;b<w;b++)a_.fromBufferAttribute(g,b),$R(a_,b,u,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function $R(r,e,t,n,i,s,o){const l=dw.distanceSqToPoint(r);if(l<t){const u=new se;dw.closestPointToPoint(r,u),u.applyMatrix4(n);const h=i.ray.origin.distanceTo(u);if(h<i.near||h>i.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class vI extends di{constructor(e,t,n,i,s=Gn,o=Gn,l,u,h){super(e,t,n,i,s,o,l,u,h),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const m=this;function g(){m.needsUpdate=!0,m._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class jV extends vI{constructor(e,t,n,i,s,o,l,u){super({},e,t,n,i,s,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class WV extends di{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Cr,this.minFilter=Cr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Lb extends di{constructor(e,t,n,i,s,o,l,u,h,m,g,v){super(null,o,l,u,h,m,i,s,g,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class XV extends Lb{constructor(e,t,n,i,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=vr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class YV extends Lb{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,El),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Gv extends di{constructor(e=[],t=El,n,i,s,o,l,u,h,m){super(e,t,n,i,s,o,l,u,h,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class pw extends di{constructor(e,t,n,i,s,o,l,u,h){super(e,t,n,i,s,o,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Am extends di{constructor(e,t,n=lo,i,s,o,l=Cr,u=Cr,h,m=wc,g=1){if(m!==wc&&m!==Tf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:g};super(v,i,s,o,l,u,m,n,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new wf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class yI extends Am{constructor(e,t=lo,n=El,i,s,o=Cr,l=Cr,u,h=wc){const m={width:e,height:e,depth:1},g=[m,m,m,m,m,m];super(e,e,t,n,i,s,o,l,u,h),this.image=g,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class tA extends di{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Sd extends _n{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const l=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const u=[],h=[],m=[],g=[];let v=0,_=0;b("z","y","x",-1,-1,n,t,e,o,s,0),b("z","y","x",1,-1,n,t,-e,o,s,1),b("x","z","y",1,1,e,n,t,i,o,2),b("x","z","y",1,-1,e,n,-t,i,o,3),b("x","y","z",1,-1,e,t,n,i,s,4),b("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(u),this.setAttribute("position",new Wt(h,3)),this.setAttribute("normal",new Wt(m,3)),this.setAttribute("uv",new Wt(g,2));function b(w,S,T,A,D,N,L,I,k,R,U){const H=N/k,Y=L/R,X=N/2,q=L/2,Q=I/2,ie=k+1,j=R+1;let J=0,de=0;const le=new se;for(let ce=0;ce<j;ce++){const z=ce*Y-q;for(let Z=0;Z<ie;Z++){const ae=Z*H-X;le[w]=ae*A,le[S]=z*D,le[T]=Q,h.push(le.x,le.y,le.z),le[w]=0,le[S]=0,le[T]=I>0?1:-1,m.push(le.x,le.y,le.z),g.push(Z/k),g.push(1-ce/R),J+=1}}for(let ce=0;ce<R;ce++)for(let z=0;z<k;z++){const Z=v+z+ie*ce,ae=v+z+ie*(ce+1),fe=v+(z+1)+ie*(ce+1),ve=v+(z+1)+ie*ce;u.push(Z,ae,ve),u.push(ae,fe,ve),de+=6}l.addGroup(_,de,U),_+=de,v+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}class Ub extends _n{constructor(e=1,t=1,n=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const o=[],l=[],u=[],h=[],m=t/2,g=Math.PI/2*e,v=t,_=2*g+v,b=n*2+s,w=i+1,S=new se,T=new se;for(let A=0;A<=b;A++){let D=0,N=0,L=0,I=0;if(A<=n){const U=A/n,H=U*Math.PI/2;N=-m-e*Math.cos(H),L=e*Math.sin(H),I=-e*Math.cos(H),D=U*g}else if(A<=n+s){const U=(A-n)/s;N=-m+U*t,L=e,I=0,D=g+U*v}else{const U=(A-n-s)/n,H=U*Math.PI/2;N=m+e*Math.sin(H),L=e*Math.cos(H),I=e*Math.sin(H),D=g+v+U*g}const k=Math.max(0,Math.min(1,D/_));let R=0;A===0?R=.5/i:A===b&&(R=-.5/i);for(let U=0;U<=i;U++){const H=U/i,Y=H*Math.PI*2,X=Math.sin(Y),q=Math.cos(Y);T.x=-L*q,T.y=N,T.z=L*X,l.push(T.x,T.y,T.z),S.set(-L*q,I,L*X),S.normalize(),u.push(S.x,S.y,S.z),h.push(H+R,k)}if(A>0){const U=(A-1)*w;for(let H=0;H<i;H++){const Y=U+H,X=U+H+1,q=A*w+H,Q=A*w+H+1;o.push(Y,X,q),o.push(X,Q,q)}}}this.setIndex(o),this.setAttribute("position",new Wt(l,3)),this.setAttribute("normal",new Wt(u,3)),this.setAttribute("uv",new Wt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ub(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ib extends _n{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],o=[],l=[],u=[],h=new se,m=new ft;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const _=n+g/t*i;h.x=e*Math.cos(_),h.y=e*Math.sin(_),o.push(h.x,h.y,h.z),l.push(0,0,1),m.x=(o[v]/e+1)/2,m.y=(o[v+1]/e+1)/2,u.push(m.x,m.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Wt(o,3)),this.setAttribute("normal",new Wt(l,3)),this.setAttribute("uv",new Wt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ib(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Hv extends _n{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u};const h=this;i=Math.floor(i),s=Math.floor(s);const m=[],g=[],v=[],_=[];let b=0;const w=[],S=n/2;let T=0;A(),o===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Wt(g,3)),this.setAttribute("normal",new Wt(v,3)),this.setAttribute("uv",new Wt(_,2));function A(){const N=new se,L=new se;let I=0;const k=(t-e)/n;for(let R=0;R<=s;R++){const U=[],H=R/s,Y=H*(t-e)+e;for(let X=0;X<=i;X++){const q=X/i,Q=q*u+l,ie=Math.sin(Q),j=Math.cos(Q);L.x=Y*ie,L.y=-H*n+S,L.z=Y*j,g.push(L.x,L.y,L.z),N.set(ie,k,j).normalize(),v.push(N.x,N.y,N.z),_.push(q,1-H),U.push(b++)}w.push(U)}for(let R=0;R<i;R++)for(let U=0;U<s;U++){const H=w[U][R],Y=w[U+1][R],X=w[U+1][R+1],q=w[U][R+1];(e>0||U!==0)&&(m.push(H,Y,q),I+=3),(t>0||U!==s-1)&&(m.push(Y,X,q),I+=3)}h.addGroup(T,I,0),T+=I}function D(N){const L=b,I=new ft,k=new se;let R=0;const U=N===!0?e:t,H=N===!0?1:-1;for(let X=1;X<=i;X++)g.push(0,S*H,0),v.push(0,H,0),_.push(.5,.5),b++;const Y=b;for(let X=0;X<=i;X++){const Q=X/i*u+l,ie=Math.cos(Q),j=Math.sin(Q);k.x=U*j,k.y=S*H,k.z=U*ie,g.push(k.x,k.y,k.z),v.push(0,H,0),I.x=ie*.5+.5,I.y=j*.5*H+.5,_.push(I.x,I.y),b++}for(let X=0;X<i;X++){const q=L+X,Q=Y+X;N===!0?m.push(Q,Q+1,q):m.push(Q+1,Q,q),R+=3}h.addGroup(T,R,N===!0?1:2),T+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jv extends Hv{constructor(e=1,t=1,n=32,i=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,i,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new jv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vf extends _n{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],o=[];l(i),h(n),m(),this.setAttribute("position",new Wt(s,3)),this.setAttribute("normal",new Wt(s.slice(),3)),this.setAttribute("uv",new Wt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(A){const D=new se,N=new se,L=new se;for(let I=0;I<t.length;I+=3)_(t[I+0],D),_(t[I+1],N),_(t[I+2],L),u(D,N,L,A)}function u(A,D,N,L){const I=L+1,k=[];for(let R=0;R<=I;R++){k[R]=[];const U=A.clone().lerp(N,R/I),H=D.clone().lerp(N,R/I),Y=I-R;for(let X=0;X<=Y;X++)X===0&&R===I?k[R][X]=U:k[R][X]=U.clone().lerp(H,X/Y)}for(let R=0;R<I;R++)for(let U=0;U<2*(I-R)-1;U++){const H=Math.floor(U/2);U%2===0?(v(k[R][H+1]),v(k[R+1][H]),v(k[R][H])):(v(k[R][H+1]),v(k[R+1][H+1]),v(k[R+1][H]))}}function h(A){const D=new se;for(let N=0;N<s.length;N+=3)D.x=s[N+0],D.y=s[N+1],D.z=s[N+2],D.normalize().multiplyScalar(A),s[N+0]=D.x,s[N+1]=D.y,s[N+2]=D.z}function m(){const A=new se;for(let D=0;D<s.length;D+=3){A.x=s[D+0],A.y=s[D+1],A.z=s[D+2];const N=S(A)/2/Math.PI+.5,L=T(A)/Math.PI+.5;o.push(N,1-L)}b(),g()}function g(){for(let A=0;A<o.length;A+=6){const D=o[A+0],N=o[A+2],L=o[A+4],I=Math.max(D,N,L),k=Math.min(D,N,L);I>.9&&k<.1&&(D<.2&&(o[A+0]+=1),N<.2&&(o[A+2]+=1),L<.2&&(o[A+4]+=1))}}function v(A){s.push(A.x,A.y,A.z)}function _(A,D){const N=A*3;D.x=e[N+0],D.y=e[N+1],D.z=e[N+2]}function b(){const A=new se,D=new se,N=new se,L=new se,I=new ft,k=new ft,R=new ft;for(let U=0,H=0;U<s.length;U+=9,H+=6){A.set(s[U+0],s[U+1],s[U+2]),D.set(s[U+3],s[U+4],s[U+5]),N.set(s[U+6],s[U+7],s[U+8]),I.set(o[H+0],o[H+1]),k.set(o[H+2],o[H+3]),R.set(o[H+4],o[H+5]),L.copy(A).add(D).add(N).divideScalar(3);const Y=S(L);w(I,H+0,A,Y),w(k,H+2,D,Y),w(R,H+4,N,Y)}}function w(A,D,N,L){L<0&&A.x===1&&(o[D]=A.x-1),N.x===0&&N.z===0&&(o[D]=L/2/Math.PI+.5)}function S(A){return Math.atan2(A.z,-A.x)}function T(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vf(e.vertices,e.indices,e.radius,e.detail)}}class Ob extends Vf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ob(e.radius,e.detail)}}const o_=new se,l_=new se,zM=new se,c_=new Oa;class xI extends _n{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(cd*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],m=["a","b","c"],g=new Array(3),v={},_=[];for(let b=0;b<u;b+=3){o?(h[0]=o.getX(b),h[1]=o.getX(b+1),h[2]=o.getX(b+2)):(h[0]=b,h[1]=b+1,h[2]=b+2);const{a:w,b:S,c:T}=c_;if(w.fromBufferAttribute(l,h[0]),S.fromBufferAttribute(l,h[1]),T.fromBufferAttribute(l,h[2]),c_.getNormal(zM),g[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,g[1]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,g[2]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let A=0;A<3;A++){const D=(A+1)%3,N=g[A],L=g[D],I=c_[m[A]],k=c_[m[D]],R=`${N}_${L}`,U=`${L}_${N}`;U in v&&v[U]?(zM.dot(v[U].normal)<=s&&(_.push(I.x,I.y,I.z),_.push(k.x,k.y,k.z)),v[U]=null):R in v||(v[R]={index0:h[A],index1:h[D],normal:zM.clone()})}}for(const b in v)if(v[b]){const{index0:w,index1:S}=v[b];o_.fromBufferAttribute(l,w),l_.fromBufferAttribute(l,S),_.push(o_.x,o_.y,o_.z),_.push(l_.x,l_.y,l_.z)}this.setAttribute("position",new Wt(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Cl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Bt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,u=s-1,h;for(;l<=u;)if(i=Math.floor(l+(u-l)/2),h=n[i]-o,h<0)l=i+1;else if(h>0)u=i-1;else{u=i;break}if(i=u,n[i]===o)return i/(s-1);const m=n[i],v=n[i+1]-m,_=(o-m)/v;return(i+_)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new ft:new se);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new se,i=[],s=[],o=[],l=new se,u=new fn;for(let _=0;_<=e;_++){const b=_/e;i[_]=this.getTangentAt(b,new se)}s[0]=new se,o[0]=new se;let h=Number.MAX_VALUE;const m=Math.abs(i[0].x),g=Math.abs(i[0].y),v=Math.abs(i[0].z);m<=h&&(h=m,n.set(1,0,0)),g<=h&&(h=g,n.set(0,1,0)),v<=h&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],l),o[0].crossVectors(i[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),o[_]=o[_-1].clone(),l.crossVectors(i[_-1],i[_]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(un(i[_-1].dot(i[_]),-1,1));s[_].applyMatrix4(u.makeRotationAxis(l,b))}o[_].crossVectors(i[_],s[_])}if(t===!0){let _=Math.acos(un(s[0].dot(s[e]),-1,1));_/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(_=-_);for(let b=1;b<=e;b++)s[b].applyMatrix4(u.makeRotationAxis(i[b],_*b)),o[b].crossVectors(i[b],s[b])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Fb extends Cl{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new ft){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=u-this.aX,_=h-this.aY;u=v*m-_*g+this.aX,h=v*g+_*m+this.aY}return n.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _I extends Fb{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function nA(){let r=0,e=0,t=0,n=0;function i(s,o,l,u){r=s,e=l,t=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,h){i(o,l,h*(l-s),h*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,h,m,g){let v=(o-s)/h-(l-s)/(h+m)+(l-o)/m,_=(l-o)/m-(u-o)/(m+g)+(u-l)/g;v*=m,_*=m,i(o,l,v,_)},calc:function(s){const o=s*s,l=o*s;return r+e*s+t*o+n*l}}}const u_=new se,VM=new nA,GM=new nA,HM=new nA;class bI extends Cl{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new se){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let h,m;this.closed||l>0?h=i[(l-1)%s]:(u_.subVectors(i[0],i[1]).add(i[0]),h=u_);const g=i[l%s],v=i[(l+1)%s];if(this.closed||l+2<s?m=i[(l+2)%s]:(u_.subVectors(i[s-1],i[s-2]).add(i[s-1]),m=u_),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(h.distanceToSquared(g),_),w=Math.pow(g.distanceToSquared(v),_),S=Math.pow(v.distanceToSquared(m),_);w<1e-4&&(w=1),b<1e-4&&(b=w),S<1e-4&&(S=w),VM.initNonuniformCatmullRom(h.x,g.x,v.x,m.x,b,w,S),GM.initNonuniformCatmullRom(h.y,g.y,v.y,m.y,b,w,S),HM.initNonuniformCatmullRom(h.z,g.z,v.z,m.z,b,w,S)}else this.curveType==="catmullrom"&&(VM.initCatmullRom(h.x,g.x,v.x,m.x,this.tension),GM.initCatmullRom(h.y,g.y,v.y,m.y,this.tension),HM.initCatmullRom(h.z,g.z,v.z,m.z,this.tension));return n.set(VM.calc(u),GM.calc(u),HM.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new se().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eD(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,l=r*r,u=r*l;return(2*t-2*n+s+o)*u+(-3*t+3*n-2*s-o)*l+s*r+t}function qV(r,e){const t=1-r;return t*t*e}function ZV(r,e){return 2*(1-r)*r*e}function KV(r,e){return r*r*e}function Y0(r,e,t,n){return qV(r,e)+ZV(r,t)+KV(r,n)}function QV(r,e){const t=1-r;return t*t*t*e}function JV(r,e){const t=1-r;return 3*t*t*r*e}function $V(r,e){return 3*(1-r)*r*r*e}function eG(r,e){return r*r*r*e}function q0(r,e,t,n,i){return QV(r,e)+JV(r,t)+$V(r,n)+eG(r,i)}class iA extends Cl{constructor(e=new ft,t=new ft,n=new ft,i=new ft){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new ft){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(q0(e,i.x,s.x,o.x,l.x),q0(e,i.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class SI extends Cl{constructor(e=new se,t=new se,n=new se,i=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new se){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(q0(e,i.x,s.x,o.x,l.x),q0(e,i.y,s.y,o.y,l.y),q0(e,i.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rA extends Cl{constructor(e=new ft,t=new ft){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ft){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ft){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MI extends Cl{constructor(e=new se,t=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new se){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sA extends Cl{constructor(e=new ft,t=new ft,n=new ft){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ft){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Y0(e,i.x,s.x,o.x),Y0(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aA extends Cl{constructor(e=new se,t=new se,n=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new se){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Y0(e,i.x,s.x,o.x),Y0(e,i.y,s.y,o.y),Y0(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oA extends Cl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ft){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),l=s-o,u=i[o===0?o:o-1],h=i[o],m=i[o>i.length-2?i.length-1:o+1],g=i[o>i.length-3?i.length-1:o+2];return n.set(eD(l,u.x,h.x,m.x,g.x),eD(l,u.y,h.y,m.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new ft().fromArray(i))}return this}}var ib=Object.freeze({__proto__:null,ArcCurve:_I,CatmullRomCurve3:bI,CubicBezierCurve:iA,CubicBezierCurve3:SI,EllipseCurve:Fb,LineCurve:rA,LineCurve3:MI,QuadraticBezierCurve:sA,QuadraticBezierCurve3:aA,SplineCurve:oA});class TI extends Cl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ib[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,l=this.curves[s],u=l.getLength(),h=u===0?0:1-o/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let h=0;h<u.length;h++){const m=u[h];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new ib[i.type]().fromJSON(i))}return this}}class rb extends TI{constructor(e){super(),this.type="Path",this.currentPoint=new ft,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new rA(this.currentPoint.clone(),new ft(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new sA(this.currentPoint.clone(),new ft(e,t),new ft(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const l=new iA(this.currentPoint.clone(),new ft(e,t),new ft(n,i),new ft(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new oA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,l,u){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+h,t+m,n,i,s,o,l,u),this}absellipse(e,t,n,i,s,o,l,u){const h=new Fb(e,t,n,i,s,o,l,u);if(this.curves.length>0){const g=h.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ud extends rb{constructor(e){super(e),this.uuid=ro(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new rb().fromJSON(i))}return this}}function tG(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=wI(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,h;if(n&&(s=aG(r,e,s,t)),r.length>80*t){l=r[0],u=r[1];let m=l,g=u;for(let v=t;v<i;v+=t){const _=r[v],b=r[v+1];_<l&&(l=_),b<u&&(u=b),_>m&&(m=_),b>g&&(g=b)}h=Math.max(m-l,g-u),h=h!==0?32767/h:0}return xv(s,o,t,l,u,h,0),o}function wI(r,e,t,n,i){let s;if(i===vG(r,e,t,n)>0)for(let o=e;o<t;o+=n)s=tD(o/n|0,r[o],r[o+1],s);else for(let o=t-n;o>=e;o-=n)s=tD(o/n|0,r[o],r[o+1],s);return s&&Cm(s,s.next)&&(bv(s),s=s.next),s}function yd(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Cm(t,t.next)||ar(t.prev,t,t.next)===0)){if(bv(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function xv(r,e,t,n,i,s,o){if(!r)return;!o&&s&&fG(r,n,i,s);let l=r;for(;r.prev!==r.next;){const u=r.prev,h=r.next;if(s?iG(r,n,i,s):nG(r)){e.push(u.i,r.i,h.i),bv(r),r=h.next,l=h.next;continue}if(r=h,r===l){o?o===1?(r=rG(yd(r),e),xv(r,e,t,n,i,s,2)):o===2&&sG(r,e,t,n,i,s):xv(yd(r),e,t,n,i,s,1);break}}}function nG(r){const e=r.prev,t=r,n=r.next;if(ar(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,l=e.y,u=t.y,h=n.y,m=Math.min(i,s,o),g=Math.min(l,u,h),v=Math.max(i,s,o),_=Math.max(l,u,h);let b=n.next;for(;b!==e;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=_&&R0(i,l,s,u,o,h,b.x,b.y)&&ar(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function iG(r,e,t,n){const i=r.prev,s=r,o=r.next;if(ar(i,s,o)>=0)return!1;const l=i.x,u=s.x,h=o.x,m=i.y,g=s.y,v=o.y,_=Math.min(l,u,h),b=Math.min(m,g,v),w=Math.max(l,u,h),S=Math.max(m,g,v),T=mw(_,b,e,t,n),A=mw(w,S,e,t,n);let D=r.prevZ,N=r.nextZ;for(;D&&D.z>=T&&N&&N.z<=A;){if(D.x>=_&&D.x<=w&&D.y>=b&&D.y<=S&&D!==i&&D!==o&&R0(l,m,u,g,h,v,D.x,D.y)&&ar(D.prev,D,D.next)>=0||(D=D.prevZ,N.x>=_&&N.x<=w&&N.y>=b&&N.y<=S&&N!==i&&N!==o&&R0(l,m,u,g,h,v,N.x,N.y)&&ar(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;D&&D.z>=T;){if(D.x>=_&&D.x<=w&&D.y>=b&&D.y<=S&&D!==i&&D!==o&&R0(l,m,u,g,h,v,D.x,D.y)&&ar(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;N&&N.z<=A;){if(N.x>=_&&N.x<=w&&N.y>=b&&N.y<=S&&N!==i&&N!==o&&R0(l,m,u,g,h,v,N.x,N.y)&&ar(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function rG(r,e){let t=r;do{const n=t.prev,i=t.next.next;!Cm(n,i)&&AI(n,t,t.next,i)&&_v(n,i)&&_v(i,n)&&(e.push(n.i,t.i,i.i),bv(t),bv(t.next),t=r=i),t=t.next}while(t!==r);return yd(t)}function sG(r,e,t,n,i,s){let o=r;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&pG(o,l)){let u=CI(o,l);o=yd(o,o.next),u=yd(u,u.next),xv(o,e,t,n,i,s,0),xv(u,e,t,n,i,s,0);return}l=l.next}o=o.next}while(o!==r)}function aG(r,e,t,n){const i=[];for(let s=0,o=e.length;s<o;s++){const l=e[s]*n,u=s<o-1?e[s+1]*n:r.length,h=wI(r,l,u,n,!1);h===h.next&&(h.steiner=!0),i.push(dG(h))}i.sort(oG);for(let s=0;s<i.length;s++)t=lG(i[s],t);return t}function oG(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function lG(r,e){const t=cG(r,e);if(!t)return e;const n=CI(t,r);return yd(n,n.next),yd(t,t.next)}function cG(r,e){let t=e;const n=r.x,i=r.y;let s=-1/0,o;if(Cm(r,t))return t;do{if(Cm(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const g=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>s&&(s=g,o=t.x<t.next.x?t:t.next,g===n))return o}t=t.next}while(t!==e);if(!o)return null;const l=o,u=o.x,h=o.y;let m=1/0;t=o;do{if(n>=t.x&&t.x>=u&&n!==t.x&&EI(i<h?n:s,i,u,h,i<h?s:n,i,t.x,t.y)){const g=Math.abs(i-t.y)/(n-t.x);_v(t,r)&&(g<m||g===m&&(t.x>o.x||t.x===o.x&&uG(o,t)))&&(o=t,m=g)}t=t.next}while(t!==l);return o}function uG(r,e){return ar(r.prev,r,e.prev)<0&&ar(e.next,r,r.next)<0}function fG(r,e,t,n){let i=r;do i.z===0&&(i.z=mw(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,hG(i)}function hG(r){let e,t=1;do{let n=r,i;r=null;let s=null;for(e=0;n;){e++;let o=n,l=0;for(let h=0;h<t&&(l++,o=o.nextZ,!!o);h++);let u=t;for(;l>0||u>0&&o;)l!==0&&(u===0||!o||n.z<=o.z)?(i=n,n=n.nextZ,l--):(i=o,o=o.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;n=o}s.nextZ=null,t*=2}while(e>1);return r}function mw(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function dG(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function EI(r,e,t,n,i,s,o,l){return(i-o)*(e-l)>=(r-o)*(s-l)&&(r-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(i-o)*(n-l)}function R0(r,e,t,n,i,s,o,l){return!(r===o&&e===l)&&EI(r,e,t,n,i,s,o,l)}function pG(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!mG(r,e)&&(_v(r,e)&&_v(e,r)&&gG(r,e)&&(ar(r.prev,r,e.prev)||ar(r,e.prev,e))||Cm(r,e)&&ar(r.prev,r,r.next)>0&&ar(e.prev,e,e.next)>0)}function ar(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Cm(r,e){return r.x===e.x&&r.y===e.y}function AI(r,e,t,n){const i=h_(ar(r,e,t)),s=h_(ar(r,e,n)),o=h_(ar(t,n,r)),l=h_(ar(t,n,e));return!!(i!==s&&o!==l||i===0&&f_(r,t,e)||s===0&&f_(r,n,e)||o===0&&f_(t,r,n)||l===0&&f_(t,e,n))}function f_(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function h_(r){return r>0?1:r<0?-1:0}function mG(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&AI(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function _v(r,e){return ar(r.prev,r,r.next)<0?ar(r,e,r.next)>=0&&ar(r,r.prev,e)>=0:ar(r,e,r.prev)<0||ar(r,r.next,e)<0}function gG(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function CI(r,e){const t=gw(r.i,r.x,r.y),n=gw(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function tD(r,e,t,n){const i=gw(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function bv(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function gw(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function vG(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class yG{static triangulate(e,t,n=2){return tG(e,t,n)}}class Sl{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Sl.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];nD(e),iD(n,e);let o=e.length;t.forEach(nD);for(let u=0;u<t.length;u++)i.push(o),o+=t[u].length,iD(n,t[u]);const l=yG.triangulate(n,i);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function nD(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function iD(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class kb extends _n{constructor(e=new ud([new ft(.5,.5),new ft(-.5,.5),new ft(-.5,-.5),new ft(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];o(h)}this.setAttribute("position",new Wt(i,3)),this.setAttribute("uv",new Wt(s,2)),this.computeVertexNormals();function o(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:_-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:xG;let D,N=!1,L,I,k,R;if(T){D=T.getSpacedPoints(m),N=!0,v=!1;const Ue=T.isCatmullRomCurve3?T.closed:!1;L=T.computeFrenetFrames(m,Ue),I=new se,k=new se,R=new se}v||(S=0,_=0,b=0,w=0);const U=l.extractPoints(h);let H=U.shape;const Y=U.holes;if(!Sl.isClockWise(H)){H=H.reverse();for(let Ue=0,Ve=Y.length;Ue<Ve;Ue++){const Oe=Y[Ue];Sl.isClockWise(Oe)&&(Y[Ue]=Oe.reverse())}}function q(Ue){const Oe=10000000000000001e-36;let it=Ue[0];for(let ee=1;ee<=Ue.length;ee++){const ut=ee%Ue.length,Ye=Ue[ut],De=Ye.x-it.x,We=Ye.y-it.y,K=De*De+We*We,V=Math.max(Math.abs(Ye.x),Math.abs(Ye.y),Math.abs(it.x),Math.abs(it.y)),ue=Oe*V*V;if(K<=ue){Ue.splice(ut,1),ee--;continue}it=Ye}}q(H),Y.forEach(q);const Q=Y.length,ie=H;for(let Ue=0;Ue<Q;Ue++){const Ve=Y[Ue];H=H.concat(Ve)}function j(Ue,Ve,Oe){return Ve||$t("ExtrudeGeometry: vec does not exist"),Ue.clone().addScaledVector(Ve,Oe)}const J=H.length;function de(Ue,Ve,Oe){let it,ee,ut;const Ye=Ue.x-Ve.x,De=Ue.y-Ve.y,We=Oe.x-Ue.x,K=Oe.y-Ue.y,V=Ye*Ye+De*De,ue=Ye*K-De*We;if(Math.abs(ue)>Number.EPSILON){const Ie=Math.sqrt(V),Ce=Math.sqrt(We*We+K*K),Ee=Ve.x-De/Ie,st=Ve.y+Ye/Ie,at=Oe.x-K/Ce,wt=Oe.y+We/Ce,Lt=((at-Ee)*K-(wt-st)*We)/(Ye*K-De*We);it=Ee+Ye*Lt-Ue.x,ee=st+De*Lt-Ue.y;const Ge=it*it+ee*ee;if(Ge<=2)return new ft(it,ee);ut=Math.sqrt(Ge/2)}else{let Ie=!1;Ye>Number.EPSILON?We>Number.EPSILON&&(Ie=!0):Ye<-Number.EPSILON?We<-Number.EPSILON&&(Ie=!0):Math.sign(De)===Math.sign(K)&&(Ie=!0),Ie?(it=-De,ee=Ye,ut=Math.sqrt(V)):(it=Ye,ee=De,ut=Math.sqrt(V/2))}return new ft(it/ut,ee/ut)}const le=[];for(let Ue=0,Ve=ie.length,Oe=Ve-1,it=Ue+1;Ue<Ve;Ue++,Oe++,it++)Oe===Ve&&(Oe=0),it===Ve&&(it=0),le[Ue]=de(ie[Ue],ie[Oe],ie[it]);const ce=[];let z,Z=le.concat();for(let Ue=0,Ve=Q;Ue<Ve;Ue++){const Oe=Y[Ue];z=[];for(let it=0,ee=Oe.length,ut=ee-1,Ye=it+1;it<ee;it++,ut++,Ye++)ut===ee&&(ut=0),Ye===ee&&(Ye=0),z[it]=de(Oe[it],Oe[ut],Oe[Ye]);ce.push(z),Z=Z.concat(z)}let ae;if(S===0)ae=Sl.triangulateShape(ie,Y);else{const Ue=[],Ve=[];for(let Oe=0;Oe<S;Oe++){const it=Oe/S,ee=_*Math.cos(it*Math.PI/2),ut=b*Math.sin(it*Math.PI/2)+w;for(let Ye=0,De=ie.length;Ye<De;Ye++){const We=j(ie[Ye],le[Ye],ut);je(We.x,We.y,-ee),it===0&&Ue.push(We)}for(let Ye=0,De=Q;Ye<De;Ye++){const We=Y[Ye];z=ce[Ye];const K=[];for(let V=0,ue=We.length;V<ue;V++){const Ie=j(We[V],z[V],ut);je(Ie.x,Ie.y,-ee),it===0&&K.push(Ie)}it===0&&Ve.push(K)}}ae=Sl.triangulateShape(Ue,Ve)}const fe=ae.length,ve=b+w;for(let Ue=0;Ue<J;Ue++){const Ve=v?j(H[Ue],Z[Ue],ve):H[Ue];N?(k.copy(L.normals[0]).multiplyScalar(Ve.x),I.copy(L.binormals[0]).multiplyScalar(Ve.y),R.copy(D[0]).add(k).add(I),je(R.x,R.y,R.z)):je(Ve.x,Ve.y,0)}for(let Ue=1;Ue<=m;Ue++)for(let Ve=0;Ve<J;Ve++){const Oe=v?j(H[Ve],Z[Ve],ve):H[Ve];N?(k.copy(L.normals[Ue]).multiplyScalar(Oe.x),I.copy(L.binormals[Ue]).multiplyScalar(Oe.y),R.copy(D[Ue]).add(k).add(I),je(R.x,R.y,R.z)):je(Oe.x,Oe.y,g/m*Ue)}for(let Ue=S-1;Ue>=0;Ue--){const Ve=Ue/S,Oe=_*Math.cos(Ve*Math.PI/2),it=b*Math.sin(Ve*Math.PI/2)+w;for(let ee=0,ut=ie.length;ee<ut;ee++){const Ye=j(ie[ee],le[ee],it);je(Ye.x,Ye.y,g+Oe)}for(let ee=0,ut=Y.length;ee<ut;ee++){const Ye=Y[ee];z=ce[ee];for(let De=0,We=Ye.length;De<We;De++){const K=j(Ye[De],z[De],it);N?je(K.x,K.y+D[m-1].y,D[m-1].x+Oe):je(K.x,K.y,g+Oe)}}}re(),pe();function re(){const Ue=i.length/3;if(v){let Ve=0,Oe=J*Ve;for(let it=0;it<fe;it++){const ee=ae[it];ct(ee[2]+Oe,ee[1]+Oe,ee[0]+Oe)}Ve=m+S*2,Oe=J*Ve;for(let it=0;it<fe;it++){const ee=ae[it];ct(ee[0]+Oe,ee[1]+Oe,ee[2]+Oe)}}else{for(let Ve=0;Ve<fe;Ve++){const Oe=ae[Ve];ct(Oe[2],Oe[1],Oe[0])}for(let Ve=0;Ve<fe;Ve++){const Oe=ae[Ve];ct(Oe[0]+J*m,Oe[1]+J*m,Oe[2]+J*m)}}n.addGroup(Ue,i.length/3-Ue,0)}function pe(){const Ue=i.length/3;let Ve=0;Se(ie,Ve),Ve+=ie.length;for(let Oe=0,it=Y.length;Oe<it;Oe++){const ee=Y[Oe];Se(ee,Ve),Ve+=ee.length}n.addGroup(Ue,i.length/3-Ue,1)}function Se(Ue,Ve){let Oe=Ue.length;for(;--Oe>=0;){const it=Oe;let ee=Oe-1;ee<0&&(ee=Ue.length-1);for(let ut=0,Ye=m+S*2;ut<Ye;ut++){const De=J*ut,We=J*(ut+1),K=Ve+it+De,V=Ve+ee+De,ue=Ve+ee+We,Ie=Ve+it+We;Je(K,V,ue,Ie)}}}function je(Ue,Ve,Oe){u.push(Ue),u.push(Ve),u.push(Oe)}function ct(Ue,Ve,Oe){nt(Ue),nt(Ve),nt(Oe);const it=i.length/3,ee=A.generateTopUV(n,i,it-3,it-2,it-1);Mt(ee[0]),Mt(ee[1]),Mt(ee[2])}function Je(Ue,Ve,Oe,it){nt(Ue),nt(Ve),nt(it),nt(Ve),nt(Oe),nt(it);const ee=i.length/3,ut=A.generateSideWallUV(n,i,ee-6,ee-3,ee-2,ee-1);Mt(ut[0]),Mt(ut[1]),Mt(ut[3]),Mt(ut[1]),Mt(ut[2]),Mt(ut[3])}function nt(Ue){i.push(u[Ue*3+0]),i.push(u[Ue*3+1]),i.push(u[Ue*3+2])}function Mt(Ue){s.push(Ue.x),s.push(Ue.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return _G(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ib[i.type]().fromJSON(i)),new kb(n,e.options)}}const xG={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],l=e[n*3],u=e[n*3+1],h=e[i*3],m=e[i*3+1];return[new ft(s,o),new ft(l,u),new ft(h,m)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[n*3],m=e[n*3+1],g=e[n*3+2],v=e[i*3],_=e[i*3+1],b=e[i*3+2],w=e[s*3],S=e[s*3+1],T=e[s*3+2];return Math.abs(l-m)<Math.abs(o-h)?[new ft(o,1-u),new ft(h,1-g),new ft(v,1-b),new ft(w,1-T)]:[new ft(l,1-u),new ft(m,1-g),new ft(_,1-b),new ft(S,1-T)]}};function _G(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Wv extends Vf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wv(e.radius,e.detail)}}class Bb extends _n{constructor(e=[new ft(0,-.5),new ft(.5,0),new ft(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=un(i,0,Math.PI*2);const s=[],o=[],l=[],u=[],h=[],m=1/t,g=new se,v=new ft,_=new se,b=new se,w=new se;let S=0,T=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:S=e[A+1].x-e[A].x,T=e[A+1].y-e[A].y,_.x=T*1,_.y=-S,_.z=T*0,w.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case e.length-1:u.push(w.x,w.y,w.z);break;default:S=e[A+1].x-e[A].x,T=e[A+1].y-e[A].y,_.x=T*1,_.y=-S,_.z=T*0,b.copy(_),_.x+=w.x,_.y+=w.y,_.z+=w.z,_.normalize(),u.push(_.x,_.y,_.z),w.copy(b)}for(let A=0;A<=t;A++){const D=n+A*m*i,N=Math.sin(D),L=Math.cos(D);for(let I=0;I<=e.length-1;I++){g.x=e[I].x*N,g.y=e[I].y,g.z=e[I].x*L,o.push(g.x,g.y,g.z),v.x=A/t,v.y=I/(e.length-1),l.push(v.x,v.y);const k=u[3*I+0]*N,R=u[3*I+1],U=u[3*I+0]*L;h.push(k,R,U)}}for(let A=0;A<t;A++)for(let D=0;D<e.length-1;D++){const N=D+A*e.length,L=N,I=N+e.length,k=N+e.length+1,R=N+1;s.push(L,I,R),s.push(k,R,I)}this.setIndex(s),this.setAttribute("position",new Wt(o,3)),this.setAttribute("uv",new Wt(l,2)),this.setAttribute("normal",new Wt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bb(e.points,e.segments,e.phiStart,e.phiLength)}}class Xv extends Vf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xv(e.radius,e.detail)}}class Rl extends _n{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,l=Math.floor(n),u=Math.floor(i),h=l+1,m=u+1,g=e/l,v=t/u,_=[],b=[],w=[],S=[];for(let T=0;T<m;T++){const A=T*v-o;for(let D=0;D<h;D++){const N=D*g-s;b.push(N,-A,0),w.push(0,0,1),S.push(D/l),S.push(1-T/u)}}for(let T=0;T<u;T++)for(let A=0;A<l;A++){const D=A+h*T,N=A+h*(T+1),L=A+1+h*(T+1),I=A+1+h*T;_.push(D,N,I),_.push(N,L,I)}this.setIndex(_),this.setAttribute("position",new Wt(b,3)),this.setAttribute("normal",new Wt(w,3)),this.setAttribute("uv",new Wt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rl(e.width,e.height,e.widthSegments,e.heightSegments)}}class zb extends _n{constructor(e=.5,t=1,n=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const l=[],u=[],h=[],m=[];let g=e;const v=(t-e)/i,_=new se,b=new ft;for(let w=0;w<=i;w++){for(let S=0;S<=n;S++){const T=s+S/n*o;_.x=g*Math.cos(T),_.y=g*Math.sin(T),u.push(_.x,_.y,_.z),h.push(0,0,1),b.x=(_.x/t+1)/2,b.y=(_.y/t+1)/2,m.push(b.x,b.y)}g+=v}for(let w=0;w<i;w++){const S=w*(n+1);for(let T=0;T<n;T++){const A=T+S,D=A,N=A+n+1,L=A+n+2,I=A+1;l.push(D,N,I),l.push(N,L,I)}}this.setIndex(l),this.setAttribute("position",new Wt(u,3)),this.setAttribute("normal",new Wt(h,3)),this.setAttribute("uv",new Wt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Vb extends _n{constructor(e=new ud([new ft(0,.5),new ft(-.5,-.5),new ft(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let m=0;m<e.length;m++)h(e[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Wt(i,3)),this.setAttribute("normal",new Wt(s,3)),this.setAttribute("uv",new Wt(o,2));function h(m){const g=i.length/3,v=m.extractPoints(t);let _=v.shape;const b=v.holes;Sl.isClockWise(_)===!1&&(_=_.reverse());for(let S=0,T=b.length;S<T;S++){const A=b[S];Sl.isClockWise(A)===!0&&(b[S]=A.reverse())}const w=Sl.triangulateShape(_,b);for(let S=0,T=b.length;S<T;S++){const A=b[S];_=_.concat(A)}for(let S=0,T=_.length;S<T;S++){const A=_[S];i.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let S=0,T=w.length;S<T;S++){const A=w[S],D=A[0]+g,N=A[1]+g,L=A[2]+g;n.push(D,N,L),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return bG(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}return new Vb(n,e.curveSegments)}}function bG(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Yv extends _n{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(o+l,Math.PI);let h=0;const m=[],g=new se,v=new se,_=[],b=[],w=[],S=[];for(let T=0;T<=n;T++){const A=[],D=T/n;let N=0;T===0&&o===0?N=.5/t:T===n&&u===Math.PI&&(N=-.5/t);for(let L=0;L<=t;L++){const I=L/t;g.x=-e*Math.cos(i+I*s)*Math.sin(o+D*l),g.y=e*Math.cos(o+D*l),g.z=e*Math.sin(i+I*s)*Math.sin(o+D*l),b.push(g.x,g.y,g.z),v.copy(g).normalize(),w.push(v.x,v.y,v.z),S.push(I+N,1-D),A.push(h++)}m.push(A)}for(let T=0;T<n;T++)for(let A=0;A<t;A++){const D=m[T][A+1],N=m[T][A],L=m[T+1][A],I=m[T+1][A+1];(T!==0||o>0)&&_.push(D,N,I),(T!==n-1||u<Math.PI)&&_.push(N,L,I)}this.setIndex(_),this.setAttribute("position",new Wt(b,3)),this.setAttribute("normal",new Wt(w,3)),this.setAttribute("uv",new Wt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Gb extends Vf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gb(e.radius,e.detail)}}class Hb extends _n{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2,o=0,l=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s,thetaStart:o,thetaLength:l},n=Math.floor(n),i=Math.floor(i);const u=[],h=[],m=[],g=[],v=new se,_=new se,b=new se;for(let w=0;w<=n;w++){const S=o+w/n*l;for(let T=0;T<=i;T++){const A=T/i*s;_.x=(e+t*Math.cos(S))*Math.cos(A),_.y=(e+t*Math.cos(S))*Math.sin(A),_.z=t*Math.sin(S),h.push(_.x,_.y,_.z),v.x=e*Math.cos(A),v.y=e*Math.sin(A),b.subVectors(_,v).normalize(),m.push(b.x,b.y,b.z),g.push(T/i),g.push(w/n)}}for(let w=1;w<=n;w++)for(let S=1;S<=i;S++){const T=(i+1)*w+S-1,A=(i+1)*(w-1)+S-1,D=(i+1)*(w-1)+S,N=(i+1)*w+S;u.push(T,A,N),u.push(A,D,N)}this.setIndex(u),this.setAttribute("position",new Wt(h,3)),this.setAttribute("normal",new Wt(m,3)),this.setAttribute("uv",new Wt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jb extends _n{constructor(e=1,t=.4,n=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:o},n=Math.floor(n),i=Math.floor(i);const l=[],u=[],h=[],m=[],g=new se,v=new se,_=new se,b=new se,w=new se,S=new se,T=new se;for(let D=0;D<=n;++D){const N=D/n*s*Math.PI*2;A(N,s,o,e,_),A(N+.01,s,o,e,b),S.subVectors(b,_),T.addVectors(b,_),w.crossVectors(S,T),T.crossVectors(w,S),w.normalize(),T.normalize();for(let L=0;L<=i;++L){const I=L/i*Math.PI*2,k=-t*Math.cos(I),R=t*Math.sin(I);g.x=_.x+(k*T.x+R*w.x),g.y=_.y+(k*T.y+R*w.y),g.z=_.z+(k*T.z+R*w.z),u.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),h.push(v.x,v.y,v.z),m.push(D/n),m.push(L/i)}}for(let D=1;D<=n;D++)for(let N=1;N<=i;N++){const L=(i+1)*(D-1)+(N-1),I=(i+1)*D+(N-1),k=(i+1)*D+N,R=(i+1)*(D-1)+N;l.push(L,I,R),l.push(I,k,R)}this.setIndex(l),this.setAttribute("position",new Wt(u,3)),this.setAttribute("normal",new Wt(h,3)),this.setAttribute("uv",new Wt(m,2));function A(D,N,L,I,k){const R=Math.cos(D),U=Math.sin(D),H=L/N*D,Y=Math.cos(H);k.x=I*(2+Y)*.5*R,k.y=I*(2+Y)*U*.5,k.z=I*Math.sin(H)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wb extends _n{constructor(e=new aA(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new se,u=new se,h=new ft;let m=new se;const g=[],v=[],_=[],b=[];w(),this.setIndex(b),this.setAttribute("position",new Wt(g,3)),this.setAttribute("normal",new Wt(v,3)),this.setAttribute("uv",new Wt(_,2));function w(){for(let D=0;D<t;D++)S(D);S(s===!1?t:0),A(),T()}function S(D){m=e.getPointAt(D/t,m);const N=o.normals[D],L=o.binormals[D];for(let I=0;I<=i;I++){const k=I/i*Math.PI*2,R=Math.sin(k),U=-Math.cos(k);u.x=U*N.x+R*L.x,u.y=U*N.y+R*L.y,u.z=U*N.z+R*L.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=m.x+n*u.x,l.y=m.y+n*u.y,l.z=m.z+n*u.z,g.push(l.x,l.y,l.z)}}function T(){for(let D=1;D<=t;D++)for(let N=1;N<=i;N++){const L=(i+1)*(D-1)+(N-1),I=(i+1)*D+(N-1),k=(i+1)*D+N,R=(i+1)*(D-1)+N;b.push(L,I,R),b.push(I,k,R)}}function A(){for(let D=0;D<=t;D++)for(let N=0;N<=i;N++)h.x=D/t,h.y=N/i,_.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wb(new ib[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class RI extends _n{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new se,s=new se;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,m=u.length;h<m;++h){const g=u[h],v=g.start,_=g.count;for(let b=v,w=v+_;b<w;b+=3)for(let S=0;S<3;S++){const T=l.getX(b+S),A=l.getX(b+(S+1)%3);i.fromBufferAttribute(o,T),s.fromBufferAttribute(o,A),rD(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l<u;l++)for(let h=0;h<3;h++){const m=3*l+h,g=3*l+(h+1)%3;i.fromBufferAttribute(o,m),s.fromBufferAttribute(o,g),rD(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Wt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function rD(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var sD=Object.freeze({__proto__:null,BoxGeometry:Sd,CapsuleGeometry:Ub,CircleGeometry:Ib,ConeGeometry:jv,CylinderGeometry:Hv,DodecahedronGeometry:Ob,EdgesGeometry:xI,ExtrudeGeometry:kb,IcosahedronGeometry:Wv,LatheGeometry:Bb,OctahedronGeometry:Xv,PlaneGeometry:Rl,PolyhedronGeometry:Vf,RingGeometry:zb,ShapeGeometry:Vb,SphereGeometry:Yv,TetrahedronGeometry:Gb,TorusGeometry:Hb,TorusKnotGeometry:jb,TubeGeometry:Wb,WireframeGeometry:RI});class DI extends Vs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}function Rm(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(Bt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function na(r){const e={};for(let t=0;t<r.length;t++){const n=Rm(r[t]);for(const i in n)e[i]=n[i]}return e}function SG(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function NI(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Wn.workingColorSpace}const lA={clone:Rm,merge:na};var MG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,TG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ca extends Vs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=MG,this.fragmentShader=TG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rm(e.uniforms),this.uniformsGroups=SG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class cA extends ca{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class uA extends Vs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zf,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new co,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class PI extends uA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ft(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class LI extends Vs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Vt(16777215),this.specular=new Vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zf,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new co,this.combine=Ov,this.reflectivity=1,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UI extends Vs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zf,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class II extends Vs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zf,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class OI extends Vs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zf,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new co,this.combine=Ov,this.reflectivity=1,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xb extends Vs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ZU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Yb extends Vs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class FI extends Vs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zf,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kI extends ua{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function td(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function BI(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function vw(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let u=0;u!==e;++u)i[o++]=r[l+u]}return i}function fA(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}function wG(r,e,t,n,i=30){const s=r.clone();s.name=e;const o=[];for(let u=0;u<s.tracks.length;++u){const h=s.tracks[u],m=h.getValueSize(),g=[],v=[];for(let _=0;_<h.times.length;++_){const b=h.times[_]*i;if(!(b<t||b>=n)){g.push(h.times[_]);for(let w=0;w<m;++w)v.push(h.values[_*m+w])}}g.length!==0&&(h.times=td(g,h.times.constructor),h.values=td(v,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function EG(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let o=0;o<i;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const h=r.tracks.find(function(T){return T.name===l.name&&T.ValueTypeName===u});if(h===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const _=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const b=l.times.length-1;let w;if(s<=l.times[0]){const T=m,A=g-m;w=l.values.slice(T,A)}else if(s>=l.times[b]){const T=b*g+m,A=T+g-m;w=l.values.slice(T,A)}else{const T=l.createInterpolant(),A=m,D=g-m;T.evaluate(s),w=T.resultBuffer.slice(A,D)}u==="quaternion"&&new bs().fromArray(w).normalize().conjugate().toArray(w);const S=h.times.length;for(let T=0;T<S;++T){const A=T*_+v;if(u==="quaternion")bs.multiplyQuaternionsFlat(h.values,A,w,0,h.values,A);else{const D=_-v*2;for(let N=0;N<D;++N)h.values[A+N]-=w[N]}}}return r.blendMode=YE,r}class AG{static convertArray(e,t){return td(e,t)}static isTypedArray(e){return rI(e)}static getKeyframeOrder(e){return BI(e)}static sortedArray(e,t,n){return vw(e,t,n)}static flattenJSON(e,t,n,i){fA(e,t,n,i)}static subclip(e,t,n,i,s=30){return wG(e,t,n,i,s)}static makeClipAdditive(e,t=0,n=e,i=30){return EG(e,t,n,i)}}class Fm{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let u=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zI extends Fm{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jh,endingEnd:Jh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,l=i[s],u=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case $h:s=e,l=2*t-n;break;case dv:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case $h:o=e,u=2*n-t;break;case dv:o=1,u=n+i[1]-i[0];break;default:o=e-1,u=t}const h=(n-t)*.5,m=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-n),this._offsetPrev=s*m,this._offsetNext=o*m}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,b=(n-t)/(i-t),w=b*b,S=w*b,T=-v*S+2*v*w-v*b,A=(1+v)*S+(-1.5-2*v)*w+(-.5+v)*b+1,D=(-1-_)*S+(1.5+_)*w+.5*b,N=_*S-_*w;for(let L=0;L!==l;++L)s[L]=T*o[m+L]+A*o[h+L]+D*o[u+L]+N*o[g+L];return s}}class hA extends Fm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,m=(n-t)/(i-t),g=1-m;for(let v=0;v!==l;++v)s[v]=o[h+v]*g+o[u+v]*m;return s}}class VI extends Fm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class GI extends Fm{interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,m=this.settings||this.DefaultSettings_,g=m.inTangents,v=m.outTangents;if(!g||!v){const w=(n-t)/(i-t),S=1-w;for(let T=0;T!==l;++T)s[T]=o[h+T]*S+o[u+T]*w;return s}const _=l*2,b=e-1;for(let w=0;w!==l;++w){const S=o[h+w],T=o[u+w],A=b*_+w*2,D=v[A],N=v[A+1],L=e*_+w*2,I=g[L],k=g[L+1];let R=(n-t)/(i-t),U,H,Y,X,q;for(let Q=0;Q<8;Q++){U=R*R,H=U*R,Y=1-R,X=Y*Y,q=X*Y;const j=q*t+3*X*R*D+3*Y*U*I+H*i-n;if(Math.abs(j)<1e-10)break;const J=3*X*(D-t)+6*Y*R*(I-D)+3*U*(i-I);if(Math.abs(J)<1e-10)break;R=R-j/J,R=Math.max(0,Math.min(1,R))}s[w]=q*S+3*X*R*N+3*Y*U*k+H*T}return s}}class Ko{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=td(t,this.TimeBufferType),this.values=td(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:td(e.times,Array),values:td(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new VI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodBezier(e){const t=new GI(this.times,this.values,this.getValueSize(),e);return this.settings&&(t.settings=this.settings),t}setInterpolation(e){let t;switch(e){case hv:t=this.InterpolantFactoryMethodDiscrete;break;case eb:t=this.InterpolantFactoryMethodLinear;break;case G_:t=this.InterpolantFactoryMethodSmooth;break;case uw:t=this.InterpolantFactoryMethodBezier;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return Bt("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return hv;case this.InterpolantFactoryMethodLinear:return eb;case this.InterpolantFactoryMethodSmooth:return G_;case this.InterpolantFactoryMethodBezier:return uw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&($t("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&($t("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){$t("KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(o!==null&&o>u){$t("KeyframeTrack: Out of order keys.",this,l,u,o),e=!1;break}o=u}if(i!==void 0&&rI(i))for(let l=0,u=i.length;l!==u;++l){const h=i[l];if(isNaN(h)){$t("KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===G_,s=e.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const h=e[l],m=e[l+1];if(h!==m&&(l!==1||h!==e[0]))if(i)u=!0;else{const g=l*n,v=g-n,_=g+n;for(let b=0;b!==n;++b){const w=t[g+b];if(w!==t[v+b]||w!==t[_+b]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const g=l*n,v=o*n;for(let _=0;_!==n;++_)t[v+_]=t[g+_]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,u=o*n,h=0;h!==n;++h)t[u+h]=t[l+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ko.prototype.ValueTypeName="";Ko.prototype.TimeBufferType=Float32Array;Ko.prototype.ValueBufferType=Float32Array;Ko.prototype.DefaultInterpolation=eb;class Md extends Ko{constructor(e,t,n){super(e,t,n)}}Md.prototype.ValueTypeName="bool";Md.prototype.ValueBufferType=Array;Md.prototype.DefaultInterpolation=hv;Md.prototype.InterpolantFactoryMethodLinear=void 0;Md.prototype.InterpolantFactoryMethodSmooth=void 0;class dA extends Ko{constructor(e,t,n,i){super(e,t,n,i)}}dA.prototype.ValueTypeName="color";class Sv extends Ko{constructor(e,t,n,i){super(e,t,n,i)}}Sv.prototype.ValueTypeName="number";class HI extends Fm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-t)/(i-t);let h=e*l;for(let m=h+l;h!==m;h+=4)bs.slerpFlat(s,0,o,h-l,o,h,u);return s}}class qv extends Ko{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new HI(this.times,this.values,this.getValueSize(),e)}}qv.prototype.ValueTypeName="quaternion";qv.prototype.InterpolantFactoryMethodSmooth=void 0;class Td extends Ko{constructor(e,t,n){super(e,t,n)}}Td.prototype.ValueTypeName="string";Td.prototype.ValueBufferType=Array;Td.prototype.DefaultInterpolation=hv;Td.prototype.InterpolantFactoryMethodLinear=void 0;Td.prototype.InterpolantFactoryMethodSmooth=void 0;class Mv extends Ko{constructor(e,t,n,i){super(e,t,n,i)}}Mv.prototype.ValueTypeName="vector";class Tv{constructor(e="",t=-1,n=[],i=Mb){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=ro(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(RG(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=n.length;s!==o;++s)t.push(Ko.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let l=0;l<s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const m=BI(u);u=vw(u,1,m),h=vw(h,1,m),!i&&u[0]===0&&(u.push(s),h.push(h[0])),o.push(new Sv(".morphTargetInfluences["+t[l].name+"]",u,h).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const h=e[l],m=h.name.match(s);if(m&&m.length>1){const g=m[1];let v=i[g];v||(i[g]=v=[]),v.push(h)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return o}static parseAnimation(e,t){if(Bt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return $t("AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,_,b,w){if(_.length!==0){const S=[],T=[];fA(_,S,T,b),S.length!==0&&w.push(new g(v,S,T))}},i=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let g=0;g<h.length;g++){const v=h[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let w=0;w<v[b].morphTargets.length;w++)_[v[b].morphTargets[w]]=-1;for(const w in _){const S=[],T=[];for(let A=0;A!==v[b].morphTargets.length;++A){const D=v[b];S.push(D.time),T.push(D.morphTarget===w?1:0)}i.push(new Sv(".morphTargetInfluence["+w+"]",S,T))}u=_.length*o}else{const _=".bones["+t[g].name+"]";n(Mv,_+".position",v,"pos",i),n(qv,_+".quaternion",v,"rot",i),n(Mv,_+".scale",v,"scl",i)}}return i.length===0?null:new this(s,u,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function CG(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sv;case"vector":case"vector2":case"vector3":case"vector4":return Mv;case"color":return dA;case"quaternion":return qv;case"bool":case"boolean":return Md;case"string":return Td}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function RG(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=CG(r.type);if(r.times===void 0){const t=[],n=[];fA(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const _c={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(aD(r)||(this.files[r]=e))},get:function(r){if(this.enabled!==!1&&!aD(r))return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};function aD(r){try{const e=r.slice(r.indexOf(":")+1);return new URL(e).protocol==="blob:"}catch{return!1}}class qb{constructor(e,t,n){const i=this;let s=!1,o=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(m){l++,s===!1&&i.onStart!==void 0&&i.onStart(m,o,l),s=!0},this.itemEnd=function(m){o++,i.onProgress!==void 0&&i.onProgress(m,o,l),o===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(m){i.onError!==void 0&&i.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return h.push(m,g),this},this.removeHandler=function(m){const g=h.indexOf(m);return g!==-1&&h.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=h.length;g<v;g+=2){const _=h[g],b=h[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const jI=new qb;class fa{constructor(e){this.manager=e!==void 0?e:jI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}fa.DEFAULT_MATERIAL_NAME="__DEFAULT";const du={};class DG extends Error{constructor(e,t){super(e),this.response=t}}class so extends fa{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=_c.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(du[e]!==void 0){du[e].push({onLoad:t,onProgress:n,onError:i});return}du[e]=[],du[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),l=this.mimeType,u=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&Bt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const m=du[e],g=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),_=v?parseInt(v):0,b=_!==0;let w=0;const S=new ReadableStream({start(T){A();function A(){g.read().then(({done:D,value:N})=>{if(D)T.close();else{w+=N.byteLength;const L=new ProgressEvent("progress",{lengthComputable:b,loaded:w,total:_});for(let I=0,k=m.length;I<k;I++){const R=m[I];R.onProgress&&R.onProgress(L)}T.enqueue(N),A()}},D=>{T.error(D)})}}});return new Response(S)}else throw new DG(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return h.json();default:if(l==="")return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return h.arrayBuffer().then(b=>_.decode(b))}}}).then(h=>{_c.add(`file:${e}`,h);const m=du[e];delete du[e];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onLoad&&_.onLoad(h)}}).catch(h=>{const m=du[e];if(m===void 0)throw this.manager.itemError(e),h;delete du[e];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onError&&_.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class NG extends fa{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new so(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):$t(u),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Tv.parse(e[n]);t.push(i)}return t}}class PG extends fa{constructor(e){super(e)}load(e,t,n,i){const s=this,o=[],l=new Lb,u=new so(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function m(g){u.load(e[g],function(v){const _=s.parse(v,!0);o[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},h+=1,h===6&&(_.mipmapCount===1&&(l.minFilter=Gn),l.image=o,l.format=_.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)m(g);else u.load(e,function(g){const v=s.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let b=0;b<_;b++){o[b]={mipmaps:[]};for(let w=0;w<v.mipmapCount;w++)o[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+w]),o[b].format=v.format,o[b].width=v.width,o[b].height=v.height}l.image=o}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Gn),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}const Vp=new WeakMap;class wv extends fa{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_c.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let g=Vp.get(o);g===void 0&&(g=[],Vp.set(o,g)),g.push({onLoad:t,onError:i})}return o}const l=gv("img");function u(){m(),t&&t(this);const g=Vp.get(this)||[];for(let v=0;v<g.length;v++){const _=g[v];_.onLoad&&_.onLoad(this)}Vp.delete(this),s.manager.itemEnd(e)}function h(g){m(),i&&i(g),_c.remove(`image:${e}`);const v=Vp.get(this)||[];for(let _=0;_<v.length;_++){const b=v[_];b.onError&&b.onError(g)}Vp.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),_c.add(`image:${e}`,l),s.manager.itemStart(e),l.src=e,l}}class WI extends fa{constructor(e){super(e)}load(e,t,n,i){const s=new Gv;s.colorSpace=xs;const o=new wv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(h){o.load(e[h],function(m){s.images[h]=m,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let h=0;h<e.length;++h)u(h);return s}}class pA extends fa{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Zo,l=new so(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(m){if(i!==void 0)i(m);else{m(m);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:vr,o.wrapT=h.wrapT!==void 0?h.wrapT:vr,o.magFilter=h.magFilter!==void 0?h.magFilter:Gn,o.minFilter=h.minFilter!==void 0?h.minFilter:Gn,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(o.colorSpace=h.colorSpace),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=xc),h.mipmapCount===1&&(o.minFilter=Gn),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&&t(o,h)},n,i),o}}class LG extends fa{constructor(e){super(e)}load(e,t,n,i){const s=new di,o=new wv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class Gf extends ei{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Vt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class XI extends Gf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const jM=new fn,oD=new se,lD=new se;class mA{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.biasNode=null,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ft(512,512),this.mapType=ns,this.map=null,this.mapPass=null,this.matrix=new fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Om,this._frameExtents=new ft(1,1),this._viewportCount=1,this._viewports=[new hi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;oD.setFromMatrixPosition(e.matrixWorld),t.position.copy(oD),lD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(lD),t.updateMatrixWorld(),jM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jM,t.coordinateSystem,t.reversedDepth),t.coordinateSystem===md||t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(jM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this.biasNode=e.biasNode,this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const d_=new se,p_=new bs,hc=new se;class Zb extends ei{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fn,this.projectionMatrix=new fn,this.projectionMatrixInverse=new fn,this.coordinateSystem=no,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorld.decompose(d_,p_,hc),hc.x===1&&hc.y===1&&hc.z===1?this.matrixWorldInverse.copy(this.matrixWorld).invert():this.matrixWorldInverse.compose(d_,p_,hc.set(1,1,1)).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorld.decompose(d_,p_,hc),hc.x===1&&hc.y===1&&hc.z===1?this.matrixWorldInverse.copy(this.matrixWorld).invert():this.matrixWorldInverse.compose(d_,p_,hc.set(1,1,1)).invert()}clone(){return new this.constructor().copy(this)}}const mf=new se,cD=new ft,uD=new ft;class Ar extends Zb{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=wm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(cd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return wm*2*Math.atan(Math.tan(cd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){mf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(mf.x,mf.y).multiplyScalar(-e/mf.z),mf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(mf.x,mf.y).multiplyScalar(-e/mf.z)}getViewSize(e,t){return this.getViewBounds(e,cD,uD),t.subVectors(uD,cD)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(cd*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*i/u,t-=o.offsetY*n/h,i*=o.width/u,n*=o.height/h}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class UG extends mA{constructor(){super(new Ar(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=wm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class YI extends Gf{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new UG}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class IG extends mA{constructor(){super(new Ar(90,1,.5,500)),this.isPointLightShadow=!0}}class qI extends Gf{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new IG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Sc extends Zb{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=i+t,u=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class OG extends mA{constructor(){super(new Sc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ZI extends Gf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.shadow=new OG}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class KI extends Gf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class QI extends Gf{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class gA{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class JI extends Gf{constructor(e=new gA,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Kb extends fa{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,o=new so(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):$t(u),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&Bt("MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(i.allowOverride=e.allowOverride),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=n(o.value);break;case"c":i.uniforms[s].value=new Vt().setHex(o.value);break;case"v2":i.uniforms[s].value=new ft().fromArray(o.value);break;case"v3":i.uniforms[s].value=new se().fromArray(o.value);break;case"v4":i.uniforms[s].value=new hi().fromArray(o.value);break;case"m3":i.uniforms[s].value=new xn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new fn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ft().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ft().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Kb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:DI,SpriteMaterial:JE,RawShaderMaterial:cA,ShaderMaterial:ca,PointsMaterial:eA,MeshPhysicalMaterial:PI,MeshStandardMaterial:uA,MeshPhongMaterial:LI,MeshToonMaterial:UI,MeshNormalMaterial:II,MeshLambertMaterial:OI,MeshDepthMaterial:Xb,MeshDistanceMaterial:Yb,MeshBasicMaterial:Ac,MeshMatcapMaterial:FI,LineDashedMaterial:kI,LineBasicMaterial:ua,Material:Vs};return new t[e]}}class yw{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class vA extends _n{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class $I extends fa{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new so(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):$t(u),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(_,b){if(t[b]!==void 0)return t[b];const S=_.interleavedBuffers[b],T=s(_,S.buffer),A=am(S.type,T),D=new Db(A,S.stride);return D.uuid=S.uuid,t[b]=D,D}function s(_,b){if(n[b]!==void 0)return n[b];const S=_.arrayBuffers[b],T=new Uint32Array(S).buffer;return n[b]=T,T}const o=e.isInstancedBufferGeometry?new vA:new _n,l=e.data.index;if(l!==void 0){const _=am(l.type,l.array);o.setIndex(new _i(_,1))}const u=e.data.attributes;for(const _ in u){const b=u[_];let w;if(b.isInterleavedBufferAttribute){const S=i(e.data,b.data);w=new gd(S,b.itemSize,b.offset,b.normalized)}else{const S=am(b.type,b.array),T=b.isInstancedBufferAttribute?vd:_i;w=new T(S,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),b.usage!==void 0&&w.setUsage(b.usage),o.setAttribute(_,w)}const h=e.data.morphAttributes;if(h)for(const _ in h){const b=h[_],w=[];for(let S=0,T=b.length;S<T;S++){const A=b[S];let D;if(A.isInterleavedBufferAttribute){const N=i(e.data,A.data);D=new gd(N,A.itemSize,A.offset,A.normalized)}else{const N=am(A.type,A.array);D=new _i(N,A.itemSize,A.normalized)}A.name!==void 0&&(D.name=A.name),w.push(D)}o.morphAttributes[_]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const w=g[_];o.addGroup(w.start,w.count,w.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(o.boundingSphere=new rs().fromJSON(v)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class FG extends fa{constructor(e){super(e)}load(e,t,n,i){const s=this,o=this.path===""?yw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new so(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(g){i!==void 0&&i(g),g("ObjectLoader: Can't parse "+e+".",g.message);return}const m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),$t("ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?yw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new so(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t);let l;try{l=JSON.parse(o)}catch(h){throw new Error("ObjectLoader: Can't parse "+e+". "+h.message)}const u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,n),m=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,m),this.bindLightTargets(h),t!==void 0){let g=!1;for(const v in o)if(o[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,l,o,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new ud().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Nb().fromJSON(e[s],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new $I;for(let s=0,o=e.length;s<o;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(u);break;default:u.type in sD?l=sD[u.type].fromJSON(u,t):Bt(`ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new Kb;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const u=e[o];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),i[u.uuid]=n[u.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Tv.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function o(u){return n.manager.itemStart(u),s.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const h=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return o(m)}else return u.data?{data:am(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new qb(t);s=new wv(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,m=e.length;h<m;h++){const g=e[h],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,w=v.length;b<w;b++){const S=v[b],T=l(S);T!==null&&(T instanceof HTMLImageElement?_.push(T):_.push(new Zo(T.data,T.width,T.height)))}i[g.uuid]=new wf(_)}else{const _=l(g.url);i[g.uuid]=new wf(_)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(o){if(typeof o=="string"){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(u)}else return o.data?{data:am(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new wv(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const u=e[o],h=u.url;if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const _=h[g],b=await s(_);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new Zo(b.data,b.width,b.height)))}n[u.uuid]=new wf(m)}else{const m=await s(u.url);n[u.uuid]=new wf(m)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(Bt("ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&Bt('ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&Bt("ObjectLoader: Undefined image",l.image);const u=t[l.image],h=u.data;let m;Array.isArray(h)?(m=new Gv,h.length===6&&(m.needsUpdate=!0)):(h&&h.data?m=new Zo:m=new di,h&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=n(l.mapping,kG)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=n(l.wrap[0],fD),m.wrapT=n(l.wrap[1],fD)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=n(l.minFilter,hD)),l.magFilter!==void 0&&(m.magFilter=n(l.magFilter,hD)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),i[l.uuid]=m}return i}parseObject(e,t,n,i,s){let o;function l(v){return t[v]===void 0&&Bt("ObjectLoader: Undefined geometry",v),t[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let b=0,w=v.length;b<w;b++){const S=v[b];n[S]===void 0&&Bt("ObjectLoader: Undefined material",S),_.push(n[S])}return _}return n[v]===void 0&&Bt("ObjectLoader: Undefined material",v),n[v]}}function h(v){return i[v]===void 0&&Bt("ObjectLoader: Undefined texture",v),i[v]}let m,g;switch(e.type){case"Scene":o=new Vv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Vt(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Rb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Cb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ar(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Sc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new KI(e.color,e.intensity);break;case"DirectionalLight":o=new ZI(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new qI(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new QI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new YI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new XI(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new gA().fromArray(e.sh);o=new JI(v,e.intensity);break;case"SkinnedMesh":m=l(e.geometry),g=u(e.material),o=new hI(m,g),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=l(e.geometry),g=u(e.material),o=new Pi(m,g);break;case"InstancedMesh":m=l(e.geometry),g=u(e.material);const _=e.count,b=e.instanceMatrix,w=e.instanceColor;o=new dI(m,g,_),o.instanceMatrix=new vd(new Float32Array(b.array),16),w!==void 0&&(o.instanceColor=new vd(new Float32Array(w.array),w.itemSize));break;case"BatchedMesh":m=l(e.geometry),g=u(e.material),o=new pI(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(S=>{let T=null,A=null;return S.boundingBox!==void 0&&(T=new is().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(A=new rs().fromJSON(S.boundingSphere)),{...S,boundingBox:T,boundingSphere:A}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=h(e.matricesTexture.uuid),o._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new rs().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new is().fromJSON(e.boundingBox));break;case"LOD":o=new fI;break;case"Line":o=new Ff(l(e.geometry),u(e.material));break;case"LineLoop":o=new mI(l(e.geometry),u(e.material));break;case"LineSegments":o=new Cc(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new gI(l(e.geometry),u(e.material));break;case"Sprite":o=new uI(u(e.material));break;case"Group":o=new om;break;case"Bone":o=new $E;break;default:o=new ei}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.pivot!==void 0&&(o.pivot=new se().fromArray(e.pivot)),e.morphTargetDictionary!==void 0&&(o.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),e.morphTargetInfluences!==void 0&&(o.morphTargetInfluences=e.morphTargetInfluences.slice()),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.static!==void 0&&(o.static=e.static),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let _=0;_<v.length;_++)o.add(this.parseObject(v[_],t,n,i,s))}if(e.animations!==void 0){const v=e.animations;for(let _=0;_<v.length;_++){const b=v[_];o.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const v=e.levels;for(let _=0;_<v.length;_++){const b=v[_],w=o.getObjectByProperty("uuid",b.object);w!==void 0&&o.addLevel(w,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?Bt("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new ei}})}}const kG={UVMapping:Uf,CubeReflectionMapping:El,CubeRefractionMapping:If,EquirectangularReflectionMapping:dm,EquirectangularRefractionMapping:z0,CubeUVReflectionMapping:Im},fD={RepeatWrapping:dd,ClampToEdgeWrapping:vr,MirroredRepeatWrapping:fv},hD={NearestFilter:Cr,NearestMipmapNearestFilter:GE,NearestMipmapLinearFilter:sm,LinearFilter:Gn,LinearMipmapNearestFilter:V0,LinearMipmapLinearFilter:xc},WM=new WeakMap;class BG extends fa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Bt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Bt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_c.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=>{if(WM.has(o)===!0)i&&i(WM.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(h),s.manager.itemEnd(e),h});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,l.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const u=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return _c.add(`image-bitmap:${e}`,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){i&&i(h),WM.set(u,h),_c.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});_c.add(`image-bitmap:${e}`,u),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let m_;class yA{static getContext(){return m_===void 0&&(m_=new(window.AudioContext||window.webkitAudioContext)),m_}static setContext(e){m_=e}}class zG extends fa{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new so(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);yA.getContext().decodeAudioData(h,function(g){t(g)}).catch(l)}catch(h){l(h)}},n,i);function l(u){i?i(u):$t(u),s.manager.itemError(e)}}}const dD=new fn,pD=new fn,Lh=new fn;class VG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ar,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ar,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Lh.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(cd*t.fov*.5)/t.zoom;let l,u;pD.elements[12]=-i,dD.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,Lh.elements[0]=2*t.near/(u-l),Lh.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Lh),l=-o*t.aspect-s,u=o*t.aspect-s,Lh.elements[0]=2*t.near/(u-l),Lh.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Lh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dD)}}const Gp=-90,Hp=1;class eO extends ei{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ar(Gp,Hp,e,t);i.layers=this.layers,this.add(i);const s=new Ar(Gp,Hp,e,t);s.layers=this.layers,this.add(s);const o=new Ar(Gp,Hp,e,t);o.layers=this.layers,this.add(o);const l=new Ar(Gp,Hp,e,t);l.layers=this.layers,this.add(l);const u=new Ar(Gp,Hp,e,t);u.layers=this.layers,this.add(u);const h=new Ar(Gp,Hp,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,o,l,u]=t;for(const h of t)this.remove(h);if(e===no)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===md)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,h,m]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1;let S=!1;e.isWebGLRenderer===!0?S=e.state.buffers.depth.getReversed():S=e.reversedDepthBuffer,e.setRenderTarget(n,0,i),S&&e.autoClear===!1&&e.clearDepth(),e.render(t,s),e.setRenderTarget(n,1,i),S&&e.autoClear===!1&&e.clearDepth(),e.render(t,o),e.setRenderTarget(n,2,i),S&&e.autoClear===!1&&e.clearDepth(),e.render(t,l),e.setRenderTarget(n,3,i),S&&e.autoClear===!1&&e.clearDepth(),e.render(t,u),e.setRenderTarget(n,4,i),S&&e.autoClear===!1&&e.clearDepth(),e.render(t,h),n.texture.generateMipmaps=w,e.setRenderTarget(n,5,i),S&&e.autoClear===!1&&e.clearDepth(),e.render(t,m),e.setRenderTarget(g,v,_),e.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class tO extends Ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class nO{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=GG.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function GG(){this._document.hidden===!1&&this.reset()}const Uh=new se,XM=new bs,HG=new se,Ih=new se,Oh=new se;class jG extends ei{constructor(){super(),this.type="AudioListener",this.context=yA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._timer=new nO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this._timer.update();const t=this.context.listener;if(this.timeDelta=this._timer.getDelta(),this.matrixWorld.decompose(Uh,XM,HG),Ih.set(0,0,-1).applyQuaternion(XM),Oh.set(0,1,0).applyQuaternion(XM),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Uh.x,n),t.positionY.linearRampToValueAtTime(Uh.y,n),t.positionZ.linearRampToValueAtTime(Uh.z,n),t.forwardX.linearRampToValueAtTime(Ih.x,n),t.forwardY.linearRampToValueAtTime(Ih.y,n),t.forwardZ.linearRampToValueAtTime(Ih.z,n),t.upX.linearRampToValueAtTime(Oh.x,n),t.upY.linearRampToValueAtTime(Oh.y,n),t.upZ.linearRampToValueAtTime(Oh.z,n)}else t.setPosition(Uh.x,Uh.y,Uh.z),t.setOrientation(Ih.x,Ih.y,Ih.z,Oh.x,Oh.y,Oh.z)}}class iO extends ei{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Bt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Bt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Bt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Bt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Bt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Bt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Bt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Bt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Fh=new se,mD=new bs,WG=new se,kh=new se;class XG extends iO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Fh,mD,WG),kh.set(0,0,1).applyQuaternion(mD);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Fh.x,n),t.positionY.linearRampToValueAtTime(Fh.y,n),t.positionZ.linearRampToValueAtTime(Fh.z,n),t.orientationX.linearRampToValueAtTime(kh.x,n),t.orientationY.linearRampToValueAtTime(kh.y,n),t.orientationZ.linearRampToValueAtTime(kh.z,n)}else t.setPosition(Fh.x,Fh.y,Fh.z),t.setOrientation(kh.x,kh.y,kh.z)}}class YG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class rO{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(n,i,u,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(n[u]!==n[u+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){bs.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;bs.multiplyQuaternionsFlat(e,o,e,t,e,n),bs.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*o+e[n+l]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*i}}}const xA="\\[\\]\\.:\\/",qG=new RegExp("["+xA+"]","g"),_A="[^"+xA+"]",ZG="[^"+xA.replace("\\.","")+"]",KG=/((?:WC+[\/:])*)/.source.replace("WC",_A),QG=/(WCOD+)?/.source.replace("WCOD",ZG),JG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_A),$G=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_A),eH=new RegExp("^"+KG+QG+JG+$G+"$"),tH=["material","materials","bones","map"];class nH{constructor(e,t,n){const i=n||$n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class $n{constructor(e,t,n){this.path=t,this.parsedPath=n||$n.parseTrackName(t),this.node=$n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new $n.Composite(e,t,n):new $n(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qG,"")}static parseTrackName(e){const t=eH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);tH.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=n(l.children);if(u)return u}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=$n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Bt("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){$t("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){$t("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){$t("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===h){h=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){$t("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){$t("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){$t("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){$t("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[i];if(o===void 0){const h=t.nodeName;$t("PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){$t("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){$t("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$n.Composite=nH;$n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$n.prototype.GetterByBindingType=[$n.prototype._getValue_direct,$n.prototype._getValue_array,$n.prototype._getValue_arrayElement,$n.prototype._getValue_toArray];$n.prototype.SetterByBindingTypeAndVersioning=[[$n.prototype._setValue_direct,$n.prototype._setValue_direct_setNeedsUpdate,$n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_array,$n.prototype._setValue_array_setNeedsUpdate,$n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_arrayElement,$n.prototype._setValue_arrayElement_setNeedsUpdate,$n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_fromArray,$n.prototype._setValue_fromArray_setNeedsUpdate,$n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class iH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ro(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],_=v.uuid;let b=t[_];if(b===void 0){b=u++,t[_]=b,e.push(v);for(let w=0,S=o;w!==S;++w)s[w].push(new $n(v,n[w],i[w]))}else if(b<h){l=e[b];const w=--h,S=e[w];t[S.uuid]=b,e[b]=S,t[_]=w,e[w]=v;for(let T=0,A=o;T!==A;++T){const D=s[T],N=D[w];let L=D[b];D[b]=N,L===void 0&&(L=new $n(v,n[T],i[T])),D[w]=L}}else e[b]!==l&&$t("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,m=t[h];if(m!==void 0&&m>=s){const g=s++,v=e[g];t[v.uuid]=m,e[m]=v,t[h]=g,e[g]=u;for(let _=0,b=i;_!==b;++_){const w=n[_],S=w[g],T=w[m];w[m]=S,w[g]=T}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],m=h.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<s){const v=--s,_=e[v],b=--o,w=e[b];t[_.uuid]=g,e[g]=_,t[w.uuid]=v,e[v]=w,e.pop();for(let S=0,T=i;S!==T;++S){const A=n[S],D=A[v],N=A[b];A[g]=D,A[v]=N,A.pop()}}else{const v=--o,_=e[v];v>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let b=0,w=i;b!==w;++b){const S=n[b];S[g]=S[v],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,m=this.nCachedObjects_,g=new Array(h);i=s.length,n[e]=i,o.push(e),l.push(t),s.push(g);for(let v=m,_=u.length;v!==_;++v){const b=u[v];g[v]=new $n(b,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],h=e[l];t[h]=n,o[n]=u,o.pop(),s[n]=s[l],s.pop(),i[n]=i[l],i.pop()}}}class sO{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,l=new Array(o),u={endingStart:Jh,endingEnd:Jh};for(let h=0;h!==o;++h){const m=s[h].createInterpolant(null);l[h]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=YU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,l=i/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+n,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*n;u<0||n===0?t=0:(this._startTime=null,t=n*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case YE:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(o),h[m].accumulateAdditive(l);break;case Mb:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(o),h[m].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===qU;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===XU){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=$h,i.endingEnd=$h):(e?i.endingStart=this.zeroSlopeAtStart?$h:Jh:i.endingStart=dv,t?i.endingEnd=this.zeroSlopeAtEnd?$h:Jh:i.endingEnd=dv)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=n,this}}const rH=new Float32Array(1);class sH extends Ec{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,l=e._interpolants,u=n.uuid,h=this._bindingsByRootAndName;let m=h[u];m===void 0&&(m={},h[u]=m);for(let g=0;g!==s;++g){const v=i[g],_=v.name;let b=m[_];if(b!==void 0)++b.referenceCount,o[g]=b;else{if(b=o[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,_));continue}const w=t&&t._propertyBindings[g].binding.parsedPath;b=new rO($n.create(n,_,w),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,_),o[g]=b}l[g].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],u=l.knownActions,h=u[u.length-1],m=e._byClipCacheIndex;h._byClipCacheIndex=m,u[m]=h,u.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],u.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[i],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new hA(new Float32Array(2),new Float32Array(2),1,rH),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Tv.findByName(i,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Mb),u!==void 0){const g=u.actionByRoot[s];if(g!==void 0&&g.blendMode===n)return g;h=u.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const m=new sO(this,o,t,n);return this._bindAction(m,h),this._addInactiveAction(m,l,s),m}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Tv.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(i,e,s,o);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let l=0,u=o.length;l!==u;++l){const h=o[l];this._deactivateAction(h);const m=h._cacheIndex,g=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class aH extends ZE{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Ab(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class bA{constructor(e){this.value=e}clone(){return new bA(this.value.clone===void 0?this.value:this.value.clone())}}let oH=0;class lH extends Ec{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:oH++}),this.name="",this.usage=mv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class cH extends Db{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class uH{constructor(e,t,n,i,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const gD=new fn;class SA{constructor(e,t,n=0,i=1/0){this.ray=new bd(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Em,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):$t("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return gD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gD),this}intersectObject(e,t=!0,n=[]){return xw(e,this,n,t),n.sort(vD),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)xw(e[i],this,n,t);return n.sort(vD),n}}function vD(r,e){return r.distance-e.distance}function xw(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let o=0,l=s.length;o<l;o++)xw(s[o],e,t,!0)}}class aO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1,Bt("THREE.Clock: This module has been deprecated. Please use THREE.Timer instead.")}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}class _w{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=un(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(un(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fH{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class MA{constructor(e,t,n,i){MA.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const yD=new ft;class hH{constructor(e=new ft(1/0,1/0),t=new ft(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xD=new se,g_=new se,jp=new se,Wp=new se,YM=new se,dH=new se,pH=new se;class mH{constructor(e=new se,t=new se){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){xD.subVectors(e,this.start),g_.subVectors(this.end,this.start);const n=g_.dot(g_);let s=g_.dot(xD)/n;return t&&(s=un(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=dH,n=pH){const i=10000000000000001e-32;let s,o;const l=this.start,u=e.start,h=this.end,m=e.end;jp.subVectors(h,l),Wp.subVectors(m,u),YM.subVectors(l,u);const g=jp.dot(jp),v=Wp.dot(Wp),_=Wp.dot(YM);if(g<=i&&v<=i)return t.copy(l),n.copy(u),t.sub(n),t.dot(t);if(g<=i)s=0,o=_/v,o=un(o,0,1);else{const b=jp.dot(YM);if(v<=i)o=0,s=un(-b/g,0,1);else{const w=jp.dot(Wp),S=g*v-w*w;S!==0?s=un((w*_-b*v)/S,0,1):s=0,o=(w*s+_)/v,o<0?(o=0,s=un(-b/g,0,1)):o>1&&(o=1,s=un((w-b)/g,0,1))}}return t.copy(l).addScaledVector(jp,s),n.copy(u).addScaledVector(Wp,o),t.distanceToSquared(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _D=new se;class gH extends ei{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new _n,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o<u;o++,l++){const h=o/u*Math.PI*2,m=l/u*Math.PI*2;i.push(Math.cos(h),Math.sin(h),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Wt(i,3));const s=new ua({fog:!1,toneMapped:!1});this.cone=new Cc(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_D.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_D),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gf=new se,v_=new fn,qM=new fn;class vH extends Cc{constructor(e){const t=oO(e),n=new _n,i=[],s=[];for(let h=0;h<t.length;h++){const m=t[h];m.parent&&m.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Wt(i,3)),n.setAttribute("color",new Wt(s,3));const o=new ua({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const l=new Vt(255),u=new Vt(65280);this.setColors(l,u)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");qM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(v_.multiplyMatrices(qM,l.matrixWorld),gf.setFromMatrixPosition(v_),i.setXYZ(o,gf.x,gf.y,gf.z),v_.multiplyMatrices(qM,l.parent.matrixWorld),gf.setFromMatrixPosition(v_),i.setXYZ(o+1,gf.x,gf.y,gf.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let s=0;s<i.count;s+=2)i.setXYZ(s,e.r,e.g,e.b),i.setXYZ(s+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function oO(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...oO(r.children[t]));return e}class yH extends Pi{constructor(e,t,n){const i=new Yv(t,4,2),s=new Ac({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xH=new se,bD=new Vt,SD=new Vt;class _H extends ei{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Xv(t);i.rotateY(Math.PI*.5),this.material=new Ac({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new _i(o,3)),this.add(new Pi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");bD.copy(this.light.color),SD.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?bD:SD;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(xH.setFromMatrixPosition(this.light.matrixWorld).negate())}}class bH extends Cc{constructor(e=10,t=10,n=4473924,i=8947848){n=new Vt(n),i=new Vt(i);const s=t/2,o=e/t,l=e/2,u=[],h=[];for(let v=0,_=0,b=-l;v<=t;v++,b+=o){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const w=v===s?n:i;w.toArray(h,_),_+=3,w.toArray(h,_),_+=3,w.toArray(h,_),_+=3,w.toArray(h,_),_+=3}const m=new _n;m.setAttribute("position",new Wt(u,3)),m.setAttribute("color",new Wt(h,3));const g=new ua({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class SH extends Cc{constructor(e=10,t=16,n=8,i=64,s=4473924,o=8947848){s=new Vt(s),o=new Vt(o);const l=[],u=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),_=Math.sin(v)*e,b=Math.cos(v)*e;l.push(0,0,0),l.push(_,0,b);const w=g&1?s:o;u.push(w.r,w.g,w.b),u.push(w.r,w.g,w.b)}for(let g=0;g<n;g++){const v=g&1?s:o,_=e-e/n*g;for(let b=0;b<i;b++){let w=b/i*(Math.PI*2),S=Math.sin(w)*_,T=Math.cos(w)*_;l.push(S,0,T),u.push(v.r,v.g,v.b),w=(b+1)/i*(Math.PI*2),S=Math.sin(w)*_,T=Math.cos(w)*_,l.push(S,0,T),u.push(v.r,v.g,v.b)}}const h=new _n;h.setAttribute("position",new Wt(l,3)),h.setAttribute("color",new Wt(u,3));const m=new ua({vertexColors:!0,toneMapped:!1});super(h,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const MD=new se,y_=new se,TD=new se;class MH extends ei{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new _n;i.setAttribute("position",new Wt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ua({fog:!1,toneMapped:!1});this.lightPlane=new Ff(i,s),this.add(this.lightPlane),i=new _n,i.setAttribute("position",new Wt([0,0,0,0,0,1],3)),this.targetLine=new Ff(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),MD.setFromMatrixPosition(this.light.matrixWorld),y_.setFromMatrixPosition(this.light.target.matrixWorld),TD.subVectors(y_,MD),this.lightPlane.lookAt(y_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(y_),this.targetLine.scale.z=TD.length()}}const x_=new se,pr=new Zb;class TH extends Cc{constructor(e){const t=new _n,n=new ua({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,w){u(b),u(w)}function u(b){i.push(0,0,0),s.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(i.length/3-1)}t.setAttribute("position",new Wt(i,3)),t.setAttribute("color",new Wt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new Vt(16755200),m=new Vt(16711680),g=new Vt(43775),v=new Vt(16777215),_=new Vt(3355443);this.setColors(h,m,g,v,_)}setColors(e,t,n,i,s){const l=this.geometry.getAttribute("color");return l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;let s,o;if(pr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===no)s=-1,o=1;else if(this.camera.coordinateSystem===md)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);wr("c",t,e,pr,0,0,s),wr("t",t,e,pr,0,0,o),wr("n1",t,e,pr,-n,-i,s),wr("n2",t,e,pr,n,-i,s),wr("n3",t,e,pr,-n,i,s),wr("n4",t,e,pr,n,i,s),wr("f1",t,e,pr,-n,-i,o),wr("f2",t,e,pr,n,-i,o),wr("f3",t,e,pr,-n,i,o),wr("f4",t,e,pr,n,i,o),wr("u1",t,e,pr,n*.7,i*1.1,s),wr("u2",t,e,pr,-n*.7,i*1.1,s),wr("u3",t,e,pr,0,i*2,s),wr("cf1",t,e,pr,-n,0,o),wr("cf2",t,e,pr,n,0,o),wr("cf3",t,e,pr,0,-i,o),wr("cf4",t,e,pr,0,i,o),wr("cn1",t,e,pr,-n,0,s),wr("cn2",t,e,pr,n,0,s),wr("cn3",t,e,pr,0,-i,s),wr("cn4",t,e,pr,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wr(r,e,t,n,i,s,o){x_.set(i,s,o).unproject(n);const l=e[r];if(l!==void 0){const u=t.getAttribute("position");for(let h=0,m=l.length;h<m;h++)u.setXYZ(l[h],x_.x,x_.y,x_.z)}}const __=new is;class wH extends Cc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new _n;s.setIndex(new _i(n,1)),s.setAttribute("position",new _i(i,3)),super(s,new ua({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&__.setFromObject(this.object),__.isEmpty())return;const e=__.min,t=__.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class EH extends Cc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new _n;s.setIndex(new _i(n,1)),s.setAttribute("position",new Wt(i,3)),super(s,new ua({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class AH extends Ff{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new _n;o.setAttribute("position",new Wt(s,3)),o.computeBoundingSphere(),super(o,new ua({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new _n;u.setAttribute("position",new Wt(l,3)),u.computeBoundingSphere(),this.add(new Pi(u,new Ac({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wD=new se;let b_,ZM;class CH extends ei{constructor(e=new se(0,0,1),t=new se(0,0,0),n=1,i=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",b_===void 0&&(b_=new _n,b_.setAttribute("position",new Wt([0,0,0,0,1,0],3)),ZM=new jv(.5,1,5,1),ZM.translate(0,-.5,0)),this.position.copy(t),this.line=new Ff(b_,new ua({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(ZM,new Ac({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{wD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(wD,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class RH extends Cc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new _n;i.setAttribute("position",new Wt(t,3)),i.setAttribute("color",new Wt(n,3));const s=new ua({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new Vt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class DH{constructor(){this.type="ShapePath",this.color=new Vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new rb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,o){return this.currentPath.bezierCurveTo(e,t,n,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const A=[];for(let D=0,N=T.length;D<N;D++){const L=T[D],I=new ud;I.curves=L.curves,A.push(I)}return A}function n(T,A){const D=A.length;let N=!1;for(let L=D-1,I=0;I<D;L=I++){let k=A[L],R=A[I],U=R.x-k.x,H=R.y-k.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(k=A[I],U=-U,R=A[L],H=-H),T.y<k.y||T.y>R.y)continue;if(T.y===k.y){if(T.x===k.x)return!0}else{const Y=H*(T.x-k.x)-U*(T.y-k.y);if(Y===0)return!0;if(Y<0)continue;N=!N}}else{if(T.y!==k.y)continue;if(R.x<=T.x&&T.x<=k.x||k.x<=T.x&&T.x<=R.x)return!0}}return N}const i=Sl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,u;const h=[];if(s.length===1)return l=s[0],u=new ud,u.curves=l.curves,h.push(u),h;let m=!i(s[0].getPoints());m=e?!m:m;const g=[],v=[];let _=[],b=0,w;v[b]=void 0,_[b]=[];for(let T=0,A=s.length;T<A;T++)l=s[T],w=l.getPoints(),o=i(w),o=e?!o:o,o?(!m&&v[b]&&b++,v[b]={s:new ud,p:w},v[b].s.curves=l.curves,m&&b++,_[b]=[]):_[b].push({h:l,p:w[0]});if(!v[0])return t(s);if(v.length>1){let T=!1,A=0;for(let D=0,N=v.length;D<N;D++)g[D]=[];for(let D=0,N=v.length;D<N;D++){const L=_[D];for(let I=0;I<L.length;I++){const k=L[I];let R=!0;for(let U=0;U<v.length;U++)n(k.p,v[U].p)&&(D!==U&&A++,R?(R=!1,g[U].push(k)):T=!0);R&&g[D].push(k)}}A>0&&T===!1&&(_=g)}let S;for(let T=0,A=v.length;T<A;T++){u=v[T].s,h.push(u),S=_[T];for(let D=0,N=S.length;D<N;D++)u.holes.push(S[D].h)}return h}}class NH extends Ec{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Bt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function PH(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function LH(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function UH(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function bw(r,e,t,n){const i=IH(n);switch(t){case WE:return r*e;case Bv:return r*e/i.components*i.byteLength;case zv:return r*e/i.components*i.byteLength;case pd:return r*e*2/i.components*i.byteLength;case bb:return r*e*2/i.components*i.byteLength;case XE:return r*e*3/i.components*i.byteLength;case Rr:return r*e*4/i.components*i.byteLength;case Sb:return r*e*4/i.components*i.byteLength;case G0:case H0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case j0:case W0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case M1:case w1:return Math.max(r,16)*Math.max(e,8)/4;case S1:case T1:return Math.max(r,8)*Math.max(e,8)/2;case E1:case A1:case R1:case D1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case C1:case N1:case P1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case L1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case U1:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case I1:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case O1:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case F1:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case k1:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case B1:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case z1:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case V1:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case G1:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case H1:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case j1:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case W1:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case X1:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case Y1:case q1:case Z1:return Math.ceil(r/4)*Math.ceil(e/4)*16;case K1:case Q1:return Math.ceil(r/4)*Math.ceil(e/4)*8;case J1:case $1:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function IH(r){switch(r){case ns:case vb:return{byteLength:1,components:1};case Mm:case yb:case yr:return{byteLength:2,components:1};case xb:case _b:return{byteLength:2,components:4};case lo:case kv:case qi:return{byteLength:4,components:1};case HE:case jE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class OH{static contain(e,t){return PH(e,t)}static cover(e,t){return LH(e,t)}static fill(e){return UH(e)}static getByteLength(e,t,n,i){return bw(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Iv}}));typeof window<"u"&&(window.__THREE__?Bt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Iv);function lO(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function FH(r){const e=new WeakMap;function t(l,u){const h=l.array,m=l.usage,g=h.byteLength,v=r.createBuffer();r.bindBuffer(u,v),r.bufferData(u,h,m),l.onUploadCallback();let _;if(h instanceof Float32Array)_=r.FLOAT;else if(typeof Float16Array<"u"&&h instanceof Float16Array)_=r.HALF_FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?_=r.HALF_FLOAT:_=r.UNSIGNED_SHORT;else if(h instanceof Int16Array)_=r.SHORT;else if(h instanceof Uint32Array)_=r.UNSIGNED_INT;else if(h instanceof Int32Array)_=r.INT;else if(h instanceof Int8Array)_=r.BYTE;else if(h instanceof Uint8Array)_=r.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)_=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:_,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,u,h){const m=u.array,g=u.updateRanges;if(r.bindBuffer(h,l),g.length===0)r.bufferSubData(h,0,m);else{g.sort((_,b)=>_.start-b.start);let v=0;for(let _=1;_<g.length;_++){const b=g[v],w=g[_];w.start<=b.start+b.count+1?b.count=Math.max(b.count,w.start+w.count-b.start):(++v,g[v]=w)}g.length=v+1;for(let _=0,b=g.length;_<b;_++){const w=g[_];r.bufferSubData(h,w.start*m.BYTES_PER_ELEMENT,m,w.start,w.count)}u.clearUpdateRanges()}u.onUploadCallback()}function i(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(r.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=e.get(l);(!m||m.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,l,u),h.version=l.version}}return{get:i,remove:s,update:o}}var kH=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,BH=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,VH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,GH=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,HH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,WH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,XH=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec4 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 );
	}
#endif`,YH=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qH=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,KH=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,QH=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,JH=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$H=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,e9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,t9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,n9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,i9=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#endif`,r9=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#endif`,s9=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec4 vColor;
#endif`,a9=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec4( 1.0 );
#endif
#ifdef USE_COLOR_ALPHA
	vColor *= color;
#elif defined( USE_COLOR )
	vColor.rgb *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.rgb *= instanceColor.rgb;
#endif
#ifdef USE_BATCHING_COLOR
	vColor *= getBatchingColor( getIndirectIndex( gl_DrawID ) );
#endif`,o9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,l9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,c9=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,u9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,f9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,h9=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,d9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,p9="gl_FragColor = linearToOutputTexel( gl_FragColor );",m9=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,g9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		#ifdef ENVMAP_BLENDING_MULTIPLY
			outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
		#elif defined( ENVMAP_BLENDING_MIX )
			outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
		#elif defined( ENVMAP_BLENDING_ADD )
			outgoingLight += envColor.xyz * specularStrength * reflectivity;
		#endif
	#endif
#endif`,v9=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,y9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,x9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,b9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,S9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,M9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,T9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,w9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,E9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,A9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,C9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,R9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,D9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,N9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,P9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,L9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,U9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,I9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,O9=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( material.specularF90 - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
		#ifdef USE_CLEARCOAT
			vec3 Ncc = geometryClearcoatNormal;
			vec2 uvClearcoat = LTC_Uv( Ncc, viewDir, material.clearcoatRoughness );
			vec4 t1Clearcoat = texture2D( ltc_1, uvClearcoat );
			vec4 t2Clearcoat = texture2D( ltc_2, uvClearcoat );
			mat3 mInvClearcoat = mat3(
				vec3( t1Clearcoat.x, 0, t1Clearcoat.y ),
				vec3(             0, 1,             0 ),
				vec3( t1Clearcoat.z, 0, t1Clearcoat.w )
			);
			vec3 fresnelClearcoat = material.clearcoatF0 * t2Clearcoat.x + ( material.clearcoatF90 - material.clearcoatF0 ) * t2Clearcoat.y;
			clearcoatSpecularDirect += lightColor * fresnelClearcoat * LTC_Evaluate( Ncc, viewDir, position, mInvClearcoat, rectCoords );
		#endif
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,F9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,k9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( ENVMAP_TYPE_CUBE_UV )
		#if defined( STANDARD ) || defined( LAMBERT ) || defined( PHONG )
			iblIrradiance += getIBLIrradiance( geometryNormal );
		#endif
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,B9=`#if defined( RE_IndirectDiffuse )
	#if defined( LAMBERT ) || defined( PHONG )
		irradiance += iblIrradiance;
	#endif
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,z9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,V9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,G9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,H9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,j9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,W9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,X9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Y9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,q9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Z9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,K9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Q9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,J9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,e7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,t7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,n7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,i7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,r7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,s7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,a7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,o7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,l7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,c7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,u7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,f7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,h7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	#ifdef USE_REVERSED_DEPTH_BUFFER
	
		return depth * ( far - near ) - far;
	#else
		return depth * ( near - far ) - near;
	#endif
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	
	#ifdef USE_REVERSED_DEPTH_BUFFER
		return ( near * far ) / ( ( near - far ) * depth - near );
	#else
		return ( near * far ) / ( ( far - near ) * depth - far );
	#endif
}`,d7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,p7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,m7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,g7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,v7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,y7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,x7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * PI2;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadowCoord.z -= shadowBias;
			#else
				shadowCoord.z += shadowBias;
			#endif
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadowCoord.z -= shadowBias;
			#else
				shadowCoord.z += shadowBias;
			#endif
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			#ifdef USE_REVERSED_DEPTH_BUFFER
				float dp = ( shadowCameraNear * ( shadowCameraFar - viewSpaceZ ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
				dp -= shadowBias;
			#else
				float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
				dp += shadowBias;
			#endif
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * PI2;
			vec2 sample0 = vogelDiskSample( 0, 5, phi );
			vec2 sample1 = vogelDiskSample( 1, 5, phi );
			vec2 sample2 = vogelDiskSample( 2, 5, phi );
			vec2 sample3 = vogelDiskSample( 3, 5, phi );
			vec2 sample4 = vogelDiskSample( 4, 5, phi );
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * sample0.x + bitangent * sample0.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample1.x + bitangent * sample1.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample2.x + bitangent * sample2.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample3.x + bitangent * sample3.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample4.x + bitangent * sample4.y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				depth = 1.0 - depth;
			#endif
			shadow = step( dp, depth );
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,_7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,b7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,S7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,M7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,T7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,w7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,E7=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,A7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,C7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,D7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,N7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,P7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,L7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,U7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,I7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,O7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const F7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,k7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,z7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,j7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,W7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,X7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,Y7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,q7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,K7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,J7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ej=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,nj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ij=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,rj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sj=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aj=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oj=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,lj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,hj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dj=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,En={alphahash_fragment:kH,alphahash_pars_fragment:BH,alphamap_fragment:zH,alphamap_pars_fragment:VH,alphatest_fragment:GH,alphatest_pars_fragment:HH,aomap_fragment:jH,aomap_pars_fragment:WH,batching_pars_vertex:XH,batching_vertex:YH,begin_vertex:qH,beginnormal_vertex:ZH,bsdfs:KH,iridescence_fragment:QH,bumpmap_pars_fragment:JH,clipping_planes_fragment:$H,clipping_planes_pars_fragment:e9,clipping_planes_pars_vertex:t9,clipping_planes_vertex:n9,color_fragment:i9,color_pars_fragment:r9,color_pars_vertex:s9,color_vertex:a9,common:o9,cube_uv_reflection_fragment:l9,defaultnormal_vertex:c9,displacementmap_pars_vertex:u9,displacementmap_vertex:f9,emissivemap_fragment:h9,emissivemap_pars_fragment:d9,colorspace_fragment:p9,colorspace_pars_fragment:m9,envmap_fragment:g9,envmap_common_pars_fragment:v9,envmap_pars_fragment:y9,envmap_pars_vertex:x9,envmap_physical_pars_fragment:D9,envmap_vertex:_9,fog_vertex:b9,fog_pars_vertex:S9,fog_fragment:M9,fog_pars_fragment:T9,gradientmap_pars_fragment:w9,lightmap_pars_fragment:E9,lights_lambert_fragment:A9,lights_lambert_pars_fragment:C9,lights_pars_begin:R9,lights_toon_fragment:N9,lights_toon_pars_fragment:P9,lights_phong_fragment:L9,lights_phong_pars_fragment:U9,lights_physical_fragment:I9,lights_physical_pars_fragment:O9,lights_fragment_begin:F9,lights_fragment_maps:k9,lights_fragment_end:B9,logdepthbuf_fragment:z9,logdepthbuf_pars_fragment:V9,logdepthbuf_pars_vertex:G9,logdepthbuf_vertex:H9,map_fragment:j9,map_pars_fragment:W9,map_particle_fragment:X9,map_particle_pars_fragment:Y9,metalnessmap_fragment:q9,metalnessmap_pars_fragment:Z9,morphinstance_vertex:K9,morphcolor_vertex:Q9,morphnormal_vertex:J9,morphtarget_pars_vertex:$9,morphtarget_vertex:e7,normal_fragment_begin:t7,normal_fragment_maps:n7,normal_pars_fragment:i7,normal_pars_vertex:r7,normal_vertex:s7,normalmap_pars_fragment:a7,clearcoat_normal_fragment_begin:o7,clearcoat_normal_fragment_maps:l7,clearcoat_pars_fragment:c7,iridescence_pars_fragment:u7,opaque_fragment:f7,packing:h7,premultiplied_alpha_fragment:d7,project_vertex:p7,dithering_fragment:m7,dithering_pars_fragment:g7,roughnessmap_fragment:v7,roughnessmap_pars_fragment:y7,shadowmap_pars_fragment:x7,shadowmap_pars_vertex:_7,shadowmap_vertex:b7,shadowmask_pars_fragment:S7,skinbase_vertex:M7,skinning_pars_vertex:T7,skinning_vertex:w7,skinnormal_vertex:E7,specularmap_fragment:A7,specularmap_pars_fragment:C7,tonemapping_fragment:R7,tonemapping_pars_fragment:D7,transmission_fragment:N7,transmission_pars_fragment:P7,uv_pars_fragment:L7,uv_pars_vertex:U7,uv_vertex:I7,worldpos_vertex:O7,background_vert:F7,background_frag:k7,backgroundCube_vert:B7,backgroundCube_frag:z7,cube_vert:V7,cube_frag:G7,depth_vert:H7,depth_frag:j7,distance_vert:W7,distance_frag:X7,equirect_vert:Y7,equirect_frag:q7,linedashed_vert:Z7,linedashed_frag:K7,meshbasic_vert:Q7,meshbasic_frag:J7,meshlambert_vert:$7,meshlambert_frag:ej,meshmatcap_vert:tj,meshmatcap_frag:nj,meshnormal_vert:ij,meshnormal_frag:rj,meshphong_vert:sj,meshphong_frag:aj,meshphysical_vert:oj,meshphysical_frag:lj,meshtoon_vert:cj,meshtoon_frag:uj,points_vert:fj,points_frag:hj,shadow_vert:dj,shadow_frag:pj,sprite_vert:mj,sprite_frag:gj},zt={common:{diffuse:{value:new Vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},envMapRotation:{value:new xn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new Vt(16777215)},opacity:{value:1},center:{value:new ft(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},bl={basic:{uniforms:na([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.fog]),vertexShader:En.meshbasic_vert,fragmentShader:En.meshbasic_frag},lambert:{uniforms:na([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Vt(0)},envMapIntensity:{value:1}}]),vertexShader:En.meshlambert_vert,fragmentShader:En.meshlambert_frag},phong:{uniforms:na([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Vt(0)},specular:{value:new Vt(1118481)},shininess:{value:30},envMapIntensity:{value:1}}]),vertexShader:En.meshphong_vert,fragmentShader:En.meshphong_frag},standard:{uniforms:na([zt.common,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new Vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag},toon:{uniforms:na([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new Vt(0)}}]),vertexShader:En.meshtoon_vert,fragmentShader:En.meshtoon_frag},matcap:{uniforms:na([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,{matcap:{value:null}}]),vertexShader:En.meshmatcap_vert,fragmentShader:En.meshmatcap_frag},points:{uniforms:na([zt.points,zt.fog]),vertexShader:En.points_vert,fragmentShader:En.points_frag},dashed:{uniforms:na([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:En.linedashed_vert,fragmentShader:En.linedashed_frag},depth:{uniforms:na([zt.common,zt.displacementmap]),vertexShader:En.depth_vert,fragmentShader:En.depth_frag},normal:{uniforms:na([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:En.meshnormal_vert,fragmentShader:En.meshnormal_frag},sprite:{uniforms:na([zt.sprite,zt.fog]),vertexShader:En.sprite_vert,fragmentShader:En.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:En.background_vert,fragmentShader:En.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xn}},vertexShader:En.backgroundCube_vert,fragmentShader:En.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:En.cube_vert,fragmentShader:En.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:En.equirect_vert,fragmentShader:En.equirect_frag},distance:{uniforms:na([zt.common,zt.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:En.distance_vert,fragmentShader:En.distance_frag},shadow:{uniforms:na([zt.lights,zt.fog,{color:{value:new Vt(0)},opacity:{value:1}}]),vertexShader:En.shadow_vert,fragmentShader:En.shadow_frag}};bl.physical={uniforms:na([bl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new ft(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new Vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new Vt(0)},specularColor:{value:new Vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new ft},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag};const S_={r:0,b:0,g:0},Bh=new co,vj=new fn;function yj(r,e,t,n,i,s){const o=new Vt(0);let l=i===!0?0:1,u,h,m=null,g=0,v=null;function _(A){let D=A.isScene===!0?A.background:null;if(D&&D.isTexture){const N=A.backgroundBlurriness>0;D=e.get(D,N)}return D}function b(A){let D=!1;const N=_(A);N===null?S(o,l):N&&N.isColor&&(S(N,1),D=!0);const L=r.xr.getEnvironmentBlendMode();L==="additive"?t.buffers.color.setClear(0,0,0,1,s):L==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,s),(r.autoClear||D)&&(t.buffers.depth.setTest(!0),t.buffers.depth.setMask(!0),t.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function w(A,D){const N=_(D);N&&(N.isCubeTexture||N.mapping===Im)?(h===void 0&&(h=new Pi(new Sd(1,1,1),new ca({name:"BackgroundCubeMaterial",uniforms:Rm(bl.backgroundCube.uniforms),vertexShader:bl.backgroundCube.vertexShader,fragmentShader:bl.backgroundCube.fragmentShader,side:zs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(L,I,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),Bh.copy(D.backgroundRotation),Bh.x*=-1,Bh.y*=-1,Bh.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Bh.y*=-1,Bh.z*=-1),h.material.uniforms.envMap.value=N,h.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(vj.makeRotationFromEuler(Bh)),h.material.toneMapped=Wn.getTransfer(N.colorSpace)!==ui,(m!==N||g!==N.version||v!==r.toneMapping)&&(h.material.needsUpdate=!0,m=N,g=N.version,v=r.toneMapping),h.layers.enableAll(),A.unshift(h,h.geometry,h.material,0,0,null)):N&&N.isTexture&&(u===void 0&&(u=new Pi(new Rl(2,2),new ca({name:"BackgroundMaterial",uniforms:Rm(bl.background.uniforms),vertexShader:bl.background.vertexShader,fragmentShader:bl.background.fragmentShader,side:Mu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(u)),u.material.uniforms.t2D.value=N,u.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,u.material.toneMapped=Wn.getTransfer(N.colorSpace)!==ui,N.matrixAutoUpdate===!0&&N.updateMatrix(),u.material.uniforms.uvTransform.value.copy(N.matrix),(m!==N||g!==N.version||v!==r.toneMapping)&&(u.material.needsUpdate=!0,m=N,g=N.version,v=r.toneMapping),u.layers.enableAll(),A.unshift(u,u.geometry,u.material,0,0,null))}function S(A,D){A.getRGB(S_,NI(r)),t.buffers.color.setClear(S_.r,S_.g,S_.b,D,s)}function T(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(A,D=1){o.set(A),l=D,S(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,S(o,l)},render:b,addToRenderList:w,dispose:T}}function xj(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=v(null);let s=i,o=!1;function l(Y,X,q,Q,ie){let j=!1;const J=g(Y,Q,q,X);s!==J&&(s=J,h(s.object)),j=_(Y,Q,q,ie),j&&b(Y,Q,q,ie),ie!==null&&e.update(ie,r.ELEMENT_ARRAY_BUFFER),(j||o)&&(o=!1,N(Y,X,q,Q),ie!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(ie).buffer))}function u(){return r.createVertexArray()}function h(Y){return r.bindVertexArray(Y)}function m(Y){return r.deleteVertexArray(Y)}function g(Y,X,q,Q){const ie=Q.wireframe===!0;let j=n[X.id];j===void 0&&(j={},n[X.id]=j);const J=Y.isInstancedMesh===!0?Y.id:0;let de=j[J];de===void 0&&(de={},j[J]=de);let le=de[q.id];le===void 0&&(le={},de[q.id]=le);let ce=le[ie];return ce===void 0&&(ce=v(u()),le[ie]=ce),ce}function v(Y){const X=[],q=[],Q=[];for(let ie=0;ie<t;ie++)X[ie]=0,q[ie]=0,Q[ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:q,attributeDivisors:Q,object:Y,attributes:{},index:null}}function _(Y,X,q,Q){const ie=s.attributes,j=X.attributes;let J=0;const de=q.getAttributes();for(const le in de)if(de[le].location>=0){const z=ie[le];let Z=j[le];if(Z===void 0&&(le==="instanceMatrix"&&Y.instanceMatrix&&(Z=Y.instanceMatrix),le==="instanceColor"&&Y.instanceColor&&(Z=Y.instanceColor)),z===void 0||z.attribute!==Z||Z&&z.data!==Z.data)return!0;J++}return s.attributesNum!==J||s.index!==Q}function b(Y,X,q,Q){const ie={},j=X.attributes;let J=0;const de=q.getAttributes();for(const le in de)if(de[le].location>=0){let z=j[le];z===void 0&&(le==="instanceMatrix"&&Y.instanceMatrix&&(z=Y.instanceMatrix),le==="instanceColor"&&Y.instanceColor&&(z=Y.instanceColor));const Z={};Z.attribute=z,z&&z.data&&(Z.data=z.data),ie[le]=Z,J++}s.attributes=ie,s.attributesNum=J,s.index=Q}function w(){const Y=s.newAttributes;for(let X=0,q=Y.length;X<q;X++)Y[X]=0}function S(Y){T(Y,0)}function T(Y,X){const q=s.newAttributes,Q=s.enabledAttributes,ie=s.attributeDivisors;q[Y]=1,Q[Y]===0&&(r.enableVertexAttribArray(Y),Q[Y]=1),ie[Y]!==X&&(r.vertexAttribDivisor(Y,X),ie[Y]=X)}function A(){const Y=s.newAttributes,X=s.enabledAttributes;for(let q=0,Q=X.length;q<Q;q++)X[q]!==Y[q]&&(r.disableVertexAttribArray(q),X[q]=0)}function D(Y,X,q,Q,ie,j,J){J===!0?r.vertexAttribIPointer(Y,X,q,ie,j):r.vertexAttribPointer(Y,X,q,Q,ie,j)}function N(Y,X,q,Q){w();const ie=Q.attributes,j=q.getAttributes(),J=X.defaultAttributeValues;for(const de in j){const le=j[de];if(le.location>=0){let ce=ie[de];if(ce===void 0&&(de==="instanceMatrix"&&Y.instanceMatrix&&(ce=Y.instanceMatrix),de==="instanceColor"&&Y.instanceColor&&(ce=Y.instanceColor)),ce!==void 0){const z=ce.normalized,Z=ce.itemSize,ae=e.get(ce);if(ae===void 0)continue;const fe=ae.buffer,ve=ae.type,re=ae.bytesPerElement,pe=ve===r.INT||ve===r.UNSIGNED_INT||ce.gpuType===kv;if(ce.isInterleavedBufferAttribute){const Se=ce.data,je=Se.stride,ct=ce.offset;if(Se.isInstancedInterleavedBuffer){for(let Je=0;Je<le.locationSize;Je++)T(le.location+Je,Se.meshPerAttribute);Y.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let Je=0;Je<le.locationSize;Je++)S(le.location+Je);r.bindBuffer(r.ARRAY_BUFFER,fe);for(let Je=0;Je<le.locationSize;Je++)D(le.location+Je,Z/le.locationSize,ve,z,je*re,(ct+Z/le.locationSize*Je)*re,pe)}else{if(ce.isInstancedBufferAttribute){for(let Se=0;Se<le.locationSize;Se++)T(le.location+Se,ce.meshPerAttribute);Y.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Se=0;Se<le.locationSize;Se++)S(le.location+Se);r.bindBuffer(r.ARRAY_BUFFER,fe);for(let Se=0;Se<le.locationSize;Se++)D(le.location+Se,Z/le.locationSize,ve,z,Z*re,Z/le.locationSize*Se*re,pe)}}else if(J!==void 0){const z=J[de];if(z!==void 0)switch(z.length){case 2:r.vertexAttrib2fv(le.location,z);break;case 3:r.vertexAttrib3fv(le.location,z);break;case 4:r.vertexAttrib4fv(le.location,z);break;default:r.vertexAttrib1fv(le.location,z)}}}}A()}function L(){U();for(const Y in n){const X=n[Y];for(const q in X){const Q=X[q];for(const ie in Q){const j=Q[ie];for(const J in j)m(j[J].object),delete j[J];delete Q[ie]}}delete n[Y]}}function I(Y){if(n[Y.id]===void 0)return;const X=n[Y.id];for(const q in X){const Q=X[q];for(const ie in Q){const j=Q[ie];for(const J in j)m(j[J].object),delete j[J];delete Q[ie]}}delete n[Y.id]}function k(Y){for(const X in n){const q=n[X];for(const Q in q){const ie=q[Q];if(ie[Y.id]===void 0)continue;const j=ie[Y.id];for(const J in j)m(j[J].object),delete j[J];delete ie[Y.id]}}}function R(Y){for(const X in n){const q=n[X],Q=Y.isInstancedMesh===!0?Y.id:0,ie=q[Q];if(ie!==void 0){for(const j in ie){const J=ie[j];for(const de in J)m(J[de].object),delete J[de];delete ie[j]}delete q[Q],Object.keys(q).length===0&&delete n[X]}}}function U(){H(),o=!0,s!==i&&(s=i,h(s.object))}function H(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:l,reset:U,resetDefaultState:H,dispose:L,releaseStatesOfGeometry:I,releaseStatesOfObject:R,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:S,disableUnusedAttributes:A}}function _j(r,e,t){let n;function i(h){n=h}function s(h,m){r.drawArrays(n,h,m),t.update(m,n,1)}function o(h,m,g){g!==0&&(r.drawArraysInstanced(n,h,m,g),t.update(m,n,g))}function l(h,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,m,0,g);let _=0;for(let b=0;b<g;b++)_+=m[b];t.update(_,n,1)}function u(h,m,g,v){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<h.length;b++)o(h[b],m[b],v[b]);else{_.multiDrawArraysInstancedWEBGL(n,h,0,m,0,v,0,g);let b=0;for(let w=0;w<g;w++)b+=m[w]*v[w];t.update(b,n,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function bj(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(k){return!(k!==Rr&&n.convert(k)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(k){const R=k===yr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==ns&&n.convert(k)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==qi&&!R)}function u(k){if(k==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const m=u(h);m!==h&&(Bt("WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const g=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),b=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=r.getParameter(r.MAX_TEXTURE_SIZE),S=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),T=r.getParameter(r.MAX_VERTEX_ATTRIBS),A=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),D=r.getParameter(r.MAX_VARYING_VECTORS),N=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),L=r.getParameter(r.MAX_SAMPLES),I=r.getParameter(r.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:g,reversedDepthBuffer:v,maxTextures:_,maxVertexTextures:b,maxTextureSize:w,maxCubemapSize:S,maxAttributes:T,maxVertexUniforms:A,maxVaryings:D,maxFragmentUniforms:N,maxSamples:L,samples:I}}function Sj(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new gu,l=new xn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||n!==0||i;return i=v,n=g.length,_},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,v){t=m(g,v,0)},this.setState=function(g,v,_){const b=g.clippingPlanes,w=g.clipIntersection,S=g.clipShadows,T=r.get(g);if(!i||b===null||b.length===0||s&&!S)s?m(null):h();else{const A=s?0:n,D=A*4;let N=T.clippingState||null;u.value=N,N=m(b,v,D,_);for(let L=0;L!==D;++L)N[L]=t[L];T.clippingState=N,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=A}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(g,v,_,b){const w=g!==null?g.length:0;let S=null;if(w!==0){if(S=u.value,b!==!0||S===null){const T=_+w*4,A=v.matrixWorldInverse;l.getNormalMatrix(A),(S===null||S.length<T)&&(S=new Float32Array(T));for(let D=0,N=_;D!==w;++D,N+=4)o.copy(g[D]).applyMatrix4(A,l),o.normal.toArray(S,N),S[N+3]=o.constant}u.value=S,u.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,S}}const Ef=4,ED=[.125,.215,.35,.446,.526,.582],Yh=20,Mj=256,_0=new Sc,AD=new Vt;let KM=null,QM=0,JM=0,$M=!1;const Tj=new se;class Sw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,i=100,s={}){const{size:o=256,position:l=Tj}=s;KM=this._renderer.getRenderTarget(),QM=this._renderer.getActiveCubeFace(),JM=this._renderer.getActiveMipmapLevel(),$M=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,n,i,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=DD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=RD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(KM,QM,JM),this._renderer.xr.enabled=$M,e.scissorTest=!1,Xp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===El||e.mapping===If?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KM=this._renderer.getRenderTarget(),QM=this._renderer.getActiveCubeFace(),JM=this._renderer.getActiveMipmapLevel(),$M=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Gn,minFilter:Gn,generateMipmaps:!1,type:yr,format:Rr,colorSpace:Al,depthBuffer:!1},i=CD(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=CD(e,t,n);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=wj(s)),this._blurMaterial=Aj(s,e,t),this._ggxMaterial=Ej(s,e,t)}return i}_compileMaterial(e){const t=new Pi(new _n,e);this._renderer.compile(t,_0)}_sceneToCubeUV(e,t,n,i,s){const u=new Ar(90,1,t,n),h=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(AD),g.toneMapping=qo,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(i),g.clearDepth(),g.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Pi(new Sd,new Ac({name:"PMREM.Background",side:zs,depthWrite:!1,depthTest:!1})));const w=this._backgroundBox,S=w.material;let T=!1;const A=e.background;A?A.isColor&&(S.color.copy(A),e.background=null,T=!0):(S.color.copy(AD),T=!0);for(let D=0;D<6;D++){const N=D%3;N===0?(u.up.set(0,h[D],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+m[D],s.y,s.z)):N===1?(u.up.set(0,0,h[D]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+m[D],s.z)):(u.up.set(0,h[D],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+m[D]));const L=this._cubeSize;Xp(i,N*L,D>2?L:0,L,L),g.setRenderTarget(i),T&&g.render(w,u),g.render(e,u)}g.toneMapping=_,g.autoClear=v,e.background=A}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===El||e.mapping===If;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=DD()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=RD());const s=i?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;const l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;Xp(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,_0)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=n}_applyGGXFilter(e,t,n){const i=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,l=this._lodMeshes[n];l.material=o;const u=o.uniforms,h=n/(this._lodMeshes.length-1),m=t/(this._lodMeshes.length-1),g=Math.sqrt(h*h-m*m),v=0+h*1.25,_=g*v,{_lodMax:b}=this,w=this._sizeLods[n],S=3*w*(n>b-Ef?n-b+Ef:0),T=4*(this._cubeSize-w);u.envMap.value=e.texture,u.roughness.value=_,u.mipInt.value=b-t,Xp(s,S,T,3*w,2*w),i.setRenderTarget(s),i.render(l,_0),u.envMap.value=s.texture,u.roughness.value=0,u.mipInt.value=b-n,Xp(e,S,T,3*w,2*w),i.setRenderTarget(e),i.render(l,_0)}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,l){const u=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&$t("blur direction must be either latitudinal or longitudinal!");const m=3,g=this._lodMeshes[i];g.material=h;const v=h.uniforms,_=this._sizeLods[n]-1,b=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*Yh-1),w=s/b,S=isFinite(s)?1+Math.floor(m*w):Yh;S>Yh&&Bt(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Yh}`);const T=[];let A=0;for(let k=0;k<Yh;++k){const R=k/w,U=Math.exp(-R*R/2);T.push(U),k===0?A+=U:k<S&&(A+=2*U)}for(let k=0;k<T.length;k++)T[k]=T[k]/A;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=T,v.latitudinal.value=o==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:D}=this;v.dTheta.value=b,v.mipInt.value=D-n;const N=this._sizeLods[i],L=3*N*(i>D-Ef?i-D+Ef:0),I=4*(this._cubeSize-N);Xp(t,L,I,3*N,2*N),u.setRenderTarget(t),u.render(g,_0)}}function wj(r){const e=[],t=[],n=[];let i=r;const s=r-Ef+1+ED.length;for(let o=0;o<s;o++){const l=Math.pow(2,i);e.push(l);let u=1/l;o>r-Ef?u=ED[o-r+Ef-1]:o===0&&(u=0),t.push(u);const h=1/(l-2),m=-h,g=1+h,v=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,b=6,w=3,S=2,T=1,A=new Float32Array(w*b*_),D=new Float32Array(S*b*_),N=new Float32Array(T*b*_);for(let I=0;I<_;I++){const k=I%3*2/3-1,R=I>2?0:-1,U=[k,R,0,k+2/3,R,0,k+2/3,R+1,0,k,R,0,k+2/3,R+1,0,k,R+1,0];A.set(U,w*b*I),D.set(v,S*b*I);const H=[I,I,I,I,I,I];N.set(H,T*b*I)}const L=new _n;L.setAttribute("position",new _i(A,w)),L.setAttribute("uv",new _i(D,S)),L.setAttribute("faceIndex",new _i(N,T)),n.push(new Pi(L,null)),i>Ef&&i--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function CD(r,e,t){const n=new la(r,e,t);return n.texture.mapping=Im,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Xp(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function Ej(r,e,t){return new ca({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:Mj,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Qb(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 4.1: Orthonormal basis
				vec3 T1 = vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(V, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + V.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * V;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:wl,depthTest:!1,depthWrite:!1})}function Aj(r,e,t){const n=new Float32Array(Yh),i=new se(0,1,0);return new ca({name:"SphericalGaussianBlur",defines:{n:Yh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wl,depthTest:!1,depthWrite:!1})}function RD(){return new ca({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wl,depthTest:!1,depthWrite:!1})}function DD(){return new ca({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wl,depthTest:!1,depthWrite:!1})}function Qb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}class Jb extends la{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Gv(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Sd(5,5,5),s=new ca({name:"CubemapFromEquirect",uniforms:Rm(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:zs,blending:wl});s.uniforms.tEquirect.value=t;const o=new Pi(i,s),l=t.minFilter;return t.minFilter===xc&&(t.minFilter=Gn),new eO(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}function Cj(r){let e=new WeakMap,t=new WeakMap,n=null;function i(v,_=!1){return v==null?null:_?o(v):s(v)}function s(v){if(v&&v.isTexture){const _=v.mapping;if(_===dm||_===z0)if(e.has(v)){const b=e.get(v).texture;return l(b,v.mapping)}else{const b=v.image;if(b&&b.height>0){const w=new Jb(b.height);return w.fromEquirectangularTexture(r,v),e.set(v,w),v.addEventListener("dispose",h),l(w.texture,v.mapping)}else return null}}return v}function o(v){if(v&&v.isTexture){const _=v.mapping,b=_===dm||_===z0,w=_===El||_===If;if(b||w){let S=t.get(v);const T=S!==void 0?S.texture.pmremVersion:0;if(v.isRenderTargetTexture&&v.pmremVersion!==T)return n===null&&(n=new Sw(r)),S=b?n.fromEquirectangular(v,S):n.fromCubemap(v,S),S.texture.pmremVersion=v.pmremVersion,t.set(v,S),S.texture;if(S!==void 0)return S.texture;{const A=v.image;return b&&A&&A.height>0||w&&A&&u(A)?(n===null&&(n=new Sw(r)),S=b?n.fromEquirectangular(v):n.fromCubemap(v),S.texture.pmremVersion=v.pmremVersion,t.set(v,S),v.addEventListener("dispose",m),S.texture):null}}}return v}function l(v,_){return _===dm?v.mapping=El:_===z0&&(v.mapping=If),v}function u(v){let _=0;const b=6;for(let w=0;w<b;w++)v[w]!==void 0&&_++;return _===b}function h(v){const _=v.target;_.removeEventListener("dispose",h);const b=e.get(_);b!==void 0&&(e.delete(_),b.dispose())}function m(v){const _=v.target;_.removeEventListener("dispose",m);const b=t.get(_);b!==void 0&&(t.delete(_),b.dispose())}function g(){e=new WeakMap,t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:g}}function Rj(r){const e={};function t(n){if(e[n]!==void 0)return e[n];const i=r.getExtension(n);return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&yv("WebGLRenderer: "+n+" extension not supported."),i}}}function Dj(r,e,t,n){const i={},s=new WeakMap;function o(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const b in v.attributes)e.remove(v.attributes[b]);v.removeEventListener("dispose",o),delete i[v.id];const _=s.get(v);_&&(e.remove(_),s.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return i[v.id]===!0||(v.addEventListener("dispose",o),i[v.id]=!0,t.memory.geometries++),v}function u(g){const v=g.attributes;for(const _ in v)e.update(v[_],r.ARRAY_BUFFER)}function h(g){const v=[],_=g.index,b=g.attributes.position;let w=0;if(b===void 0)return;if(_!==null){const A=_.array;w=_.version;for(let D=0,N=A.length;D<N;D+=3){const L=A[D+0],I=A[D+1],k=A[D+2];v.push(L,I,I,k,k,L)}}else{const A=b.array;w=b.version;for(let D=0,N=A.length/3-1;D<N;D+=3){const L=D+0,I=D+1,k=D+2;v.push(L,I,I,k,k,L)}}const S=new(b.count>=65535?QE:KE)(v,1);S.version=w;const T=s.get(g);T&&e.remove(T),s.set(g,S)}function m(g){const v=s.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&h(g)}else h(g);return s.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function Nj(r,e,t){let n;function i(v){n=v}let s,o;function l(v){s=v.type,o=v.bytesPerElement}function u(v,_){r.drawElements(n,_,s,v*o),t.update(_,n,1)}function h(v,_,b){b!==0&&(r.drawElementsInstanced(n,_,s,v*o,b),t.update(_,n,b))}function m(v,_,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,s,v,0,b);let S=0;for(let T=0;T<b;T++)S+=_[T];t.update(S,n,1)}function g(v,_,b,w){if(b===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let T=0;T<v.length;T++)h(v[T]/o,_[T],w[T]);else{S.multiDrawElementsInstancedWEBGL(n,_,0,s,v,0,w,0,b);let T=0;for(let A=0;A<b;A++)T+=_[A]*w[A];t.update(T,n,1)}}this.setMode=i,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function Pj(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=l*(s/3);break;case r.LINES:t.lines+=l*(s/2);break;case r.LINE_STRIP:t.lines+=l*(s-1);break;case r.LINE_LOOP:t.lines+=l*s;break;case r.POINTS:t.points+=l*s;break;default:$t("WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function Lj(r,e,t){const n=new WeakMap,i=new hi;function s(o,l,u){const h=o.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let H=function(){R.dispose(),n.delete(l),l.removeEventListener("dispose",H)};var _=H;v!==void 0&&v.texture.dispose();const b=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,S=l.morphAttributes.color!==void 0,T=l.morphAttributes.position||[],A=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let N=0;b===!0&&(N=1),w===!0&&(N=2),S===!0&&(N=3);let L=l.attributes.position.count*N,I=1;L>e.maxTextureSize&&(I=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const k=new Float32Array(L*I*4*g),R=new Eb(k,L,I,g);R.type=qi,R.needsUpdate=!0;const U=N*4;for(let Y=0;Y<g;Y++){const X=T[Y],q=A[Y],Q=D[Y],ie=L*I*4*Y;for(let j=0;j<X.count;j++){const J=j*U;b===!0&&(i.fromBufferAttribute(X,j),k[ie+J+0]=i.x,k[ie+J+1]=i.y,k[ie+J+2]=i.z,k[ie+J+3]=0),w===!0&&(i.fromBufferAttribute(q,j),k[ie+J+4]=i.x,k[ie+J+5]=i.y,k[ie+J+6]=i.z,k[ie+J+7]=0),S===!0&&(i.fromBufferAttribute(Q,j),k[ie+J+8]=i.x,k[ie+J+9]=i.y,k[ie+J+10]=i.z,k[ie+J+11]=Q.itemSize===4?i.w:1)}}v={count:g,texture:R,size:new ft(L,I)},n.set(l,v),l.addEventListener("dispose",H)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(r,"morphTexture",o.morphTexture,t);else{let b=0;for(let S=0;S<h.length;S++)b+=h[S];const w=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(r,"morphTargetBaseInfluence",w),u.getUniforms().setValue(r,"morphTargetInfluences",h)}u.getUniforms().setValue(r,"morphTargetsTexture",v.texture,t),u.getUniforms().setValue(r,"morphTargetsTextureSize",v.size)}return{update:s}}function Uj(r,e,t,n,i){let s=new WeakMap;function o(h){const m=i.render.frame,g=h.geometry,v=e.get(h,g);if(s.get(v)!==m&&(e.update(v),s.set(v,m)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),s.get(h)!==m&&(t.update(h.instanceMatrix,r.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,r.ARRAY_BUFFER),s.set(h,m))),h.isSkinnedMesh){const _=h.skeleton;s.get(_)!==m&&(_.update(),s.set(_,m))}return v}function l(){s=new WeakMap}function u(h){const m=h.target;m.removeEventListener("dispose",u),n.releaseStatesOfObject(m),t.remove(m.instanceMatrix),m.instanceColor!==null&&t.remove(m.instanceColor)}return{update:o,dispose:l}}const Ij={[OE]:"LINEAR_TONE_MAPPING",[FE]:"REINHARD_TONE_MAPPING",[kE]:"CINEON_TONE_MAPPING",[Fv]:"ACES_FILMIC_TONE_MAPPING",[zE]:"AGX_TONE_MAPPING",[VE]:"NEUTRAL_TONE_MAPPING",[BE]:"CUSTOM_TONE_MAPPING"};function Oj(r,e,t,n,i){const s=new la(e,t,{type:r,depthBuffer:n,stencilBuffer:i}),o=new la(e,t,{type:yr,depthBuffer:!1,stencilBuffer:!1}),l=new _n;l.setAttribute("position",new Wt([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new Wt([0,2,0,0,2,0],2));const u=new cA({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),h=new Pi(l,u),m=new Sc(-1,1,1,-1,0,1);let g=null,v=null,_=!1,b,w=null,S=[],T=!1;this.setSize=function(A,D){s.setSize(A,D),o.setSize(A,D);for(let N=0;N<S.length;N++){const L=S[N];L.setSize&&L.setSize(A,D)}},this.setEffects=function(A){S=A,T=S.length>0&&S[0].isRenderPass===!0;const D=s.width,N=s.height;for(let L=0;L<S.length;L++){const I=S[L];I.setSize&&I.setSize(D,N)}},this.begin=function(A,D){if(_||A.toneMapping===qo&&S.length===0)return!1;if(w=D,D!==null){const N=D.width,L=D.height;(s.width!==N||s.height!==L)&&this.setSize(N,L)}return T===!1&&A.setRenderTarget(s),b=A.toneMapping,A.toneMapping=qo,!0},this.hasRenderPass=function(){return T},this.end=function(A,D){A.toneMapping=b,_=!0;let N=s,L=o;for(let I=0;I<S.length;I++){const k=S[I];if(k.enabled!==!1&&(k.render(A,L,N,D),k.needsSwap!==!1)){const R=N;N=L,L=R}}if(g!==A.outputColorSpace||v!==A.toneMapping){g=A.outputColorSpace,v=A.toneMapping,u.defines={},Wn.getTransfer(g)===ui&&(u.defines.SRGB_TRANSFER="");const I=Ij[v];I&&(u.defines[I]=""),u.needsUpdate=!0}u.uniforms.tDiffuse.value=N.texture,A.setRenderTarget(w),A.render(h,m),w=null,_=!1},this.isCompositing=function(){return _},this.dispose=function(){s.dispose(),o.dispose(),l.dispose(),u.dispose()}}const cO=new di,Mw=new Am(1,1),uO=new Eb,fO=new Ab,hO=new Gv,ND=[],PD=[],LD=new Float32Array(16),UD=new Float32Array(9),ID=new Float32Array(4);function km(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=ND[i];if(s===void 0&&(s=new Float32Array(i),ND[i]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,r[o].toArray(s,l)}return s}function Xr(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Yr(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function $b(r,e){let t=PD[e];t===void 0&&(t=new Int32Array(e),PD[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function Fj(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function kj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xr(t,e))return;r.uniform2fv(this.addr,e),Yr(t,e)}}function Bj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xr(t,e))return;r.uniform3fv(this.addr,e),Yr(t,e)}}function zj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xr(t,e))return;r.uniform4fv(this.addr,e),Yr(t,e)}}function Vj(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Xr(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Yr(t,e)}else{if(Xr(t,n))return;ID.set(n),r.uniformMatrix2fv(this.addr,!1,ID),Yr(t,n)}}function Gj(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Xr(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Yr(t,e)}else{if(Xr(t,n))return;UD.set(n),r.uniformMatrix3fv(this.addr,!1,UD),Yr(t,n)}}function Hj(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Xr(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Yr(t,e)}else{if(Xr(t,n))return;LD.set(n),r.uniformMatrix4fv(this.addr,!1,LD),Yr(t,n)}}function jj(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Wj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xr(t,e))return;r.uniform2iv(this.addr,e),Yr(t,e)}}function Xj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xr(t,e))return;r.uniform3iv(this.addr,e),Yr(t,e)}}function Yj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xr(t,e))return;r.uniform4iv(this.addr,e),Yr(t,e)}}function qj(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Zj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xr(t,e))return;r.uniform2uiv(this.addr,e),Yr(t,e)}}function Kj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xr(t,e))return;r.uniform3uiv(this.addr,e),Yr(t,e)}}function Qj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xr(t,e))return;r.uniform4uiv(this.addr,e),Yr(t,e)}}function Jj(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(Mw.compareFunction=t.isReversedDepthBuffer()?wb:Tb,s=Mw):s=cO,t.setTexture2D(e||s,i)}function $j(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||fO,i)}function eW(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||hO,i)}function tW(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||uO,i)}function nW(r){switch(r){case 5126:return Fj;case 35664:return kj;case 35665:return Bj;case 35666:return zj;case 35674:return Vj;case 35675:return Gj;case 35676:return Hj;case 5124:case 35670:return jj;case 35667:case 35671:return Wj;case 35668:case 35672:return Xj;case 35669:case 35673:return Yj;case 5125:return qj;case 36294:return Zj;case 36295:return Kj;case 36296:return Qj;case 35678:case 36198:case 36298:case 36306:case 35682:return Jj;case 35679:case 36299:case 36307:return $j;case 35680:case 36300:case 36308:case 36293:return eW;case 36289:case 36303:case 36311:case 36292:return tW}}function iW(r,e){r.uniform1fv(this.addr,e)}function rW(r,e){const t=km(e,this.size,2);r.uniform2fv(this.addr,t)}function sW(r,e){const t=km(e,this.size,3);r.uniform3fv(this.addr,t)}function aW(r,e){const t=km(e,this.size,4);r.uniform4fv(this.addr,t)}function oW(r,e){const t=km(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function lW(r,e){const t=km(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function cW(r,e){const t=km(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function uW(r,e){r.uniform1iv(this.addr,e)}function fW(r,e){r.uniform2iv(this.addr,e)}function hW(r,e){r.uniform3iv(this.addr,e)}function dW(r,e){r.uniform4iv(this.addr,e)}function pW(r,e){r.uniform1uiv(this.addr,e)}function mW(r,e){r.uniform2uiv(this.addr,e)}function gW(r,e){r.uniform3uiv(this.addr,e)}function vW(r,e){r.uniform4uiv(this.addr,e)}function yW(r,e,t){const n=this.cache,i=e.length,s=$b(t,i);Xr(n,s)||(r.uniform1iv(this.addr,s),Yr(n,s));let o;this.type===r.SAMPLER_2D_SHADOW?o=Mw:o=cO;for(let l=0;l!==i;++l)t.setTexture2D(e[l]||o,s[l])}function xW(r,e,t){const n=this.cache,i=e.length,s=$b(t,i);Xr(n,s)||(r.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||fO,s[o])}function _W(r,e,t){const n=this.cache,i=e.length,s=$b(t,i);Xr(n,s)||(r.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||hO,s[o])}function bW(r,e,t){const n=this.cache,i=e.length,s=$b(t,i);Xr(n,s)||(r.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||uO,s[o])}function SW(r){switch(r){case 5126:return iW;case 35664:return rW;case 35665:return sW;case 35666:return aW;case 35674:return oW;case 35675:return lW;case 35676:return cW;case 5124:case 35670:return uW;case 35667:case 35671:return fW;case 35668:case 35672:return hW;case 35669:case 35673:return dW;case 5125:return pW;case 36294:return mW;case 36295:return gW;case 36296:return vW;case 35678:case 36198:case 36298:case 36306:case 35682:return yW;case 35679:case 36299:case 36307:return xW;case 35680:case 36300:case 36308:case 36293:return _W;case 36289:case 36303:case 36311:case 36292:return bW}}class MW{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=nW(t.type)}}class TW{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=SW(t.type)}}class wW{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const l=i[s];l.setValue(e,t[l.id],n)}}}const eT=/(\w+)(\])?(\[|\.)?/g;function OD(r,e){r.seq.push(e),r.map[e.id]=e}function EW(r,e,t){const n=r.name,i=n.length;for(eT.lastIndex=0;;){const s=eT.exec(n),o=eT.lastIndex;let l=s[1];const u=s[2]==="]",h=s[3];if(u&&(l=l|0),h===void 0||h==="["&&o+2===i){OD(t,h===void 0?new MW(l,r,e):new TW(l,r,e));break}else{let g=t.map[l];g===void 0&&(g=new wW(l),OD(t,g)),t=g}}}class j_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<n;++o){const l=e.getActiveUniform(t,o),u=e.getUniformLocation(t,l.name);EW(l,u,this)}const i=[],s=[];for(const o of this.seq)o.type===e.SAMPLER_2D_SHADOW||o.type===e.SAMPLER_CUBE_SHADOW||o.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(o):s.push(o);i.length>0&&(this.seq=i.concat(s))}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function FD(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const AW=37297;let CW=0;function RW(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}const kD=new xn;function DW(r){Wn._getMatrix(kD,Wn.workingColorSpace,r);const e=`mat3( ${kD.elements.map(t=>t.toFixed(4))} )`;switch(Wn.getTransfer(r)){case pv:return[e,"LinearTransferOETF"];case ui:return[e,"sRGBTransferOETF"];default:return Bt("WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function BD(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),s=(r.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+RW(r.getShaderSource(e),l)}else return s}function NW(r,e){const t=DW(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const PW={[OE]:"Linear",[FE]:"Reinhard",[kE]:"Cineon",[Fv]:"ACESFilmic",[zE]:"AgX",[VE]:"Neutral",[BE]:"Custom"};function LW(r,e){const t=PW[e];return t===void 0?(Bt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+r+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const M_=new se;function UW(){Wn.getLuminanceCoefficients(M_);const r=M_.x.toFixed(4),e=M_.y.toFixed(4),t=M_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function IW(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(D0).join(`
`)}function OW(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function FW(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let l=1;s.type===r.FLOAT_MAT2&&(l=2),s.type===r.FLOAT_MAT3&&(l=3),s.type===r.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:l}}return t}function D0(r){return r!==""}function zD(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function VD(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kW=/^[ \t]*#include +<([\w\d./]+)>/gm;function Tw(r){return r.replace(kW,zW)}const BW=new Map;function zW(r,e){let t=En[e];if(t===void 0){const n=BW.get(e);if(n!==void 0)t=En[n],Bt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Tw(t)}const VW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GD(r){return r.replace(VW,GW)}function GW(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function HD(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const HW={[hm]:"SHADOWMAP_TYPE_PCF",[Qh]:"SHADOWMAP_TYPE_VSM"};function jW(r){return HW[r.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const WW={[El]:"ENVMAP_TYPE_CUBE",[If]:"ENVMAP_TYPE_CUBE",[Im]:"ENVMAP_TYPE_CUBE_UV"};function XW(r){return r.envMap===!1?"ENVMAP_TYPE_CUBE":WW[r.envMapMode]||"ENVMAP_TYPE_CUBE"}const YW={[If]:"ENVMAP_MODE_REFRACTION"};function qW(r){return r.envMap===!1?"ENVMAP_MODE_REFLECTION":YW[r.envMapMode]||"ENVMAP_MODE_REFLECTION"}const ZW={[Ov]:"ENVMAP_BLENDING_MULTIPLY",[HU]:"ENVMAP_BLENDING_MIX",[jU]:"ENVMAP_BLENDING_ADD"};function KW(r){return r.envMap===!1?"ENVMAP_BLENDING_NONE":ZW[r.combine]||"ENVMAP_BLENDING_NONE"}function QW(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function JW(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=jW(t),h=XW(t),m=qW(t),g=KW(t),v=QW(t),_=IW(t),b=OW(s),w=i.createProgram();let S,T,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(D0).join(`
`),S.length>0&&(S+=`
`),T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(D0).join(`
`),T.length>0&&(T+=`
`)):(S=[HD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(D0).join(`
`),T=[HD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas||t.batchingColor?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qo?"#define TONE_MAPPING":"",t.toneMapping!==qo?En.tonemapping_pars_fragment:"",t.toneMapping!==qo?LW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",En.colorspace_pars_fragment,NW("linearToOutputTexel",t.outputColorSpace),UW(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(D0).join(`
`)),o=Tw(o),o=zD(o,t),o=VD(o,t),l=Tw(l),l=zD(l,t),l=VD(l,t),o=GD(o),l=GD(l),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,S=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,T=["#define varying in",t.glslVersion===hw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===hw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const D=A+S+o,N=A+T+l,L=FD(i,i.VERTEX_SHADER,D),I=FD(i,i.FRAGMENT_SHADER,N);i.attachShader(w,L),i.attachShader(w,I),t.index0AttributeName!==void 0?i.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function k(Y){if(r.debug.checkShaderErrors){const X=i.getProgramInfoLog(w)||"",q=i.getShaderInfoLog(L)||"",Q=i.getShaderInfoLog(I)||"",ie=X.trim(),j=q.trim(),J=Q.trim();let de=!0,le=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(de=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,w,L,I);else{const ce=BD(i,L,"vertex"),z=BD(i,I,"fragment");$t("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+ie+`
`+ce+`
`+z)}else ie!==""?Bt("WebGLProgram: Program Info Log:",ie):(j===""||J==="")&&(le=!1);le&&(Y.diagnostics={runnable:de,programLog:ie,vertexShader:{log:j,prefix:S},fragmentShader:{log:J,prefix:T}})}i.deleteShader(L),i.deleteShader(I),R=new j_(i,w),U=FW(i,w)}let R;this.getUniforms=function(){return R===void 0&&k(this),R};let U;this.getAttributes=function(){return U===void 0&&k(this),U};let H=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return H===!1&&(H=i.getProgramParameter(w,AW)),H},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=CW++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=L,this.fragmentShader=I,this}let $W=0;class eX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new tX(e),t.set(e,n)),n}}class tX{constructor(e){this.id=$W++,this.code=e,this.usedTimes=0}}function nX(r,e,t,n,i,s){const o=new Em,l=new eX,u=new Set,h=[],m=new Map,g=n.logarithmicDepthBuffer;let v=n.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(R){return u.add(R),R===0?"uv":`uv${R}`}function w(R,U,H,Y,X){const q=Y.fog,Q=X.geometry,ie=R.isMeshStandardMaterial||R.isMeshLambertMaterial||R.isMeshPhongMaterial?Y.environment:null,j=R.isMeshStandardMaterial||R.isMeshLambertMaterial&&!R.envMap||R.isMeshPhongMaterial&&!R.envMap,J=e.get(R.envMap||ie,j),de=J&&J.mapping===Im?J.image.height:null,le=_[R.type];R.precision!==null&&(v=n.getMaxPrecision(R.precision),v!==R.precision&&Bt("WebGLProgram.getParameters:",R.precision,"not supported, using",v,"instead."));const ce=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,z=ce!==void 0?ce.length:0;let Z=0;Q.morphAttributes.position!==void 0&&(Z=1),Q.morphAttributes.normal!==void 0&&(Z=2),Q.morphAttributes.color!==void 0&&(Z=3);let ae,fe,ve,re;if(le){const Ht=bl[le];ae=Ht.vertexShader,fe=Ht.fragmentShader}else ae=R.vertexShader,fe=R.fragmentShader,l.update(R),ve=l.getVertexShaderID(R),re=l.getFragmentShaderID(R);const pe=r.getRenderTarget(),Se=r.state.buffers.depth.getReversed(),je=X.isInstancedMesh===!0,ct=X.isBatchedMesh===!0,Je=!!R.map,nt=!!R.matcap,Mt=!!J,Ue=!!R.aoMap,Ve=!!R.lightMap,Oe=!!R.bumpMap,it=!!R.normalMap,ee=!!R.displacementMap,ut=!!R.emissiveMap,Ye=!!R.metalnessMap,De=!!R.roughnessMap,We=R.anisotropy>0,K=R.clearcoat>0,V=R.dispersion>0,ue=R.iridescence>0,Ie=R.sheen>0,Ce=R.transmission>0,Ee=We&&!!R.anisotropyMap,st=K&&!!R.clearcoatMap,at=K&&!!R.clearcoatNormalMap,wt=K&&!!R.clearcoatRoughnessMap,Lt=ue&&!!R.iridescenceMap,Ge=ue&&!!R.iridescenceThicknessMap,Fe=Ie&&!!R.sheenColorMap,tt=Ie&&!!R.sheenRoughnessMap,oe=!!R.specularMap,Ae=!!R.specularColorMap,ht=!!R.specularIntensityMap,he=Ce&&!!R.transmissionMap,_e=Ce&&!!R.thicknessMap,$e=!!R.gradientMap,Rt=!!R.alphaMap,rt=R.alphaTest>0,Ne=!!R.alphaHash,bt=!!R.extensions;let Ot=qo;R.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(Ot=r.toneMapping);const It={shaderID:le,shaderType:R.type,shaderName:R.name,vertexShader:ae,fragmentShader:fe,defines:R.defines,customVertexShaderID:ve,customFragmentShaderID:re,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:v,batching:ct,batchingColor:ct&&X._colorsTexture!==null,instancing:je,instancingColor:je&&X.instanceColor!==null,instancingMorph:je&&X.morphTexture!==null,outputColorSpace:pe===null?r.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:Al,alphaToCoverage:!!R.alphaToCoverage,map:Je,matcap:nt,envMap:Mt,envMapMode:Mt&&J.mapping,envMapCubeUVHeight:de,aoMap:Ue,lightMap:Ve,bumpMap:Oe,normalMap:it,displacementMap:ee,emissiveMap:ut,normalMapObjectSpace:it&&R.normalMapType===QU,normalMapTangentSpace:it&&R.normalMapType===zf,metalnessMap:Ye,roughnessMap:De,anisotropy:We,anisotropyMap:Ee,clearcoat:K,clearcoatMap:st,clearcoatNormalMap:at,clearcoatRoughnessMap:wt,dispersion:V,iridescence:ue,iridescenceMap:Lt,iridescenceThicknessMap:Ge,sheen:Ie,sheenColorMap:Fe,sheenRoughnessMap:tt,specularMap:oe,specularColorMap:Ae,specularIntensityMap:ht,transmission:Ce,transmissionMap:he,thicknessMap:_e,gradientMap:$e,opaque:R.transparent===!1&&R.blending===ld&&R.alphaToCoverage===!1,alphaMap:Rt,alphaTest:rt,alphaHash:Ne,combine:R.combine,mapUv:Je&&b(R.map.channel),aoMapUv:Ue&&b(R.aoMap.channel),lightMapUv:Ve&&b(R.lightMap.channel),bumpMapUv:Oe&&b(R.bumpMap.channel),normalMapUv:it&&b(R.normalMap.channel),displacementMapUv:ee&&b(R.displacementMap.channel),emissiveMapUv:ut&&b(R.emissiveMap.channel),metalnessMapUv:Ye&&b(R.metalnessMap.channel),roughnessMapUv:De&&b(R.roughnessMap.channel),anisotropyMapUv:Ee&&b(R.anisotropyMap.channel),clearcoatMapUv:st&&b(R.clearcoatMap.channel),clearcoatNormalMapUv:at&&b(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:wt&&b(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Lt&&b(R.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&b(R.iridescenceThicknessMap.channel),sheenColorMapUv:Fe&&b(R.sheenColorMap.channel),sheenRoughnessMapUv:tt&&b(R.sheenRoughnessMap.channel),specularMapUv:oe&&b(R.specularMap.channel),specularColorMapUv:Ae&&b(R.specularColorMap.channel),specularIntensityMapUv:ht&&b(R.specularIntensityMap.channel),transmissionMapUv:he&&b(R.transmissionMap.channel),thicknessMapUv:_e&&b(R.thicknessMap.channel),alphaMapUv:Rt&&b(R.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(it||We),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!Q.attributes.uv&&(Je||Rt),fog:!!q,useFog:R.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:R.wireframe===!1&&(R.flatShading===!0||Q.attributes.normal===void 0&&it===!1&&(R.isMeshLambertMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isMeshPhysicalMaterial)),sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:Se,skinning:X.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:Z,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:R.dithering,shadowMapEnabled:r.shadowMap.enabled&&H.length>0,shadowMapType:r.shadowMap.type,toneMapping:Ot,decodeVideoTexture:Je&&R.map.isVideoTexture===!0&&Wn.getTransfer(R.map.colorSpace)===ui,decodeVideoTextureEmissive:ut&&R.emissiveMap.isVideoTexture===!0&&Wn.getTransfer(R.emissiveMap.colorSpace)===ui,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Go,flipSided:R.side===zs,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:bt&&R.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(bt&&R.extensions.multiDraw===!0||ct)&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return It.vertexUv1s=u.has(1),It.vertexUv2s=u.has(2),It.vertexUv3s=u.has(3),u.clear(),It}function S(R){const U=[];if(R.shaderID?U.push(R.shaderID):(U.push(R.customVertexShaderID),U.push(R.customFragmentShaderID)),R.defines!==void 0)for(const H in R.defines)U.push(H),U.push(R.defines[H]);return R.isRawShaderMaterial===!1&&(T(U,R),A(U,R),U.push(r.outputColorSpace)),U.push(R.customProgramCacheKey),U.join()}function T(R,U){R.push(U.precision),R.push(U.outputColorSpace),R.push(U.envMapMode),R.push(U.envMapCubeUVHeight),R.push(U.mapUv),R.push(U.alphaMapUv),R.push(U.lightMapUv),R.push(U.aoMapUv),R.push(U.bumpMapUv),R.push(U.normalMapUv),R.push(U.displacementMapUv),R.push(U.emissiveMapUv),R.push(U.metalnessMapUv),R.push(U.roughnessMapUv),R.push(U.anisotropyMapUv),R.push(U.clearcoatMapUv),R.push(U.clearcoatNormalMapUv),R.push(U.clearcoatRoughnessMapUv),R.push(U.iridescenceMapUv),R.push(U.iridescenceThicknessMapUv),R.push(U.sheenColorMapUv),R.push(U.sheenRoughnessMapUv),R.push(U.specularMapUv),R.push(U.specularColorMapUv),R.push(U.specularIntensityMapUv),R.push(U.transmissionMapUv),R.push(U.thicknessMapUv),R.push(U.combine),R.push(U.fogExp2),R.push(U.sizeAttenuation),R.push(U.morphTargetsCount),R.push(U.morphAttributeCount),R.push(U.numDirLights),R.push(U.numPointLights),R.push(U.numSpotLights),R.push(U.numSpotLightMaps),R.push(U.numHemiLights),R.push(U.numRectAreaLights),R.push(U.numDirLightShadows),R.push(U.numPointLightShadows),R.push(U.numSpotLightShadows),R.push(U.numSpotLightShadowsWithMaps),R.push(U.numLightProbes),R.push(U.shadowMapType),R.push(U.toneMapping),R.push(U.numClippingPlanes),R.push(U.numClipIntersection),R.push(U.depthPacking)}function A(R,U){o.disableAll(),U.instancing&&o.enable(0),U.instancingColor&&o.enable(1),U.instancingMorph&&o.enable(2),U.matcap&&o.enable(3),U.envMap&&o.enable(4),U.normalMapObjectSpace&&o.enable(5),U.normalMapTangentSpace&&o.enable(6),U.clearcoat&&o.enable(7),U.iridescence&&o.enable(8),U.alphaTest&&o.enable(9),U.vertexColors&&o.enable(10),U.vertexAlphas&&o.enable(11),U.vertexUv1s&&o.enable(12),U.vertexUv2s&&o.enable(13),U.vertexUv3s&&o.enable(14),U.vertexTangents&&o.enable(15),U.anisotropy&&o.enable(16),U.alphaHash&&o.enable(17),U.batching&&o.enable(18),U.dispersion&&o.enable(19),U.batchingColor&&o.enable(20),U.gradientMap&&o.enable(21),R.push(o.mask),o.disableAll(),U.fog&&o.enable(0),U.useFog&&o.enable(1),U.flatShading&&o.enable(2),U.logarithmicDepthBuffer&&o.enable(3),U.reversedDepthBuffer&&o.enable(4),U.skinning&&o.enable(5),U.morphTargets&&o.enable(6),U.morphNormals&&o.enable(7),U.morphColors&&o.enable(8),U.premultipliedAlpha&&o.enable(9),U.shadowMapEnabled&&o.enable(10),U.doubleSided&&o.enable(11),U.flipSided&&o.enable(12),U.useDepthPacking&&o.enable(13),U.dithering&&o.enable(14),U.transmission&&o.enable(15),U.sheen&&o.enable(16),U.opaque&&o.enable(17),U.pointsUvs&&o.enable(18),U.decodeVideoTexture&&o.enable(19),U.decodeVideoTextureEmissive&&o.enable(20),U.alphaToCoverage&&o.enable(21),R.push(o.mask)}function D(R){const U=_[R.type];let H;if(U){const Y=bl[U];H=lA.clone(Y.uniforms)}else H=R.uniforms;return H}function N(R,U){let H=m.get(U);return H!==void 0?++H.usedTimes:(H=new JW(r,U,R,i),h.push(H),m.set(U,H)),H}function L(R){if(--R.usedTimes===0){const U=h.indexOf(R);h[U]=h[h.length-1],h.pop(),m.delete(R.cacheKey),R.destroy()}}function I(R){l.remove(R)}function k(){l.dispose()}return{getParameters:w,getProgramCacheKey:S,getUniforms:D,acquireProgram:N,releaseProgram:L,releaseShaderCache:I,programs:h,dispose:k}}function iX(){let r=new WeakMap;function e(o){return r.has(o)}function t(o){let l=r.get(o);return l===void 0&&(l={},r.set(o,l)),l}function n(o){r.delete(o)}function i(o,l,u){r.get(o)[l]=u}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function rX(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.materialVariant!==e.materialVariant?r.materialVariant-e.materialVariant:r.z!==e.z?r.z-e.z:r.id-e.id}function jD(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function WD(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(v){let _=0;return v.isInstancedMesh&&(_+=2),v.isSkinnedMesh&&(_+=1),_}function l(v,_,b,w,S,T){let A=r[e];return A===void 0?(A={id:v.id,object:v,geometry:_,material:b,materialVariant:o(v),groupOrder:w,renderOrder:v.renderOrder,z:S,group:T},r[e]=A):(A.id=v.id,A.object=v,A.geometry=_,A.material=b,A.materialVariant=o(v),A.groupOrder=w,A.renderOrder=v.renderOrder,A.z=S,A.group=T),e++,A}function u(v,_,b,w,S,T){const A=l(v,_,b,w,S,T);b.transmission>0?n.push(A):b.transparent===!0?i.push(A):t.push(A)}function h(v,_,b,w,S,T){const A=l(v,_,b,w,S,T);b.transmission>0?n.unshift(A):b.transparent===!0?i.unshift(A):t.unshift(A)}function m(v,_){t.length>1&&t.sort(v||rX),n.length>1&&n.sort(_||jD),i.length>1&&i.sort(_||jD)}function g(){for(let v=e,_=r.length;v<_;v++){const b=r[v];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:u,unshift:h,finish:g,sort:m}}function sX(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new WD,r.set(n,[o])):i>=s.length?(o=new WD,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function aX(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new se,color:new Vt};break;case"SpotLight":t={position:new se,direction:new se,color:new Vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new se,color:new Vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new se,skyColor:new Vt,groundColor:new Vt};break;case"RectAreaLight":t={color:new Vt,position:new se,halfWidth:new se,halfHeight:new se};break}return r[e.id]=t,t}}}function oX(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let lX=0;function cX(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function uX(r){const e=new aX,t=oX(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new se);const i=new se,s=new fn,o=new fn;function l(h){let m=0,g=0,v=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let _=0,b=0,w=0,S=0,T=0,A=0,D=0,N=0,L=0,I=0,k=0;h.sort(cX);for(let U=0,H=h.length;U<H;U++){const Y=h[U],X=Y.color,q=Y.intensity,Q=Y.distance;let ie=null;if(Y.shadow&&Y.shadow.map&&(Y.shadow.map.texture.format===pd?ie=Y.shadow.map.texture:ie=Y.shadow.map.depthTexture||Y.shadow.map.texture),Y.isAmbientLight)m+=X.r*q,g+=X.g*q,v+=X.b*q;else if(Y.isLightProbe){for(let j=0;j<9;j++)n.probe[j].addScaledVector(Y.sh.coefficients[j],q);k++}else if(Y.isDirectionalLight){const j=e.get(Y);if(j.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const J=Y.shadow,de=t.get(Y);de.shadowIntensity=J.intensity,de.shadowBias=J.bias,de.shadowNormalBias=J.normalBias,de.shadowRadius=J.radius,de.shadowMapSize=J.mapSize,n.directionalShadow[_]=de,n.directionalShadowMap[_]=ie,n.directionalShadowMatrix[_]=Y.shadow.matrix,A++}n.directional[_]=j,_++}else if(Y.isSpotLight){const j=e.get(Y);j.position.setFromMatrixPosition(Y.matrixWorld),j.color.copy(X).multiplyScalar(q),j.distance=Q,j.coneCos=Math.cos(Y.angle),j.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),j.decay=Y.decay,n.spot[w]=j;const J=Y.shadow;if(Y.map&&(n.spotLightMap[L]=Y.map,L++,J.updateMatrices(Y),Y.castShadow&&I++),n.spotLightMatrix[w]=J.matrix,Y.castShadow){const de=t.get(Y);de.shadowIntensity=J.intensity,de.shadowBias=J.bias,de.shadowNormalBias=J.normalBias,de.shadowRadius=J.radius,de.shadowMapSize=J.mapSize,n.spotShadow[w]=de,n.spotShadowMap[w]=ie,N++}w++}else if(Y.isRectAreaLight){const j=e.get(Y);j.color.copy(X).multiplyScalar(q),j.halfWidth.set(Y.width*.5,0,0),j.halfHeight.set(0,Y.height*.5,0),n.rectArea[S]=j,S++}else if(Y.isPointLight){const j=e.get(Y);if(j.color.copy(Y.color).multiplyScalar(Y.intensity),j.distance=Y.distance,j.decay=Y.decay,Y.castShadow){const J=Y.shadow,de=t.get(Y);de.shadowIntensity=J.intensity,de.shadowBias=J.bias,de.shadowNormalBias=J.normalBias,de.shadowRadius=J.radius,de.shadowMapSize=J.mapSize,de.shadowCameraNear=J.camera.near,de.shadowCameraFar=J.camera.far,n.pointShadow[b]=de,n.pointShadowMap[b]=ie,n.pointShadowMatrix[b]=Y.shadow.matrix,D++}n.point[b]=j,b++}else if(Y.isHemisphereLight){const j=e.get(Y);j.skyColor.copy(Y.color).multiplyScalar(q),j.groundColor.copy(Y.groundColor).multiplyScalar(q),n.hemi[T]=j,T++}}S>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=zt.LTC_FLOAT_1,n.rectAreaLTC2=zt.LTC_FLOAT_2):(n.rectAreaLTC1=zt.LTC_HALF_1,n.rectAreaLTC2=zt.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const R=n.hash;(R.directionalLength!==_||R.pointLength!==b||R.spotLength!==w||R.rectAreaLength!==S||R.hemiLength!==T||R.numDirectionalShadows!==A||R.numPointShadows!==D||R.numSpotShadows!==N||R.numSpotMaps!==L||R.numLightProbes!==k)&&(n.directional.length=_,n.spot.length=w,n.rectArea.length=S,n.point.length=b,n.hemi.length=T,n.directionalShadow.length=A,n.directionalShadowMap.length=A,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=N,n.spotShadowMap.length=N,n.directionalShadowMatrix.length=A,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=N+L-I,n.spotLightMap.length=L,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=k,R.directionalLength=_,R.pointLength=b,R.spotLength=w,R.rectAreaLength=S,R.hemiLength=T,R.numDirectionalShadows=A,R.numPointShadows=D,R.numSpotShadows=N,R.numSpotMaps=L,R.numLightProbes=k,n.version=lX++)}function u(h,m){let g=0,v=0,_=0,b=0,w=0;const S=m.matrixWorldInverse;for(let T=0,A=h.length;T<A;T++){const D=h[T];if(D.isDirectionalLight){const N=n.directional[g];N.direction.setFromMatrixPosition(D.matrixWorld),i.setFromMatrixPosition(D.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(S),g++}else if(D.isSpotLight){const N=n.spot[_];N.position.setFromMatrixPosition(D.matrixWorld),N.position.applyMatrix4(S),N.direction.setFromMatrixPosition(D.matrixWorld),i.setFromMatrixPosition(D.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(S),_++}else if(D.isRectAreaLight){const N=n.rectArea[b];N.position.setFromMatrixPosition(D.matrixWorld),N.position.applyMatrix4(S),o.identity(),s.copy(D.matrixWorld),s.premultiply(S),o.extractRotation(s),N.halfWidth.set(D.width*.5,0,0),N.halfHeight.set(0,D.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),b++}else if(D.isPointLight){const N=n.point[v];N.position.setFromMatrixPosition(D.matrixWorld),N.position.applyMatrix4(S),v++}else if(D.isHemisphereLight){const N=n.hemi[w];N.direction.setFromMatrixPosition(D.matrixWorld),N.direction.transformDirection(S),w++}}}return{setup:l,setupView:u,state:n}}function XD(r){const e=new uX(r),t=[],n=[];function i(m){h.camera=m,t.length=0,n.length=0}function s(m){t.push(m)}function o(m){n.push(m)}function l(){e.setup(t)}function u(m){e.setupView(t,m)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:h,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function fX(r){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let l;return o===void 0?(l=new XD(r),e.set(i,[l])):s>=o.length?(l=new XD(r),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const hX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,pX=[new se(1,0,0),new se(-1,0,0),new se(0,1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1)],mX=[new se(0,-1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1),new se(0,-1,0),new se(0,-1,0)],YD=new fn,b0=new se,tT=new se;function gX(r,e,t){let n=new Om;const i=new ft,s=new ft,o=new hi,l=new Xb,u=new Yb,h={},m=t.maxTextureSize,g={[Mu]:zs,[zs]:Mu,[Go]:Go},v=new ca({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ft},radius:{value:4}},vertexShader:hX,fragmentShader:dX}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new _n;b.setAttribute("position",new _i(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Pi(b,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hm;let T=this.type;this.render=function(I,k,R){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||I.length===0)return;this.type===B0&&(Bt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),this.type=hm);const U=r.getRenderTarget(),H=r.getActiveCubeFace(),Y=r.getActiveMipmapLevel(),X=r.state;X.setBlending(wl),X.buffers.depth.getReversed()===!0?X.buffers.color.setClear(0,0,0,0):X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);const q=T!==this.type;q&&k.traverse(function(Q){Q.material&&(Array.isArray(Q.material)?Q.material.forEach(ie=>ie.needsUpdate=!0):Q.material.needsUpdate=!0)});for(let Q=0,ie=I.length;Q<ie;Q++){const j=I[Q],J=j.shadow;if(J===void 0){Bt("WebGLShadowMap:",j,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;i.copy(J.mapSize);const de=J.getFrameExtents();i.multiply(de),s.copy(J.mapSize),(i.x>m||i.y>m)&&(i.x>m&&(s.x=Math.floor(m/de.x),i.x=s.x*de.x,J.mapSize.x=s.x),i.y>m&&(s.y=Math.floor(m/de.y),i.y=s.y*de.y,J.mapSize.y=s.y));const le=r.state.buffers.depth.getReversed();if(J.camera._reversedDepth=le,J.map===null||q===!0){if(J.map!==null&&(J.map.depthTexture!==null&&(J.map.depthTexture.dispose(),J.map.depthTexture=null),J.map.dispose()),this.type===Qh){if(j.isPointLight){Bt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}J.map=new la(i.x,i.y,{format:pd,type:yr,minFilter:Gn,magFilter:Gn,generateMipmaps:!1}),J.map.texture.name=j.name+".shadowMap",J.map.depthTexture=new Am(i.x,i.y,qi),J.map.depthTexture.name=j.name+".shadowMapDepth",J.map.depthTexture.format=wc,J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=Cr,J.map.depthTexture.magFilter=Cr}else j.isPointLight?(J.map=new Jb(i.x),J.map.depthTexture=new yI(i.x,lo)):(J.map=new la(i.x,i.y),J.map.depthTexture=new Am(i.x,i.y,lo)),J.map.depthTexture.name=j.name+".shadowMap",J.map.depthTexture.format=wc,this.type===hm?(J.map.depthTexture.compareFunction=le?wb:Tb,J.map.depthTexture.minFilter=Gn,J.map.depthTexture.magFilter=Gn):(J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=Cr,J.map.depthTexture.magFilter=Cr);J.camera.updateProjectionMatrix()}const ce=J.map.isWebGLCubeRenderTarget?6:1;for(let z=0;z<ce;z++){if(J.map.isWebGLCubeRenderTarget)r.setRenderTarget(J.map,z),r.clear();else{z===0&&(r.setRenderTarget(J.map),r.clear());const Z=J.getViewport(z);o.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),X.viewport(o)}if(j.isPointLight){const Z=J.camera,ae=J.matrix,fe=j.distance||Z.far;fe!==Z.far&&(Z.far=fe,Z.updateProjectionMatrix()),b0.setFromMatrixPosition(j.matrixWorld),Z.position.copy(b0),tT.copy(Z.position),tT.add(pX[z]),Z.up.copy(mX[z]),Z.lookAt(tT),Z.updateMatrixWorld(),ae.makeTranslation(-b0.x,-b0.y,-b0.z),YD.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),J._frustum.setFromProjectionMatrix(YD,Z.coordinateSystem,Z.reversedDepth)}else J.updateMatrices(j);n=J.getFrustum(),N(k,R,J.camera,j,this.type)}J.isPointLightShadow!==!0&&this.type===Qh&&A(J,R),J.needsUpdate=!1}T=this.type,S.needsUpdate=!1,r.setRenderTarget(U,H,Y)};function A(I,k){const R=e.update(w);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,_.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new la(i.x,i.y,{format:pd,type:yr})),v.uniforms.shadow_pass.value=I.map.depthTexture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,r.setRenderTarget(I.mapPass),r.clear(),r.renderBufferDirect(k,null,R,v,w,null),_.uniforms.shadow_pass.value=I.mapPass.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,r.setRenderTarget(I.map),r.clear(),r.renderBufferDirect(k,null,R,_,w,null)}function D(I,k,R,U){let H=null;const Y=R.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(Y!==void 0)H=Y;else if(H=R.isPointLight===!0?u:l,r.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const X=H.uuid,q=k.uuid;let Q=h[X];Q===void 0&&(Q={},h[X]=Q);let ie=Q[q];ie===void 0&&(ie=H.clone(),Q[q]=ie,k.addEventListener("dispose",L)),H=ie}if(H.visible=k.visible,H.wireframe=k.wireframe,U===Qh?H.side=k.shadowSide!==null?k.shadowSide:k.side:H.side=k.shadowSide!==null?k.shadowSide:g[k.side],H.alphaMap=k.alphaMap,H.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,H.map=k.map,H.clipShadows=k.clipShadows,H.clippingPlanes=k.clippingPlanes,H.clipIntersection=k.clipIntersection,H.displacementMap=k.displacementMap,H.displacementScale=k.displacementScale,H.displacementBias=k.displacementBias,H.wireframeLinewidth=k.wireframeLinewidth,H.linewidth=k.linewidth,R.isPointLight===!0&&H.isMeshDistanceMaterial===!0){const X=r.properties.get(H);X.light=R}return H}function N(I,k,R,U,H){if(I.visible===!1)return;if(I.layers.test(k.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&H===Qh)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,I.matrixWorld);const q=e.update(I),Q=I.material;if(Array.isArray(Q)){const ie=q.groups;for(let j=0,J=ie.length;j<J;j++){const de=ie[j],le=Q[de.materialIndex];if(le&&le.visible){const ce=D(I,le,U,H);I.onBeforeShadow(r,I,k,R,q,ce,de),r.renderBufferDirect(R,null,q,ce,I,de),I.onAfterShadow(r,I,k,R,q,ce,de)}}}else if(Q.visible){const ie=D(I,Q,U,H);I.onBeforeShadow(r,I,k,R,q,ie,null),r.renderBufferDirect(R,null,q,ie,I,null),I.onAfterShadow(r,I,k,R,q,ie,null)}}const X=I.children;for(let q=0,Q=X.length;q<Q;q++)N(X[q],k,R,U,H)}function L(I){I.target.removeEventListener("dispose",L);for(const R in h){const U=h[R],H=I.target.uuid;H in U&&(U[H].dispose(),delete U[H])}}}function vX(r,e){function t(){let he=!1;const _e=new hi;let $e=null;const Rt=new hi(0,0,0,0);return{setMask:function(rt){$e!==rt&&!he&&(r.colorMask(rt,rt,rt,rt),$e=rt)},setLocked:function(rt){he=rt},setClear:function(rt,Ne,bt,Ot,It){It===!0&&(rt*=Ot,Ne*=Ot,bt*=Ot),_e.set(rt,Ne,bt,Ot),Rt.equals(_e)===!1&&(r.clearColor(rt,Ne,bt,Ot),Rt.copy(_e))},reset:function(){he=!1,$e=null,Rt.set(-1,0,0,0)}}}function n(){let he=!1,_e=!1,$e=null,Rt=null,rt=null;return{setReversed:function(Ne){if(_e!==Ne){const bt=e.get("EXT_clip_control");Ne?bt.clipControlEXT(bt.LOWER_LEFT_EXT,bt.ZERO_TO_ONE_EXT):bt.clipControlEXT(bt.LOWER_LEFT_EXT,bt.NEGATIVE_ONE_TO_ONE_EXT),_e=Ne;const Ot=rt;rt=null,this.setClear(Ot)}},getReversed:function(){return _e},setTest:function(Ne){Ne?pe(r.DEPTH_TEST):Se(r.DEPTH_TEST)},setMask:function(Ne){$e!==Ne&&!he&&(r.depthMask(Ne),$e=Ne)},setFunc:function(Ne){if(_e&&(Ne=H8[Ne]),Rt!==Ne){switch(Ne){case m1:r.depthFunc(r.NEVER);break;case g1:r.depthFunc(r.ALWAYS);break;case v1:r.depthFunc(r.LESS);break;case hd:r.depthFunc(r.LEQUAL);break;case y1:r.depthFunc(r.EQUAL);break;case x1:r.depthFunc(r.GEQUAL);break;case _1:r.depthFunc(r.GREATER);break;case b1:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Rt=Ne}},setLocked:function(Ne){he=Ne},setClear:function(Ne){rt!==Ne&&(rt=Ne,_e&&(Ne=1-Ne),r.clearDepth(Ne))},reset:function(){he=!1,$e=null,Rt=null,rt=null,_e=!1}}}function i(){let he=!1,_e=null,$e=null,Rt=null,rt=null,Ne=null,bt=null,Ot=null,It=null;return{setTest:function(Ht){he||(Ht?pe(r.STENCIL_TEST):Se(r.STENCIL_TEST))},setMask:function(Ht){_e!==Ht&&!he&&(r.stencilMask(Ht),_e=Ht)},setFunc:function(Ht,Sn,Dn){($e!==Ht||Rt!==Sn||rt!==Dn)&&(r.stencilFunc(Ht,Sn,Dn),$e=Ht,Rt=Sn,rt=Dn)},setOp:function(Ht,Sn,Dn){(Ne!==Ht||bt!==Sn||Ot!==Dn)&&(r.stencilOp(Ht,Sn,Dn),Ne=Ht,bt=Sn,Ot=Dn)},setLocked:function(Ht){he=Ht},setClear:function(Ht){It!==Ht&&(r.clearStencil(Ht),It=Ht)},reset:function(){he=!1,_e=null,$e=null,Rt=null,rt=null,Ne=null,bt=null,Ot=null,It=null}}}const s=new t,o=new n,l=new i,u=new WeakMap,h=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,w=!1,S=null,T=null,A=null,D=null,N=null,L=null,I=null,k=new Vt(0,0,0),R=0,U=!1,H=null,Y=null,X=null,q=null,Q=null;const ie=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,J=0;const de=r.getParameter(r.VERSION);de.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(de)[1]),j=J>=1):de.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),j=J>=2);let le=null,ce={};const z=r.getParameter(r.SCISSOR_BOX),Z=r.getParameter(r.VIEWPORT),ae=new hi().fromArray(z),fe=new hi().fromArray(Z);function ve(he,_e,$e,Rt){const rt=new Uint8Array(4),Ne=r.createTexture();r.bindTexture(he,Ne),r.texParameteri(he,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(he,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let bt=0;bt<$e;bt++)he===r.TEXTURE_3D||he===r.TEXTURE_2D_ARRAY?r.texImage3D(_e,0,r.RGBA,1,1,Rt,0,r.RGBA,r.UNSIGNED_BYTE,rt):r.texImage2D(_e+bt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,rt);return Ne}const re={};re[r.TEXTURE_2D]=ve(r.TEXTURE_2D,r.TEXTURE_2D,1),re[r.TEXTURE_CUBE_MAP]=ve(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),re[r.TEXTURE_2D_ARRAY]=ve(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),re[r.TEXTURE_3D]=ve(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),pe(r.DEPTH_TEST),o.setFunc(hd),Oe(!1),it(rw),pe(r.CULL_FACE),Ue(wl);function pe(he){m[he]!==!0&&(r.enable(he),m[he]=!0)}function Se(he){m[he]!==!1&&(r.disable(he),m[he]=!1)}function je(he,_e){return g[he]!==_e?(r.bindFramebuffer(he,_e),g[he]=_e,he===r.DRAW_FRAMEBUFFER&&(g[r.FRAMEBUFFER]=_e),he===r.FRAMEBUFFER&&(g[r.DRAW_FRAMEBUFFER]=_e),!0):!1}function ct(he,_e){let $e=_,Rt=!1;if(he){$e=v.get(_e),$e===void 0&&($e=[],v.set(_e,$e));const rt=he.textures;if($e.length!==rt.length||$e[0]!==r.COLOR_ATTACHMENT0){for(let Ne=0,bt=rt.length;Ne<bt;Ne++)$e[Ne]=r.COLOR_ATTACHMENT0+Ne;$e.length=rt.length,Rt=!0}}else $e[0]!==r.BACK&&($e[0]=r.BACK,Rt=!0);Rt&&r.drawBuffers($e)}function Je(he){return b!==he?(r.useProgram(he),b=he,!0):!1}const nt={[xf]:r.FUNC_ADD,[EU]:r.FUNC_SUBTRACT,[AU]:r.FUNC_REVERSE_SUBTRACT};nt[CU]=r.MIN,nt[RU]=r.MAX;const Mt={[DU]:r.ZERO,[NU]:r.ONE,[PU]:r.SRC_COLOR,[d1]:r.SRC_ALPHA,[kU]:r.SRC_ALPHA_SATURATE,[OU]:r.DST_COLOR,[UU]:r.DST_ALPHA,[LU]:r.ONE_MINUS_SRC_COLOR,[p1]:r.ONE_MINUS_SRC_ALPHA,[FU]:r.ONE_MINUS_DST_COLOR,[IU]:r.ONE_MINUS_DST_ALPHA,[BU]:r.CONSTANT_COLOR,[zU]:r.ONE_MINUS_CONSTANT_COLOR,[VU]:r.CONSTANT_ALPHA,[GU]:r.ONE_MINUS_CONSTANT_ALPHA};function Ue(he,_e,$e,Rt,rt,Ne,bt,Ot,It,Ht){if(he===wl){w===!0&&(Se(r.BLEND),w=!1);return}if(w===!1&&(pe(r.BLEND),w=!0),he!==wU){if(he!==S||Ht!==U){if((T!==xf||N!==xf)&&(r.blendEquation(r.FUNC_ADD),T=xf,N=xf),Ht)switch(he){case ld:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case sw:r.blendFunc(r.ONE,r.ONE);break;case aw:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case ow:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:$t("WebGLState: Invalid blending: ",he);break}else switch(he){case ld:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case sw:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case aw:$t("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case ow:$t("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:$t("WebGLState: Invalid blending: ",he);break}A=null,D=null,L=null,I=null,k.set(0,0,0),R=0,S=he,U=Ht}return}rt=rt||_e,Ne=Ne||$e,bt=bt||Rt,(_e!==T||rt!==N)&&(r.blendEquationSeparate(nt[_e],nt[rt]),T=_e,N=rt),($e!==A||Rt!==D||Ne!==L||bt!==I)&&(r.blendFuncSeparate(Mt[$e],Mt[Rt],Mt[Ne],Mt[bt]),A=$e,D=Rt,L=Ne,I=bt),(Ot.equals(k)===!1||It!==R)&&(r.blendColor(Ot.r,Ot.g,Ot.b,It),k.copy(Ot),R=It),S=he,U=!1}function Ve(he,_e){he.side===Go?Se(r.CULL_FACE):pe(r.CULL_FACE);let $e=he.side===zs;_e&&($e=!$e),Oe($e),he.blending===ld&&he.transparent===!1?Ue(wl):Ue(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),o.setFunc(he.depthFunc),o.setTest(he.depthTest),o.setMask(he.depthWrite),s.setMask(he.colorWrite);const Rt=he.stencilWrite;l.setTest(Rt),Rt&&(l.setMask(he.stencilWriteMask),l.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),l.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),ut(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?pe(r.SAMPLE_ALPHA_TO_COVERAGE):Se(r.SAMPLE_ALPHA_TO_COVERAGE)}function Oe(he){H!==he&&(he?r.frontFace(r.CW):r.frontFace(r.CCW),H=he)}function it(he){he!==SU?(pe(r.CULL_FACE),he!==Y&&(he===rw?r.cullFace(r.BACK):he===MU?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Se(r.CULL_FACE),Y=he}function ee(he){he!==X&&(j&&r.lineWidth(he),X=he)}function ut(he,_e,$e){he?(pe(r.POLYGON_OFFSET_FILL),(q!==_e||Q!==$e)&&(q=_e,Q=$e,o.getReversed()&&(_e=-_e),r.polygonOffset(_e,$e))):Se(r.POLYGON_OFFSET_FILL)}function Ye(he){he?pe(r.SCISSOR_TEST):Se(r.SCISSOR_TEST)}function De(he){he===void 0&&(he=r.TEXTURE0+ie-1),le!==he&&(r.activeTexture(he),le=he)}function We(he,_e,$e){$e===void 0&&(le===null?$e=r.TEXTURE0+ie-1:$e=le);let Rt=ce[$e];Rt===void 0&&(Rt={type:void 0,texture:void 0},ce[$e]=Rt),(Rt.type!==he||Rt.texture!==_e)&&(le!==$e&&(r.activeTexture($e),le=$e),r.bindTexture(he,_e||re[he]),Rt.type=he,Rt.texture=_e)}function K(){const he=ce[le];he!==void 0&&he.type!==void 0&&(r.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function V(){try{r.compressedTexImage2D(...arguments)}catch(he){$t("WebGLState:",he)}}function ue(){try{r.compressedTexImage3D(...arguments)}catch(he){$t("WebGLState:",he)}}function Ie(){try{r.texSubImage2D(...arguments)}catch(he){$t("WebGLState:",he)}}function Ce(){try{r.texSubImage3D(...arguments)}catch(he){$t("WebGLState:",he)}}function Ee(){try{r.compressedTexSubImage2D(...arguments)}catch(he){$t("WebGLState:",he)}}function st(){try{r.compressedTexSubImage3D(...arguments)}catch(he){$t("WebGLState:",he)}}function at(){try{r.texStorage2D(...arguments)}catch(he){$t("WebGLState:",he)}}function wt(){try{r.texStorage3D(...arguments)}catch(he){$t("WebGLState:",he)}}function Lt(){try{r.texImage2D(...arguments)}catch(he){$t("WebGLState:",he)}}function Ge(){try{r.texImage3D(...arguments)}catch(he){$t("WebGLState:",he)}}function Fe(he){ae.equals(he)===!1&&(r.scissor(he.x,he.y,he.z,he.w),ae.copy(he))}function tt(he){fe.equals(he)===!1&&(r.viewport(he.x,he.y,he.z,he.w),fe.copy(he))}function oe(he,_e){let $e=h.get(_e);$e===void 0&&($e=new WeakMap,h.set(_e,$e));let Rt=$e.get(he);Rt===void 0&&(Rt=r.getUniformBlockIndex(_e,he.name),$e.set(he,Rt))}function Ae(he,_e){const Rt=h.get(_e).get(he);u.get(_e)!==Rt&&(r.uniformBlockBinding(_e,Rt,he.__bindingPointIndex),u.set(_e,Rt))}function ht(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),o.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),m={},le=null,ce={},g={},v=new WeakMap,_=[],b=null,w=!1,S=null,T=null,A=null,D=null,N=null,L=null,I=null,k=new Vt(0,0,0),R=0,U=!1,H=null,Y=null,X=null,q=null,Q=null,ae.set(0,0,r.canvas.width,r.canvas.height),fe.set(0,0,r.canvas.width,r.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:pe,disable:Se,bindFramebuffer:je,drawBuffers:ct,useProgram:Je,setBlending:Ue,setMaterial:Ve,setFlipSided:Oe,setCullFace:it,setLineWidth:ee,setPolygonOffset:ut,setScissorTest:Ye,activeTexture:De,bindTexture:We,unbindTexture:K,compressedTexImage2D:V,compressedTexImage3D:ue,texImage2D:Lt,texImage3D:Ge,updateUBOMapping:oe,uniformBlockBinding:Ae,texStorage2D:at,texStorage3D:wt,texSubImage2D:Ie,texSubImage3D:Ce,compressedTexSubImage2D:Ee,compressedTexSubImage3D:st,scissor:Fe,viewport:tt,reset:ht}}function yX(r,e,t,n,i,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new ft,m=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(K,V){return _?new OffscreenCanvas(K,V):gv("canvas")}function w(K,V,ue){let Ie=1;const Ce=We(K);if((Ce.width>ue||Ce.height>ue)&&(Ie=ue/Math.max(Ce.width,Ce.height)),Ie<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const Ee=Math.floor(Ie*Ce.width),st=Math.floor(Ie*Ce.height);g===void 0&&(g=b(Ee,st));const at=V?b(Ee,st):g;return at.width=Ee,at.height=st,at.getContext("2d").drawImage(K,0,0,Ee,st),Bt("WebGLRenderer: Texture has been resized from ("+Ce.width+"x"+Ce.height+") to ("+Ee+"x"+st+")."),at}else return"data"in K&&Bt("WebGLRenderer: Image in DataTexture is too big ("+Ce.width+"x"+Ce.height+")."),K;return K}function S(K){return K.generateMipmaps}function T(K){r.generateMipmap(K)}function A(K){return K.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?r.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function D(K,V,ue,Ie,Ce=!1){if(K!==null){if(r[K]!==void 0)return r[K];Bt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let Ee=V;if(V===r.RED&&(ue===r.FLOAT&&(Ee=r.R32F),ue===r.HALF_FLOAT&&(Ee=r.R16F),ue===r.UNSIGNED_BYTE&&(Ee=r.R8)),V===r.RED_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Ee=r.R8UI),ue===r.UNSIGNED_SHORT&&(Ee=r.R16UI),ue===r.UNSIGNED_INT&&(Ee=r.R32UI),ue===r.BYTE&&(Ee=r.R8I),ue===r.SHORT&&(Ee=r.R16I),ue===r.INT&&(Ee=r.R32I)),V===r.RG&&(ue===r.FLOAT&&(Ee=r.RG32F),ue===r.HALF_FLOAT&&(Ee=r.RG16F),ue===r.UNSIGNED_BYTE&&(Ee=r.RG8)),V===r.RG_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Ee=r.RG8UI),ue===r.UNSIGNED_SHORT&&(Ee=r.RG16UI),ue===r.UNSIGNED_INT&&(Ee=r.RG32UI),ue===r.BYTE&&(Ee=r.RG8I),ue===r.SHORT&&(Ee=r.RG16I),ue===r.INT&&(Ee=r.RG32I)),V===r.RGB_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Ee=r.RGB8UI),ue===r.UNSIGNED_SHORT&&(Ee=r.RGB16UI),ue===r.UNSIGNED_INT&&(Ee=r.RGB32UI),ue===r.BYTE&&(Ee=r.RGB8I),ue===r.SHORT&&(Ee=r.RGB16I),ue===r.INT&&(Ee=r.RGB32I)),V===r.RGBA_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Ee=r.RGBA8UI),ue===r.UNSIGNED_SHORT&&(Ee=r.RGBA16UI),ue===r.UNSIGNED_INT&&(Ee=r.RGBA32UI),ue===r.BYTE&&(Ee=r.RGBA8I),ue===r.SHORT&&(Ee=r.RGBA16I),ue===r.INT&&(Ee=r.RGBA32I)),V===r.RGB&&(ue===r.UNSIGNED_INT_5_9_9_9_REV&&(Ee=r.RGB9_E5),ue===r.UNSIGNED_INT_10F_11F_11F_REV&&(Ee=r.R11F_G11F_B10F)),V===r.RGBA){const st=Ce?pv:Wn.getTransfer(Ie);ue===r.FLOAT&&(Ee=r.RGBA32F),ue===r.HALF_FLOAT&&(Ee=r.RGBA16F),ue===r.UNSIGNED_BYTE&&(Ee=st===ui?r.SRGB8_ALPHA8:r.RGBA8),ue===r.UNSIGNED_SHORT_4_4_4_4&&(Ee=r.RGBA4),ue===r.UNSIGNED_SHORT_5_5_5_1&&(Ee=r.RGB5_A1)}return(Ee===r.R16F||Ee===r.R32F||Ee===r.RG16F||Ee===r.RG32F||Ee===r.RGBA16F||Ee===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Ee}function N(K,V){let ue;return K?V===null||V===lo||V===Tm?ue=r.DEPTH24_STENCIL8:V===qi?ue=r.DEPTH32F_STENCIL8:V===Mm&&(ue=r.DEPTH24_STENCIL8,Bt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===lo||V===Tm?ue=r.DEPTH_COMPONENT24:V===qi?ue=r.DEPTH_COMPONENT32F:V===Mm&&(ue=r.DEPTH_COMPONENT16),ue}function L(K,V){return S(K)===!0||K.isFramebufferTexture&&K.minFilter!==Cr&&K.minFilter!==Gn?Math.log2(Math.max(V.width,V.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?V.mipmaps.length:1}function I(K){const V=K.target;V.removeEventListener("dispose",I),R(V),V.isVideoTexture&&m.delete(V)}function k(K){const V=K.target;V.removeEventListener("dispose",k),H(V)}function R(K){const V=n.get(K);if(V.__webglInit===void 0)return;const ue=K.source,Ie=v.get(ue);if(Ie){const Ce=Ie[V.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&U(K),Object.keys(Ie).length===0&&v.delete(ue)}n.remove(K)}function U(K){const V=n.get(K);r.deleteTexture(V.__webglTexture);const ue=K.source,Ie=v.get(ue);delete Ie[V.__cacheKey],o.memory.textures--}function H(K){const V=n.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),n.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(V.__webglFramebuffer[Ie]))for(let Ce=0;Ce<V.__webglFramebuffer[Ie].length;Ce++)r.deleteFramebuffer(V.__webglFramebuffer[Ie][Ce]);else r.deleteFramebuffer(V.__webglFramebuffer[Ie]);V.__webglDepthbuffer&&r.deleteRenderbuffer(V.__webglDepthbuffer[Ie])}else{if(Array.isArray(V.__webglFramebuffer))for(let Ie=0;Ie<V.__webglFramebuffer.length;Ie++)r.deleteFramebuffer(V.__webglFramebuffer[Ie]);else r.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&r.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&r.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Ie=0;Ie<V.__webglColorRenderbuffer.length;Ie++)V.__webglColorRenderbuffer[Ie]&&r.deleteRenderbuffer(V.__webglColorRenderbuffer[Ie]);V.__webglDepthRenderbuffer&&r.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const ue=K.textures;for(let Ie=0,Ce=ue.length;Ie<Ce;Ie++){const Ee=n.get(ue[Ie]);Ee.__webglTexture&&(r.deleteTexture(Ee.__webglTexture),o.memory.textures--),n.remove(ue[Ie])}n.remove(K)}let Y=0;function X(){Y=0}function q(){const K=Y;return K>=i.maxTextures&&Bt("WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+i.maxTextures),Y+=1,K}function Q(K){const V=[];return V.push(K.wrapS),V.push(K.wrapT),V.push(K.wrapR||0),V.push(K.magFilter),V.push(K.minFilter),V.push(K.anisotropy),V.push(K.internalFormat),V.push(K.format),V.push(K.type),V.push(K.generateMipmaps),V.push(K.premultiplyAlpha),V.push(K.flipY),V.push(K.unpackAlignment),V.push(K.colorSpace),V.join()}function ie(K,V){const ue=n.get(K);if(K.isVideoTexture&&Ye(K),K.isRenderTargetTexture===!1&&K.isExternalTexture!==!0&&K.version>0&&ue.__version!==K.version){const Ie=K.image;if(Ie===null)Bt("WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)Bt("WebGLRenderer: Texture marked for update but image is incomplete");else{re(ue,K,V);return}}else K.isExternalTexture&&(ue.__webglTexture=K.sourceTexture?K.sourceTexture:null);t.bindTexture(r.TEXTURE_2D,ue.__webglTexture,r.TEXTURE0+V)}function j(K,V){const ue=n.get(K);if(K.isRenderTargetTexture===!1&&K.version>0&&ue.__version!==K.version){re(ue,K,V);return}else K.isExternalTexture&&(ue.__webglTexture=K.sourceTexture?K.sourceTexture:null);t.bindTexture(r.TEXTURE_2D_ARRAY,ue.__webglTexture,r.TEXTURE0+V)}function J(K,V){const ue=n.get(K);if(K.isRenderTargetTexture===!1&&K.version>0&&ue.__version!==K.version){re(ue,K,V);return}t.bindTexture(r.TEXTURE_3D,ue.__webglTexture,r.TEXTURE0+V)}function de(K,V){const ue=n.get(K);if(K.isCubeDepthTexture!==!0&&K.version>0&&ue.__version!==K.version){pe(ue,K,V);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ue.__webglTexture,r.TEXTURE0+V)}const le={[dd]:r.REPEAT,[vr]:r.CLAMP_TO_EDGE,[fv]:r.MIRRORED_REPEAT},ce={[Cr]:r.NEAREST,[GE]:r.NEAREST_MIPMAP_NEAREST,[sm]:r.NEAREST_MIPMAP_LINEAR,[Gn]:r.LINEAR,[V0]:r.LINEAR_MIPMAP_NEAREST,[xc]:r.LINEAR_MIPMAP_LINEAR},z={[JU]:r.NEVER,[iI]:r.ALWAYS,[$U]:r.LESS,[Tb]:r.LEQUAL,[eI]:r.EQUAL,[wb]:r.GEQUAL,[tI]:r.GREATER,[nI]:r.NOTEQUAL};function Z(K,V){if(V.type===qi&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Gn||V.magFilter===V0||V.magFilter===sm||V.magFilter===xc||V.minFilter===Gn||V.minFilter===V0||V.minFilter===sm||V.minFilter===xc)&&Bt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(K,r.TEXTURE_WRAP_S,le[V.wrapS]),r.texParameteri(K,r.TEXTURE_WRAP_T,le[V.wrapT]),(K===r.TEXTURE_3D||K===r.TEXTURE_2D_ARRAY)&&r.texParameteri(K,r.TEXTURE_WRAP_R,le[V.wrapR]),r.texParameteri(K,r.TEXTURE_MAG_FILTER,ce[V.magFilter]),r.texParameteri(K,r.TEXTURE_MIN_FILTER,ce[V.minFilter]),V.compareFunction&&(r.texParameteri(K,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(K,r.TEXTURE_COMPARE_FUNC,z[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===Cr||V.minFilter!==sm&&V.minFilter!==xc||V.type===qi&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");r.texParameterf(K,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function ae(K,V){let ue=!1;K.__webglInit===void 0&&(K.__webglInit=!0,V.addEventListener("dispose",I));const Ie=V.source;let Ce=v.get(Ie);Ce===void 0&&(Ce={},v.set(Ie,Ce));const Ee=Q(V);if(Ee!==K.__cacheKey){Ce[Ee]===void 0&&(Ce[Ee]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),Ce[Ee].usedTimes++;const st=Ce[K.__cacheKey];st!==void 0&&(Ce[K.__cacheKey].usedTimes--,st.usedTimes===0&&U(V)),K.__cacheKey=Ee,K.__webglTexture=Ce[Ee].texture}return ue}function fe(K,V,ue){return Math.floor(Math.floor(K/ue)/V)}function ve(K,V,ue,Ie){const Ee=K.updateRanges;if(Ee.length===0)t.texSubImage2D(r.TEXTURE_2D,0,0,0,V.width,V.height,ue,Ie,V.data);else{Ee.sort((Ge,Fe)=>Ge.start-Fe.start);let st=0;for(let Ge=1;Ge<Ee.length;Ge++){const Fe=Ee[st],tt=Ee[Ge],oe=Fe.start+Fe.count,Ae=fe(tt.start,V.width,4),ht=fe(Fe.start,V.width,4);tt.start<=oe+1&&Ae===ht&&fe(tt.start+tt.count-1,V.width,4)===Ae?Fe.count=Math.max(Fe.count,tt.start+tt.count-Fe.start):(++st,Ee[st]=tt)}Ee.length=st+1;const at=r.getParameter(r.UNPACK_ROW_LENGTH),wt=r.getParameter(r.UNPACK_SKIP_PIXELS),Lt=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,V.width);for(let Ge=0,Fe=Ee.length;Ge<Fe;Ge++){const tt=Ee[Ge],oe=Math.floor(tt.start/4),Ae=Math.ceil(tt.count/4),ht=oe%V.width,he=Math.floor(oe/V.width),_e=Ae,$e=1;r.pixelStorei(r.UNPACK_SKIP_PIXELS,ht),r.pixelStorei(r.UNPACK_SKIP_ROWS,he),t.texSubImage2D(r.TEXTURE_2D,0,ht,he,_e,$e,ue,Ie,V.data)}K.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,at),r.pixelStorei(r.UNPACK_SKIP_PIXELS,wt),r.pixelStorei(r.UNPACK_SKIP_ROWS,Lt)}}function re(K,V,ue){let Ie=r.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(Ie=r.TEXTURE_2D_ARRAY),V.isData3DTexture&&(Ie=r.TEXTURE_3D);const Ce=ae(K,V),Ee=V.source;t.bindTexture(Ie,K.__webglTexture,r.TEXTURE0+ue);const st=n.get(Ee);if(Ee.version!==st.__version||Ce===!0){t.activeTexture(r.TEXTURE0+ue);const at=Wn.getPrimaries(Wn.workingColorSpace),wt=V.colorSpace===vu?null:Wn.getPrimaries(V.colorSpace),Lt=V.colorSpace===vu||at===wt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,V.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,V.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Lt);let Ge=w(V.image,!1,i.maxTextureSize);Ge=De(V,Ge);const Fe=s.convert(V.format,V.colorSpace),tt=s.convert(V.type);let oe=D(V.internalFormat,Fe,tt,V.colorSpace,V.isVideoTexture);Z(Ie,V);let Ae;const ht=V.mipmaps,he=V.isVideoTexture!==!0,_e=st.__version===void 0||Ce===!0,$e=Ee.dataReady,Rt=L(V,Ge);if(V.isDepthTexture)oe=N(V.format===Tf,V.type),_e&&(he?t.texStorage2D(r.TEXTURE_2D,1,oe,Ge.width,Ge.height):t.texImage2D(r.TEXTURE_2D,0,oe,Ge.width,Ge.height,0,Fe,tt,null));else if(V.isDataTexture)if(ht.length>0){he&&_e&&t.texStorage2D(r.TEXTURE_2D,Rt,oe,ht[0].width,ht[0].height);for(let rt=0,Ne=ht.length;rt<Ne;rt++)Ae=ht[rt],he?$e&&t.texSubImage2D(r.TEXTURE_2D,rt,0,0,Ae.width,Ae.height,Fe,tt,Ae.data):t.texImage2D(r.TEXTURE_2D,rt,oe,Ae.width,Ae.height,0,Fe,tt,Ae.data);V.generateMipmaps=!1}else he?(_e&&t.texStorage2D(r.TEXTURE_2D,Rt,oe,Ge.width,Ge.height),$e&&ve(V,Ge,Fe,tt)):t.texImage2D(r.TEXTURE_2D,0,oe,Ge.width,Ge.height,0,Fe,tt,Ge.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){he&&_e&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Rt,oe,ht[0].width,ht[0].height,Ge.depth);for(let rt=0,Ne=ht.length;rt<Ne;rt++)if(Ae=ht[rt],V.format!==Rr)if(Fe!==null)if(he){if($e)if(V.layerUpdates.size>0){const bt=bw(Ae.width,Ae.height,V.format,V.type);for(const Ot of V.layerUpdates){const It=Ae.data.subarray(Ot*bt/Ae.data.BYTES_PER_ELEMENT,(Ot+1)*bt/Ae.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,rt,0,0,Ot,Ae.width,Ae.height,1,Fe,It)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,rt,0,0,0,Ae.width,Ae.height,Ge.depth,Fe,Ae.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,rt,oe,Ae.width,Ae.height,Ge.depth,0,Ae.data,0,0);else Bt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?$e&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,rt,0,0,0,Ae.width,Ae.height,Ge.depth,Fe,tt,Ae.data):t.texImage3D(r.TEXTURE_2D_ARRAY,rt,oe,Ae.width,Ae.height,Ge.depth,0,Fe,tt,Ae.data)}else{he&&_e&&t.texStorage2D(r.TEXTURE_2D,Rt,oe,ht[0].width,ht[0].height);for(let rt=0,Ne=ht.length;rt<Ne;rt++)Ae=ht[rt],V.format!==Rr?Fe!==null?he?$e&&t.compressedTexSubImage2D(r.TEXTURE_2D,rt,0,0,Ae.width,Ae.height,Fe,Ae.data):t.compressedTexImage2D(r.TEXTURE_2D,rt,oe,Ae.width,Ae.height,0,Ae.data):Bt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?$e&&t.texSubImage2D(r.TEXTURE_2D,rt,0,0,Ae.width,Ae.height,Fe,tt,Ae.data):t.texImage2D(r.TEXTURE_2D,rt,oe,Ae.width,Ae.height,0,Fe,tt,Ae.data)}else if(V.isDataArrayTexture)if(he){if(_e&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Rt,oe,Ge.width,Ge.height,Ge.depth),$e)if(V.layerUpdates.size>0){const rt=bw(Ge.width,Ge.height,V.format,V.type);for(const Ne of V.layerUpdates){const bt=Ge.data.subarray(Ne*rt/Ge.data.BYTES_PER_ELEMENT,(Ne+1)*rt/Ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ne,Ge.width,Ge.height,1,Fe,tt,bt)}V.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,Fe,tt,Ge.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,oe,Ge.width,Ge.height,Ge.depth,0,Fe,tt,Ge.data);else if(V.isData3DTexture)he?(_e&&t.texStorage3D(r.TEXTURE_3D,Rt,oe,Ge.width,Ge.height,Ge.depth),$e&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,Fe,tt,Ge.data)):t.texImage3D(r.TEXTURE_3D,0,oe,Ge.width,Ge.height,Ge.depth,0,Fe,tt,Ge.data);else if(V.isFramebufferTexture){if(_e)if(he)t.texStorage2D(r.TEXTURE_2D,Rt,oe,Ge.width,Ge.height);else{let rt=Ge.width,Ne=Ge.height;for(let bt=0;bt<Rt;bt++)t.texImage2D(r.TEXTURE_2D,bt,oe,rt,Ne,0,Fe,tt,null),rt>>=1,Ne>>=1}}else if(ht.length>0){if(he&&_e){const rt=We(ht[0]);t.texStorage2D(r.TEXTURE_2D,Rt,oe,rt.width,rt.height)}for(let rt=0,Ne=ht.length;rt<Ne;rt++)Ae=ht[rt],he?$e&&t.texSubImage2D(r.TEXTURE_2D,rt,0,0,Fe,tt,Ae):t.texImage2D(r.TEXTURE_2D,rt,oe,Fe,tt,Ae);V.generateMipmaps=!1}else if(he){if(_e){const rt=We(Ge);t.texStorage2D(r.TEXTURE_2D,Rt,oe,rt.width,rt.height)}$e&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Fe,tt,Ge)}else t.texImage2D(r.TEXTURE_2D,0,oe,Fe,tt,Ge);S(V)&&T(Ie),st.__version=Ee.version,V.onUpdate&&V.onUpdate(V)}K.__version=V.version}function pe(K,V,ue){if(V.image.length!==6)return;const Ie=ae(K,V),Ce=V.source;t.bindTexture(r.TEXTURE_CUBE_MAP,K.__webglTexture,r.TEXTURE0+ue);const Ee=n.get(Ce);if(Ce.version!==Ee.__version||Ie===!0){t.activeTexture(r.TEXTURE0+ue);const st=Wn.getPrimaries(Wn.workingColorSpace),at=V.colorSpace===vu?null:Wn.getPrimaries(V.colorSpace),wt=V.colorSpace===vu||st===at?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,V.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,V.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);const Lt=V.isCompressedTexture||V.image[0].isCompressedTexture,Ge=V.image[0]&&V.image[0].isDataTexture,Fe=[];for(let Ne=0;Ne<6;Ne++)!Lt&&!Ge?Fe[Ne]=w(V.image[Ne],!0,i.maxCubemapSize):Fe[Ne]=Ge?V.image[Ne].image:V.image[Ne],Fe[Ne]=De(V,Fe[Ne]);const tt=Fe[0],oe=s.convert(V.format,V.colorSpace),Ae=s.convert(V.type),ht=D(V.internalFormat,oe,Ae,V.colorSpace),he=V.isVideoTexture!==!0,_e=Ee.__version===void 0||Ie===!0,$e=Ce.dataReady;let Rt=L(V,tt);Z(r.TEXTURE_CUBE_MAP,V);let rt;if(Lt){he&&_e&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Rt,ht,tt.width,tt.height);for(let Ne=0;Ne<6;Ne++){rt=Fe[Ne].mipmaps;for(let bt=0;bt<rt.length;bt++){const Ot=rt[bt];V.format!==Rr?oe!==null?he?$e&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt,0,0,Ot.width,Ot.height,oe,Ot.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt,ht,Ot.width,Ot.height,0,Ot.data):Bt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?$e&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt,0,0,Ot.width,Ot.height,oe,Ae,Ot.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt,ht,Ot.width,Ot.height,0,oe,Ae,Ot.data)}}}else{if(rt=V.mipmaps,he&&_e){rt.length>0&&Rt++;const Ne=We(Fe[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Rt,ht,Ne.width,Ne.height)}for(let Ne=0;Ne<6;Ne++)if(Ge){he?$e&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Fe[Ne].width,Fe[Ne].height,oe,Ae,Fe[Ne].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,ht,Fe[Ne].width,Fe[Ne].height,0,oe,Ae,Fe[Ne].data);for(let bt=0;bt<rt.length;bt++){const It=rt[bt].image[Ne].image;he?$e&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt+1,0,0,It.width,It.height,oe,Ae,It.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt+1,ht,It.width,It.height,0,oe,Ae,It.data)}}else{he?$e&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,oe,Ae,Fe[Ne]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,ht,oe,Ae,Fe[Ne]);for(let bt=0;bt<rt.length;bt++){const Ot=rt[bt];he?$e&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt+1,0,0,oe,Ae,Ot.image[Ne]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,bt+1,ht,oe,Ae,Ot.image[Ne])}}}S(V)&&T(r.TEXTURE_CUBE_MAP),Ee.__version=Ce.version,V.onUpdate&&V.onUpdate(V)}K.__version=V.version}function Se(K,V,ue,Ie,Ce,Ee){const st=s.convert(ue.format,ue.colorSpace),at=s.convert(ue.type),wt=D(ue.internalFormat,st,at,ue.colorSpace),Lt=n.get(V),Ge=n.get(ue);if(Ge.__renderTarget=V,!Lt.__hasExternalTextures){const Fe=Math.max(1,V.width>>Ee),tt=Math.max(1,V.height>>Ee);Ce===r.TEXTURE_3D||Ce===r.TEXTURE_2D_ARRAY?t.texImage3D(Ce,Ee,wt,Fe,tt,V.depth,0,st,at,null):t.texImage2D(Ce,Ee,wt,Fe,tt,0,st,at,null)}t.bindFramebuffer(r.FRAMEBUFFER,K),ut(V)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ie,Ce,Ge.__webglTexture,0,ee(V)):(Ce===r.TEXTURE_2D||Ce>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ce<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Ie,Ce,Ge.__webglTexture,Ee),t.bindFramebuffer(r.FRAMEBUFFER,null)}function je(K,V,ue){if(r.bindRenderbuffer(r.RENDERBUFFER,K),V.depthBuffer){const Ie=V.depthTexture,Ce=Ie&&Ie.isDepthTexture?Ie.type:null,Ee=N(V.stencilBuffer,Ce),st=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;ut(V)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ee(V),Ee,V.width,V.height):ue?r.renderbufferStorageMultisample(r.RENDERBUFFER,ee(V),Ee,V.width,V.height):r.renderbufferStorage(r.RENDERBUFFER,Ee,V.width,V.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,st,r.RENDERBUFFER,K)}else{const Ie=V.textures;for(let Ce=0;Ce<Ie.length;Ce++){const Ee=Ie[Ce],st=s.convert(Ee.format,Ee.colorSpace),at=s.convert(Ee.type),wt=D(Ee.internalFormat,st,at,Ee.colorSpace);ut(V)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ee(V),wt,V.width,V.height):ue?r.renderbufferStorageMultisample(r.RENDERBUFFER,ee(V),wt,V.width,V.height):r.renderbufferStorage(r.RENDERBUFFER,wt,V.width,V.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ct(K,V,ue){const Ie=V.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(r.FRAMEBUFFER,K),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ce=n.get(V.depthTexture);if(Ce.__renderTarget=V,(!Ce.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),Ie){if(Ce.__webglInit===void 0&&(Ce.__webglInit=!0,V.depthTexture.addEventListener("dispose",I)),Ce.__webglTexture===void 0){Ce.__webglTexture=r.createTexture(),t.bindTexture(r.TEXTURE_CUBE_MAP,Ce.__webglTexture),Z(r.TEXTURE_CUBE_MAP,V.depthTexture);const Lt=s.convert(V.depthTexture.format),Ge=s.convert(V.depthTexture.type);let Fe;V.depthTexture.format===wc?Fe=r.DEPTH_COMPONENT24:V.depthTexture.format===Tf&&(Fe=r.DEPTH24_STENCIL8);for(let tt=0;tt<6;tt++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Fe,V.width,V.height,0,Lt,Ge,null)}}else ie(V.depthTexture,0);const Ee=Ce.__webglTexture,st=ee(V),at=Ie?r.TEXTURE_CUBE_MAP_POSITIVE_X+ue:r.TEXTURE_2D,wt=V.depthTexture.format===Tf?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;if(V.depthTexture.format===wc)ut(V)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,wt,at,Ee,0,st):r.framebufferTexture2D(r.FRAMEBUFFER,wt,at,Ee,0);else if(V.depthTexture.format===Tf)ut(V)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,wt,at,Ee,0,st):r.framebufferTexture2D(r.FRAMEBUFFER,wt,at,Ee,0);else throw new Error("Unknown depthTexture format")}function Je(K){const V=n.get(K),ue=K.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==K.depthTexture){const Ie=K.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),Ie){const Ce=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,Ie.removeEventListener("dispose",Ce)};Ie.addEventListener("dispose",Ce),V.__depthDisposeCallback=Ce}V.__boundDepthTexture=Ie}if(K.depthTexture&&!V.__autoAllocateDepthBuffer)if(ue)for(let Ie=0;Ie<6;Ie++)ct(V.__webglFramebuffer[Ie],K,Ie);else{const Ie=K.texture.mipmaps;Ie&&Ie.length>0?ct(V.__webglFramebuffer[0],K,0):ct(V.__webglFramebuffer,K,0)}else if(ue){V.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)if(t.bindFramebuffer(r.FRAMEBUFFER,V.__webglFramebuffer[Ie]),V.__webglDepthbuffer[Ie]===void 0)V.__webglDepthbuffer[Ie]=r.createRenderbuffer(),je(V.__webglDepthbuffer[Ie],K,!1);else{const Ce=K.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ee=V.__webglDepthbuffer[Ie];r.bindRenderbuffer(r.RENDERBUFFER,Ee),r.framebufferRenderbuffer(r.FRAMEBUFFER,Ce,r.RENDERBUFFER,Ee)}}else{const Ie=K.texture.mipmaps;if(Ie&&Ie.length>0?t.bindFramebuffer(r.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(r.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=r.createRenderbuffer(),je(V.__webglDepthbuffer,K,!1);else{const Ce=K.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ee=V.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Ee),r.framebufferRenderbuffer(r.FRAMEBUFFER,Ce,r.RENDERBUFFER,Ee)}}t.bindFramebuffer(r.FRAMEBUFFER,null)}function nt(K,V,ue){const Ie=n.get(K);V!==void 0&&Se(Ie.__webglFramebuffer,K,K.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ue!==void 0&&Je(K)}function Mt(K){const V=K.texture,ue=n.get(K),Ie=n.get(V);K.addEventListener("dispose",k);const Ce=K.textures,Ee=K.isWebGLCubeRenderTarget===!0,st=Ce.length>1;if(st||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=r.createTexture()),Ie.__version=V.version,o.memory.textures++),Ee){ue.__webglFramebuffer=[];for(let at=0;at<6;at++)if(V.mipmaps&&V.mipmaps.length>0){ue.__webglFramebuffer[at]=[];for(let wt=0;wt<V.mipmaps.length;wt++)ue.__webglFramebuffer[at][wt]=r.createFramebuffer()}else ue.__webglFramebuffer[at]=r.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){ue.__webglFramebuffer=[];for(let at=0;at<V.mipmaps.length;at++)ue.__webglFramebuffer[at]=r.createFramebuffer()}else ue.__webglFramebuffer=r.createFramebuffer();if(st)for(let at=0,wt=Ce.length;at<wt;at++){const Lt=n.get(Ce[at]);Lt.__webglTexture===void 0&&(Lt.__webglTexture=r.createTexture(),o.memory.textures++)}if(K.samples>0&&ut(K)===!1){ue.__webglMultisampledFramebuffer=r.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let at=0;at<Ce.length;at++){const wt=Ce[at];ue.__webglColorRenderbuffer[at]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ue.__webglColorRenderbuffer[at]);const Lt=s.convert(wt.format,wt.colorSpace),Ge=s.convert(wt.type),Fe=D(wt.internalFormat,Lt,Ge,wt.colorSpace,K.isXRRenderTarget===!0),tt=ee(K);r.renderbufferStorageMultisample(r.RENDERBUFFER,tt,Fe,K.width,K.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+at,r.RENDERBUFFER,ue.__webglColorRenderbuffer[at])}r.bindRenderbuffer(r.RENDERBUFFER,null),K.depthBuffer&&(ue.__webglDepthRenderbuffer=r.createRenderbuffer(),je(ue.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ee){t.bindTexture(r.TEXTURE_CUBE_MAP,Ie.__webglTexture),Z(r.TEXTURE_CUBE_MAP,V);for(let at=0;at<6;at++)if(V.mipmaps&&V.mipmaps.length>0)for(let wt=0;wt<V.mipmaps.length;wt++)Se(ue.__webglFramebuffer[at][wt],K,V,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+at,wt);else Se(ue.__webglFramebuffer[at],K,V,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+at,0);S(V)&&T(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(st){for(let at=0,wt=Ce.length;at<wt;at++){const Lt=Ce[at],Ge=n.get(Lt);let Fe=r.TEXTURE_2D;(K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(Fe=K.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Fe,Ge.__webglTexture),Z(Fe,Lt),Se(ue.__webglFramebuffer,K,Lt,r.COLOR_ATTACHMENT0+at,Fe,0),S(Lt)&&T(Fe)}t.unbindTexture()}else{let at=r.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(at=K.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(at,Ie.__webglTexture),Z(at,V),V.mipmaps&&V.mipmaps.length>0)for(let wt=0;wt<V.mipmaps.length;wt++)Se(ue.__webglFramebuffer[wt],K,V,r.COLOR_ATTACHMENT0,at,wt);else Se(ue.__webglFramebuffer,K,V,r.COLOR_ATTACHMENT0,at,0);S(V)&&T(at),t.unbindTexture()}K.depthBuffer&&Je(K)}function Ue(K){const V=K.textures;for(let ue=0,Ie=V.length;ue<Ie;ue++){const Ce=V[ue];if(S(Ce)){const Ee=A(K),st=n.get(Ce).__webglTexture;t.bindTexture(Ee,st),T(Ee),t.unbindTexture()}}}const Ve=[],Oe=[];function it(K){if(K.samples>0){if(ut(K)===!1){const V=K.textures,ue=K.width,Ie=K.height;let Ce=r.COLOR_BUFFER_BIT;const Ee=K.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,st=n.get(K),at=V.length>1;if(at)for(let Lt=0;Lt<V.length;Lt++)t.bindFramebuffer(r.FRAMEBUFFER,st.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Lt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,st.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Lt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer);const wt=K.texture.mipmaps;wt&&wt.length>0?t.bindFramebuffer(r.DRAW_FRAMEBUFFER,st.__webglFramebuffer[0]):t.bindFramebuffer(r.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let Lt=0;Lt<V.length;Lt++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(Ce|=r.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(Ce|=r.STENCIL_BUFFER_BIT)),at){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,st.__webglColorRenderbuffer[Lt]);const Ge=n.get(V[Lt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Ge,0)}r.blitFramebuffer(0,0,ue,Ie,0,0,ue,Ie,Ce,r.NEAREST),u===!0&&(Ve.length=0,Oe.length=0,Ve.push(r.COLOR_ATTACHMENT0+Lt),K.depthBuffer&&K.resolveDepthBuffer===!1&&(Ve.push(Ee),Oe.push(Ee),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Oe)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ve))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),at)for(let Lt=0;Lt<V.length;Lt++){t.bindFramebuffer(r.FRAMEBUFFER,st.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Lt,r.RENDERBUFFER,st.__webglColorRenderbuffer[Lt]);const Ge=n.get(V[Lt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,st.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Lt,r.TEXTURE_2D,Ge,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&u){const V=K.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[V])}}}function ee(K){return Math.min(i.maxSamples,K.samples)}function ut(K){const V=n.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Ye(K){const V=o.render.frame;m.get(K)!==V&&(m.set(K,V),K.update())}function De(K,V){const ue=K.colorSpace,Ie=K.format,Ce=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||ue!==Al&&ue!==vu&&(Wn.getTransfer(ue)===ui?(Ie!==Rr||Ce!==ns)&&Bt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):$t("WebGLTextures: Unsupported texture color space:",ue)),V}function We(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(h.width=K.naturalWidth||K.width,h.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(h.width=K.displayWidth,h.height=K.displayHeight):(h.width=K.width,h.height=K.height),h}this.allocateTextureUnit=q,this.resetTextureUnits=X,this.setTexture2D=ie,this.setTexture2DArray=j,this.setTexture3D=J,this.setTextureCube=de,this.rebindTextures=nt,this.setupRenderTarget=Mt,this.updateRenderTargetMipmap=Ue,this.updateMultisampleRenderTarget=it,this.setupDepthRenderbuffer=Je,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=ut,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function dO(r,e){function t(n,i=vu){let s;const o=Wn.getTransfer(i);if(n===ns)return r.UNSIGNED_BYTE;if(n===xb)return r.UNSIGNED_SHORT_4_4_4_4;if(n===_b)return r.UNSIGNED_SHORT_5_5_5_1;if(n===HE)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===jE)return r.UNSIGNED_INT_10F_11F_11F_REV;if(n===vb)return r.BYTE;if(n===yb)return r.SHORT;if(n===Mm)return r.UNSIGNED_SHORT;if(n===kv)return r.INT;if(n===lo)return r.UNSIGNED_INT;if(n===qi)return r.FLOAT;if(n===yr)return r.HALF_FLOAT;if(n===WE)return r.ALPHA;if(n===XE)return r.RGB;if(n===Rr)return r.RGBA;if(n===wc)return r.DEPTH_COMPONENT;if(n===Tf)return r.DEPTH_STENCIL;if(n===Bv)return r.RED;if(n===zv)return r.RED_INTEGER;if(n===pd)return r.RG;if(n===bb)return r.RG_INTEGER;if(n===Sb)return r.RGBA_INTEGER;if(n===G0||n===H0||n===j0||n===W0)if(o===ui)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===G0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===H0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===j0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===W0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===G0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===H0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===j0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===W0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===S1||n===M1||n===T1||n===w1)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===S1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===M1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===T1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===w1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===E1||n===A1||n===C1||n===R1||n===D1||n===N1||n===P1)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===E1||n===A1)return o===ui?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===C1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(n===R1)return s.COMPRESSED_R11_EAC;if(n===D1)return s.COMPRESSED_SIGNED_R11_EAC;if(n===N1)return s.COMPRESSED_RG11_EAC;if(n===P1)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===L1||n===U1||n===I1||n===O1||n===F1||n===k1||n===B1||n===z1||n===V1||n===G1||n===H1||n===j1||n===W1||n===X1)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===L1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===U1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===I1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===O1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===F1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===k1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===B1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===z1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===V1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===G1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===H1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===j1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===W1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===X1)return o===ui?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Y1||n===q1||n===Z1)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Y1)return o===ui?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===q1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Z1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===K1||n===Q1||n===J1||n===$1)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===K1)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Q1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===J1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===$1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Tm?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const xX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_X=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new tA(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ca({vertexShader:xX,fragmentShader:_X,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pi(new Rl(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class SX extends Ec{constructor(e,t){super();const n=this;let i=null,s=1,o=null,l="local-floor",u=1,h=null,m=null,g=null,v=null,_=null,b=null;const w=typeof XRWebGLBinding<"u",S=new bX,T={},A=t.getContextAttributes();let D=null,N=null;const L=[],I=[],k=new ft;let R=null;const U=new Ar;U.viewport=new hi;const H=new Ar;H.viewport=new hi;const Y=[U,H],X=new tO;let q=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let pe=L[re];return pe===void 0&&(pe=new H_,L[re]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(re){let pe=L[re];return pe===void 0&&(pe=new H_,L[re]=pe),pe.getGripSpace()},this.getHand=function(re){let pe=L[re];return pe===void 0&&(pe=new H_,L[re]=pe),pe.getHandSpace()};function ie(re){const pe=I.indexOf(re.inputSource);if(pe===-1)return;const Se=L[pe];Se!==void 0&&(Se.update(re.inputSource,re.frame,h||o),Se.dispatchEvent({type:re.type,data:re.inputSource}))}function j(){i.removeEventListener("select",ie),i.removeEventListener("selectstart",ie),i.removeEventListener("selectend",ie),i.removeEventListener("squeeze",ie),i.removeEventListener("squeezestart",ie),i.removeEventListener("squeezeend",ie),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",J);for(let re=0;re<L.length;re++){const pe=I[re];pe!==null&&(I[re]=null,L[re].disconnect(pe))}q=null,Q=null,S.reset();for(const re in T)delete T[re];e.setRenderTarget(D),_=null,v=null,g=null,i=null,N=null,ve.stop(),n.isPresenting=!1,e.setPixelRatio(R),e.setSize(k.width,k.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,n.isPresenting===!0&&Bt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){l=re,n.isPresenting===!0&&Bt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(re){h=re},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g===null&&w&&(g=new XRWebGLBinding(i,t)),g},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(D=e.getRenderTarget(),i.addEventListener("select",ie),i.addEventListener("selectstart",ie),i.addEventListener("selectend",ie),i.addEventListener("squeeze",ie),i.addEventListener("squeezestart",ie),i.addEventListener("squeezeend",ie),i.addEventListener("end",j),i.addEventListener("inputsourceschange",J),A.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(k),w&&"createProjectionLayer"in XRWebGLBinding.prototype){let Se=null,je=null,ct=null;A.depth&&(ct=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=A.stencil?Tf:wc,je=A.stencil?Tm:lo);const Je={colorFormat:t.RGBA8,depthFormat:ct,scaleFactor:s};g=this.getBinding(),v=g.createProjectionLayer(Je),i.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),N=new la(v.textureWidth,v.textureHeight,{format:Rr,type:ns,depthTexture:new Am(v.textureWidth,v.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Se={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(i,t,Se),i.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),N=new la(_.framebufferWidth,_.framebufferHeight,{format:Rr,type:ns,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await i.requestReferenceSpace(l),ve.setContext(i),ve.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function J(re){for(let pe=0;pe<re.removed.length;pe++){const Se=re.removed[pe],je=I.indexOf(Se);je>=0&&(I[je]=null,L[je].disconnect(Se))}for(let pe=0;pe<re.added.length;pe++){const Se=re.added[pe];let je=I.indexOf(Se);if(je===-1){for(let Je=0;Je<L.length;Je++)if(Je>=I.length){I.push(Se),je=Je;break}else if(I[Je]===null){I[Je]=Se,je=Je;break}if(je===-1)break}const ct=L[je];ct&&ct.connect(Se)}}const de=new se,le=new se;function ce(re,pe,Se){de.setFromMatrixPosition(pe.matrixWorld),le.setFromMatrixPosition(Se.matrixWorld);const je=de.distanceTo(le),ct=pe.projectionMatrix.elements,Je=Se.projectionMatrix.elements,nt=ct[14]/(ct[10]-1),Mt=ct[14]/(ct[10]+1),Ue=(ct[9]+1)/ct[5],Ve=(ct[9]-1)/ct[5],Oe=(ct[8]-1)/ct[0],it=(Je[8]+1)/Je[0],ee=nt*Oe,ut=nt*it,Ye=je/(-Oe+it),De=Ye*-Oe;if(pe.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(De),re.translateZ(Ye),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert(),ct[10]===-1)re.projectionMatrix.copy(pe.projectionMatrix),re.projectionMatrixInverse.copy(pe.projectionMatrixInverse);else{const We=nt+Ye,K=Mt+Ye,V=ee-De,ue=ut+(je-De),Ie=Ue*Mt/K*We,Ce=Ve*Mt/K*We;re.projectionMatrix.makePerspective(V,ue,Ie,Ce,We,K),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}}function z(re,pe){pe===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(pe.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;let pe=re.near,Se=re.far;S.texture!==null&&(S.depthNear>0&&(pe=S.depthNear),S.depthFar>0&&(Se=S.depthFar)),X.near=H.near=U.near=pe,X.far=H.far=U.far=Se,(q!==X.near||Q!==X.far)&&(i.updateRenderState({depthNear:X.near,depthFar:X.far}),q=X.near,Q=X.far),X.layers.mask=re.layers.mask|6,U.layers.mask=X.layers.mask&-5,H.layers.mask=X.layers.mask&-3;const je=re.parent,ct=X.cameras;z(X,je);for(let Je=0;Je<ct.length;Je++)z(ct[Je],je);ct.length===2?ce(X,U,H):X.projectionMatrix.copy(U.projectionMatrix),Z(re,X,je)};function Z(re,pe,Se){Se===null?re.matrix.copy(pe.matrixWorld):(re.matrix.copy(Se.matrixWorld),re.matrix.invert(),re.matrix.multiply(pe.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(pe.projectionMatrix),re.projectionMatrixInverse.copy(pe.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=wm*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return X},this.getFoveation=function(){if(!(v===null&&_===null))return u},this.setFoveation=function(re){u=re,v!==null&&(v.fixedFoveation=re),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=re)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(X)},this.getCameraTexture=function(re){return T[re]};let ae=null;function fe(re,pe){if(m=pe.getViewerPose(h||o),b=pe,m!==null){const Se=m.views;_!==null&&(e.setRenderTargetFramebuffer(N,_.framebuffer),e.setRenderTarget(N));let je=!1;Se.length!==X.cameras.length&&(X.cameras.length=0,je=!0);for(let Mt=0;Mt<Se.length;Mt++){const Ue=Se[Mt];let Ve=null;if(_!==null)Ve=_.getViewport(Ue);else{const it=g.getViewSubImage(v,Ue);Ve=it.viewport,Mt===0&&(e.setRenderTargetTextures(N,it.colorTexture,it.depthStencilTexture),e.setRenderTarget(N))}let Oe=Y[Mt];Oe===void 0&&(Oe=new Ar,Oe.layers.enable(Mt),Oe.viewport=new hi,Y[Mt]=Oe),Oe.matrix.fromArray(Ue.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(Ue.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),Mt===0&&(X.matrix.copy(Oe.matrix),X.matrix.decompose(X.position,X.quaternion,X.scale)),je===!0&&X.cameras.push(Oe)}const ct=i.enabledFeatures;if(ct&&ct.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&w){g=n.getBinding();const Mt=g.getDepthInformation(Se[0]);Mt&&Mt.isValid&&Mt.texture&&S.init(Mt,i.renderState)}if(ct&&ct.includes("camera-access")&&w){e.state.unbindTexture(),g=n.getBinding();for(let Mt=0;Mt<Se.length;Mt++){const Ue=Se[Mt].camera;if(Ue){let Ve=T[Ue];Ve||(Ve=new tA,T[Ue]=Ve);const Oe=g.getCameraImage(Ue);Ve.sourceTexture=Oe}}}}for(let Se=0;Se<L.length;Se++){const je=I[Se],ct=L[Se];je!==null&&ct!==void 0&&ct.update(je,pe,h||o)}ae&&ae(re,pe),pe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:pe}),b=null}const ve=new lO;ve.setAnimationLoop(fe),this.setAnimationLoop=function(re){ae=re},this.dispose=function(){}}}const zh=new co,MX=new fn;function TX(r,e){function t(S,T){S.matrixAutoUpdate===!0&&S.updateMatrix(),T.value.copy(S.matrix)}function n(S,T){T.color.getRGB(S.fogColor.value,NI(r)),T.isFog?(S.fogNear.value=T.near,S.fogFar.value=T.far):T.isFogExp2&&(S.fogDensity.value=T.density)}function i(S,T,A,D,N){T.isMeshBasicMaterial?s(S,T):T.isMeshLambertMaterial?(s(S,T),T.envMap&&(S.envMapIntensity.value=T.envMapIntensity)):T.isMeshToonMaterial?(s(S,T),g(S,T)):T.isMeshPhongMaterial?(s(S,T),m(S,T),T.envMap&&(S.envMapIntensity.value=T.envMapIntensity)):T.isMeshStandardMaterial?(s(S,T),v(S,T),T.isMeshPhysicalMaterial&&_(S,T,N)):T.isMeshMatcapMaterial?(s(S,T),b(S,T)):T.isMeshDepthMaterial?s(S,T):T.isMeshDistanceMaterial?(s(S,T),w(S,T)):T.isMeshNormalMaterial?s(S,T):T.isLineBasicMaterial?(o(S,T),T.isLineDashedMaterial&&l(S,T)):T.isPointsMaterial?u(S,T,A,D):T.isSpriteMaterial?h(S,T):T.isShadowMaterial?(S.color.value.copy(T.color),S.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function s(S,T){S.opacity.value=T.opacity,T.color&&S.diffuse.value.copy(T.color),T.emissive&&S.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(S.map.value=T.map,t(T.map,S.mapTransform)),T.alphaMap&&(S.alphaMap.value=T.alphaMap,t(T.alphaMap,S.alphaMapTransform)),T.bumpMap&&(S.bumpMap.value=T.bumpMap,t(T.bumpMap,S.bumpMapTransform),S.bumpScale.value=T.bumpScale,T.side===zs&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,t(T.normalMap,S.normalMapTransform),S.normalScale.value.copy(T.normalScale),T.side===zs&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,t(T.displacementMap,S.displacementMapTransform),S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias),T.emissiveMap&&(S.emissiveMap.value=T.emissiveMap,t(T.emissiveMap,S.emissiveMapTransform)),T.specularMap&&(S.specularMap.value=T.specularMap,t(T.specularMap,S.specularMapTransform)),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest);const A=e.get(T),D=A.envMap,N=A.envMapRotation;D&&(S.envMap.value=D,zh.copy(N),zh.x*=-1,zh.y*=-1,zh.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(zh.y*=-1,zh.z*=-1),S.envMapRotation.value.setFromMatrix4(MX.makeRotationFromEuler(zh)),S.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=T.reflectivity,S.ior.value=T.ior,S.refractionRatio.value=T.refractionRatio),T.lightMap&&(S.lightMap.value=T.lightMap,S.lightMapIntensity.value=T.lightMapIntensity,t(T.lightMap,S.lightMapTransform)),T.aoMap&&(S.aoMap.value=T.aoMap,S.aoMapIntensity.value=T.aoMapIntensity,t(T.aoMap,S.aoMapTransform))}function o(S,T){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,T.map&&(S.map.value=T.map,t(T.map,S.mapTransform))}function l(S,T){S.dashSize.value=T.dashSize,S.totalSize.value=T.dashSize+T.gapSize,S.scale.value=T.scale}function u(S,T,A,D){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,S.size.value=T.size*A,S.scale.value=D*.5,T.map&&(S.map.value=T.map,t(T.map,S.uvTransform)),T.alphaMap&&(S.alphaMap.value=T.alphaMap,t(T.alphaMap,S.alphaMapTransform)),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest)}function h(S,T){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,S.rotation.value=T.rotation,T.map&&(S.map.value=T.map,t(T.map,S.mapTransform)),T.alphaMap&&(S.alphaMap.value=T.alphaMap,t(T.alphaMap,S.alphaMapTransform)),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest)}function m(S,T){S.specular.value.copy(T.specular),S.shininess.value=Math.max(T.shininess,1e-4)}function g(S,T){T.gradientMap&&(S.gradientMap.value=T.gradientMap)}function v(S,T){S.metalness.value=T.metalness,T.metalnessMap&&(S.metalnessMap.value=T.metalnessMap,t(T.metalnessMap,S.metalnessMapTransform)),S.roughness.value=T.roughness,T.roughnessMap&&(S.roughnessMap.value=T.roughnessMap,t(T.roughnessMap,S.roughnessMapTransform)),T.envMap&&(S.envMapIntensity.value=T.envMapIntensity)}function _(S,T,A){S.ior.value=T.ior,T.sheen>0&&(S.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),S.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(S.sheenColorMap.value=T.sheenColorMap,t(T.sheenColorMap,S.sheenColorMapTransform)),T.sheenRoughnessMap&&(S.sheenRoughnessMap.value=T.sheenRoughnessMap,t(T.sheenRoughnessMap,S.sheenRoughnessMapTransform))),T.clearcoat>0&&(S.clearcoat.value=T.clearcoat,S.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(S.clearcoatMap.value=T.clearcoatMap,t(T.clearcoatMap,S.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,t(T.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(S.clearcoatNormalMap.value=T.clearcoatNormalMap,t(T.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===zs&&S.clearcoatNormalScale.value.negate())),T.dispersion>0&&(S.dispersion.value=T.dispersion),T.iridescence>0&&(S.iridescence.value=T.iridescence,S.iridescenceIOR.value=T.iridescenceIOR,S.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(S.iridescenceMap.value=T.iridescenceMap,t(T.iridescenceMap,S.iridescenceMapTransform)),T.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=T.iridescenceThicknessMap,t(T.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),T.transmission>0&&(S.transmission.value=T.transmission,S.transmissionSamplerMap.value=A.texture,S.transmissionSamplerSize.value.set(A.width,A.height),T.transmissionMap&&(S.transmissionMap.value=T.transmissionMap,t(T.transmissionMap,S.transmissionMapTransform)),S.thickness.value=T.thickness,T.thicknessMap&&(S.thicknessMap.value=T.thicknessMap,t(T.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=T.attenuationDistance,S.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(S.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(S.anisotropyMap.value=T.anisotropyMap,t(T.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=T.specularIntensity,S.specularColor.value.copy(T.specularColor),T.specularColorMap&&(S.specularColorMap.value=T.specularColorMap,t(T.specularColorMap,S.specularColorMapTransform)),T.specularIntensityMap&&(S.specularIntensityMap.value=T.specularIntensityMap,t(T.specularIntensityMap,S.specularIntensityMapTransform))}function b(S,T){T.matcap&&(S.matcap.value=T.matcap)}function w(S,T){const A=e.get(T).light;S.referencePosition.value.setFromMatrixPosition(A.matrixWorld),S.nearDistance.value=A.shadow.camera.near,S.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function wX(r,e,t,n){let i={},s={},o=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function u(A,D){const N=D.program;n.uniformBlockBinding(A,N)}function h(A,D){let N=i[A.id];N===void 0&&(b(A),N=m(A),i[A.id]=N,A.addEventListener("dispose",S));const L=D.program;n.updateUBOMapping(A,L);const I=e.render.frame;s[A.id]!==I&&(v(A),s[A.id]=I)}function m(A){const D=g();A.__bindingPointIndex=D;const N=r.createBuffer(),L=A.__size,I=A.usage;return r.bindBuffer(r.UNIFORM_BUFFER,N),r.bufferData(r.UNIFORM_BUFFER,L,I),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,D,N),N}function g(){for(let A=0;A<l;A++)if(o.indexOf(A)===-1)return o.push(A),A;return $t("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(A){const D=i[A.id],N=A.uniforms,L=A.__cache;r.bindBuffer(r.UNIFORM_BUFFER,D);for(let I=0,k=N.length;I<k;I++){const R=Array.isArray(N[I])?N[I]:[N[I]];for(let U=0,H=R.length;U<H;U++){const Y=R[U];if(_(Y,I,U,L)===!0){const X=Y.__offset,q=Array.isArray(Y.value)?Y.value:[Y.value];let Q=0;for(let ie=0;ie<q.length;ie++){const j=q[ie],J=w(j);typeof j=="number"||typeof j=="boolean"?(Y.__data[0]=j,r.bufferSubData(r.UNIFORM_BUFFER,X+Q,Y.__data)):j.isMatrix3?(Y.__data[0]=j.elements[0],Y.__data[1]=j.elements[1],Y.__data[2]=j.elements[2],Y.__data[3]=0,Y.__data[4]=j.elements[3],Y.__data[5]=j.elements[4],Y.__data[6]=j.elements[5],Y.__data[7]=0,Y.__data[8]=j.elements[6],Y.__data[9]=j.elements[7],Y.__data[10]=j.elements[8],Y.__data[11]=0):(j.toArray(Y.__data,Q),Q+=J.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,X,Y.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function _(A,D,N,L){const I=A.value,k=D+"_"+N;if(L[k]===void 0)return typeof I=="number"||typeof I=="boolean"?L[k]=I:L[k]=I.clone(),!0;{const R=L[k];if(typeof I=="number"||typeof I=="boolean"){if(R!==I)return L[k]=I,!0}else if(R.equals(I)===!1)return R.copy(I),!0}return!1}function b(A){const D=A.uniforms;let N=0;const L=16;for(let k=0,R=D.length;k<R;k++){const U=Array.isArray(D[k])?D[k]:[D[k]];for(let H=0,Y=U.length;H<Y;H++){const X=U[H],q=Array.isArray(X.value)?X.value:[X.value];for(let Q=0,ie=q.length;Q<ie;Q++){const j=q[Q],J=w(j),de=N%L,le=de%J.boundary,ce=de+le;N+=le,ce!==0&&L-ce<J.storage&&(N+=L-ce),X.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=N,N+=J.storage}}}const I=N%L;return I>0&&(N+=L-I),A.__size=N,A.__cache={},this}function w(A){const D={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(D.boundary=4,D.storage=4):A.isVector2?(D.boundary=8,D.storage=8):A.isVector3||A.isColor?(D.boundary=16,D.storage=12):A.isVector4?(D.boundary=16,D.storage=16):A.isMatrix3?(D.boundary=48,D.storage=48):A.isMatrix4?(D.boundary=64,D.storage=64):A.isTexture?Bt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Bt("WebGLRenderer: Unsupported uniform value type.",A),D}function S(A){const D=A.target;D.removeEventListener("dispose",S);const N=o.indexOf(D.__bindingPointIndex);o.splice(N,1),r.deleteBuffer(i[D.id]),delete i[D.id],delete s[D.id]}function T(){for(const A in i)r.deleteBuffer(i[A]);o=[],i={},s={}}return{bind:u,update:h,dispose:T}}const EX=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let dc=null;function AX(){return dc===null&&(dc=new Zo(EX,16,16,pd,yr),dc.name="DFG_LUT",dc.minFilter=Gn,dc.magFilter=Gn,dc.wrapS=vr,dc.wrapT=vr,dc.generateMipmaps=!1,dc.needsUpdate=!0),dc}class TA{constructor(e={}){const{canvas:t=sI(),context:n=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:v=!1,outputBufferType:_=ns}=e;this.isWebGLRenderer=!0;let b;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=n.getContextAttributes().alpha}else b=o;const w=_,S=new Set([Sb,bb,zv]),T=new Set([ns,lo,Mm,Tm,xb,_b]),A=new Uint32Array(4),D=new Int32Array(4);let N=null,L=null;const I=[],k=[];let R=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=qo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const U=this;let H=!1;this._outputColorSpace=xs;let Y=0,X=0,q=null,Q=-1,ie=null;const j=new hi,J=new hi;let de=null;const le=new Vt(0);let ce=0,z=t.width,Z=t.height,ae=1,fe=null,ve=null;const re=new hi(0,0,z,Z),pe=new hi(0,0,z,Z);let Se=!1;const je=new Om;let ct=!1,Je=!1;const nt=new fn,Mt=new se,Ue=new hi,Ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Oe=!1;function it(){return q===null?ae:1}let ee=n;function ut(G,me){return t.getContext(G,me)}try{const G={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Iv}`),t.addEventListener("webglcontextlost",bt,!1),t.addEventListener("webglcontextrestored",Ot,!1),t.addEventListener("webglcontextcreationerror",It,!1),ee===null){const me="webgl2";if(ee=ut(me,G),ee===null)throw ut(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw $t("WebGLRenderer: "+G.message),G}let Ye,De,We,K,V,ue,Ie,Ce,Ee,st,at,wt,Lt,Ge,Fe,tt,oe,Ae,ht,he,_e,$e,Rt;function rt(){Ye=new Rj(ee),Ye.init(),_e=new dO(ee,Ye),De=new bj(ee,Ye,e,_e),We=new vX(ee,Ye),De.reversedDepthBuffer&&v&&We.buffers.depth.setReversed(!0),K=new Pj(ee),V=new iX,ue=new yX(ee,Ye,We,V,De,_e,K),Ie=new Cj(U),Ce=new FH(ee),$e=new xj(ee,Ce),Ee=new Dj(ee,Ce,K,$e),st=new Uj(ee,Ee,Ce,$e,K),Ae=new Lj(ee,De,ue),Fe=new Sj(V),at=new nX(U,Ie,Ye,De,$e,Fe),wt=new TX(U,V),Lt=new sX,Ge=new fX(Ye),oe=new yj(U,Ie,We,st,b,u),tt=new gX(U,st,De),Rt=new wX(ee,K,De,We),ht=new _j(ee,Ye,K),he=new Nj(ee,Ye,K),K.programs=at.programs,U.capabilities=De,U.extensions=Ye,U.properties=V,U.renderLists=Lt,U.shadowMap=tt,U.state=We,U.info=K}rt(),w!==ns&&(R=new Oj(w,t.width,t.height,i,s));const Ne=new SX(U,ee);this.xr=Ne,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const G=Ye.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Ye.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(G){G!==void 0&&(ae=G,this.setSize(z,Z,!1))},this.getSize=function(G){return G.set(z,Z)},this.setSize=function(G,me,Te=!0){if(Ne.isPresenting){Bt("WebGLRenderer: Can't change size while VR device is presenting.");return}z=G,Z=me,t.width=Math.floor(G*ae),t.height=Math.floor(me*ae),Te===!0&&(t.style.width=G+"px",t.style.height=me+"px"),R!==null&&R.setSize(t.width,t.height),this.setViewport(0,0,G,me)},this.getDrawingBufferSize=function(G){return G.set(z*ae,Z*ae).floor()},this.setDrawingBufferSize=function(G,me,Te){z=G,Z=me,ae=Te,t.width=Math.floor(G*Te),t.height=Math.floor(me*Te),this.setViewport(0,0,G,me)},this.setEffects=function(G){if(w===ns){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(G){for(let me=0;me<G.length;me++)if(G[me].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}R.setEffects(G||[])},this.getCurrentViewport=function(G){return G.copy(j)},this.getViewport=function(G){return G.copy(re)},this.setViewport=function(G,me,Te,be){G.isVector4?re.set(G.x,G.y,G.z,G.w):re.set(G,me,Te,be),We.viewport(j.copy(re).multiplyScalar(ae).round())},this.getScissor=function(G){return G.copy(pe)},this.setScissor=function(G,me,Te,be){G.isVector4?pe.set(G.x,G.y,G.z,G.w):pe.set(G,me,Te,be),We.scissor(J.copy(pe).multiplyScalar(ae).round())},this.getScissorTest=function(){return Se},this.setScissorTest=function(G){We.setScissorTest(Se=G)},this.setOpaqueSort=function(G){fe=G},this.setTransparentSort=function(G){ve=G},this.getClearColor=function(G){return G.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor(...arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha(...arguments)},this.clear=function(G=!0,me=!0,Te=!0){let be=0;if(G){let Me=!1;if(q!==null){const ot=q.texture.format;Me=S.has(ot)}if(Me){const ot=q.texture.type,mt=T.has(ot),gt=oe.getClearColor(),vt=oe.getClearAlpha(),kt=gt.r,Ft=gt.g,Zt=gt.b;mt?(A[0]=kt,A[1]=Ft,A[2]=Zt,A[3]=vt,ee.clearBufferuiv(ee.COLOR,0,A)):(D[0]=kt,D[1]=Ft,D[2]=Zt,D[3]=vt,ee.clearBufferiv(ee.COLOR,0,D))}else be|=ee.COLOR_BUFFER_BIT}me&&(be|=ee.DEPTH_BUFFER_BIT),Te&&(be|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),be!==0&&ee.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",bt,!1),t.removeEventListener("webglcontextrestored",Ot,!1),t.removeEventListener("webglcontextcreationerror",It,!1),oe.dispose(),Lt.dispose(),Ge.dispose(),V.dispose(),Ie.dispose(),st.dispose(),$e.dispose(),Rt.dispose(),at.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",Zi),Ne.removeEventListener("sessionend",Ti),pi.stop()};function bt(G){G.preventDefault(),vv("WebGLRenderer: Context Lost."),H=!0}function Ot(){vv("WebGLRenderer: Context Restored."),H=!1;const G=K.autoReset,me=tt.enabled,Te=tt.autoUpdate,be=tt.needsUpdate,Me=tt.type;rt(),K.autoReset=G,tt.enabled=me,tt.autoUpdate=Te,tt.needsUpdate=be,tt.type=Me}function It(G){$t("WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function Ht(G){const me=G.target;me.removeEventListener("dispose",Ht),Sn(me)}function Sn(G){Dn(G),V.remove(G)}function Dn(G){const me=V.get(G).programs;me!==void 0&&(me.forEach(function(Te){at.releaseProgram(Te)}),G.isShaderMaterial&&at.releaseShaderCache(G))}this.renderBufferDirect=function(G,me,Te,be,Me,ot){me===null&&(me=Ve);const mt=Me.isMesh&&Me.matrixWorld.determinant()<0,gt=Ke(G,me,Te,be,Me);We.setMaterial(be,mt);let vt=Te.index,kt=1;if(be.wireframe===!0){if(vt=Ee.getWireframeAttribute(Te),vt===void 0)return;kt=2}const Ft=Te.drawRange,Zt=Te.attributes.position;let Et=Ft.start*kt,Xt=(Ft.start+Ft.count)*kt;ot!==null&&(Et=Math.max(Et,ot.start*kt),Xt=Math.min(Xt,(ot.start+ot.count)*kt)),vt!==null?(Et=Math.max(Et,0),Xt=Math.min(Xt,vt.count)):Zt!=null&&(Et=Math.max(Et,0),Xt=Math.min(Xt,Zt.count));const mn=Xt-Et;if(mn<0||mn===1/0)return;$e.setup(Me,be,gt,Te,vt);let Fn,en=ht;if(vt!==null&&(Fn=Ce.get(vt),en=he,en.setIndex(Fn)),Me.isMesh)be.wireframe===!0?(We.setLineWidth(be.wireframeLinewidth*it()),en.setMode(ee.LINES)):en.setMode(ee.TRIANGLES);else if(Me.isLine){let jt=be.linewidth;jt===void 0&&(jt=1),We.setLineWidth(jt*it()),Me.isLineSegments?en.setMode(ee.LINES):Me.isLineLoop?en.setMode(ee.LINE_LOOP):en.setMode(ee.LINE_STRIP)}else Me.isPoints?en.setMode(ee.POINTS):Me.isSprite&&en.setMode(ee.TRIANGLES);if(Me.isBatchedMesh)if(Me._multiDrawInstances!==null)yv("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),en.renderMultiDrawInstances(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount,Me._multiDrawInstances);else if(Ye.get("WEBGL_multi_draw"))en.renderMultiDraw(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount);else{const jt=Me._multiDrawStarts,xt=Me._multiDrawCounts,cn=Me._multiDrawCount,Nt=vt?Ce.get(vt).bytesPerElement:1,Yn=V.get(be).currentProgram.getUniforms();for(let ai=0;ai<cn;ai++)Yn.setValue(ee,"_gl_DrawID",ai),en.render(jt[ai]/Nt,xt[ai])}else if(Me.isInstancedMesh)en.renderInstances(Et,mn,Me.count);else if(Te.isInstancedBufferGeometry){const jt=Te._maxInstanceCount!==void 0?Te._maxInstanceCount:1/0,xt=Math.min(Te.instanceCount,jt);en.renderInstances(Et,mn,xt)}else en.render(Et,mn)};function Qn(G,me,Te){G.transparent===!0&&G.side===Go&&G.forceSinglePass===!1?(G.side=zs,G.needsUpdate=!0,ge(G,me,Te),G.side=Mu,G.needsUpdate=!0,ge(G,me,Te),G.side=Go):ge(G,me,Te)}this.compile=function(G,me,Te=null){Te===null&&(Te=G),L=Ge.get(Te),L.init(me),k.push(L),Te.traverseVisible(function(Me){Me.isLight&&Me.layers.test(me.layers)&&(L.pushLight(Me),Me.castShadow&&L.pushShadow(Me))}),G!==Te&&G.traverseVisible(function(Me){Me.isLight&&Me.layers.test(me.layers)&&(L.pushLight(Me),Me.castShadow&&L.pushShadow(Me))}),L.setupLights();const be=new Set;return G.traverse(function(Me){if(!(Me.isMesh||Me.isPoints||Me.isLine||Me.isSprite))return;const ot=Me.material;if(ot)if(Array.isArray(ot))for(let mt=0;mt<ot.length;mt++){const gt=ot[mt];Qn(gt,Te,Me),be.add(gt)}else Qn(ot,Te,Me),be.add(ot)}),L=k.pop(),be},this.compileAsync=function(G,me,Te=null){const be=this.compile(G,me,Te);return new Promise(Me=>{function ot(){if(be.forEach(function(mt){V.get(mt).currentProgram.isReady()&&be.delete(mt)}),be.size===0){Me(G);return}setTimeout(ot,10)}Ye.get("KHR_parallel_shader_compile")!==null?ot():setTimeout(ot,10)})};let Li=null;function xr(G){Li&&Li(G)}function Zi(){pi.stop()}function Ti(){pi.start()}const pi=new lO;pi.setAnimationLoop(xr),typeof self<"u"&&pi.setContext(self),this.setAnimationLoop=function(G){Li=G,Ne.setAnimationLoop(G),G===null?pi.stop():pi.start()},Ne.addEventListener("sessionstart",Zi),Ne.addEventListener("sessionend",Ti),this.render=function(G,me){if(me!==void 0&&me.isCamera!==!0){$t("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;const Te=Ne.enabled===!0&&Ne.isPresenting===!0,be=R!==null&&(q===null||Te)&&R.begin(U,q);if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Ne.enabled===!0&&Ne.isPresenting===!0&&(R===null||R.isCompositing()===!1)&&(Ne.cameraAutoUpdate===!0&&Ne.updateCamera(me),me=Ne.getCamera()),G.isScene===!0&&G.onBeforeRender(U,G,me,q),L=Ge.get(G,k.length),L.init(me),k.push(L),nt.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),je.setFromProjectionMatrix(nt,no,me.reversedDepth),Je=this.localClippingEnabled,ct=Fe.init(this.clippingPlanes,Je),N=Lt.get(G,I.length),N.init(),I.push(N),Ne.enabled===!0&&Ne.isPresenting===!0){const mt=U.xr.getDepthSensingMesh();mt!==null&&Qt(mt,me,-1/0,U.sortObjects)}Qt(G,me,0,U.sortObjects),N.finish(),U.sortObjects===!0&&N.sort(fe,ve),Oe=Ne.enabled===!1||Ne.isPresenting===!1||Ne.hasDepthSensing()===!1,Oe&&oe.addToRenderList(N,G),this.info.render.frame++,ct===!0&&Fe.beginShadows();const Me=L.state.shadowsArray;if(tt.render(Me,G,me),ct===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(be&&R.hasRenderPass())===!1){const mt=N.opaque,gt=N.transmissive;if(L.setupLights(),me.isArrayCamera){const vt=me.cameras;if(gt.length>0)for(let kt=0,Ft=vt.length;kt<Ft;kt++){const Zt=vt[kt];Xn(mt,gt,G,Zt)}Oe&&oe.render(G);for(let kt=0,Ft=vt.length;kt<Ft;kt++){const Zt=vt[kt];Jn(N,G,Zt,Zt.viewport)}}else gt.length>0&&Xn(mt,gt,G,me),Oe&&oe.render(G),Jn(N,G,me)}q!==null&&X===0&&(ue.updateMultisampleRenderTarget(q),ue.updateRenderTargetMipmap(q)),be&&R.end(U),G.isScene===!0&&G.onAfterRender(U,G,me),$e.resetDefaultState(),Q=-1,ie=null,k.pop(),k.length>0?(L=k[k.length-1],ct===!0&&Fe.setGlobalState(U.clippingPlanes,L.state.camera)):L=null,I.pop(),I.length>0?N=I[I.length-1]:N=null};function Qt(G,me,Te,be){if(G.visible===!1)return;if(G.layers.test(me.layers)){if(G.isGroup)Te=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(me);else if(G.isLight)L.pushLight(G),G.castShadow&&L.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||je.intersectsSprite(G)){be&&Ue.setFromMatrixPosition(G.matrixWorld).applyMatrix4(nt);const mt=st.update(G),gt=G.material;gt.visible&&N.push(G,mt,gt,Te,Ue.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||je.intersectsObject(G))){const mt=st.update(G),gt=G.material;if(be&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),Ue.copy(G.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),Ue.copy(mt.boundingSphere.center)),Ue.applyMatrix4(G.matrixWorld).applyMatrix4(nt)),Array.isArray(gt)){const vt=mt.groups;for(let kt=0,Ft=vt.length;kt<Ft;kt++){const Zt=vt[kt],Et=gt[Zt.materialIndex];Et&&Et.visible&&N.push(G,mt,Et,Te,Ue.z,Zt)}}else gt.visible&&N.push(G,mt,gt,Te,Ue.z,null)}}const ot=G.children;for(let mt=0,gt=ot.length;mt<gt;mt++)Qt(ot[mt],me,Te,be)}function Jn(G,me,Te,be){const{opaque:Me,transmissive:ot,transparent:mt}=G;L.setupLightsView(Te),ct===!0&&Fe.setGlobalState(U.clippingPlanes,Te),be&&We.viewport(j.copy(be)),Me.length>0&&W(Me,me,Te),ot.length>0&&W(ot,me,Te),mt.length>0&&W(mt,me,Te),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function Xn(G,me,Te,be){if((Te.isScene===!0?Te.overrideMaterial:null)!==null)return;if(L.state.transmissionRenderTarget[be.id]===void 0){const Et=Ye.has("EXT_color_buffer_half_float")||Ye.has("EXT_color_buffer_float");L.state.transmissionRenderTarget[be.id]=new la(1,1,{generateMipmaps:!0,type:Et?yr:ns,minFilter:xc,samples:De.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wn.workingColorSpace})}const ot=L.state.transmissionRenderTarget[be.id],mt=be.viewport||j;ot.setSize(mt.z*U.transmissionResolutionScale,mt.w*U.transmissionResolutionScale);const gt=U.getRenderTarget(),vt=U.getActiveCubeFace(),kt=U.getActiveMipmapLevel();U.setRenderTarget(ot),U.getClearColor(le),ce=U.getClearAlpha(),ce<1&&U.setClearColor(16777215,.5),U.clear(),Oe&&oe.render(Te);const Ft=U.toneMapping;U.toneMapping=qo;const Zt=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),L.setupLightsView(be),ct===!0&&Fe.setGlobalState(U.clippingPlanes,be),W(G,Te,be),ue.updateMultisampleRenderTarget(ot),ue.updateRenderTargetMipmap(ot),Ye.has("WEBGL_multisampled_render_to_texture")===!1){let Et=!1;for(let Xt=0,mn=me.length;Xt<mn;Xt++){const Fn=me[Xt],{object:en,geometry:jt,material:xt,group:cn}=Fn;if(xt.side===Go&&en.layers.test(be.layers)){const Nt=xt.side;xt.side=zs,xt.needsUpdate=!0,ne(en,Te,be,jt,xt,cn),xt.side=Nt,xt.needsUpdate=!0,Et=!0}}Et===!0&&(ue.updateMultisampleRenderTarget(ot),ue.updateRenderTargetMipmap(ot))}U.setRenderTarget(gt,vt,kt),U.setClearColor(le,ce),Zt!==void 0&&(be.viewport=Zt),U.toneMapping=Ft}function W(G,me,Te){const be=me.isScene===!0?me.overrideMaterial:null;for(let Me=0,ot=G.length;Me<ot;Me++){const mt=G[Me],{object:gt,geometry:vt,group:kt}=mt;let Ft=mt.material;Ft.allowOverride===!0&&be!==null&&(Ft=be),gt.layers.test(Te.layers)&&ne(gt,me,Te,vt,Ft,kt)}}function ne(G,me,Te,be,Me,ot){G.onBeforeRender(U,me,Te,be,Me,ot),G.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),Me.onBeforeRender(U,me,Te,be,G,ot),Me.transparent===!0&&Me.side===Go&&Me.forceSinglePass===!1?(Me.side=zs,Me.needsUpdate=!0,U.renderBufferDirect(Te,me,be,Me,G,ot),Me.side=Mu,Me.needsUpdate=!0,U.renderBufferDirect(Te,me,be,Me,G,ot),Me.side=Go):U.renderBufferDirect(Te,me,be,Me,G,ot),G.onAfterRender(U,me,Te,be,Me,ot)}function ge(G,me,Te){me.isScene!==!0&&(me=Ve);const be=V.get(G),Me=L.state.lights,ot=L.state.shadowsArray,mt=Me.state.version,gt=at.getParameters(G,Me.state,ot,me,Te),vt=at.getProgramCacheKey(gt);let kt=be.programs;be.environment=G.isMeshStandardMaterial||G.isMeshLambertMaterial||G.isMeshPhongMaterial?me.environment:null,be.fog=me.fog;const Ft=G.isMeshStandardMaterial||G.isMeshLambertMaterial&&!G.envMap||G.isMeshPhongMaterial&&!G.envMap;be.envMap=Ie.get(G.envMap||be.environment,Ft),be.envMapRotation=be.environment!==null&&G.envMap===null?me.environmentRotation:G.envMapRotation,kt===void 0&&(G.addEventListener("dispose",Ht),kt=new Map,be.programs=kt);let Zt=kt.get(vt);if(Zt!==void 0){if(be.currentProgram===Zt&&be.lightsStateVersion===mt)return qe(G,gt),Zt}else gt.uniforms=at.getUniforms(G),G.onBeforeCompile(gt,U),Zt=at.acquireProgram(gt,vt),kt.set(vt,Zt),be.uniforms=gt.uniforms;const Et=be.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(Et.clippingPlanes=Fe.uniform),qe(G,gt),be.needsLights=yt(G),be.lightsStateVersion=mt,be.needsLights&&(Et.ambientLightColor.value=Me.state.ambient,Et.lightProbe.value=Me.state.probe,Et.directionalLights.value=Me.state.directional,Et.directionalLightShadows.value=Me.state.directionalShadow,Et.spotLights.value=Me.state.spot,Et.spotLightShadows.value=Me.state.spotShadow,Et.rectAreaLights.value=Me.state.rectArea,Et.ltc_1.value=Me.state.rectAreaLTC1,Et.ltc_2.value=Me.state.rectAreaLTC2,Et.pointLights.value=Me.state.point,Et.pointLightShadows.value=Me.state.pointShadow,Et.hemisphereLights.value=Me.state.hemi,Et.directionalShadowMatrix.value=Me.state.directionalShadowMatrix,Et.spotLightMatrix.value=Me.state.spotLightMatrix,Et.spotLightMap.value=Me.state.spotLightMap,Et.pointShadowMatrix.value=Me.state.pointShadowMatrix),be.currentProgram=Zt,be.uniformsList=null,Zt}function ke(G){if(G.uniformsList===null){const me=G.currentProgram.getUniforms();G.uniformsList=j_.seqWithValue(me.seq,G.uniforms)}return G.uniformsList}function qe(G,me){const Te=V.get(G);Te.outputColorSpace=me.outputColorSpace,Te.batching=me.batching,Te.batchingColor=me.batchingColor,Te.instancing=me.instancing,Te.instancingColor=me.instancingColor,Te.instancingMorph=me.instancingMorph,Te.skinning=me.skinning,Te.morphTargets=me.morphTargets,Te.morphNormals=me.morphNormals,Te.morphColors=me.morphColors,Te.morphTargetsCount=me.morphTargetsCount,Te.numClippingPlanes=me.numClippingPlanes,Te.numIntersection=me.numClipIntersection,Te.vertexAlphas=me.vertexAlphas,Te.vertexTangents=me.vertexTangents,Te.toneMapping=me.toneMapping}function Ke(G,me,Te,be,Me){me.isScene!==!0&&(me=Ve),ue.resetTextureUnits();const ot=me.fog,mt=be.isMeshStandardMaterial||be.isMeshLambertMaterial||be.isMeshPhongMaterial?me.environment:null,gt=q===null?U.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:Al,vt=be.isMeshStandardMaterial||be.isMeshLambertMaterial&&!be.envMap||be.isMeshPhongMaterial&&!be.envMap,kt=Ie.get(be.envMap||mt,vt),Ft=be.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,Zt=!!Te.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),Et=!!Te.morphAttributes.position,Xt=!!Te.morphAttributes.normal,mn=!!Te.morphAttributes.color;let Fn=qo;be.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(Fn=U.toneMapping);const en=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,jt=en!==void 0?en.length:0,xt=V.get(be),cn=L.state.lights;if(ct===!0&&(Je===!0||G!==ie)){const wi=G===ie&&be.id===Q;Fe.setState(be,G,wi)}let Nt=!1;be.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==cn.state.version||xt.outputColorSpace!==gt||Me.isBatchedMesh&&xt.batching===!1||!Me.isBatchedMesh&&xt.batching===!0||Me.isBatchedMesh&&xt.batchingColor===!0&&Me.colorTexture===null||Me.isBatchedMesh&&xt.batchingColor===!1&&Me.colorTexture!==null||Me.isInstancedMesh&&xt.instancing===!1||!Me.isInstancedMesh&&xt.instancing===!0||Me.isSkinnedMesh&&xt.skinning===!1||!Me.isSkinnedMesh&&xt.skinning===!0||Me.isInstancedMesh&&xt.instancingColor===!0&&Me.instanceColor===null||Me.isInstancedMesh&&xt.instancingColor===!1&&Me.instanceColor!==null||Me.isInstancedMesh&&xt.instancingMorph===!0&&Me.morphTexture===null||Me.isInstancedMesh&&xt.instancingMorph===!1&&Me.morphTexture!==null||xt.envMap!==kt||be.fog===!0&&xt.fog!==ot||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==Fe.numPlanes||xt.numIntersection!==Fe.numIntersection)||xt.vertexAlphas!==Ft||xt.vertexTangents!==Zt||xt.morphTargets!==Et||xt.morphNormals!==Xt||xt.morphColors!==mn||xt.toneMapping!==Fn||xt.morphTargetsCount!==jt)&&(Nt=!0):(Nt=!0,xt.__version=be.version);let Yn=xt.currentProgram;Nt===!0&&(Yn=ge(be,me,Me));let ai=!1,Cn=!1,oi=!1;const Ln=Yn.getUniforms(),fi=xt.uniforms;if(We.useProgram(Yn.program)&&(ai=!0,Cn=!0,oi=!0),be.id!==Q&&(Q=be.id,Cn=!0),ai||ie!==G){We.buffers.depth.getReversed()&&G.reversedDepth!==!0&&(G._reversedDepth=!0,G.updateProjectionMatrix()),Ln.setValue(ee,"projectionMatrix",G.projectionMatrix),Ln.setValue(ee,"viewMatrix",G.matrixWorldInverse);const as=Ln.map.cameraPosition;as!==void 0&&as.setValue(ee,Mt.setFromMatrixPosition(G.matrixWorld)),De.logarithmicDepthBuffer&&Ln.setValue(ee,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&Ln.setValue(ee,"isOrthographic",G.isOrthographicCamera===!0),ie!==G&&(ie=G,Cn=!0,oi=!0)}if(xt.needsLights&&(cn.state.directionalShadowMap.length>0&&Ln.setValue(ee,"directionalShadowMap",cn.state.directionalShadowMap,ue),cn.state.spotShadowMap.length>0&&Ln.setValue(ee,"spotShadowMap",cn.state.spotShadowMap,ue),cn.state.pointShadowMap.length>0&&Ln.setValue(ee,"pointShadowMap",cn.state.pointShadowMap,ue)),Me.isSkinnedMesh){Ln.setOptional(ee,Me,"bindMatrix"),Ln.setOptional(ee,Me,"bindMatrixInverse");const wi=Me.skeleton;wi&&(wi.boneTexture===null&&wi.computeBoneTexture(),Ln.setValue(ee,"boneTexture",wi.boneTexture,ue))}Me.isBatchedMesh&&(Ln.setOptional(ee,Me,"batchingTexture"),Ln.setValue(ee,"batchingTexture",Me._matricesTexture,ue),Ln.setOptional(ee,Me,"batchingIdTexture"),Ln.setValue(ee,"batchingIdTexture",Me._indirectTexture,ue),Ln.setOptional(ee,Me,"batchingColorTexture"),Me._colorsTexture!==null&&Ln.setValue(ee,"batchingColorTexture",Me._colorsTexture,ue));const lr=Te.morphAttributes;if((lr.position!==void 0||lr.normal!==void 0||lr.color!==void 0)&&Ae.update(Me,Te,Yn),(Cn||xt.receiveShadow!==Me.receiveShadow)&&(xt.receiveShadow=Me.receiveShadow,Ln.setValue(ee,"receiveShadow",Me.receiveShadow)),(be.isMeshStandardMaterial||be.isMeshLambertMaterial||be.isMeshPhongMaterial)&&be.envMap===null&&me.environment!==null&&(fi.envMapIntensity.value=me.environmentIntensity),fi.dfgLUT!==void 0&&(fi.dfgLUT.value=AX()),Cn&&(Ln.setValue(ee,"toneMappingExposure",U.toneMappingExposure),xt.needsLights&&St(fi,oi),ot&&be.fog===!0&&wt.refreshFogUniforms(fi,ot),wt.refreshMaterialUniforms(fi,be,ae,Z,L.state.transmissionRenderTarget[G.id]),j_.upload(ee,ke(xt),fi,ue)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(j_.upload(ee,ke(xt),fi,ue),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&Ln.setValue(ee,"center",Me.center),Ln.setValue(ee,"modelViewMatrix",Me.modelViewMatrix),Ln.setValue(ee,"normalMatrix",Me.normalMatrix),Ln.setValue(ee,"modelMatrix",Me.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){const wi=be.uniformsGroups;for(let as=0,Ss=wi.length;as<Ss;as++){const Gs=wi[as];Rt.update(Gs,Yn),Rt.bind(Gs,Yn)}}return Yn}function St(G,me){G.ambientLightColor.needsUpdate=me,G.lightProbe.needsUpdate=me,G.directionalLights.needsUpdate=me,G.directionalLightShadows.needsUpdate=me,G.pointLights.needsUpdate=me,G.pointLightShadows.needsUpdate=me,G.spotLights.needsUpdate=me,G.spotLightShadows.needsUpdate=me,G.rectAreaLights.needsUpdate=me,G.hemisphereLights.needsUpdate=me}function yt(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return q},this.setRenderTargetTextures=function(G,me,Te){const be=V.get(G);be.__autoAllocateDepthBuffer=G.resolveDepthBuffer===!1,be.__autoAllocateDepthBuffer===!1&&(be.__useRenderToTexture=!1),V.get(G.texture).__webglTexture=me,V.get(G.depthTexture).__webglTexture=be.__autoAllocateDepthBuffer?void 0:Te,be.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(G,me){const Te=V.get(G);Te.__webglFramebuffer=me,Te.__useDefaultFramebuffer=me===void 0};const At=ee.createFramebuffer();this.setRenderTarget=function(G,me=0,Te=0){q=G,Y=me,X=Te;let be=null,Me=!1,ot=!1;if(G){const gt=V.get(G);if(gt.__useDefaultFramebuffer!==void 0){We.bindFramebuffer(ee.FRAMEBUFFER,gt.__webglFramebuffer),j.copy(G.viewport),J.copy(G.scissor),de=G.scissorTest,We.viewport(j),We.scissor(J),We.setScissorTest(de),Q=-1;return}else if(gt.__webglFramebuffer===void 0)ue.setupRenderTarget(G);else if(gt.__hasExternalTextures)ue.rebindTextures(G,V.get(G.texture).__webglTexture,V.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const Ft=G.depthTexture;if(gt.__boundDepthTexture!==Ft){if(Ft!==null&&V.has(Ft)&&(G.width!==Ft.image.width||G.height!==Ft.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ue.setupDepthRenderbuffer(G)}}const vt=G.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(ot=!0);const kt=V.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(kt[me])?be=kt[me][Te]:be=kt[me],Me=!0):G.samples>0&&ue.useMultisampledRTT(G)===!1?be=V.get(G).__webglMultisampledFramebuffer:Array.isArray(kt)?be=kt[Te]:be=kt,j.copy(G.viewport),J.copy(G.scissor),de=G.scissorTest}else j.copy(re).multiplyScalar(ae).floor(),J.copy(pe).multiplyScalar(ae).floor(),de=Se;if(Te!==0&&(be=At),We.bindFramebuffer(ee.FRAMEBUFFER,be)&&We.drawBuffers(G,be),We.viewport(j),We.scissor(J),We.setScissorTest(de),Me){const gt=V.get(G.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+me,gt.__webglTexture,Te)}else if(ot){const gt=me;for(let vt=0;vt<G.textures.length;vt++){const kt=V.get(G.textures[vt]);ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0+vt,kt.__webglTexture,Te,gt)}}else if(G!==null&&Te!==0){const gt=V.get(G.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,gt.__webglTexture,Te)}Q=-1},this.readRenderTargetPixels=function(G,me,Te,be,Me,ot,mt,gt=0){if(!(G&&G.isWebGLRenderTarget)){$t("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=V.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&mt!==void 0&&(vt=vt[mt]),vt){We.bindFramebuffer(ee.FRAMEBUFFER,vt);try{const kt=G.textures[gt],Ft=kt.format,Zt=kt.type;if(G.textures.length>1&&ee.readBuffer(ee.COLOR_ATTACHMENT0+gt),!De.textureFormatReadable(Ft)){$t("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!De.textureTypeReadable(Zt)){$t("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=G.width-be&&Te>=0&&Te<=G.height-Me&&ee.readPixels(me,Te,be,Me,_e.convert(Ft),_e.convert(Zt),ot)}finally{const kt=q!==null?V.get(q).__webglFramebuffer:null;We.bindFramebuffer(ee.FRAMEBUFFER,kt)}}},this.readRenderTargetPixelsAsync=async function(G,me,Te,be,Me,ot,mt,gt=0){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=V.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&mt!==void 0&&(vt=vt[mt]),vt)if(me>=0&&me<=G.width-be&&Te>=0&&Te<=G.height-Me){We.bindFramebuffer(ee.FRAMEBUFFER,vt);const kt=G.textures[gt],Ft=kt.format,Zt=kt.type;if(G.textures.length>1&&ee.readBuffer(ee.COLOR_ATTACHMENT0+gt),!De.textureFormatReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!De.textureTypeReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Et=ee.createBuffer();ee.bindBuffer(ee.PIXEL_PACK_BUFFER,Et),ee.bufferData(ee.PIXEL_PACK_BUFFER,ot.byteLength,ee.STREAM_READ),ee.readPixels(me,Te,be,Me,_e.convert(Ft),_e.convert(Zt),0);const Xt=q!==null?V.get(q).__webglFramebuffer:null;We.bindFramebuffer(ee.FRAMEBUFFER,Xt);const mn=ee.fenceSync(ee.SYNC_GPU_COMMANDS_COMPLETE,0);return ee.flush(),await G8(ee,mn,4),ee.bindBuffer(ee.PIXEL_PACK_BUFFER,Et),ee.getBufferSubData(ee.PIXEL_PACK_BUFFER,0,ot),ee.deleteBuffer(Et),ee.deleteSync(mn),ot}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(G,me=null,Te=0){const be=Math.pow(2,-Te),Me=Math.floor(G.image.width*be),ot=Math.floor(G.image.height*be),mt=me!==null?me.x:0,gt=me!==null?me.y:0;ue.setTexture2D(G,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,Te,0,0,mt,gt,Me,ot),We.unbindTexture()};const Ct=ee.createFramebuffer(),Dt=ee.createFramebuffer();this.copyTextureToTexture=function(G,me,Te=null,be=null,Me=0,ot=0){let mt,gt,vt,kt,Ft,Zt,Et,Xt,mn;const Fn=G.isCompressedTexture?G.mipmaps[ot]:G.image;if(Te!==null)mt=Te.max.x-Te.min.x,gt=Te.max.y-Te.min.y,vt=Te.isBox3?Te.max.z-Te.min.z:1,kt=Te.min.x,Ft=Te.min.y,Zt=Te.isBox3?Te.min.z:0;else{const fi=Math.pow(2,-Me);mt=Math.floor(Fn.width*fi),gt=Math.floor(Fn.height*fi),G.isDataArrayTexture?vt=Fn.depth:G.isData3DTexture?vt=Math.floor(Fn.depth*fi):vt=1,kt=0,Ft=0,Zt=0}be!==null?(Et=be.x,Xt=be.y,mn=be.z):(Et=0,Xt=0,mn=0);const en=_e.convert(me.format),jt=_e.convert(me.type);let xt;me.isData3DTexture?(ue.setTexture3D(me,0),xt=ee.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?(ue.setTexture2DArray(me,0),xt=ee.TEXTURE_2D_ARRAY):(ue.setTexture2D(me,0),xt=ee.TEXTURE_2D),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,me.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,me.unpackAlignment);const cn=ee.getParameter(ee.UNPACK_ROW_LENGTH),Nt=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),Yn=ee.getParameter(ee.UNPACK_SKIP_PIXELS),ai=ee.getParameter(ee.UNPACK_SKIP_ROWS),Cn=ee.getParameter(ee.UNPACK_SKIP_IMAGES);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Fn.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Fn.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,kt),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,Ft),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,Zt);const oi=G.isDataArrayTexture||G.isData3DTexture,Ln=me.isDataArrayTexture||me.isData3DTexture;if(G.isDepthTexture){const fi=V.get(G),lr=V.get(me),wi=V.get(fi.__renderTarget),as=V.get(lr.__renderTarget);We.bindFramebuffer(ee.READ_FRAMEBUFFER,wi.__webglFramebuffer),We.bindFramebuffer(ee.DRAW_FRAMEBUFFER,as.__webglFramebuffer);for(let Ss=0;Ss<vt;Ss++)oi&&(ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,V.get(G).__webglTexture,Me,Zt+Ss),ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,V.get(me).__webglTexture,ot,mn+Ss)),ee.blitFramebuffer(kt,Ft,mt,gt,Et,Xt,mt,gt,ee.DEPTH_BUFFER_BIT,ee.NEAREST);We.bindFramebuffer(ee.READ_FRAMEBUFFER,null),We.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else if(Me!==0||G.isRenderTargetTexture||V.has(G)){const fi=V.get(G),lr=V.get(me);We.bindFramebuffer(ee.READ_FRAMEBUFFER,Ct),We.bindFramebuffer(ee.DRAW_FRAMEBUFFER,Dt);for(let wi=0;wi<vt;wi++)oi?ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,fi.__webglTexture,Me,Zt+wi):ee.framebufferTexture2D(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,fi.__webglTexture,Me),Ln?ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,lr.__webglTexture,ot,mn+wi):ee.framebufferTexture2D(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,lr.__webglTexture,ot),Me!==0?ee.blitFramebuffer(kt,Ft,mt,gt,Et,Xt,mt,gt,ee.COLOR_BUFFER_BIT,ee.NEAREST):Ln?ee.copyTexSubImage3D(xt,ot,Et,Xt,mn+wi,kt,Ft,mt,gt):ee.copyTexSubImage2D(xt,ot,Et,Xt,kt,Ft,mt,gt);We.bindFramebuffer(ee.READ_FRAMEBUFFER,null),We.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else Ln?G.isDataTexture||G.isData3DTexture?ee.texSubImage3D(xt,ot,Et,Xt,mn,mt,gt,vt,en,jt,Fn.data):me.isCompressedArrayTexture?ee.compressedTexSubImage3D(xt,ot,Et,Xt,mn,mt,gt,vt,en,Fn.data):ee.texSubImage3D(xt,ot,Et,Xt,mn,mt,gt,vt,en,jt,Fn):G.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,ot,Et,Xt,mt,gt,en,jt,Fn.data):G.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,ot,Et,Xt,Fn.width,Fn.height,en,Fn.data):ee.texSubImage2D(ee.TEXTURE_2D,ot,Et,Xt,mt,gt,en,jt,Fn);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,cn),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Nt),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,Yn),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,ai),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,Cn),ot===0&&me.generateMipmaps&&ee.generateMipmap(xt),We.unbindTexture()},this.initRenderTarget=function(G){V.get(G).__webglFramebuffer===void 0&&ue.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?ue.setTextureCube(G,0):G.isData3DTexture?ue.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ue.setTexture2DArray(G,0):ue.setTexture2D(G,0),We.unbindTexture()},this.resetState=function(){Y=0,X=0,q=null,We.reset(),$e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return no}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Wn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Wn._getUnpackColorSpace()}}const CX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Fv,AddEquation:xf,AddOperation:jU,AdditiveAnimationBlendMode:YE,AdditiveBlending:sw,AgXToneMapping:zE,AlphaFormat:WE,AlwaysCompare:iI,AlwaysDepth:g1,AlwaysStencilFunc:fw,AmbientLight:KI,AnimationAction:sO,AnimationClip:Tv,AnimationLoader:NG,AnimationMixer:sH,AnimationObjectGroup:iH,AnimationUtils:AG,ArcCurve:_I,ArrayCamera:tO,ArrowHelper:CH,AttachedBindMode:lw,Audio:iO,AudioAnalyser:YG,AudioContext:yA,AudioListener:jG,AudioLoader:zG,AxesHelper:RH,BackSide:zs,BasicDepthPacking:ZU,BasicShadowMap:TU,BatchedMesh:pI,BezierInterpolant:GI,Bone:$E,BooleanKeyframeTrack:Md,Box2:hH,Box3:is,Box3Helper:EH,BoxGeometry:Sd,BoxHelper:wH,BufferAttribute:_i,BufferGeometry:_n,BufferGeometryLoader:$I,ByteType:vb,Cache:_c,Camera:Zb,CameraHelper:TH,CanvasTexture:pw,CapsuleGeometry:Ub,CatmullRomCurve3:bI,CineonToneMapping:kE,CircleGeometry:Ib,ClampToEdgeWrapping:vr,Clock:aO,Color:Vt,ColorKeyframeTrack:dA,ColorManagement:Wn,Compatibility:F8,CompressedArrayTexture:XV,CompressedCubeTexture:YV,CompressedTexture:Lb,CompressedTextureLoader:PG,ConeGeometry:jv,ConstantAlphaFactor:VU,ConstantColorFactor:BU,Controls:NH,CubeCamera:eO,CubeDepthTexture:yI,CubeReflectionMapping:El,CubeRefractionMapping:If,CubeTexture:Gv,CubeTextureLoader:WI,CubeUVReflectionMapping:Im,CubicBezierCurve:iA,CubicBezierCurve3:SI,CubicInterpolant:zI,CullFaceBack:rw,CullFaceFront:MU,CullFaceFrontBack:Q6,CullFaceNone:SU,Curve:Cl,CurvePath:TI,CustomBlending:wU,CustomToneMapping:BE,CylinderGeometry:Hv,Cylindrical:fH,Data3DTexture:Ab,DataArrayTexture:Eb,DataTexture:Zo,DataTextureLoader:pA,DataUtils:ed,DecrementStencilOp:p8,DecrementWrapStencilOp:g8,DefaultLoadingManager:jI,DepthFormat:wc,DepthStencilFormat:Tf,DepthTexture:Am,DetachedBindMode:WU,DirectionalLight:ZI,DirectionalLightHelper:MH,DiscreteInterpolant:VI,DodecahedronGeometry:Ob,DoubleSide:Go,DstAlphaFactor:UU,DstColorFactor:OU,DynamicCopyUsage:N8,DynamicDrawUsage:w8,DynamicReadUsage:C8,EdgesGeometry:xI,EllipseCurve:Fb,EqualCompare:eI,EqualDepth:y1,EqualStencilFunc:_8,EquirectangularReflectionMapping:dm,EquirectangularRefractionMapping:z0,Euler:co,EventDispatcher:Ec,ExternalTexture:tA,ExtrudeGeometry:kb,FileLoader:so,Float16BufferAttribute:EV,Float32BufferAttribute:Wt,FloatType:qi,Fog:Rb,FogExp2:Cb,FramebufferTexture:WV,FrontSide:Mu,Frustum:Om,FrustumArray:Pb,GLBufferAttribute:uH,GLSL1:L8,GLSL3:hw,GreaterCompare:tI,GreaterDepth:_1,GreaterEqualCompare:wb,GreaterEqualDepth:x1,GreaterEqualStencilFunc:T8,GreaterStencilFunc:S8,GridHelper:bH,Group:om,HalfFloatType:yr,HemisphereLight:XI,HemisphereLightHelper:_H,IcosahedronGeometry:Wv,ImageBitmapLoader:BG,ImageLoader:wv,ImageUtils:oI,IncrementStencilOp:d8,IncrementWrapStencilOp:m8,InstancedBufferAttribute:vd,InstancedBufferGeometry:vA,InstancedInterleavedBuffer:cH,InstancedMesh:dI,Int16BufferAttribute:TV,Int32BufferAttribute:wV,Int8BufferAttribute:bV,IntType:kv,InterleavedBuffer:Db,InterleavedBufferAttribute:gd,Interpolant:Fm,InterpolateBezier:uw,InterpolateDiscrete:hv,InterpolateLinear:eb,InterpolateSmooth:G_,InterpolationSamplingMode:O8,InterpolationSamplingType:I8,InvertStencilOp:v8,KeepStencilOp:Xh,KeyframeTrack:Ko,LOD:fI,LatheGeometry:Bb,Layers:Em,LessCompare:$U,LessDepth:v1,LessEqualCompare:Tb,LessEqualDepth:hd,LessEqualStencilFunc:b8,LessStencilFunc:x8,Light:Gf,LightProbe:JI,Line:Ff,Line3:mH,LineBasicMaterial:ua,LineCurve:rA,LineCurve3:MI,LineDashedMaterial:kI,LineLoop:mI,LineSegments:Cc,LinearFilter:Gn,LinearInterpolant:hA,LinearMipMapLinearFilter:cw,LinearMipMapNearestFilter:t8,LinearMipmapLinearFilter:xc,LinearMipmapNearestFilter:V0,LinearSRGBColorSpace:Al,LinearToneMapping:OE,LinearTransfer:pv,Loader:fa,LoaderUtils:yw,LoadingManager:qb,LoopOnce:XU,LoopPingPong:qU,LoopRepeat:YU,MOUSE:jh,Material:Vs,MaterialBlending:J6,MaterialLoader:Kb,MathUtils:aV,Matrix2:MA,Matrix3:xn,Matrix4:fn,MaxEquation:RU,Mesh:Pi,MeshBasicMaterial:Ac,MeshDepthMaterial:Xb,MeshDistanceMaterial:Yb,MeshLambertMaterial:OI,MeshMatcapMaterial:FI,MeshNormalMaterial:II,MeshPhongMaterial:LI,MeshPhysicalMaterial:PI,MeshStandardMaterial:uA,MeshToonMaterial:UI,MinEquation:CU,MirroredRepeatWrapping:fv,MixOperation:HU,MultiplyBlending:ow,MultiplyOperation:Ov,NearestFilter:Cr,NearestMipMapLinearFilter:e8,NearestMipMapNearestFilter:$6,NearestMipmapLinearFilter:sm,NearestMipmapNearestFilter:GE,NeutralToneMapping:VE,NeverCompare:JU,NeverDepth:m1,NeverStencilFunc:y8,NoBlending:wl,NoColorSpace:vu,NoNormalPacking:l8,NoToneMapping:qo,NormalAnimationBlendMode:Mb,NormalBlending:ld,NormalGAPacking:u8,NormalRGPacking:c8,NotEqualCompare:nI,NotEqualDepth:b1,NotEqualStencilFunc:M8,NumberKeyframeTrack:Sv,Object3D:ei,ObjectLoader:FG,ObjectSpaceNormalMap:QU,OctahedronGeometry:Xv,OneFactor:NU,OneMinusConstantAlphaFactor:GU,OneMinusConstantColorFactor:zU,OneMinusDstAlphaFactor:IU,OneMinusDstColorFactor:FU,OneMinusSrcAlphaFactor:p1,OneMinusSrcColorFactor:LU,OrthographicCamera:Sc,PCFShadowMap:hm,PCFSoftShadowMap:B0,PMREMGenerator:Sw,Path:rb,PerspectiveCamera:Ar,Plane:gu,PlaneGeometry:Rl,PlaneHelper:AH,PointLight:qI,PointLightHelper:yH,Points:gI,PointsMaterial:eA,PolarGridHelper:SH,PolyhedronGeometry:Vf,PositionalAudio:XG,PropertyBinding:$n,PropertyMixer:rO,QuadraticBezierCurve:sA,QuadraticBezierCurve3:aA,Quaternion:bs,QuaternionKeyframeTrack:qv,QuaternionLinearInterpolant:HI,R11_EAC_Format:R1,RED_GREEN_RGTC2_Format:J1,RED_RGTC1_Format:K1,REVISION:Iv,RG11_EAC_Format:N1,RGBADepthPacking:KU,RGBAFormat:Rr,RGBAIntegerFormat:Sb,RGBA_ASTC_10x10_Format:j1,RGBA_ASTC_10x5_Format:V1,RGBA_ASTC_10x6_Format:G1,RGBA_ASTC_10x8_Format:H1,RGBA_ASTC_12x10_Format:W1,RGBA_ASTC_12x12_Format:X1,RGBA_ASTC_4x4_Format:L1,RGBA_ASTC_5x4_Format:U1,RGBA_ASTC_5x5_Format:I1,RGBA_ASTC_6x5_Format:O1,RGBA_ASTC_6x6_Format:F1,RGBA_ASTC_8x5_Format:k1,RGBA_ASTC_8x6_Format:B1,RGBA_ASTC_8x8_Format:z1,RGBA_BPTC_Format:Y1,RGBA_ETC2_EAC_Format:C1,RGBA_PVRTC_2BPPV1_Format:w1,RGBA_PVRTC_4BPPV1_Format:T1,RGBA_S3TC_DXT1_Format:H0,RGBA_S3TC_DXT3_Format:j0,RGBA_S3TC_DXT5_Format:W0,RGBDepthPacking:a8,RGBFormat:XE,RGBIntegerFormat:n8,RGB_BPTC_SIGNED_Format:q1,RGB_BPTC_UNSIGNED_Format:Z1,RGB_ETC1_Format:E1,RGB_ETC2_Format:A1,RGB_PVRTC_2BPPV1_Format:M1,RGB_PVRTC_4BPPV1_Format:S1,RGB_S3TC_DXT1_Format:G0,RGDepthPacking:o8,RGFormat:pd,RGIntegerFormat:bb,RawShaderMaterial:cA,Ray:bd,Raycaster:SA,RectAreaLight:QI,RedFormat:Bv,RedIntegerFormat:zv,ReinhardToneMapping:FE,RenderTarget:ZE,RenderTarget3D:aH,RepeatWrapping:dd,ReplaceStencilOp:h8,ReverseSubtractEquation:AU,RingGeometry:zb,SIGNED_R11_EAC_Format:D1,SIGNED_RED_GREEN_RGTC2_Format:$1,SIGNED_RED_RGTC1_Format:Q1,SIGNED_RG11_EAC_Format:P1,SRGBColorSpace:xs,SRGBTransfer:ui,Scene:Vv,ShaderChunk:En,ShaderLib:bl,ShaderMaterial:ca,ShadowMaterial:DI,Shape:ud,ShapeGeometry:Vb,ShapePath:DH,ShapeUtils:Sl,ShortType:yb,Skeleton:Nb,SkeletonHelper:vH,SkinnedMesh:hI,Source:wf,Sphere:rs,SphereGeometry:Yv,Spherical:_w,SphericalHarmonics3:gA,SplineCurve:oA,SpotLight:YI,SpotLightHelper:gH,Sprite:uI,SpriteMaterial:JE,SrcAlphaFactor:d1,SrcAlphaSaturateFactor:kU,SrcColorFactor:PU,StaticCopyUsage:D8,StaticDrawUsage:mv,StaticReadUsage:A8,StereoCamera:VG,StreamCopyUsage:P8,StreamDrawUsage:E8,StreamReadUsage:R8,StringKeyframeTrack:Td,SubtractEquation:EU,SubtractiveBlending:aw,TOUCH:Wh,TangentSpaceNormalMap:zf,TetrahedronGeometry:Gb,Texture:di,TextureLoader:LG,TextureUtils:OH,Timer:nO,TimestampQuery:U8,TorusGeometry:Hb,TorusKnotGeometry:jb,Triangle:Oa,TriangleFanDrawMode:s8,TriangleStripDrawMode:r8,TrianglesDrawMode:i8,TubeGeometry:Wb,UVMapping:Uf,Uint16BufferAttribute:KE,Uint32BufferAttribute:QE,Uint8BufferAttribute:SV,Uint8ClampedBufferAttribute:MV,Uniform:bA,UniformsGroup:lH,UniformsLib:zt,UniformsUtils:lA,UnsignedByteType:ns,UnsignedInt101111Type:jE,UnsignedInt248Type:Tm,UnsignedInt5999Type:HE,UnsignedIntType:lo,UnsignedShort4444Type:xb,UnsignedShort5551Type:_b,UnsignedShortType:Mm,VSMShadowMap:Qh,Vector2:ft,Vector3:se,Vector4:hi,VectorKeyframeTrack:Mv,VideoFrameTexture:jV,VideoTexture:vI,WebGL3DRenderTarget:fV,WebGLArrayRenderTarget:uV,WebGLCoordinateSystem:no,WebGLCubeRenderTarget:Jb,WebGLRenderTarget:la,WebGLRenderer:TA,WebGLUtils:dO,WebGPUCoordinateSystem:md,WebXRController:H_,WireframeGeometry:RI,WrapAroundEnding:dv,ZeroCurvatureEnding:Jh,ZeroFactor:DU,ZeroSlopeEnding:$h,ZeroStencilOp:f8,createCanvasElement:sI,error:$t,getConsoleFunction:V8,log:vv,setConsoleFunction:z8,warn:Bt,warnOnce:yv},Symbol.toStringTag,{value:"Module"}));var nT={exports:{}},iT={},rT={exports:{}},sT={};var qD;function RX(){if(qD)return sT;qD=1;var r=Rv();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,s=r.useLayoutEffect,o=r.useDebugValue;function l(g,v){var _=v(),b=n({inst:{value:_,getSnapshot:v}}),w=b[0].inst,S=b[1];return s(function(){w.value=_,w.getSnapshot=v,u(w)&&S({inst:w})},[g,_,v]),i(function(){return u(w)&&S({inst:w}),g(function(){u(w)&&S({inst:w})})},[g]),o(_),_}function u(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!t(g,_)}catch{return!0}}function h(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return sT.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:m,sT}var ZD;function DX(){return ZD||(ZD=1,rT.exports=RX()),rT.exports}var KD;function NX(){if(KD)return iT;KD=1;var r=Rv(),e=DX();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=r.useRef,o=r.useEffect,l=r.useMemo,u=r.useDebugValue;return iT.useSyncExternalStoreWithSelector=function(h,m,g,v,_){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=l(function(){function T(I){if(!A){if(A=!0,D=I,I=v(I),_!==void 0&&w.hasValue){var k=w.value;if(_(k,I))return N=k}return N=I}if(k=N,n(D,I))return k;var R=v(I);return _!==void 0&&_(k,R)?(D=I,k):(D=I,N=R)}var A=!1,D,N,L=g===void 0?null:g;return[function(){return T(m())},L===null?void 0:function(){return T(L())}]},[m,g,v,_]);var S=i(h,b[0],b[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),u(S),S},iT}var QD;function PX(){return QD||(QD=1,nT.exports=NX()),nT.exports}var LX=PX();const UX=Fw(LX),JD=r=>{let e;const t=new Set,n=(h,m)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const v=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,v))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=r(n,i,l);return l},IX=(r=>r?JD(r):JD),{useSyncExternalStoreWithSelector:OX}=UX,FX=r=>r;function kX(r,e=FX,t){const n=OX(r.subscribe,r.getState,r.getInitialState,e,t);return LN.useDebugValue(n),n}const $D=(r,e)=>{const t=IX(r),n=(i,s=e)=>kX(t,i,s);return Object.assign(n,t),n},pO=((r,e)=>r?$D(r,e):$D),BX=r=>typeof r=="object"&&typeof r.then=="function",nd=[];function mO(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function gO(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of nd)if(mO(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=nd.indexOf(i);s!==-1&&nd.splice(s,1)},promise:(BX(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(nd.push(i),!t)throw i.promise}const vO=(r,e,t)=>gO(r,e,!1,t),zX=(r,e,t)=>{gO(r,e,!0,t)},VX=r=>{if(r===void 0||r.length===0)nd.splice(0,nd.length);else{const e=nd.find(t=>mO(r,t.keys,t.equal));e&&e.remove()}};var ww=UN();const GX=Fw(ww);function wA(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=e?r.return:r.child;for(;n;){const i=wA(n,e,t);if(i)return i;n=e?null:n.sibling}}function yO(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const EA=yO(Re.createContext(null));class xO extends Re.Component{render(){return Re.createElement(EA.Provider,{value:this._reactInternals},this.props.children)}}function _O(){const r=Re.useContext(EA);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Re.useId();return Re.useMemo(()=>{for(const t of[r,r?.alternate]){if(!t)continue;const n=wA(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[r,e])}const HX=Symbol.for("react.context"),jX=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===HX;function WX(){const r=_O(),[e]=Re.useState(()=>new Map);e.clear();let t=r;for(;t;){const n=t.type;jX(n)&&n!==EA&&!e.has(n)&&e.set(n,Re.use(yO(n))),t=t.return}return e}function XX(){const r=WX();return Re.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>Re.createElement(e,null,Re.createElement(t.Provider,{...n,value:r.get(t)})),e=>Re.createElement(xO,{...e})),[r])}function bO(r){let e=r.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const SO=r=>r&&r.isOrthographicCamera,YX=r=>r&&r.hasOwnProperty("current"),qX=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),Zv=((r,e)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Re.useLayoutEffect:Re.useEffect;function AA(r){const e=Re.useRef(r);return Zv(()=>{e.current=r},[r]),e}function ZX(){const r=_O(),e=XX();return Re.useMemo(()=>({children:t})=>{const i=!!wA(r,!0,s=>s.type===Re.StrictMode)?Re.StrictMode:Re.Fragment;return F.jsx(i,{children:F.jsx(e,{children:t})})},[r,e])}function KX({set:r}){return Zv(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const QX=(r=>(r=class extends Re.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function MO(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}function Yp(r){var e;return(e=r.__r3f)==null?void 0:e.root.getState()}const Xi={obj:r=>r===Object(r)&&!Xi.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Xi.str(r)||Xi.num(r)||Xi.boo(r))return r===e;const s=Xi.obj(r);if(s&&n==="reference")return r===e;const o=Xi.arr(r);if(o&&t==="reference")return r===e;if((o||s)&&r===e)return!0;let l;for(l in r)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in i?e:r)if(!Xi.equ(r[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:r)if(r[l]!==e[l])return!1;if(Xi.und(l)){if(o&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function JX(r){const e={nodes:{},materials:{},meshes:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function $X(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const e in r){const t=r[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const TO=["children","key","ref"];function eY(r){const e={};for(const t in r)TO.includes(t)||(e[t]=r[t]);return e}function sb(r,e,t,n){const i=r;let s=i?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:eY(n),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=s)),s}function Ev(r,e){if(!e.includes("-"))return{root:r,key:e,target:r[e]};if(e in r)return{root:r,key:e,target:r[e]};let t=r;const n=e.split("-");for(const i of n){if(typeof t!="object"||t===null){if(t!==void 0){const s=n.slice(n.indexOf(i)).join("-");return{root:t,key:s,target:void 0}}return{root:r,key:e,target:void 0}}e=i,r=t,t=t[e]}return{root:r,key:e,target:t}}const eN=/-\d+$/;function ab(r,e){if(Xi.str(e.props.attach)){if(eN.test(e.props.attach)){const i=e.props.attach.replace(eN,""),{root:s,key:o}=Ev(r.object,i);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:n}=Ev(r.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Xi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(r.object,e.object))}function ob(r,e){if(Xi.str(e.props.attach)){const{root:t,key:n}=Ev(r.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[n]:t[n]=i}else e.previousAttach==null||e.previousAttach(r.object,e.object);delete e.previousAttach}const Ew=[...TO,"args","dispose","attach","object","onUpdate","dispose"],tN=new Map;function tY(r){let e=tN.get(r.constructor);try{e||(e=new r.constructor,tN.set(r.constructor,e))}catch{}return e}function nY(r,e){const t={};for(const n in e)if(!Ew.includes(n)&&!Xi.equ(e[n],r.props[n])){t[n]=e[n];for(const i in e)i.startsWith(`${n}-`)&&(t[i]=e[i])}for(const n in r.props){if(Ew.includes(n)||e.hasOwnProperty(n))continue;const{root:i,key:s}=Ev(r.object,n);if(i.constructor&&i.constructor.length===0){const o=tY(i);Xi.und(o)||(t[s]=o[s])}else t[s]=0}return t}const iY=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],rY=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function vc(r,e){var t;const n=r.__r3f,i=n&&bO(n).getState(),s=n?.eventCount;for(const l in e){let u=e[l];if(Ew.includes(l))continue;if(n&&rY.test(l)){typeof u=="function"?n.handlers[l]=u:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(u===void 0)continue;let{root:h,key:m,target:g}=Ev(r,l);if(g===void 0&&(typeof h!="object"||h===null))throw Error(`R3F: Cannot set "${l}". Ensure it is an object before setting "${m}".`);if(g instanceof Em&&u instanceof Em)g.mask=u.mask;else if(g instanceof Vt&&qX(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var o;h[m]=u,i&&!i.linear&&iY.includes(m)&&(o=h[m])!=null&&o.isTexture&&h[m].format===Rr&&h[m].type===ns&&(h[m].colorSpace=xs)}}if(n!=null&&n.parent&&i!=null&&i.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const l=n.object,u=i.internal.interaction.indexOf(l);u>-1&&i.internal.interaction.splice(u,1),n.eventCount&&l.raycast!==null&&i.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Bm(n),r}function Bm(r){var e;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const t=(e=r.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function wO(r,e){r.manual||(SO(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix())}const ia=r=>r?.isObject3D;function T_(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function EO(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function sY(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{EO(t.capturedMap,e,n,i)})}function aY(r){function e(u){const{internal:h}=r.getState(),m=u.offsetX-h.initialClick[0],g=u.offsetY-h.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(u){return u.filter(h=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=h.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(u,h){const m=r.getState(),g=new Set,v=[],_=h?h(m.internal.interaction):m.internal.interaction;for(let T=0;T<_.length;T++){const A=Yp(_[T]);A&&(A.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function b(T){const A=Yp(T);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var D;A.events.compute==null||A.events.compute(u,A,(D=A.previousRoot)==null?void 0:D.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(T,!0):[]}let w=_.flatMap(b).sort((T,A)=>{const D=Yp(T.object),N=Yp(A.object);return!D||!N?T.distance-A.distance:N.events.priority-D.events.priority||T.distance-A.distance}).filter(T=>{const A=T_(T);return g.has(A)?!1:(g.add(A),!0)});m.events.filter&&(w=m.events.filter(w,m));for(const T of w){let A=T.object;for(;A;){var S;(S=A.__r3f)!=null&&S.eventCount&&v.push({...T,eventObject:A}),A=A.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let T of m.internal.capturedMap.get(u.pointerId).values())g.has(T_(T.intersection))||v.push(T.intersection);return v}function i(u,h,m,g){if(u.length){const v={stopped:!1};for(const _ of u){let b=Yp(_.object);if(b||_.object.traverseAncestors(w=>{const S=Yp(w);if(S)return b=S,!1}),b){const{raycaster:w,pointer:S,camera:T,internal:A}=b,D=new se(S.x,S.y,0).unproject(T),N=U=>{var H,Y;return(H=(Y=A.capturedMap.get(U))==null?void 0:Y.has(_.eventObject))!=null?H:!1},L=U=>{const H={intersection:_,target:h.target};A.capturedMap.has(U)?A.capturedMap.get(U).set(_.eventObject,H):A.capturedMap.set(U,new Map([[_.eventObject,H]])),h.target.setPointerCapture(U)},I=U=>{const H=A.capturedMap.get(U);H&&EO(A.capturedMap,_.eventObject,H,U)};let k={};for(let U in h){let H=h[U];typeof H!="function"&&(k[U]=H)}let R={..._,...k,pointer:S,intersections:u,stopped:v.stopped,delta:m,unprojectedPoint:D,ray:w.ray,camera:T,stopPropagation(){const U="pointerId"in h&&A.capturedMap.get(h.pointerId);if((!U||U.has(_.eventObject))&&(R.stopped=v.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(H=>H.eventObject===_.eventObject))){const H=u.slice(0,u.indexOf(_));s([...H,_])}},target:{hasPointerCapture:N,setPointerCapture:L,releasePointerCapture:I},currentTarget:{hasPointerCapture:N,setPointerCapture:L,releasePointerCapture:I},nativeEvent:h};if(g(R),v.stopped===!0)break}}}return u}function s(u){const{internal:h}=r.getState();for(const m of h.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(h.hovered.delete(T_(m)),v!=null&&v.eventCount){const _=v.handlers,b={...m,intersections:u};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function o(u,h){for(let m=0;m<h.length;m++){const g=h[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:m}=r.getState();"pointerId"in h&&m.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(h.pointerId)&&(m.capturedMap.delete(h.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:v}=r.getState();v.lastEvent.current=m;const _=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",S=n(m,_?t:void 0),T=b?e(m):0;u==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=S.map(D=>D.eventObject)),b&&!S.length&&T<=2&&(o(m,v.interaction),g&&g(m)),_&&s(S);function A(D){const N=D.eventObject,L=N.__r3f;if(!(L!=null&&L.eventCount))return;const I=L.handlers;if(_){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const k=T_(D),R=v.hovered.get(k);R?R.stopped&&D.stopPropagation():(v.hovered.set(k,D),I.onPointerOver==null||I.onPointerOver(D),I.onPointerEnter==null||I.onPointerEnter(D))}I.onPointerMove==null||I.onPointerMove(D)}else{const k=I[u];k?(!b||v.initialHits.includes(N))&&(o(m,v.interaction.filter(R=>!v.initialHits.includes(R))),k(D)):b&&v.initialHits.includes(N)&&o(m,v.interaction.filter(R=>!v.initialHits.includes(R)))}}i(S,m,T,A)}}return{handlePointer:l}}const nN=r=>!!(r!=null&&r.render),CA=Re.createContext(null),oY=(r,e)=>{const t=pO((l,u)=>{const h=new se,m=new se,g=new se;function v(T=u().camera,A=m,D=u().size){const{width:N,height:L,top:I,left:k}=D,R=N/L;A.isVector3?g.copy(A):g.set(...A);const U=T.getWorldPosition(h).distanceTo(g);if(SO(T))return{width:N/T.zoom,height:L/T.zoom,top:I,left:k,factor:1,distance:U,aspect:R};{const H=T.fov*Math.PI/180,Y=2*Math.tan(H/2)*U,X=Y*(N/L);return{width:X,height:Y,top:I,left:k,factor:N/X,distance:U,aspect:R}}}let _;const b=T=>l(A=>({performance:{...A.performance,current:T}})),w=new ft;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(T=1)=>r(u(),T),advance:(T,A)=>e(T,A,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new aO,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=u();_&&clearTimeout(_),T.performance.current!==T.performance.min&&b(T.performance.min),_=setTimeout(()=>b(u().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:T=>l(A=>({...A,events:{...A.events,...T}})),setSize:(T,A,D=0,N=0)=>{const L=u().camera,I={width:T,height:A,top:D,left:N};l(k=>({size:I,viewport:{...k.viewport,...v(L,m,I)}}))},setDpr:T=>l(A=>{const D=MO(T);return{viewport:{...A.viewport,dpr:D,initialDpr:A.viewport.initialDpr||D}}}),setFrameloop:(T="always")=>{const A=u().clock;A.stop(),A.elapsedTime=0,T!=="never"&&(A.start(),A.elapsedTime=0),l(()=>({frameloop:T}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Re.createRef(),active:!1,frames:0,priority:0,subscribe:(T,A,D)=>{const N=u().internal;return N.priority=N.priority+(A>0?1:0),N.subscribers.push({ref:T,priority:A,store:D}),N.subscribers=N.subscribers.sort((L,I)=>L.priority-I.priority),()=>{const L=u().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(A>0?1:0),L.subscribers=L.subscribers.filter(I=>I.ref!==T))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:h,gl:m,set:g}=t.getState();if(u.width!==i.width||u.height!==i.height||h.dpr!==s){i=u,s=h.dpr,wO(l,u),h.dpr>0&&m.setPixelRatio(h.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,v)}l!==o&&(o=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>r(l)),t};function RA(){const r=Re.useContext(CA);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Ia(r=t=>t,e){return RA()(r,e)}function eS(r,e=0){const t=RA(),n=t.getState().internal.subscribe,i=AA(r);return Zv(()=>n(i,e,t),[e,n,t]),null}const iN=new WeakMap,lY=r=>{var e;return typeof r=="function"&&(r==null||(e=r.prototype)==null?void 0:e.constructor)===r};function AO(r,e){return function(t,...n){let i;return lY(t)?(i=iN.get(t),i||(i=new t,iN.set(t,i))):i=t,r&&r(i),Promise.all(n.map(s=>new Promise((o,l)=>i.load(s,u=>{ia(u?.scene)&&Object.assign(u,JX(u.scene)),o(u)},e,u=>l(new Error(`Could not load ${s}: ${u?.message}`))))))}}function Dm(r,e,t,n){const i=Array.isArray(e)?e:[e],s=vO(AO(t,n),[r,...i],{equal:Xi.equ});return Array.isArray(e)?s:s[0]}Dm.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return zX(AO(t),[r,...n])};Dm.clear=function(r,e){const t=Array.isArray(e)?e:[e];return VX([r,...t])};const cY=1,uY=8,fY=32,hY=2;var dY={version:"9.5.0"};function pY(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rN={exports:{}},sN={exports:{}},aN;function mY(){return aN||(aN=1,(function(r){r.exports=function(e){function t(f,d,x,M){return new sg(f,d,x,M)}function n(){}function i(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){var d=f,x=f;if(f.alternate)for(;d.return;)d=d.return;else{f=d;do d=f,(d.flags&4098)!==0&&(x=d.return),f=d.return;while(f)}return d.tag===3?x:null}function o(f){if(s(f)!==f)throw Error(i(188))}function l(f){var d=f.alternate;if(!d){if(d=s(f),d===null)throw Error(i(188));return d!==f?null:f}for(var x=f,M=d;;){var P=x.return;if(P===null)break;var O=P.alternate;if(O===null){if(M=P.return,M!==null){x=M;continue}break}if(P.child===O.child){for(O=P.child;O;){if(O===x)return o(P),f;if(O===M)return o(P),d;O=O.sibling}throw Error(i(188))}if(x.return!==M.return)x=P,M=O;else{for(var $=!1,xe=P.child;xe;){if(xe===x){$=!0,x=P,M=O;break}if(xe===M){$=!0,M=P,x=O;break}xe=xe.sibling}if(!$){for(xe=O.child;xe;){if(xe===x){$=!0,x=O,M=P;break}if(xe===M){$=!0,M=O,x=P;break}xe=xe.sibling}if(!$)throw Error(i(189))}}if(x.alternate!==M)throw Error(i(190))}if(x.tag!==3)throw Error(i(188));return x.stateNode.current===x?f:d}function u(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(d=u(f),d!==null)return d;f=f.sibling}return null}function h(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(d=h(f),d!==null))return d;f=f.sibling}return null}function m(f){return f===null||typeof f!="object"?null:(f=sl&&f[sl]||f["@@iterator"],typeof f=="function"?f:null)}function g(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===ql?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case jc:return"Fragment";case Xc:return"Profiler";case Wc:return"StrictMode";case Yd:return"Suspense";case rl:return"SuspenseList";case sh:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case Hc:return"Portal";case ba:return f.displayName||"Context";case rh:return(f._context.displayName||"Context")+".Consumer";case zu:var d=f.render;return f=f.displayName,f||(f=d.displayName||d.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case qd:return d=f.displayName||null,d!==null?d:g(f.type)||"Memo";case us:d=f._payload,f=f._init;try{return g(f(d))}catch{}}return null}function v(f){return{current:f}}function _(f){0>Qc||(f.current=op[Qc],op[Qc]=null,Qc--)}function b(f,d){Qc++,op[Qc]=f.current,f.current=d}function w(f){return f>>>=0,f===0?32:31-(lp(f)/ax|0)|0}function S(f){var d=f&42;if(d!==0)return d;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function T(f,d,x){var M=f.pendingLanes;if(M===0)return 0;var P=0,O=f.suspendedLanes,$=f.pingedLanes;f=f.warmLanes;var xe=M&134217727;return xe!==0?(M=xe&~O,M!==0?P=S(M):($&=xe,$!==0?P=S($):x||(x=xe&~f,x!==0&&(P=S(x))))):(xe=M&~O,xe!==0?P=S(xe):$!==0?P=S($):x||(x=M&~f,x!==0&&(P=S(x)))),P===0?0:d!==0&&d!==P&&(d&O)===0&&(O=P&-P,x=d&-d,O>=x||O===32&&(x&4194048)!==0)?d:P}function A(f,d){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&d)===0}function D(f,d){switch(f){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N(){var f=Yu;return Yu<<=1,(Yu&62914560)===0&&(Yu=4194304),f}function L(f){for(var d=[],x=0;31>x;x++)d.push(f);return d}function I(f,d){f.pendingLanes|=d,d!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function k(f,d,x,M,P,O){var $=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var xe=f.entanglements,Qe=f.expirationTimes,_t=f.hiddenUpdates;for(x=$&~x;0<x;){var Ut=31-Cs(x),Tt=1<<Ut;xe[Ut]=0,Qe[Ut]=-1;var Gt=_t[Ut];if(Gt!==null)for(_t[Ut]=null,Ut=0;Ut<Gt.length;Ut++){var pn=Gt[Ut];pn!==null&&(pn.lane&=-536870913)}x&=~Tt}M!==0&&R(f,M,0),O!==0&&P===0&&f.tag!==0&&(f.suspendedLanes|=O&~($&~d))}function R(f,d,x){f.pendingLanes|=d,f.suspendedLanes&=~d;var M=31-Cs(d);f.entangledLanes|=d,f.entanglements[M]=f.entanglements[M]|1073741824|x&261930}function U(f,d){var x=f.entangledLanes|=d;for(f=f.entanglements;x;){var M=31-Cs(x),P=1<<M;P&d|f[M]&d&&(f[M]|=d),x&=~P}}function H(f,d){var x=d&-d;return x=(x&42)!==0?1:Y(x),(x&(f.suspendedLanes|d))!==0?0:x}function Y(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function X(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function q(f){if(typeof jg=="function"&&cx(f),Rs&&typeof Rs.setStrictMode=="function")try{Rs.setStrictMode($c,f)}catch{}}function Q(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}function ie(f){if(pp===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);pp=d&&d[1]||"",Do=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pp+f+Do}function j(f,d){if(!f||ph)return"";ph=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(d){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(pn){var Gt=pn}Reflect.construct(f,[],Tt)}else{try{Tt.call()}catch(pn){Gt=pn}f.call(Tt.prototype)}}else{try{throw Error()}catch(pn){Gt=pn}(Tt=f())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(pn){if(pn&&Gt&&typeof pn.stack=="string")return[pn.stack,Gt.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=M.DetermineComponentFrameRoot(),$=O[0],xe=O[1];if($&&xe){var Qe=$.split(`
`),_t=xe.split(`
`);for(P=M=0;M<Qe.length&&!Qe[M].includes("DetermineComponentFrameRoot");)M++;for(;P<_t.length&&!_t[P].includes("DetermineComponentFrameRoot");)P++;if(M===Qe.length||P===_t.length)for(M=Qe.length-1,P=_t.length-1;1<=M&&0<=P&&Qe[M]!==_t[P];)P--;for(;1<=M&&0<=P;M--,P--)if(Qe[M]!==_t[P]){if(M!==1||P!==1)do if(M--,P--,0>P||Qe[M]!==_t[P]){var Ut=`
`+Qe[M].replace(" at new "," at ");return f.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",f.displayName)),Ut}while(1<=M&&0<=P);break}}}finally{ph=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?ie(x):""}function J(f,d){switch(f.tag){case 26:case 27:case 5:return ie(f.type);case 16:return ie("Lazy");case 13:return f.child!==d&&d!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return j(f.type,!1);case 11:return j(f.type.render,!1);case 1:return j(f.type,!0);case 31:return ie("Activity");default:return""}}function de(f){try{var d="",x=null;do d+=J(f,x),x=f,f=f.return;while(f);return d}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}function le(f,d){if(typeof f=="object"&&f!==null){var x=Wg.get(f);return x!==void 0?x:(d={value:f,source:d,stack:de(d)},Wg.set(f,d),d)}return{value:f,source:d,stack:de(d)}}function ce(f,d){ll[No++]=mh,ll[No++]=ci,ci=f,mh=d}function z(f,d,x){Ta[Ks++]=Vr,Ta[Ks++]=Xa,Ta[Ks++]=wa,wa=f;var M=Vr;f=Xa;var P=32-Cs(M)-1;M&=~(1<<P),x+=1;var O=32-Cs(d)+P;if(30<O){var $=P-P%5;O=(M&(1<<$)-1).toString(32),M>>=$,P-=$,Vr=1<<32-Cs(d)+P|x<<P|M,Xa=O+f}else Vr=1<<O|x<<P|M,Xa=f}function Z(f){f.return!==null&&(ce(f,1),z(f,1,0))}function ae(f){for(;f===ci;)ci=ll[--No],ll[No]=null,mh=ll[--No],ll[No]=null;for(;f===wa;)wa=Ta[--Ks],Ta[Ks]=null,Xa=Ta[--Ks],Ta[Ks]=null,Vr=Ta[--Ks],Ta[Ks]=null}function fe(f,d){Ta[Ks++]=Vr,Ta[Ks++]=Xa,Ta[Ks++]=wa,Vr=d.id,Xa=d.overflow,wa=f}function ve(f,d){b(Gr,d),b(cl,f),b(Lr,null),f=Sy(d),_(Lr),b(Lr,f)}function re(){_(Lr),_(cl),_(Gr)}function pe(f){f.memoizedState!==null&&b(gh,f);var d=Lr.current,x=Hu(d,f.type);d!==x&&(b(cl,f),b(Lr,x))}function Se(f){cl.current===f&&(_(Lr),_(cl)),gh.current===f&&(_(gh),Ki?Zc._currentValue=qc:Zc._currentValue2=qc)}function je(f){var d=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ve(le(d,f)),mp}function ct(f,d){if(!Ci)throw Error(i(175));qy(f.stateNode,f.type,f.memoizedProps,d,f)||je(f,!0)}function Je(f){for(Sr=f.return;Sr;)switch(Sr.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Sr=Sr.return}}function nt(f){if(!Ci||f!==Sr)return!1;if(!In)return Je(f),In=!0,!1;var d=f.tag;if(br?d!==3&&d!==27&&(d!==5||Xu(f.type)&&!fs(f.type,f.memoizedProps))&&Ri&&je(f):d!==3&&(d!==5||Xu(f.type)&&!fs(f.type,f.memoizedProps))&&Ri&&je(f),Je(f),d===13){if(!Ci)throw Error(i(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));Ri=Lg(f)}else if(d===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));Ri=Ky(f)}else Ri=br&&d===27?zy(f.type,Ri):Sr?By(f.stateNode):null;return!0}function Mt(){Ci&&(Ri=Sr=null,In=!1)}function Ue(){var f=Po;return f!==null&&(Ps===null?Ps=f:Ps.push.apply(Ps,f),Po=null),f}function Ve(f){Po===null?Po=[f]:Po.push(f)}function Oe(f,d,x){Ki?(b(Ea,d._currentValue),d._currentValue=x):(b(Ea,d._currentValue2),d._currentValue2=x)}function it(f){var d=Ea.current;Ki?f._currentValue=d:f._currentValue2=d,_(Ea)}function ee(f,d,x){for(;f!==null;){var M=f.alternate;if((f.childLanes&d)!==d?(f.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),f===x)break;f=f.return}}function ut(f,d,x,M){var P=f.child;for(P!==null&&(P.return=f);P!==null;){var O=P.dependencies;if(O!==null){var $=P.child;O=O.firstContext;e:for(;O!==null;){var xe=O;O=P;for(var Qe=0;Qe<d.length;Qe++)if(xe.context===d[Qe]){O.lanes|=x,xe=O.alternate,xe!==null&&(xe.lanes|=x),ee(O.return,x,f),M||($=null);break e}O=xe.next}}else if(P.tag===18){if($=P.return,$===null)throw Error(i(341));$.lanes|=x,O=$.alternate,O!==null&&(O.lanes|=x),ee($,x,f),$=null}else $=P.child;if($!==null)$.return=P;else for($=P;$!==null;){if($===f){$=null;break}if(P=$.sibling,P!==null){P.return=$.return,$=P;break}$=$.return}P=$}}function Ye(f,d,x,M){f=null;for(var P=d,O=!1;P!==null;){if(!O){if((P.flags&524288)!==0)O=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var $=P.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var xe=P.type;Ji(P.pendingProps.value,$.value)||(f!==null?f.push(xe):f=[xe])}}else if(P===gh.current){if($=P.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(f!==null?f.push(Zc):f=[Zc])}P=P.return}f!==null&&ut(d,f,x,M),d.flags|=262144}function De(f){for(f=f.firstContext;f!==null;){var d=f.context;if(!Ji(Ki?d._currentValue:d._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function We(f){vi=f,Ya=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function K(f){return ue(vi,f)}function V(f,d){return vi===null&&We(f),ue(f,d)}function ue(f,d){var x=Ki?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:x,next:null},Ya===null){if(f===null)throw Error(i(308));Ya=d,f.dependencies={lanes:0,firstContext:d},f.flags|=524288}else Ya=Ya.next=d;return x}function Ie(){return{controller:new ux,data:new Map,refCount:0}}function Ce(f){f.refCount--,f.refCount===0&&Ur(dS,function(){f.controller.abort()})}function Ee(){}function st(f){f!==ii&&f.next===null&&(ii===null?vh=ii=f:ii=ii.next=f),Aa=!0,$r||($r=!0,oe())}function at(f,d){if(!gp&&Aa){gp=!0;do for(var x=!1,M=vh;M!==null;){if(f!==0){var P=M.pendingLanes;if(P===0)var O=0;else{var $=M.suspendedLanes,xe=M.pingedLanes;O=(1<<31-Cs(42|f)+1)-1,O&=P&~($&~xe),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(x=!0,tt(M,O))}else O=On,O=T(M,M===wn?O:0,M.cancelPendingCommit!==null||M.timeoutHandle!==As),(O&3)===0||A(M,O)||(x=!0,tt(M,O));M=M.next}while(x);gp=!1}}function wt(){Lt()}function Lt(){Aa=$r=!1;var f=0;$l!==0&&Yc()&&(f=$l);for(var d=Jr(),x=null,M=vh;M!==null;){var P=M.next,O=Ge(M,d);O===0?(M.next=null,x===null?vh=P:x.next=P,P===null&&(ii=x)):(x=M,(f!==0||(O&3)!==0)&&(Aa=!0)),M=P}dr!==0&&dr!==5||at(f),$l!==0&&($l=0)}function Ge(f,d){for(var x=f.suspendedLanes,M=f.pingedLanes,P=f.expirationTimes,O=f.pendingLanes&-62914561;0<O;){var $=31-Cs(O),xe=1<<$,Qe=P[$];Qe===-1?((xe&x)===0||(xe&M)!==0)&&(P[$]=D(xe,d)):Qe<=d&&(f.expiredLanes|=xe),O&=~xe}if(d=wn,x=On,x=T(f,f===d?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==As),M=f.callbackNode,x===0||f===d&&(si===2||si===9)||f.cancelPendingCommit!==null)return M!==null&&M!==null&&up(M),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||A(f,x)){if(d=x&-x,d===f.callbackPriority)return d;switch(M!==null&&up(M),X(x)){case 2:case 8:x=lx;break;case 32:x=dh;break;case 268435456:x=hp;break;default:x=dh}return M=Fe.bind(null,f),x=hh(x,M),f.callbackPriority=d,f.callbackNode=x,d}return M!==null&&M!==null&&up(M),f.callbackPriority=2,f.callbackNode=null,2}function Fe(f,d){if(dr!==0&&dr!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(Ao()&&f.callbackNode!==x)return null;var M=On;return M=T(f,f===wn?M:0,f.cancelPendingCommit!==null||f.timeoutHandle!==As),M===0?null:(Wa(f,M,d),Ge(f,Jr()),f.callbackNode!=null&&f.callbackNode===x?Fe.bind(null,f):null)}function tt(f,d){if(Ao())return null;Wa(f,d,!0)}function oe(){vg?yg(function(){(Nn&6)!==0?hh(fp,wt):Lt()}):hh(fp,wt)}function Ae(){if($l===0){var f=ul;f===0&&(f=cp,cp<<=1,(cp&261888)===0&&(cp=256)),$l=f}return $l}function ht(f,d){if(qu===null){var x=qu=[];Xg=0,ul=Ae(),Mr={status:"pending",value:void 0,then:function(M){x.push(M)}}}return Xg++,d.then(he,he),d}function he(){if(--Xg===0&&qu!==null){Mr!==null&&(Mr.status="fulfilled");var f=qu;qu=null,ul=0,Mr=null;for(var d=0;d<f.length;d++)(0,f[d])()}}function _e(f,d){var x=[],M={status:"pending",value:null,reason:null,then:function(P){x.push(P)}};return f.then(function(){M.status="fulfilled",M.value=d;for(var P=0;P<x.length;P++)(0,x[P])(d)},function(P){for(M.status="rejected",M.reason=P,P=0;P<x.length;P++)(0,x[P])(void 0)}),M}function $e(){var f=ec.current;return f!==null?f:wn.pooledCache}function Rt(f,d){d===null?b(ec,ec.current):b(ec,d.pool)}function rt(){var f=$e();return f===null?null:{parent:Ki?Di._currentValue:Di._currentValue2,pool:f}}function Ne(f,d){if(Ji(f,d))return!0;if(typeof f!="object"||f===null||typeof d!="object"||d===null)return!1;var x=Object.keys(f),M=Object.keys(d);if(x.length!==M.length)return!1;for(M=0;M<x.length;M++){var P=x[M];if(!hS.call(d,P)||!Ji(f[P],d[P]))return!1}return!0}function bt(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Ot(f,d,x){switch(x=f[x],x===void 0?f.push(d):x!==d&&(d.then(Ee,Ee),d=x),d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,Sn(f),f;default:if(typeof d.status=="string")d.then(Ee,Ee);else{if(f=wn,f!==null&&100<f.shellSuspendCounter)throw Error(i(482));f=d,f.status="pending",f.then(function(M){if(d.status==="pending"){var P=d;P.status="fulfilled",P.value=M}},function(M){if(d.status==="pending"){var P=d;P.status="rejected",P.reason=M}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,Sn(f),f}throw ds=d,Tr}}function It(f){try{var d=f._init;return d(f._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(ds=x,Tr):x}}function Ht(){if(ds===null)throw Error(i(459));var f=ds;return ds=null,f}function Sn(f){if(f===Tr||f===Ra)throw Error(i(483))}function Dn(f){var d=eu;return eu+=1,tc===null&&(tc=[]),Ot(tc,f,d)}function Qn(f,d){d=d.props.ref,f.ref=d!==void 0?d:null}function Li(f,d){throw d.$$typeof===Gc?Error(i(525)):(f=Object.prototype.toString.call(d),Error(i(31,f==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":f)))}function xr(f){function d(He,Le){if(f){var Ze=He.deletions;Ze===null?(He.deletions=[Le],He.flags|=16):Ze.push(Le)}}function x(He,Le){if(!f)return null;for(;Le!==null;)d(He,Le),Le=Le.sibling;return null}function M(He){for(var Le=new Map;He!==null;)He.key!==null?Le.set(He.key,He):Le.set(He.index,He),He=He.sibling;return Le}function P(He,Le){return He=qs(He,Le),He.index=0,He.sibling=null,He}function O(He,Le,Ze){return He.index=Ze,f?(Ze=He.alternate,Ze!==null?(Ze=Ze.index,Ze<Le?(He.flags|=67108866,Le):Ze):(He.flags|=67108866,Le)):(He.flags|=1048576,Le)}function $(He){return f&&He.alternate===null&&(He.flags|=67108866),He}function xe(He,Le,Ze,Pt){return Le===null||Le.tag!==6?(Le=ag(Ze,He.mode,Pt),Le.return=He,Le):(Le=P(Le,Ze),Le.return=He,Le)}function Qe(He,Le,Ze,Pt){var rn=Ze.type;return rn===jc?Ut(He,Le,Ze.props.children,Pt,Ze.key):Le!==null&&(Le.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===us&&It(rn)===Le.type)?(Le=P(Le,Ze.props),Qn(Le,Ze),Le.return=He,Le):(Le=il(Ze.type,Ze.key,Ze.props,null,He.mode,Pt),Qn(Le,Ze),Le.return=He,Le)}function _t(He,Le,Ze,Pt){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==Ze.containerInfo||Le.stateNode.implementation!==Ze.implementation?(Le=lg(Ze,He.mode,Pt),Le.return=He,Le):(Le=P(Le,Ze.children||[]),Le.return=He,Le)}function Ut(He,Le,Ze,Pt,rn){return Le===null||Le.tag!==7?(Le=_a(Ze,He.mode,Pt,rn),Le.return=He,Le):(Le=P(Le,Ze),Le.return=He,Le)}function Tt(He,Le,Ze){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Le=ag(""+Le,He.mode,Ze),Le.return=He,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case Co:return Ze=il(Le.type,Le.key,Le.props,null,He.mode,Ze),Qn(Ze,Le),Ze.return=He,Ze;case Hc:return Le=lg(Le,He.mode,Ze),Le.return=He,Le;case us:return Le=It(Le),Tt(He,Le,Ze)}if(Zl(Le)||m(Le))return Le=_a(Le,He.mode,Ze,null),Le.return=He,Le;if(typeof Le.then=="function")return Tt(He,Dn(Le),Ze);if(Le.$$typeof===ba)return Tt(He,V(He,Le),Ze);Li(He,Le)}return null}function Gt(He,Le,Ze,Pt){var rn=Le!==null?Le.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return rn!==null?null:xe(He,Le,""+Ze,Pt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case Co:return Ze.key===rn?Qe(He,Le,Ze,Pt):null;case Hc:return Ze.key===rn?_t(He,Le,Ze,Pt):null;case us:return Ze=It(Ze),Gt(He,Le,Ze,Pt)}if(Zl(Ze)||m(Ze))return rn!==null?null:Ut(He,Le,Ze,Pt,null);if(typeof Ze.then=="function")return Gt(He,Le,Dn(Ze),Pt);if(Ze.$$typeof===ba)return Gt(He,Le,V(He,Ze),Pt);Li(He,Ze)}return null}function pn(He,Le,Ze,Pt,rn){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint")return He=He.get(Ze)||null,xe(Le,He,""+Pt,rn);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case Co:return He=He.get(Pt.key===null?Ze:Pt.key)||null,Qe(Le,He,Pt,rn);case Hc:return He=He.get(Pt.key===null?Ze:Pt.key)||null,_t(Le,He,Pt,rn);case us:return Pt=It(Pt),pn(He,Le,Ze,Pt,rn)}if(Zl(Pt)||m(Pt))return He=He.get(Ze)||null,Ut(Le,He,Pt,rn,null);if(typeof Pt.then=="function")return pn(He,Le,Ze,Dn(Pt),rn);if(Pt.$$typeof===ba)return pn(He,Le,Ze,V(Le,Pt),rn);Li(Le,Pt)}return null}function tr(He,Le,Ze,Pt){for(var rn=null,zi=null,sn=Le,Hn=Le=0,Ir=null;sn!==null&&Hn<Ze.length;Hn++){sn.index>Hn?(Ir=sn,sn=null):Ir=sn.sibling;var Kn=Gt(He,sn,Ze[Hn],Pt);if(Kn===null){sn===null&&(sn=Ir);break}f&&sn&&Kn.alternate===null&&d(He,sn),Le=O(Kn,Le,Hn),zi===null?rn=Kn:zi.sibling=Kn,zi=Kn,sn=Ir}if(Hn===Ze.length)return x(He,sn),In&&ce(He,Hn),rn;if(sn===null){for(;Hn<Ze.length;Hn++)sn=Tt(He,Ze[Hn],Pt),sn!==null&&(Le=O(sn,Le,Hn),zi===null?rn=sn:zi.sibling=sn,zi=sn);return In&&ce(He,Hn),rn}for(sn=M(sn);Hn<Ze.length;Hn++)Ir=pn(sn,He,Hn,Ze[Hn],Pt),Ir!==null&&(f&&Ir.alternate!==null&&sn.delete(Ir.key===null?Hn:Ir.key),Le=O(Ir,Le,Hn),zi===null?rn=Ir:zi.sibling=Ir,zi=Ir);return f&&sn.forEach(function(Pa){return d(He,Pa)}),In&&ce(He,Hn),rn}function nf(He,Le,Ze,Pt){if(Ze==null)throw Error(i(151));for(var rn=null,zi=null,sn=Le,Hn=Le=0,Ir=null,Kn=Ze.next();sn!==null&&!Kn.done;Hn++,Kn=Ze.next()){sn.index>Hn?(Ir=sn,sn=null):Ir=sn.sibling;var Pa=Gt(He,sn,Kn.value,Pt);if(Pa===null){sn===null&&(sn=Ir);break}f&&sn&&Pa.alternate===null&&d(He,sn),Le=O(Pa,Le,Hn),zi===null?rn=Pa:zi.sibling=Pa,zi=Pa,sn=Ir}if(Kn.done)return x(He,sn),In&&ce(He,Hn),rn;if(sn===null){for(;!Kn.done;Hn++,Kn=Ze.next())Kn=Tt(He,Kn.value,Pt),Kn!==null&&(Le=O(Kn,Le,Hn),zi===null?rn=Kn:zi.sibling=Kn,zi=Kn);return In&&ce(He,Hn),rn}for(sn=M(sn);!Kn.done;Hn++,Kn=Ze.next())Kn=pn(sn,He,Hn,Kn.value,Pt),Kn!==null&&(f&&Kn.alternate!==null&&sn.delete(Kn.key===null?Hn:Kn.key),Le=O(Kn,Le,Hn),zi===null?rn=Kn:zi.sibling=Kn,zi=Kn);return f&&sn.forEach(function(pS){return d(He,pS)}),In&&ce(He,Hn),rn}function cc(He,Le,Ze,Pt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===jc&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case Co:e:{for(var rn=Ze.key;Le!==null;){if(Le.key===rn){if(rn=Ze.type,rn===jc){if(Le.tag===7){x(He,Le.sibling),Pt=P(Le,Ze.props.children),Pt.return=He,He=Pt;break e}}else if(Le.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===us&&It(rn)===Le.type){x(He,Le.sibling),Pt=P(Le,Ze.props),Qn(Pt,Ze),Pt.return=He,He=Pt;break e}x(He,Le);break}else d(He,Le);Le=Le.sibling}Ze.type===jc?(Pt=_a(Ze.props.children,He.mode,Pt,Ze.key),Pt.return=He,He=Pt):(Pt=il(Ze.type,Ze.key,Ze.props,null,He.mode,Pt),Qn(Pt,Ze),Pt.return=He,He=Pt)}return $(He);case Hc:e:{for(rn=Ze.key;Le!==null;){if(Le.key===rn)if(Le.tag===4&&Le.stateNode.containerInfo===Ze.containerInfo&&Le.stateNode.implementation===Ze.implementation){x(He,Le.sibling),Pt=P(Le,Ze.children||[]),Pt.return=He,He=Pt;break e}else{x(He,Le);break}else d(He,Le);Le=Le.sibling}Pt=lg(Ze,He.mode,Pt),Pt.return=He,He=Pt}return $(He);case us:return Ze=It(Ze),cc(He,Le,Ze,Pt)}if(Zl(Ze))return tr(He,Le,Ze,Pt);if(m(Ze)){if(rn=m(Ze),typeof rn!="function")throw Error(i(150));return Ze=rn.call(Ze),nf(He,Le,Ze,Pt)}if(typeof Ze.then=="function")return cc(He,Le,Dn(Ze),Pt);if(Ze.$$typeof===ba)return cc(He,Le,V(He,Ze),Pt);Li(He,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint"?(Ze=""+Ze,Le!==null&&Le.tag===6?(x(He,Le.sibling),Pt=P(Le,Ze),Pt.return=He,He=Pt):(x(He,Le),Pt=ag(Ze,He.mode,Pt),Pt.return=He,He=Pt),$(He)):x(He,Le)}return function(He,Le,Ze,Pt){try{eu=0;var rn=cc(He,Le,Ze,Pt);return tc=null,rn}catch(sn){if(sn===Tr||sn===Ra)throw sn;var zi=t(29,sn,null,He.mode);return zi.lanes=Pt,zi.return=He,zi}}}function Zi(){for(var f=Uo,d=tu=Uo=0;d<f;){var x=jr[d];jr[d++]=null;var M=jr[d];jr[d++]=null;var P=jr[d];jr[d++]=null;var O=jr[d];if(jr[d++]=null,M!==null&&P!==null){var $=M.pending;$===null?P.next=P:(P.next=$.next,$.next=P),M.pending=P}O!==0&&Jn(x,P,O)}}function Ti(f,d,x,M){jr[Uo++]=f,jr[Uo++]=d,jr[Uo++]=x,jr[Uo++]=M,tu|=M,f.lanes|=M,f=f.alternate,f!==null&&(f.lanes|=M)}function pi(f,d,x,M){return Ti(f,d,x,M),Xn(f)}function Qt(f,d){return Ti(f,null,null,d),Xn(f)}function Jn(f,d,x){f.lanes|=x;var M=f.alternate;M!==null&&(M.lanes|=x);for(var P=!1,O=f.return;O!==null;)O.childLanes|=x,M=O.alternate,M!==null&&(M.childLanes|=x),O.tag===22&&(f=O.stateNode,f===null||f._visibility&1||(P=!0)),f=O,O=O.return;return f.tag===3?(O=f.stateNode,P&&d!==null&&(P=31-Cs(x),f=O.hiddenUpdates,M=f[P],M===null?f[P]=[d]:M.push(d),d.lane=x|536870912),O):null}function Xn(f){if(50<qn)throw qn=0,Mh=null,Error(i(185));for(var d=f.return;d!==null;)f=d,d=f.return;return f.tag===3?f.stateNode:null}function W(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ne(f,d){f=f.updateQueue,d.updateQueue===f&&(d.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function ge(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function ke(f,d,x){var M=f.updateQueue;if(M===null)return null;if(M=M.shared,(Nn&2)!==0){var P=M.pending;return P===null?d.next=d:(d.next=P.next,P.next=d),M.pending=d,d=Xn(f),Jn(f,null,x),d}return Ti(f,M,d,x),Xn(f)}function qe(f,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194048)!==0)){var M=d.lanes;M&=f.pendingLanes,x|=M,d.lanes=x,U(f,x)}}function Ke(f,d){var x=f.updateQueue,M=f.alternate;if(M!==null&&(M=M.updateQueue,x===M)){var P=null,O=null;if(x=x.firstBaseUpdate,x!==null){do{var $={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};O===null?P=O=$:O=O.next=$,x=x.next}while(x!==null);O===null?P=O=d:O=O.next=d}else P=O=d;x={baseState:M.baseState,firstBaseUpdate:P,lastBaseUpdate:O,shared:M.shared,callbacks:M.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=d:f.next=d,x.lastBaseUpdate=d}function St(){if(yp){var f=Mr;if(f!==null)throw f}}function yt(f,d,x,M){yp=!1;var P=f.updateQueue;Qs=!1;var O=P.firstBaseUpdate,$=P.lastBaseUpdate,xe=P.shared.pending;if(xe!==null){P.shared.pending=null;var Qe=xe,_t=Qe.next;Qe.next=null,$===null?O=_t:$.next=_t,$=Qe;var Ut=f.alternate;Ut!==null&&(Ut=Ut.updateQueue,xe=Ut.lastBaseUpdate,xe!==$&&(xe===null?Ut.firstBaseUpdate=_t:xe.next=_t,Ut.lastBaseUpdate=Qe))}if(O!==null){var Tt=P.baseState;$=0,Ut=_t=Qe=null,xe=O;do{var Gt=xe.lane&-536870913,pn=Gt!==xe.lane;if(pn?(On&Gt)===Gt:(M&Gt)===Gt){Gt!==0&&Gt===ul&&(yp=!0),Ut!==null&&(Ut=Ut.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var tr=f,nf=xe;Gt=d;var cc=x;switch(nf.tag){case 1:if(tr=nf.payload,typeof tr=="function"){Tt=tr.call(cc,Tt,Gt);break e}Tt=tr;break e;case 3:tr.flags=tr.flags&-65537|128;case 0:if(tr=nf.payload,Gt=typeof tr=="function"?tr.call(cc,Tt,Gt):tr,Gt==null)break e;Tt=Xd({},Tt,Gt);break e;case 2:Qs=!0}}Gt=xe.callback,Gt!==null&&(f.flags|=64,pn&&(f.flags|=8192),pn=P.callbacks,pn===null?P.callbacks=[Gt]:pn.push(Gt))}else pn={lane:Gt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Ut===null?(_t=Ut=pn,Qe=Tt):Ut=Ut.next=pn,$|=Gt;if(xe=xe.next,xe===null){if(xe=P.shared.pending,xe===null)break;pn=xe,xe=pn.next,pn.next=null,P.lastBaseUpdate=pn,P.shared.pending=null}}while(!0);Ut===null&&(Qe=Tt),P.baseState=Qe,P.firstBaseUpdate=_t,P.lastBaseUpdate=Ut,O===null&&(P.shared.lanes=0),hl|=$,f.lanes=$,f.memoizedState=Tt}}function At(f,d){if(typeof f!="function")throw Error(i(191,f));f.call(d)}function Ct(f,d){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)At(x[f],d)}function Dt(f,d){f=Oo,b(nc,f),b(nu,d),Oo=f|d.baseLanes}function G(){b(nc,Oo),b(nu,nu.current)}function me(){Oo=nc.current,_(nu),_(nc)}function Te(f){var d=f.alternate;b(Hi,Hi.current&1),b(Ds,f),Ns===null&&(d===null||nu.current!==null||d.memoizedState!==null)&&(Ns=f)}function be(f){b(Hi,Hi.current),b(Ds,f),Ns===null&&(Ns=f)}function Me(f){f.tag===22?(b(Hi,Hi.current),b(Ds,f),Ns===null&&(Ns=f)):ot()}function ot(){b(Hi,Hi.current),b(Ds,Ds.current)}function mt(f){_(Ds),Ns===f&&(Ns=null),_(Hi)}function gt(f){for(var d=f;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Ql(x)||ep(x)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function vt(){throw Error(i(321))}function kt(f,d){if(d===null)return!1;for(var x=0;x<d.length&&x<f.length;x++)if(!Ji(f[x],d[x]))return!1;return!0}function Ft(f,d,x,M,P,O){return fl=O,vn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,tn.H=f===null||f.memoizedState===null?Fi:Io,zn=!1,O=x(M,P),zn=!1,bn&&(O=Et(d,x,M,P)),Zt(f),O}function Zt(f){tn.H=Js;var d=Jt!==null&&Jt.next!==null;if(fl=0,hn=Jt=vn=null,Tn=!1,Da=0,qa=null,d)throw Error(i(300));f===null||bi||(f=f.dependencies,f!==null&&De(f)&&(bi=!0))}function Et(f,d,x,M){vn=f;var P=0;do{if(bn&&(qa=null),Da=0,bn=!1,25<=P)throw Error(i(301));if(P+=1,hn=Jt=null,f.updateQueue!=null){var O=f.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}tn.H=ic,O=d(x,M)}while(bn);return O}function Xt(){var f=tn.H,d=f.useState()[0];return d=typeof d.then=="function"?Nt(d):d,f=f.useState()[0],(Jt!==null?Jt.memoizedState:null)!==f&&(vn.flags|=1024),d}function mn(){var f=es!==0;return es=0,f}function Fn(f,d,x){d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~x}function en(f){if(Tn){for(f=f.memoizedState;f!==null;){var d=f.queue;d!==null&&(d.pending=null),f=f.next}Tn=!1}fl=0,hn=Jt=vn=null,bn=!1,Da=es=0,qa=null}function jt(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?vn.memoizedState=hn=f:hn=hn.next=f,hn}function xt(){if(Jt===null){var f=vn.alternate;f=f!==null?f.memoizedState:null}else f=Jt.next;var d=hn===null?vn.memoizedState:hn.next;if(d!==null)hn=d,Jt=f;else{if(f===null)throw vn.alternate===null?Error(i(467)):Error(i(310));Jt=f,f={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},hn===null?vn.memoizedState=hn=f:hn=hn.next=f}return hn}function cn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nt(f){var d=Da;return Da+=1,qa===null&&(qa=[]),f=Ot(qa,f,d),d=vn,(hn===null?d.memoizedState:hn.next)===null&&(d=d.alternate,tn.H=d===null||d.memoizedState===null?Fi:Io),f}function Yn(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Nt(f);if(f.$$typeof===ba)return K(f)}throw Error(i(438,String(f)))}function ai(f){var d=null,x=vn.updateQueue;if(x!==null&&(d=x.memoCache),d==null){var M=vn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(d={data:M.data.map(function(P){return P.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),x===null&&(x=cn(),vn.updateQueue=x),x.memoCache=d,x=d.data[d.index],x===void 0)for(x=d.data[d.index]=Array(f),M=0;M<f;M++)x[M]=ug;return d.index++,x}function Cn(f,d){return typeof d=="function"?d(f):d}function oi(f){var d=xt();return Ln(d,Jt,f)}function Ln(f,d,x){var M=f.queue;if(M===null)throw Error(i(311));M.lastRenderedReducer=x;var P=f.baseQueue,O=M.pending;if(O!==null){if(P!==null){var $=P.next;P.next=O.next,O.next=$}d.baseQueue=P=O,M.pending=null}if(O=f.baseState,P===null)f.memoizedState=O;else{d=P.next;var xe=$=null,Qe=null,_t=d,Ut=!1;do{var Tt=_t.lane&-536870913;if(Tt!==_t.lane?(On&Tt)===Tt:(fl&Tt)===Tt){var Gt=_t.revertLane;if(Gt===0)Qe!==null&&(Qe=Qe.next={lane:0,revertLane:0,gesture:null,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),Tt===ul&&(Ut=!0);else if((fl&Gt)===Gt){_t=_t.next,Gt===ul&&(Ut=!0);continue}else Tt={lane:0,revertLane:_t.revertLane,gesture:null,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},Qe===null?(xe=Qe=Tt,$=O):Qe=Qe.next=Tt,vn.lanes|=Gt,hl|=Gt;Tt=_t.action,zn&&x(O,Tt),O=_t.hasEagerState?_t.eagerState:x(O,Tt)}else Gt={lane:Tt,revertLane:_t.revertLane,gesture:_t.gesture,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},Qe===null?(xe=Qe=Gt,$=O):Qe=Qe.next=Gt,vn.lanes|=Tt,hl|=Tt;_t=_t.next}while(_t!==null&&_t!==d);if(Qe===null?$=O:Qe.next=xe,!Ji(O,f.memoizedState)&&(bi=!0,Ut&&(x=Mr,x!==null)))throw x;f.memoizedState=O,f.baseState=$,f.baseQueue=Qe,M.lastRenderedState=O}return P===null&&(M.lanes=0),[f.memoizedState,M.dispatch]}function fi(f){var d=xt(),x=d.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=f;var M=x.dispatch,P=x.pending,O=d.memoizedState;if(P!==null){x.pending=null;var $=P=P.next;do O=f(O,$.action),$=$.next;while($!==P);Ji(O,d.memoizedState)||(bi=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),x.lastRenderedState=O}return[O,M]}function lr(f,d,x){var M=vn,P=xt(),O=In;if(O){if(x===void 0)throw Error(i(407));x=x()}else x=d();var $=!Ji((Jt||P).memoizedState,x);if($&&(P.memoizedState=x,bi=!0),P=P.queue,pa(Ss.bind(null,M,P,f),[f]),P.getSnapshot!==d||$||hn!==null&&hn.memoizedState.tag&1){if(M.flags|=2048,Zr(9,{destroy:void 0},as.bind(null,M,P,x,d),null),wn===null)throw Error(i(349));O||(fl&127)!==0||wi(M,d,x)}return x}function wi(f,d,x){f.flags|=16384,f={getSnapshot:d,value:x},d=vn.updateQueue,d===null?(d=cn(),vn.updateQueue=d,d.stores=[f]):(x=d.stores,x===null?d.stores=[f]:x.push(f))}function as(f,d,x,M){d.value=x,d.getSnapshot=M,Gs(d)&&Hf(f)}function Ss(f,d,x){return x(function(){Gs(d)&&Hf(f)})}function Gs(f){var d=f.getSnapshot;f=f.value;try{var x=d();return!Ji(f,x)}catch{return!0}}function Hf(f){var d=Qt(f,2);d!==null&&Ii(d,f,2)}function Dl(f){var d=jt();if(typeof f=="function"){var x=f;if(f=x(),zn){q(!0);try{x()}finally{q(!1)}}}return d.memoizedState=d.baseState=f,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:f},d}function ha(f,d,x,M){return f.baseState=x,Ln(f,Jt,typeof M=="function"?M:Cn)}function qr(f,d,x,M,P){if(Ed(f))throw Error(i(485));if(f=d.action,f!==null){var O={payload:P,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){O.listeners.push($)}};tn.T!==null?x(!0):O.isTransition=!1,M(O),x=d.pending,x===null?(O.next=d.pending=O,uo(d,O)):(O.next=x.next,d.pending=x.next=O)}}function uo(f,d){var x=d.action,M=d.payload,P=f.state;if(d.isTransition){var O=tn.T,$={};tn.T=$;try{var xe=x(P,M),Qe=tn.S;Qe!==null&&Qe($,xe),Rc(f,d,xe)}catch(_t){da(f,d,_t)}finally{O!==null&&$.types!==null&&(O.types=$.types),tn.T=O}}else try{O=x(P,M),Rc(f,d,O)}catch(_t){da(f,d,_t)}}function Rc(f,d,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(M){Hs(f,d,M)},function(M){return da(f,d,M)}):Hs(f,d,x)}function Hs(f,d,x){d.status="fulfilled",d.value=x,Dc(d),f.state=x,d=f.pending,d!==null&&(x=d.next,x===d?f.pending=null:(x=x.next,d.next=x,uo(f,x)))}function da(f,d,x){var M=f.pending;if(f.pending=null,M!==null){M=M.next;do d.status="rejected",d.reason=x,Dc(d),d=d.next;while(d!==M)}f.action=null}function Dc(f){f=f.listeners;for(var d=0;d<f.length;d++)(0,f[d])()}function Nc(f,d){return d}function Nl(f,d){if(In){var x=wn.formState;if(x!==null){e:{var M=vn;if(In){if(Ri){var P=ky(Ri,hs);if(P){Ri=By(P),M=Rg(P);break e}}je(M)}M=!1}M&&(d=x[0])}}x=jt(),x.memoizedState=x.baseState=d,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:d},x.queue=M,x=ja.bind(null,vn,M),M.dispatch=x,M=Dl(!1);var O=wd.bind(null,vn,!1,M.queue);return M=jt(),P={state:d,dispatch:null,action:f,pending:null},M.queue=P,x=qr.bind(null,vn,P,O,x),P.dispatch=x,M.memoizedState=f,[d,x,!1]}function fo(f){var d=xt();return js(d,Jt,f)}function js(f,d,x){if(d=Ln(f,d,Nc)[0],f=oi(Cn)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var M=Nt(d)}catch($){throw $===Tr?Ra:$}else M=d;d=xt();var P=d.queue,O=P.dispatch;return x!==d.memoizedState&&(vn.flags|=2048,Zr(9,{destroy:void 0},os.bind(null,P,x),null)),[M,O,f]}function os(f,d){f.action=d}function ho(f){var d=xt(),x=Jt;if(x!==null)return js(d,x,f);xt(),d=d.memoizedState,x=xt();var M=x.queue.dispatch;return x.memoizedState=f,[d,M,!1]}function Zr(f,d,x,M){return f={tag:f,create:x,deps:M,inst:d,next:null},d=vn.updateQueue,d===null&&(d=cn(),vn.updateQueue=d),x=d.lastEffect,x===null?d.lastEffect=f.next=f:(M=x.next,x.next=f,f.next=M,d.lastEffect=f),f}function Pc(){return xt().memoizedState}function Ga(f,d,x,M){var P=jt();vn.flags|=f,P.memoizedState=Zr(1|d,{destroy:void 0},x,M===void 0?null:M)}function Pl(f,d,x,M){var P=xt();M=M===void 0?null:M;var O=P.memoizedState.inst;Jt!==null&&M!==null&&kt(M,Jt.memoizedState.deps)?P.memoizedState=Zr(d,O,x,M):(vn.flags|=f,P.memoizedState=Zr(1|d,O,x,M))}function Ll(f,d){Ga(8390656,8,f,d)}function pa(f,d){Pl(2048,8,f,d)}function Ul(f){vn.flags|=4;var d=vn.updateQueue;if(d===null)d=cn(),vn.updateQueue=d,d.events=[f];else{var x=d.events;x===null?d.events=[f]:x.push(f)}}function Ei(f){var d=xt().memoizedState;return Ul({ref:d,nextImpl:f}),function(){if((Nn&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}function Ha(f,d){return Pl(4,2,f,d)}function Qo(f,d){return Pl(4,4,f,d)}function po(f,d){if(typeof d=="function"){f=f();var x=d(f);return function(){typeof x=="function"?x():d(null)}}if(d!=null)return f=f(),d.current=f,function(){d.current=null}}function Il(f,d,x){x=x!=null?x.concat([f]):null,Pl(4,4,po.bind(null,d,f),x)}function Ol(){}function mo(f,d){var x=xt();d=d===void 0?null:d;var M=x.memoizedState;return d!==null&&kt(d,M[1])?M[0]:(x.memoizedState=[f,d],f)}function go(f,d){var x=xt();d=d===void 0?null:d;var M=x.memoizedState;if(d!==null&&kt(d,M[1]))return M[0];if(M=f(),zn){q(!0);try{f()}finally{q(!1)}}return x.memoizedState=[M,d],M}function cr(f,d,x){return x===void 0||(fl&1073741824)!==0&&(On&261930)===0?f.memoizedState=d:(f.memoizedState=x,f=el(),vn.lanes|=f,hl|=f,x)}function jf(f,d,x,M){return Ji(x,d)?x:nu.current!==null?(f=cr(f,x,M),Ji(f,d)||(bi=!0),f):(fl&42)===0||(fl&1073741824)!==0&&(On&261930)===0?(bi=!0,f.memoizedState=x):(f=el(),vn.lanes|=f,hl|=f,d)}function Lc(f,d,x,M,P){var O=Sa();Un(O!==0&&8>O?O:8);var $=tn.T,xe={};tn.T=xe,wd(f,!1,d,x);try{var Qe=P(),_t=tn.S;if(_t!==null&&_t(xe,Qe),Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var Ut=_e(Qe,M);Fl(f,d,Ut,Ai(f))}else Fl(f,d,M,Ai(f))}catch(Tt){Fl(f,d,{then:function(){},status:"rejected",reason:Tt},Ai())}finally{Un(O),$!==null&&xe.types!==null&&($.types=xe.types),tn.T=$}}function Uc(f){var d=f.memoizedState;if(d!==null)return d;d={memoizedState:qc,baseState:qc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:qc},next:null};var x={};return d.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:x},next:null},f.memoizedState=d,f=f.alternate,f!==null&&(f.memoizedState=d),d}function Tu(){return K(Zc)}function wu(){return xt().memoizedState}function Br(){return xt().memoizedState}function Ws(f){for(var d=f.return;d!==null;){switch(d.tag){case 24:case 3:var x=Ai();f=ge(x);var M=ke(d,f,x);M!==null&&(Ii(M,d,x),qe(M,d,x)),d={cache:Ie()},f.payload=d;return}d=d.return}}function Kr(f,d,x){var M=Ai();x={lane:M,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Ed(f)?Qv(d,x):(x=pi(f,d,x,M),x!==null&&(Ii(x,f,M),Jv(x,d,M)))}function ja(f,d,x){var M=Ai();Fl(f,d,x,M)}function Fl(f,d,x,M){var P={lane:M,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ed(f))Qv(d,P);else{var O=f.alternate;if(f.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var $=d.lastRenderedState,xe=O($,x);if(P.hasEagerState=!0,P.eagerState=xe,Ji(xe,$))return Ti(f,d,P,0),wn===null&&Zi(),!1}catch{}if(x=pi(f,d,P,M),x!==null)return Ii(x,f,M),Jv(x,d,M),!0}return!1}function wd(f,d,x,M){if(M={lane:2,revertLane:Ae(),gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},Ed(f)){if(d)throw Error(i(479))}else d=pi(f,x,M,2),d!==null&&Ii(d,f,2)}function Ed(f){var d=f.alternate;return f===vn||d!==null&&d===vn}function Qv(f,d){bn=Tn=!0;var x=f.pending;x===null?d.next=d:(d.next=x.next,x.next=d),f.pending=d}function Jv(f,d,x){if((x&4194048)!==0){var M=d.lanes;M&=f.pendingLanes,x|=M,d.lanes=x,U(f,x)}}function Vm(f,d,x,M){d=f.memoizedState,x=x(M,d),x=x==null?d:Xd({},d,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}function Ad(f,d,x,M,P,O,$){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(M,O,$):d.prototype&&d.prototype.isPureReactComponent?!Ne(x,M)||!Ne(P,O):!0}function $v(f,d,x,M){f=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,M),d.state!==f&&yh.enqueueReplaceState(d,d.state,null)}function Ic(f,d){var x=d;if("ref"in d){x={};for(var M in d)M!=="ref"&&(x[M]=d[M])}if(f=f.defaultProps){x===d&&(x=Xd({},x));for(var P in f)x[P]===void 0&&(x[P]=f[P])}return x}function Cd(f,d){try{var x=f.onUncaughtError;x(d.value,{componentStack:d.stack})}catch(M){setTimeout(function(){throw M})}}function Gm(f,d,x){try{var M=f.onCaughtError;M(x.value,{componentStack:x.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function Hm(f,d,x){return x=ge(x),x.tag=3,x.payload={element:null},x.callback=function(){Cd(f,d)},x}function ey(f){return f=ge(f),f.tag=3,f}function ty(f,d,x,M){var P=x.type.getDerivedStateFromError;if(typeof P=="function"){var O=M.value;f.payload=function(){return P(O)},f.callback=function(){Gm(d,x,M)}}var $=x.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(f.callback=function(){Gm(d,x,M),typeof P!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var xe=M.stack;this.componentDidCatch(M.value,{componentStack:xe!==null?xe:""})})}function rS(f,d,x,M,P){if(x.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(d=x.alternate,d!==null&&Ye(d,x,P,!0),x=Ds.current,x!==null){switch(x.tag){case 31:case 13:return Ns===null?Ou():x.alternate===null&&Bi===0&&(Bi=3),x.flags&=-257,x.flags|=65536,x.lanes=P,M===Lo?x.flags|=16384:(d=x.updateQueue,d===null?x.updateQueue=new Set([M]):d.add(M),Bu(f,M,P)),!1;case 22:return x.flags|=65536,M===Lo?x.flags|=16384:(d=x.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([M])},x.updateQueue=d):(x=d.retryQueue,x===null?d.retryQueue=new Set([M]):x.add(M)),Bu(f,M,P)),!1}throw Error(i(435,x.tag))}return Bu(f,M,P),Ou(),!1}if(In)return d=Ds.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=P,M!==mp&&(f=Error(i(422),{cause:M}),Ve(le(f,x)))):(M!==mp&&(d=Error(i(423),{cause:M}),Ve(le(d,x))),f=f.current.alternate,f.flags|=65536,P&=-P,f.lanes|=P,M=le(M,x),P=Hm(f.stateNode,M,P),Ke(f,P),Bi!==4&&(Bi=2)),!1;var O=Error(i(520),{cause:M});if(O=le(O,x),_h===null?_h=[O]:_h.push(O),Bi!==4&&(Bi=2),d===null)return!0;M=le(M,x),x=d;do{switch(x.tag){case 3:return x.flags|=65536,f=P&-P,x.lanes|=f,f=Hm(x.stateNode,M,f),Ke(x,f),!1;case 1:if(d=x.type,O=x.stateNode,(x.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(dl===null||!dl.has(O))))return x.flags|=65536,P&=-P,x.lanes|=P,P=ey(P),ty(P,f,x,M),Ke(x,P),!1}x=x.return}while(x!==null);return!1}function zr(f,d,x,M){d.child=f===null?Yg(d,null,x,M):Hr(d,f.child,x,M)}function ny(f,d,x,M,P){x=x.render;var O=d.ref;if("ref"in M){var $={};for(var xe in M)xe!=="ref"&&($[xe]=M[xe])}else $=M;return We(d),M=Ft(f,d,x,$,O,P),xe=mn(),f!==null&&!bi?(Fn(f,d,P),vo(f,d,P)):(In&&xe&&Z(d),d.flags|=1,zr(f,d,M,P),d.child)}function iy(f,d,x,M,P){if(f===null){var O=x.type;return typeof O=="function"&&!zc(O)&&O.defaultProps===void 0&&x.compare===null?(d.tag=15,d.type=O,ry(f,d,O,M,P)):(f=il(x.type,null,M,d,d.mode,P),f.ref=d.ref,f.return=d,d.child=f)}if(O=f.child,!Xf(f,P)){var $=O.memoizedProps;if(x=x.compare,x=x!==null?x:Ne,x($,M)&&f.ref===d.ref)return vo(f,d,P)}return d.flags|=1,f=qs(O,M),f.ref=d.ref,f.return=d,d.child=f}function ry(f,d,x,M,P){if(f!==null){var O=f.memoizedProps;if(Ne(O,M)&&f.ref===d.ref)if(bi=!1,d.pendingProps=M=O,Xf(f,P))(f.flags&131072)!==0&&(bi=!0);else return d.lanes=f.lanes,vo(f,d,P)}return Dd(f,d,x,M,P)}function sy(f,d,x,M){var P=M.children,O=f!==null?f.memoizedState:null;if(f===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),M.mode==="hidden"){if((d.flags&128)!==0){if(O=O!==null?O.baseLanes|x:x,f!==null){for(M=d.child=f.child,P=0;M!==null;)P=P|M.lanes|M.childLanes,M=M.sibling;M=P&~O}else M=0,d.child=null;return Eu(f,d,O,x,M)}if((x&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},f!==null&&Rt(d,O!==null?O.cachePool:null),O!==null?Dt(d,O):G(),Me(d);else return M=d.lanes=536870912,Eu(f,d,O!==null?O.baseLanes|x:x,x,M)}else O!==null?(Rt(d,O.cachePool),Dt(d,O),ot(),d.memoizedState=null):(f!==null&&Rt(d,null),G(),ot());return zr(f,d,P,x),d.child}function Oc(f,d){return f!==null&&f.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Eu(f,d,x,M,P){var O=$e();return O=O===null?null:{parent:Ki?Di._currentValue:Di._currentValue2,pool:O},d.memoizedState={baseLanes:x,cachePool:O},f!==null&&Rt(d,null),G(),Me(d),f!==null&&Ye(f,d,M,!0),d.childLanes=P,null}function Rd(f,d){return d=kl({mode:d.mode,children:d.children},f.mode),d.ref=f.ref,f.child=d,d.return=f,d}function jm(f,d,x){return Hr(d,f.child,null,x),f=Rd(d,d.pendingProps),f.flags|=2,mt(d),d.memoizedState=null,f}function ay(f,d,x){var M=d.pendingProps,P=(d.flags&128)!==0;if(d.flags&=-129,f===null){if(In){if(M.mode==="hidden")return f=Rd(d,M),d.lanes=536870912,Oc(null,f);if(be(d),(f=Ri)?(f=Ng(f,hs),f!==null&&(d.memoizedState={dehydrated:f,treeContext:wa!==null?{id:Vr,overflow:Xa}:null,retryLane:536870912,hydrationErrors:null},x=og(f),x.return=d,d.child=x,Sr=d,Ri=null)):f=null,f===null)throw je(d);return d.lanes=536870912,null}return Rd(d,M)}var O=f.memoizedState;if(O!==null){var $=O.dehydrated;if(be(d),P)if(d.flags&256)d.flags&=-257,d=jm(f,d,x);else if(d.memoizedState!==null)d.child=f.child,d.flags|=128,d=null;else throw Error(i(558));else if(bi||Ye(f,d,x,!1),P=(x&f.childLanes)!==0,bi||P){if(M=wn,M!==null&&($=H(M,x),$!==0&&$!==O.retryLane))throw O.retryLane=$,Qt(f,$),Ii(M,f,$),ps;Ou(),d=jm(f,d,x)}else f=O.treeContext,Ci&&(Ri=Hy($),Sr=d,In=!0,Po=null,hs=!1,f!==null&&fe(d,f)),d=Rd(d,M),d.flags|=4096;return d}return f=qs(f.child,{mode:M.mode,children:M.children}),f.ref=d.ref,d.child=f,f.return=d,f}function Wf(f,d){var x=d.ref;if(x===null)f!==null&&f.ref!==null&&(d.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(i(284));(f===null||f.ref!==x)&&(d.flags|=4194816)}}function Dd(f,d,x,M,P){return We(d),x=Ft(f,d,x,M,void 0,P),M=mn(),f!==null&&!bi?(Fn(f,d,P),vo(f,d,P)):(In&&M&&Z(d),d.flags|=1,zr(f,d,x,P),d.child)}function Wm(f,d,x,M,P,O){return We(d),d.updateQueue=null,x=Et(d,M,x,P),Zt(f),M=mn(),f!==null&&!bi?(Fn(f,d,O),vo(f,d,O)):(In&&M&&Z(d),d.flags|=1,zr(f,d,x,O),d.child)}function Fc(f,d,x,M,P){if(We(d),d.stateNode===null){var O=Ro,$=x.contextType;typeof $=="object"&&$!==null&&(O=K($)),O=new x(M,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=yh,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=M,O.state=d.memoizedState,O.refs={},W(d),$=x.contextType,O.context=typeof $=="object"&&$!==null?K($):Ro,O.state=d.memoizedState,$=x.getDerivedStateFromProps,typeof $=="function"&&(Vm(d,x,$,M),O.state=d.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||($=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),$!==O.state&&yh.enqueueReplaceState(O,O.state,null),yt(d,M,O,P),St(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),M=!0}else if(f===null){O=d.stateNode;var xe=d.memoizedProps,Qe=Ic(x,xe);O.props=Qe;var _t=O.context,Ut=x.contextType;$=Ro,typeof Ut=="object"&&Ut!==null&&($=K(Ut));var Tt=x.getDerivedStateFromProps;Ut=typeof Tt=="function"||typeof O.getSnapshotBeforeUpdate=="function",xe=d.pendingProps!==xe,Ut||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(xe||_t!==$)&&$v(d,O,M,$),Qs=!1;var Gt=d.memoizedState;O.state=Gt,yt(d,M,O,P),St(),_t=d.memoizedState,xe||Gt!==_t||Qs?(typeof Tt=="function"&&(Vm(d,x,Tt,M),_t=d.memoizedState),(Qe=Qs||Ad(d,x,Qe,M,Gt,_t,$))?(Ut||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=_t),O.props=M,O.state=_t,O.context=$,M=Qe):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{O=d.stateNode,ne(f,d),$=d.memoizedProps,Ut=Ic(x,$),O.props=Ut,Tt=d.pendingProps,Gt=O.context,_t=x.contextType,Qe=Ro,typeof _t=="object"&&_t!==null&&(Qe=K(_t)),xe=x.getDerivedStateFromProps,(_t=typeof xe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||($!==Tt||Gt!==Qe)&&$v(d,O,M,Qe),Qs=!1,Gt=d.memoizedState,O.state=Gt,yt(d,M,O,P),St();var pn=d.memoizedState;$!==Tt||Gt!==pn||Qs||f!==null&&f.dependencies!==null&&De(f.dependencies)?(typeof xe=="function"&&(Vm(d,x,xe,M),pn=d.memoizedState),(Ut=Qs||Ad(d,x,Ut,M,Gt,pn,Qe)||f!==null&&f.dependencies!==null&&De(f.dependencies))?(_t||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(M,pn,Qe),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(M,pn,Qe)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||$===f.memoizedProps&&Gt===f.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||$===f.memoizedProps&&Gt===f.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=pn),O.props=M,O.state=pn,O.context=Qe,M=Ut):(typeof O.componentDidUpdate!="function"||$===f.memoizedProps&&Gt===f.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||$===f.memoizedProps&&Gt===f.memoizedState||(d.flags|=1024),M=!1)}return O=M,Wf(f,d),M=(d.flags&128)!==0,O||M?(O=d.stateNode,x=M&&typeof x.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,f!==null&&M?(d.child=Hr(d,f.child,null,P),d.child=Hr(d,null,x,P)):zr(f,d,x,P),d.memoizedState=O.state,f=d.child):f=vo(f,d,P),f}function oy(f,d,x,M){return Mt(),d.flags|=256,zr(f,d,x,M),d.child}function Xm(f){return{baseLanes:f,cachePool:rt()}}function Ym(f,d,x){return f=f!==null?f.childLanes&~x:0,d&&(f|=ms),f}function qm(f,d,x){var M=d.pendingProps,P=!1,O=(d.flags&128)!==0,$;if(($=O)||($=f!==null&&f.memoizedState===null?!1:(Hi.current&2)!==0),$&&(P=!0,d.flags&=-129),$=(d.flags&32)!==0,d.flags&=-33,f===null){if(In){if(P?Te(d):ot(),(f=Ri)?(f=Yy(f,hs),f!==null&&(d.memoizedState={dehydrated:f,treeContext:wa!==null?{id:Vr,overflow:Xa}:null,retryLane:536870912,hydrationErrors:null},x=og(f),x.return=d,d.child=x,Sr=d,Ri=null)):f=null,f===null)throw je(d);return ep(f)?d.lanes=32:d.lanes=536870912,null}var xe=M.children;return M=M.fallback,P?(ot(),P=d.mode,xe=kl({mode:"hidden",children:xe},P),M=_a(M,P,x,null),xe.return=d,M.return=d,xe.sibling=M,d.child=xe,M=d.child,M.memoizedState=Xm(x),M.childLanes=Ym(f,$,x),d.memoizedState=iu,Oc(null,M)):(Te(d),Nd(d,xe))}var Qe=f.memoizedState;if(Qe!==null&&(xe=Qe.dehydrated,xe!==null)){if(O)d.flags&256?(Te(d),d.flags&=-257,d=kc(f,d,x)):d.memoizedState!==null?(ot(),d.child=f.child,d.flags|=128,d=null):(ot(),xe=M.fallback,P=d.mode,M=kl({mode:"visible",children:M.children},P),xe=_a(xe,P,x,null),xe.flags|=2,M.return=d,xe.return=d,M.sibling=xe,d.child=M,Hr(d,f.child,null,x),M=d.child,M.memoizedState=Xm(x),M.childLanes=Ym(f,$,x),d.memoizedState=iu,d=Oc(null,M));else if(Te(d),ep(xe))$=tp(xe).digest,M=Error(i(419)),M.stack="",M.digest=$,Ve({value:M,source:null,stack:null}),d=kc(f,d,x);else if(bi||Ye(f,d,x,!1),$=(x&f.childLanes)!==0,bi||$){if($=wn,$!==null&&(M=H($,x),M!==0&&M!==Qe.retryLane))throw Qe.retryLane=M,Qt(f,M),Ii($,f,M),ps;Ql(xe)||Ou(),d=kc(f,d,x)}else Ql(xe)?(d.flags|=192,d.child=f.child,d=null):(f=Qe.treeContext,Ci&&(Ri=jy(xe),Sr=d,In=!0,Po=null,hs=!1,f!==null&&fe(d,f)),d=Nd(d,M.children),d.flags|=4096);return d}return P?(ot(),xe=M.fallback,P=d.mode,Qe=f.child,O=Qe.sibling,M=qs(Qe,{mode:"hidden",children:M.children}),M.subtreeFlags=Qe.subtreeFlags&65011712,O!==null?xe=qs(O,xe):(xe=_a(xe,P,x,null),xe.flags|=2),xe.return=d,M.return=d,M.sibling=xe,d.child=M,Oc(null,M),M=d.child,xe=f.child.memoizedState,xe===null?xe=Xm(x):(P=xe.cachePool,P!==null?(Qe=Ki?Di._currentValue:Di._currentValue2,P=P.parent!==Qe?{parent:Qe,pool:Qe}:P):P=rt(),xe={baseLanes:xe.baseLanes|x,cachePool:P}),M.memoizedState=xe,M.childLanes=Ym(f,$,x),d.memoizedState=iu,Oc(f.child,M)):(Te(d),x=f.child,f=x.sibling,x=qs(x,{mode:"visible",children:M.children}),x.return=d,x.sibling=null,f!==null&&($=d.deletions,$===null?(d.deletions=[f],d.flags|=16):$.push(f)),d.child=x,d.memoizedState=null,x)}function Nd(f,d){return d=kl({mode:"visible",children:d},f.mode),d.return=f,f.child=d}function kl(f,d){return f=t(22,f,null,d),f.lanes=0,f}function kc(f,d,x){return Hr(d,f.child,null,x),f=Nd(d,d.pendingProps.children),f.flags|=2,d.memoizedState=null,f}function ly(f,d,x){f.lanes|=d;var M=f.alternate;M!==null&&(M.lanes|=d),ee(f.return,d,x)}function Au(f,d,x,M,P,O){var $=f.memoizedState;$===null?f.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:x,tailMode:P,treeForkCount:O}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=M,$.tail=x,$.tailMode=P,$.treeForkCount=O)}function Zm(f,d,x){var M=d.pendingProps,P=M.revealOrder,O=M.tail;M=M.children;var $=Hi.current,xe=($&2)!==0;if(xe?($=$&1|2,d.flags|=128):$&=1,b(Hi,$),zr(f,d,M,x),M=In?mh:0,!xe&&f!==null&&(f.flags&128)!==0)e:for(f=d.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&ly(f,x,d);else if(f.tag===19)ly(f,x,d);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(P){case"forwards":for(x=d.child,P=null;x!==null;)f=x.alternate,f!==null&&gt(f)===null&&(P=x),x=x.sibling;x=P,x===null?(P=d.child,d.child=null):(P=x.sibling,x.sibling=null),Au(d,!1,P,x,O,M);break;case"backwards":case"unstable_legacy-backwards":for(x=null,P=d.child,d.child=null;P!==null;){if(f=P.alternate,f!==null&&gt(f)===null){d.child=P;break}f=P.sibling,P.sibling=x,x=P,P=f}Au(d,!0,x,null,O,M);break;case"together":Au(d,!1,null,null,void 0,M);break;default:d.memoizedState=null}return d.child}function vo(f,d,x){if(f!==null&&(d.dependencies=f.dependencies),hl|=d.lanes,(x&d.childLanes)===0)if(f!==null){if(Ye(f,d,x,!1),(x&d.childLanes)===0)return null}else return null;if(f!==null&&d.child!==f.child)throw Error(i(153));if(d.child!==null){for(f=d.child,x=qs(f,f.pendingProps),d.child=x,x.return=d;f.sibling!==null;)f=f.sibling,x=x.sibling=qs(f,f.pendingProps),x.return=d;x.sibling=null}return d.child}function Xf(f,d){return(f.lanes&d)!==0?!0:(f=f.dependencies,!!(f!==null&&De(f)))}function Km(f,d,x){switch(d.tag){case 3:ve(d,d.stateNode.containerInfo),Oe(d,Di,f.memoizedState.cache),Mt();break;case 27:case 5:pe(d);break;case 4:ve(d,d.stateNode.containerInfo);break;case 10:Oe(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,be(d),null;break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(Te(d),d.flags|=128,null):(x&d.child.childLanes)!==0?qm(f,d,x):(Te(d),f=vo(f,d,x),f!==null?f.sibling:null);Te(d);break;case 19:var P=(f.flags&128)!==0;if(M=(x&d.childLanes)!==0,M||(Ye(f,d,x,!1),M=(x&d.childLanes)!==0),P){if(M)return Zm(f,d,x);d.flags|=128}if(P=d.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),b(Hi,Hi.current),M)break;return null;case 22:return d.lanes=0,sy(f,d,x,d.pendingProps);case 24:Oe(d,Di,f.memoizedState.cache)}return vo(f,d,x)}function Qm(f,d,x){if(f!==null)if(f.memoizedProps!==d.pendingProps)bi=!0;else{if(!Xf(f,x)&&(d.flags&128)===0)return bi=!1,Km(f,d,x);bi=(f.flags&131072)!==0}else bi=!1,In&&(d.flags&1048576)!==0&&z(d,mh,d.index);switch(d.lanes=0,d.tag){case 16:e:{var M=d.pendingProps;if(f=It(d.elementType),d.type=f,typeof f=="function")zc(f)?(M=Ic(f,M),d.tag=1,d=Fc(null,d,f,M,x)):(d.tag=0,d=Dd(null,d,f,M,x));else{if(f!=null){var P=f.$$typeof;if(P===zu){d.tag=11,d=ny(null,d,f,M,x);break e}else if(P===qd){d.tag=14,d=iy(null,d,f,M,x);break e}}throw d=g(f)||f,Error(i(306,d,""))}}return d;case 0:return Dd(f,d,d.type,d.pendingProps,x);case 1:return M=d.type,P=Ic(M,d.pendingProps),Fc(f,d,M,P,x);case 3:e:{if(ve(d,d.stateNode.containerInfo),f===null)throw Error(i(387));var O=d.pendingProps;P=d.memoizedState,M=P.element,ne(f,d),yt(d,O,null,x);var $=d.memoizedState;if(O=$.cache,Oe(d,Di,O),O!==P.cache&&ut(d,[Di],x,!0),St(),O=$.element,Ci&&P.isDehydrated)if(P={element:O,isDehydrated:!1,cache:$.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=oy(f,d,O,x);break e}else if(O!==M){M=le(Error(i(424)),d),Ve(M),d=oy(f,d,O,x);break e}else for(Ci&&(Ri=Gy(d.stateNode.containerInfo),Sr=d,In=!0,Po=null,hs=!0),x=Yg(d,null,O,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Mt(),O===M){d=vo(f,d,x);break e}zr(f,d,O,x)}d=d.child}return d;case 26:if(Ma)return Wf(f,d),f===null?(x=Og(d.type,null,d.pendingProps,null))?d.memoizedState=x:In||(d.stateNode=sp(d.type,d.pendingProps,Gr.current,d)):d.memoizedState=Og(d.type,f.memoizedProps,d.pendingProps,f.memoizedState),null;case 27:if(br)return pe(d),f===null&&br&&In&&(M=d.stateNode=ap(d.type,d.pendingProps,Gr.current,Lr.current,!1),Sr=d,hs=!0,Ri=Dg(d.type,M,Ri)),zr(f,d,d.pendingProps.children,x),Wf(f,d),f===null&&(d.flags|=4194304),d.child;case 5:return f===null&&In&&(nx(d.type,d.pendingProps,Lr.current),(P=M=Ri)&&(M=Wy(M,d.type,d.pendingProps,hs),M!==null?(d.stateNode=M,Sr=d,Ri=Vy(M),hs=!1,P=!0):P=!1),P||je(d)),pe(d),P=d.type,O=d.pendingProps,$=f!==null?f.memoizedProps:null,M=O.children,fs(P,O)?M=null:$!==null&&fs(P,$)&&(d.flags|=32),d.memoizedState!==null&&(P=Ft(f,d,Xt,null,null,x),Ki?Zc._currentValue=P:Zc._currentValue2=P),Wf(f,d),zr(f,d,M,x),d.child;case 6:return f===null&&In&&(Ig(d.pendingProps,Lr.current),(f=x=Ri)&&(x=Xy(x,d.pendingProps,hs),x!==null?(d.stateNode=x,Sr=d,Ri=null,f=!0):f=!1),f||je(d)),null;case 13:return qm(f,d,x);case 4:return ve(d,d.stateNode.containerInfo),M=d.pendingProps,f===null?d.child=Hr(d,null,M,x):zr(f,d,M,x),d.child;case 11:return ny(f,d,d.type,d.pendingProps,x);case 7:return zr(f,d,d.pendingProps,x),d.child;case 8:return zr(f,d,d.pendingProps.children,x),d.child;case 12:return zr(f,d,d.pendingProps.children,x),d.child;case 10:return M=d.pendingProps,Oe(d,d.type,M.value),zr(f,d,M.children,x),d.child;case 9:return P=d.type._context,M=d.pendingProps.children,We(d),P=K(P),M=M(P),d.flags|=1,zr(f,d,M,x),d.child;case 14:return iy(f,d,d.type,d.pendingProps,x);case 15:return ry(f,d,d.type,d.pendingProps,x);case 19:return Zm(f,d,x);case 31:return ay(f,d,x);case 22:return sy(f,d,x,d.pendingProps);case 24:return We(d),M=K(Di),f===null?(P=$e(),P===null&&(P=wn,O=Ie(),P.pooledCache=O,O.refCount++,O!==null&&(P.pooledCacheLanes|=x),P=O),d.memoizedState={parent:M,cache:P},W(d),Oe(d,Di,P)):((f.lanes&x)!==0&&(ne(f,d),yt(d,null,null,x),St()),P=f.memoizedState,O=d.memoizedState,P.parent!==M?(P={parent:M,cache:M},d.memoizedState=P,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=P),Oe(d,Di,M)):(M=O.cache,Oe(d,Di,M),M!==P.cache&&ut(d,[Di],x,!0))),zr(f,d,d.pendingProps.children,x),d.child;case 29:throw d.pendingProps}throw Error(i(156,d.tag))}function ma(f){f.flags|=4}function Yf(f){Zs&&(f.flags|=8)}function cy(f,d){if(f!==null&&f.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(f=d.child;f!==null;){if((f.flags&8218)!==0||(f.subtreeFlags&8218)!==0)return!0;f=f.sibling}return!1}function Jm(f,d,x,M){if(Bn)for(x=d.child;x!==null;){if(x.tag===5||x.tag===6)oh(f,x.stateNode);else if(!(x.tag===4||br&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(Zs)for(var P=d.child;P!==null;){if(P.tag===5){var O=P.stateNode;x&&M&&(O=Fy(O,P.type,P.memoizedProps)),oh(f,O)}else if(P.tag===6)O=P.stateNode,x&&M&&(O=Cg(O,P.memoizedProps)),oh(f,O);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)O=P.child,O!==null&&(O.return=P),Jm(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===d)break;for(;P.sibling===null;){if(P.return===null||P.return===d)return;P=P.return}P.sibling.return=P.return,P=P.sibling}}function uy(f,d,x,M){var P=!1;if(Zs)for(var O=d.child;O!==null;){if(O.tag===5){var $=O.stateNode;x&&M&&($=Fy($,O.type,O.memoizedProps)),Eg(f,$)}else if(O.tag===6)$=O.stateNode,x&&M&&($=Cg($,O.memoizedProps)),Eg(f,$);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)P=O.child,P!==null&&(P.return=O),uy(f,O,!0,!0),P=!0;else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===d)break;for(;O.sibling===null;){if(O.return===null||O.return===d)return P;O=O.return}O.sibling.return=O.return,O=O.sibling}return P}function fy(f,d){if(Zs&&cy(f,d)){f=d.stateNode;var x=f.containerInfo,M=wg();uy(M,d,!1,!1),f.pendingChildren=M,ma(d),Oy(x,M)}}function $m(f,d,x,M){if(Bn)f.memoizedProps!==M&&ma(d);else if(Zs){var P=f.stateNode,O=f.memoizedProps;if((f=cy(f,d))||O!==M){var $=Lr.current;O=Iy(P,x,O,M,!f,null),O===P?d.stateNode=P:(Yf(d),Es(O,x,M,$)&&ma(d),d.stateNode=O,f&&Jm(O,d,!1,!1))}else d.stateNode=P}}function ls(f,d,x,M,P){if((f.mode&32)!==0&&(x===null?lh(d,M):Wu(d,x,M))){if(f.flags|=16777216,(P&335544128)===P||pg(d,M))if(Oi(f.stateNode,d,M))f.flags|=8192;else if(kn())f.flags|=8192;else throw ds=Lo,vp}else f.flags&=-16777217}function Cu(f,d){if(zg(d)){if(f.flags|=16777216,!Vg(d))if(kn())f.flags|=8192;else throw ds=Lo,vp}else f.flags&=-16777217}function qf(f,d){d!==null&&(f.flags|=4),f.flags&16384&&(d=f.tag!==22?N():536870912,f.lanes|=d,ef|=d)}function Ru(f,d){if(!In)switch(f.tailMode){case"hidden":d=f.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var M=null;x!==null;)x.alternate!==null&&(M=x),x=x.sibling;M===null?d||f.tail===null?f.tail=null:f.tail.sibling=null:M.sibling=null}}function mi(f){var d=f.alternate!==null&&f.alternate.child===f.child,x=0,M=0;if(d)for(var P=f.child;P!==null;)x|=P.lanes|P.childLanes,M|=P.subtreeFlags&65011712,M|=P.flags&65011712,P.return=f,P=P.sibling;else for(P=f.child;P!==null;)x|=P.lanes|P.childLanes,M|=P.subtreeFlags,M|=P.flags,P.return=f,P=P.sibling;return f.subtreeFlags|=M,f.childLanes=x,d}function hy(f,d,x){var M=d.pendingProps;switch(ae(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(d),null;case 1:return mi(d),null;case 3:return x=d.stateNode,M=null,f!==null&&(M=f.memoizedState.cache),d.memoizedState.cache!==M&&(d.flags|=2048),it(Di),re(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(nt(d)?ma(d):f===null||f.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ue())),fy(f,d),mi(d),null;case 26:if(Ma){var P=d.type,O=d.memoizedState;return f===null?(ma(d),O!==null?(mi(d),Cu(d,O)):(mi(d),ls(d,P,null,M,x))):O?O!==f.memoizedState?(ma(d),mi(d),Cu(d,O)):(mi(d),d.flags&=-16777217):(O=f.memoizedProps,Bn?O!==M&&ma(d):$m(f,d,P,M),mi(d),ls(d,P,O,M,x)),null}case 27:if(br){if(Se(d),x=Gr.current,P=d.type,f!==null&&d.stateNode!=null)Bn?f.memoizedProps!==M&&ma(d):$m(f,d,P,M);else{if(!M){if(d.stateNode===null)throw Error(i(166));return mi(d),null}f=Lr.current,nt(d)?ct(d,f):(f=ap(P,M,x,f,!0),d.stateNode=f,ma(d))}return mi(d),null}case 5:if(Se(d),P=d.type,f!==null&&d.stateNode!=null)$m(f,d,P,M);else{if(!M){if(d.stateNode===null)throw Error(i(166));return mi(d),null}if(O=Lr.current,nt(d))ct(d,O),$y(d.stateNode,P,M,O)&&(d.flags|=64);else{var $=hg(P,M,Gr.current,O,d);Yf(d),Jm($,d,!1,!1),d.stateNode=$,Es($,P,M,O)&&ma(d)}}return mi(d),ls(d,d.type,f===null?null:f.memoizedProps,d.pendingProps,x),null;case 6:if(f&&d.stateNode!=null)x=f.memoizedProps,Bn?x!==M&&ma(d):Zs&&(x!==M?(f=Gr.current,x=Lr.current,Yf(d),d.stateNode=al(M,f,x,d)):d.stateNode=f.stateNode);else{if(typeof M!="string"&&d.stateNode===null)throw Error(i(166));if(f=Gr.current,x=Lr.current,nt(d)){if(!Ci)throw Error(i(176));if(f=d.stateNode,x=d.memoizedProps,M=null,P=Sr,P!==null)switch(P.tag){case 27:case 5:M=P.memoizedProps}cS(f,x,d,M)||je(d,!0)}else Yf(d),d.stateNode=al(M,f,x,d)}return mi(d),null;case 31:if(x=d.memoizedState,f===null||f.memoizedState!==null){if(M=nt(d),x!==null){if(f===null){if(!M)throw Error(i(318));if(!Ci)throw Error(i(556));if(f=d.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(557));Pg(f,d)}else Mt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;mi(d),f=!1}else x=Ue(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=x),f=!0;if(!f)return d.flags&256?(mt(d),d):(mt(d),null);if((d.flags&128)!==0)throw Error(i(558))}return mi(d),null;case 13:if(M=d.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(P=nt(d),M!==null&&M.dehydrated!==null){if(f===null){if(!P)throw Error(i(318));if(!Ci)throw Error(i(344));if(P=d.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(i(317));Zy(P,d)}else Mt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;mi(d),P=!1}else P=Ue(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=P),P=!0;if(!P)return d.flags&256?(mt(d),d):(mt(d),null)}return mt(d),(d.flags&128)!==0?(d.lanes=x,d):(x=M!==null,f=f!==null&&f.memoizedState!==null,x&&(M=d.child,P=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(P=M.alternate.memoizedState.cachePool.pool),O=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(O=M.memoizedState.cachePool.pool),O!==P&&(M.flags|=2048)),x!==f&&x&&(d.child.flags|=8192),qf(d,d.updateQueue),mi(d),null);case 4:return re(),fy(f,d),f===null&&li(d.stateNode.containerInfo),mi(d),null;case 10:return it(d.type),mi(d),null;case 19:if(_(Hi),M=d.memoizedState,M===null)return mi(d),null;if(P=(d.flags&128)!==0,O=M.rendering,O===null)if(P)Ru(M,!1);else{if(Bi!==0||f!==null&&(f.flags&128)!==0)for(f=d.child;f!==null;){if(O=gt(f),O!==null){for(d.flags|=128,Ru(M,!1),f=O.updateQueue,d.updateQueue=f,qf(d,f),d.subtreeFlags=0,f=x,x=d.child;x!==null;)Hd(x,f),x=x.sibling;return b(Hi,Hi.current&1|2),In&&ce(d,M.treeForkCount),d.child}f=f.sibling}M.tail!==null&&Jr()>lc&&(d.flags|=128,P=!0,Ru(M,!1),d.lanes=4194304)}else{if(!P)if(f=gt(O),f!==null){if(d.flags|=128,P=!0,f=f.updateQueue,d.updateQueue=f,qf(d,f),Ru(M,!0),M.tail===null&&M.tailMode==="hidden"&&!O.alternate&&!In)return mi(d),null}else 2*Jr()-M.renderingStartTime>lc&&x!==536870912&&(d.flags|=128,P=!0,Ru(M,!1),d.lanes=4194304);M.isBackwards?(O.sibling=d.child,d.child=O):(f=M.last,f!==null?f.sibling=O:d.child=O,M.last=O)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=Jr(),f.sibling=null,x=Hi.current,b(Hi,P?x&1|2:x&1),In&&ce(d,M.treeForkCount),f):(mi(d),null);case 22:case 23:return mt(d),me(),M=d.memoizedState!==null,f!==null?f.memoizedState!==null!==M&&(d.flags|=8192):M&&(d.flags|=8192),M?(x&536870912)!==0&&(d.flags&128)===0&&(mi(d),d.subtreeFlags&6&&(d.flags|=8192)):mi(d),x=d.updateQueue,x!==null&&qf(d,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),M=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(M=d.memoizedState.cachePool.pool),M!==x&&(d.flags|=2048),f!==null&&_(ec),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),it(Di),mi(d),null;case 25:return null;case 30:return null}throw Error(i(156,d.tag))}function eg(f,d){switch(ae(d),d.tag){case 1:return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 3:return it(Di),re(),f=d.flags,(f&65536)!==0&&(f&128)===0?(d.flags=f&-65537|128,d):null;case 26:case 27:case 5:return Se(d),null;case 31:if(d.memoizedState!==null){if(mt(d),d.alternate===null)throw Error(i(340));Mt()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 13:if(mt(d),f=d.memoizedState,f!==null&&f.dehydrated!==null){if(d.alternate===null)throw Error(i(340));Mt()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 19:return _(Hi),null;case 4:return re(),null;case 10:return it(d.type),null;case 22:case 23:return mt(d),me(),f!==null&&_(ec),f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 24:return it(Di),null;case 25:return null;default:return null}}function dy(f,d){switch(ae(d),d.tag){case 3:it(Di),re();break;case 26:case 27:case 5:Se(d);break;case 4:re();break;case 31:d.memoizedState!==null&&mt(d);break;case 13:mt(d);break;case 19:_(Hi);break;case 10:it(d.type);break;case 22:case 23:mt(d),me(),f!==null&&_(ec);break;case 24:it(Di)}}function yo(f,d){try{var x=d.updateQueue,M=x!==null?x.lastEffect:null;if(M!==null){var P=M.next;x=P;do{if((x.tag&f)===f){M=void 0;var O=x.create,$=x.inst;M=O(),$.destroy=M}x=x.next}while(x!==P)}}catch(xe){ln(d,d.return,xe)}}function xo(f,d,x){try{var M=d.updateQueue,P=M!==null?M.lastEffect:null;if(P!==null){var O=P.next;M=O;do{if((M.tag&f)===f){var $=M.inst,xe=$.destroy;if(xe!==void 0){$.destroy=void 0,P=d;var Qe=x,_t=xe;try{_t()}catch(Ut){ln(P,Qe,Ut)}}}M=M.next}while(M!==O)}}catch(Ut){ln(d,d.return,Ut)}}function Du(f){var d=f.updateQueue;if(d!==null){var x=f.stateNode;try{Ct(d,x)}catch(M){ln(f,f.return,M)}}}function Pd(f,d,x){x.props=Ic(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(M){ln(f,d,M)}}function Nu(f,d){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var M=Gu(f.stateNode);break;case 30:M=f.stateNode;break;default:M=f.stateNode}typeof x=="function"?f.refCleanup=x(M):x.current=M}}catch(P){ln(f,d,P)}}function Qr(f,d){var x=f.ref,M=f.refCleanup;if(x!==null)if(typeof M=="function")try{M()}catch(P){ln(f,d,P)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(P){ln(f,d,P)}else x.current=null}function Bc(f){var d=f.type,x=f.memoizedProps,M=f.stateNode;try{Ay(M,d,x,f)}catch(P){ln(f,f.return,P)}}function Zf(f,d,x){try{Cy(f.stateNode,f.type,x,d,f)}catch(M){ln(f,f.return,M)}}function tg(f){return f.tag===5||f.tag===3||(Ma?f.tag===26:!1)||(br?f.tag===27&&Kc(f.type):!1)||f.tag===4}function Jo(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||tg(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(br&&f.tag===27&&Kc(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Ld(f,d,x){var M=f.tag;if(M===5||M===6)f=f.stateNode,d?Dy(x,f,d):bg(x,f);else if(M!==4&&(br&&M===27&&Kc(f.type)&&(x=f.stateNode,d=null),f=f.child,f!==null))for(Ld(f,d,x),f=f.sibling;f!==null;)Ld(f,d,x),f=f.sibling}function Kf(f,d,x){var M=f.tag;if(M===5||M===6)f=f.stateNode,d?Ry(x,f,d):_g(x,f);else if(M!==4&&(br&&M===27&&Kc(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(Kf(f,d,x),f=f.sibling;f!==null;)Kf(f,d,x),f=f.sibling}function ng(f,d,x){f=f.containerInfo;try{Ag(f,x)}catch(M){ln(d,d.return,M)}}function py(f){var d=f.stateNode,x=f.memoizedProps;try{fr(f.type,x,d,f)}catch(M){ln(f,f.return,M)}}function sS(f,d){for(Zd(f.containerInfo),$i=d;$i!==null;)if(f=$i,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,$i=d;else for(;$i!==null;){f=$i;var x=f.alternate;switch(d=f.flags,f.tag){case 0:if((d&4)!==0&&(d=f.updateQueue,d=d!==null?d.events:null,d!==null))for(var M=0;M<d.length;M++){var P=d[M];P.ref.impl=P.nextImpl}break;case 11:case 15:break;case 1:if((d&1024)!==0&&x!==null){d=void 0,M=f,P=x.memoizedProps,x=x.memoizedState;var O=M.stateNode;try{var $=Ic(M.type,P);d=O.getSnapshotBeforeUpdate($,x),O.__reactInternalSnapshotBeforeUpdate=d}catch(xe){ln(M,M.return,xe)}}break;case 3:(d&1024)!==0&&Bn&&Tg(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(i(163))}if(d=f.sibling,d!==null){d.return=f.return,$i=d;break}$i=f.return}}function my(f,d,x){var M=x.flags;switch(x.tag){case 0:case 11:case 15:cs(f,x),M&4&&yo(5,x);break;case 1:if(cs(f,x),M&4)if(f=x.stateNode,d===null)try{f.componentDidMount()}catch($){ln(x,x.return,$)}else{var P=Ic(x.type,d.memoizedProps);d=d.memoizedState;try{f.componentDidUpdate(P,d,f.__reactInternalSnapshotBeforeUpdate)}catch($){ln(x,x.return,$)}}M&64&&Du(x),M&512&&Nu(x,x.return);break;case 3:if(cs(f,x),M&64&&(M=x.updateQueue,M!==null)){if(f=null,x.child!==null)switch(x.child.tag){case 27:case 5:f=Gu(x.child.stateNode);break;case 1:f=x.child.stateNode}try{Ct(M,f)}catch($){ln(x,x.return,$)}}break;case 27:br&&d===null&&M&4&&py(x);case 26:case 5:if(cs(f,x),d===null){if(M&4)Bc(x);else if(M&64){f=x.type,d=x.memoizedProps,P=x.stateNode;try{Qy(P,f,d,x)}catch($){ln(x,x.return,$)}}}M&512&&Nu(x,x.return);break;case 12:cs(f,x);break;case 31:cs(f,x),M&4&&va(f,x);break;case 13:cs(f,x),M&4&&Jf(f,x),M&64&&(M=x.memoizedState,M!==null&&(M=M.dehydrated,M!==null&&(x=aS.bind(null,x),np(M,x))));break;case 22:if(M=x.memoizedState!==null||ji,!M){d=d!==null&&d.memoizedState!==null||Wi,P=ji;var O=Wi;ji=M,(Wi=d)&&!O?xa(f,x,(x.subtreeFlags&8772)!==0):cs(f,x),ji=P,Wi=O}break;case 30:break;default:cs(f,x)}}function ig(f){var d=f.alternate;d!==null&&(f.alternate=null,ig(d)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(d=f.stateNode,d!==null&&Kd(d)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function ga(f,d,x){for(x=x.child;x!==null;)Qf(f,d,x),x=x.sibling}function Qf(f,d,x){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount($c,x)}catch{}switch(x.tag){case 26:if(Ma){Wi||Qr(x,d),ga(f,d,x),x.memoizedState?Jl(x.memoizedState):x.stateNode&&Bg(x.stateNode);break}case 27:if(br){Wi||Qr(x,d);var M=ki,P=er;Kc(x.type)&&(ki=x.stateNode,er=!1),ga(f,d,x),Pr(x.stateNode),ki=M,er=P;break}case 5:Wi||Qr(x,d);case 6:if(Bn){if(M=ki,P=er,ki=null,ga(f,d,x),ki=M,er=P,ki!==null)if(er)try{Sg(ki,x.stateNode)}catch(O){ln(x,d,O)}else try{Ny(ki,x.stateNode)}catch(O){ln(x,d,O)}}else ga(f,d,x);break;case 18:Bn&&ki!==null&&(er?ip(ki,x.stateNode):Ug(ki,x.stateNode));break;case 4:Bn?(M=ki,P=er,ki=x.stateNode.containerInfo,er=!0,ga(f,d,x),ki=M,er=P):(Zs&&ng(x.stateNode,x,wg()),ga(f,d,x));break;case 0:case 11:case 14:case 15:xo(2,x,d),Wi||xo(4,x,d),ga(f,d,x);break;case 1:Wi||(Qr(x,d),M=x.stateNode,typeof M.componentWillUnmount=="function"&&Pd(x,d,M)),ga(f,d,x);break;case 21:ga(f,d,x);break;case 22:Wi=(M=Wi)||x.memoizedState!==null,ga(f,d,x),Wi=M;break;default:ga(f,d,x)}}function va(f,d){if(Ci&&d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{uS(f)}catch(x){ln(d,d.return,x)}}}function Jf(f,d){if(Ci&&d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{fS(f)}catch(x){ln(d,d.return,x)}}function ya(f){switch(f.tag){case 31:case 13:case 19:var d=f.stateNode;return d===null&&(d=f.stateNode=new Zg),d;case 22:return f=f.stateNode,d=f._retryCache,d===null&&(d=f._retryCache=new Zg),d;default:throw Error(i(435,f.tag))}}function $o(f,d){var x=ya(f);d.forEach(function(M){if(!x.has(M)){x.add(M);var P=oS.bind(null,f,M);M.then(P,P)}})}function Dr(f,d){var x=d.deletions;if(x!==null)for(var M=0;M<x.length;M++){var P=x[M],O=f,$=d;if(Bn){var xe=$;e:for(;xe!==null;){switch(xe.tag){case 27:if(br){if(Kc(xe.type)){ki=xe.stateNode,er=!1;break e}break}case 5:ki=xe.stateNode,er=!1;break e;case 3:case 4:ki=xe.stateNode.containerInfo,er=!0;break e}xe=xe.return}if(ki===null)throw Error(i(160));Qf(O,$,P),ki=null,er=!1}else Qf(O,$,P);O=P.alternate,O!==null&&(O.return=null),P.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)$f(d,f),d=d.sibling}function $f(f,d){var x=f.alternate,M=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Dr(d,f),Nr(f),M&4&&(xo(3,f,f.return),yo(3,f),xo(5,f,f.return));break;case 1:Dr(d,f),Nr(f),M&512&&(Wi||x===null||Qr(x,x.return)),M&64&&ji&&(f=f.updateQueue,f!==null&&(M=f.callbacks,M!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?M:x.concat(M))));break;case 26:if(Ma){var P=ri;if(Dr(d,f),Nr(f),M&512&&(Wi||x===null||Qr(x,x.return)),M&4){M=x!==null?x.memoizedState:null;var O=f.memoizedState;x===null?O===null?f.stateNode===null?f.stateNode=ix(P,f.type,f.memoizedProps,f):kg(P,f.type,f.stateNode):f.stateNode=Fg(P,O,f.memoizedProps):M!==O?(M===null?x.stateNode!==null&&Bg(x.stateNode):Jl(M),O===null?kg(P,f.type,f.stateNode):Fg(P,O,f.memoizedProps)):O===null&&f.stateNode!==null&&Zf(f,f.memoizedProps,x.memoizedProps)}break}case 27:if(br){Dr(d,f),Nr(f),M&512&&(Wi||x===null||Qr(x,x.return)),x!==null&&M&4&&Zf(f,f.memoizedProps,x.memoizedProps);break}case 5:if(Dr(d,f),Nr(f),M&512&&(Wi||x===null||Qr(x,x.return)),Bn){if(f.flags&32){P=f.stateNode;try{Mg(P)}catch(Tt){ln(f,f.return,Tt)}}M&4&&f.stateNode!=null&&(P=f.memoizedProps,Zf(f,P,x!==null?x.memoizedProps:P)),M&1024&&(Zu=!0)}else Zs&&f.alternate!==null&&(f.alternate.stateNode=f.stateNode);break;case 6:if(Dr(d,f),Nr(f),M&4&&Bn){if(f.stateNode===null)throw Error(i(162));M=f.memoizedProps,x=x!==null?x.memoizedProps:M,P=f.stateNode;try{Ey(P,x,M)}catch(Tt){ln(f,f.return,Tt)}}break;case 3:if(Ma?(rx(),P=ri,ri=fh(d.containerInfo),Dr(d,f),ri=P):Dr(d,f),Nr(f),M&4){if(Bn&&Ci&&x!==null&&x.memoizedState.isDehydrated)try{Jy(d.containerInfo)}catch(Tt){ln(f,f.return,Tt)}if(Zs){M=d.containerInfo,x=d.pendingChildren;try{Ag(M,x)}catch(Tt){ln(f,f.return,Tt)}}}Zu&&(Zu=!1,Ud(f));break;case 4:Ma?(x=ri,ri=fh(f.stateNode.containerInfo),Dr(d,f),Nr(f),ri=x):(Dr(d,f),Nr(f)),M&4&&Zs&&ng(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:Dr(d,f),Nr(f);break;case 31:Dr(d,f),Nr(f),M&4&&(M=f.updateQueue,M!==null&&(f.updateQueue=null,$o(f,M)));break;case 13:Dr(d,f),Nr(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(bh=Jr()),M&4&&(M=f.updateQueue,M!==null&&(f.updateQueue=null,$o(f,M)));break;case 22:P=f.memoizedState!==null;var $=x!==null&&x.memoizedState!==null,xe=ji,Qe=Wi;if(ji=xe||P,Wi=Qe||$,Dr(d,f),Wi=Qe,ji=xe,Nr(f),M&8192&&(d=f.stateNode,d._visibility=P?d._visibility&-2:d._visibility|1,P&&(x===null||$||ji||Wi||Bl(f)),Bn)){e:if(x=null,Bn)for(d=f;;){if(d.tag===5||Ma&&d.tag===26){if(x===null){$=x=d;try{O=$.stateNode,P?lS(O):Ly($.stateNode,$.memoizedProps)}catch(Tt){ln($,$.return,Tt)}}}else if(d.tag===6){if(x===null){$=d;try{var _t=$.stateNode;P?Py(_t):Uy(_t,$.memoizedProps)}catch(Tt){ln($,$.return,Tt)}}}else if(d.tag===18){if(x===null){$=d;try{var Ut=$.stateNode;P?ex(Ut):tx($.stateNode)}catch(Tt){ln($,$.return,Tt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===f)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;x===d&&(x=null),d=d.return}x===d&&(x=null),d.sibling.return=d.return,d=d.sibling}}M&4&&(M=f.updateQueue,M!==null&&(x=M.retryQueue,x!==null&&(M.retryQueue=null,$o(f,x))));break;case 19:Dr(d,f),Nr(f),M&4&&(M=f.updateQueue,M!==null&&(f.updateQueue=null,$o(f,M)));break;case 30:break;case 21:break;default:Dr(d,f),Nr(f)}}function Nr(f){var d=f.flags;if(d&2){try{for(var x,M=f.return;M!==null;){if(tg(M)){x=M;break}M=M.return}if(Bn){if(x==null)throw Error(i(160));switch(x.tag){case 27:if(br){var P=x.stateNode,O=Jo(f);Kf(f,O,P);break}case 5:var $=x.stateNode;x.flags&32&&(Mg($),x.flags&=-33);var xe=Jo(f);Kf(f,xe,$);break;case 3:case 4:var Qe=x.stateNode.containerInfo,_t=Jo(f);Ld(f,_t,Qe);break;default:throw Error(i(161))}}}catch(Ut){ln(f,f.return,Ut)}f.flags&=-3}d&4096&&(f.flags&=-4097)}function Ud(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var d=f;Ud(d),d.tag===5&&d.flags&1024&&gg(d.stateNode),f=f.sibling}}function cs(f,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)my(f,d.alternate,d),d=d.sibling}function Bl(f){for(f=f.child;f!==null;){var d=f;switch(d.tag){case 0:case 11:case 14:case 15:xo(4,d,d.return),Bl(d);break;case 1:Qr(d,d.return);var x=d.stateNode;typeof x.componentWillUnmount=="function"&&Pd(d,d.return,x),Bl(d);break;case 27:br&&Pr(d.stateNode);case 26:case 5:Qr(d,d.return),Bl(d);break;case 22:d.memoizedState===null&&Bl(d);break;case 30:Bl(d);break;default:Bl(d)}f=f.sibling}}function xa(f,d,x){for(x=x&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var M=d.alternate,P=f,O=d,$=O.flags;switch(O.tag){case 0:case 11:case 15:xa(P,O,x),yo(4,O);break;case 1:if(xa(P,O,x),M=O,P=M.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(_t){ln(M,M.return,_t)}if(M=O,P=M.updateQueue,P!==null){var xe=M.stateNode;try{var Qe=P.shared.hiddenCallbacks;if(Qe!==null)for(P.shared.hiddenCallbacks=null,P=0;P<Qe.length;P++)At(Qe[P],xe)}catch(_t){ln(M,M.return,_t)}}x&&$&64&&Du(O),Nu(O,O.return);break;case 27:br&&py(O);case 26:case 5:xa(P,O,x),x&&M===null&&$&4&&Bc(O),Nu(O,O.return);break;case 12:xa(P,O,x);break;case 31:xa(P,O,x),x&&$&4&&va(P,O);break;case 13:xa(P,O,x),x&&$&4&&Jf(P,O);break;case 22:O.memoizedState===null&&xa(P,O,x),Nu(O,O.return);break;case 30:break;default:xa(P,O,x)}d=d.sibling}}function zl(f,d){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(f=d.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&Ce(x))}function rg(f,d){f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&Ce(f))}function Ui(f,d,x,M){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Id(f,d,x,M),d=d.sibling}function Id(f,d,x,M){var P=d.flags;switch(d.tag){case 0:case 11:case 15:Ui(f,d,x,M),P&2048&&yo(9,d);break;case 1:Ui(f,d,x,M);break;case 3:Ui(f,d,x,M),P&2048&&(f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&Ce(f)));break;case 12:if(P&2048){Ui(f,d,x,M),f=d.stateNode;try{var O=d.memoizedProps,$=O.id,xe=O.onPostCommit;typeof xe=="function"&&xe($,d.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Qe){ln(d,d.return,Qe)}}else Ui(f,d,x,M);break;case 31:Ui(f,d,x,M);break;case 13:Ui(f,d,x,M);break;case 23:break;case 22:O=d.stateNode,$=d.alternate,d.memoizedState!==null?O._visibility&2?Ui(f,d,x,M):Pu(f,d):O._visibility&2?Ui(f,d,x,M):(O._visibility|=2,Ms(f,d,x,M,(d.subtreeFlags&10256)!==0||!1)),P&2048&&zl($,d);break;case 24:Ui(f,d,x,M),P&2048&&rg(d.alternate,d);break;default:Ui(f,d,x,M)}}function Ms(f,d,x,M,P){for(P=P&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var O=f,$=d,xe=x,Qe=M,_t=$.flags;switch($.tag){case 0:case 11:case 15:Ms(O,$,xe,Qe,P),yo(8,$);break;case 23:break;case 22:var Ut=$.stateNode;$.memoizedState!==null?Ut._visibility&2?Ms(O,$,xe,Qe,P):Pu(O,$):(Ut._visibility|=2,Ms(O,$,xe,Qe,P)),P&&_t&2048&&zl($.alternate,$);break;case 24:Ms(O,$,xe,Qe,P),P&&_t&2048&&rg($.alternate,$);break;default:Ms(O,$,xe,Qe,P)}d=d.sibling}}function Pu(f,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var x=f,M=d,P=M.flags;switch(M.tag){case 22:Pu(x,M),P&2048&&zl(M.alternate,M);break;case 24:Pu(x,M),P&2048&&rg(M.alternate,M);break;default:Pu(x,M)}d=d.sibling}}function _o(f,d,x){if(f.subtreeFlags&$s)for(f=f.child;f!==null;)Vl(f,d,x),f=f.sibling}function Vl(f,d,x){switch(f.tag){case 26:if(_o(f,d,x),f.flags&$s)if(f.memoizedState!==null)sx(x,ri,f.memoizedState,f.memoizedProps);else{var M=f.stateNode,P=f.type;f=f.memoizedProps,((d&335544128)===d||pg(P,f))&&Qd(x,M,P,f)}break;case 5:_o(f,d,x),f.flags&$s&&(M=f.stateNode,P=f.type,f=f.memoizedProps,((d&335544128)===d||pg(P,f))&&Qd(x,M,P,f));break;case 3:case 4:Ma?(M=ri,ri=fh(f.stateNode.containerInfo),_o(f,d,x),ri=M):_o(f,d,x);break;case 22:f.memoizedState===null&&(M=f.alternate,M!==null&&M.memoizedState!==null?(M=$s,$s=16777216,_o(f,d,x),$s=M):_o(f,d,x));break;default:_o(f,d,x)}}function Od(f){var d=f.alternate;if(d!==null&&(f=d.child,f!==null)){d.child=null;do d=f.sibling,f.sibling=null,f=d;while(f!==null)}}function Lu(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var M=d[x];$i=M,Xs(M,f)}Od(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Fd(f),f=f.sibling}function Fd(f){switch(f.tag){case 0:case 11:case 15:Lu(f),f.flags&2048&&xo(9,f,f.return);break;case 3:Lu(f);break;case 12:Lu(f);break;case 22:var d=f.stateNode;f.memoizedState!==null&&d._visibility&2&&(f.return===null||f.return.tag!==13)?(d._visibility&=-3,eh(f)):Lu(f);break;default:Lu(f)}}function eh(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var M=d[x];$i=M,Xs(M,f)}Od(f)}for(f=f.child;f!==null;){switch(d=f,d.tag){case 0:case 11:case 15:xo(8,d,d.return),eh(d);break;case 22:x=d.stateNode,x._visibility&2&&(x._visibility&=-3,eh(d));break;default:eh(d)}f=f.sibling}}function Xs(f,d){for(;$i!==null;){var x=$i;switch(x.tag){case 0:case 11:case 15:xo(8,x,d);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var M=x.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:Ce(x.memoizedState.cache)}if(M=x.child,M!==null)M.return=x,$i=M;else e:for(x=f;$i!==null;){M=$i;var P=M.sibling,O=M.return;if(ig(M),M===x){$i=null;break e}if(P!==null){P.return=O,$i=P;break e}$i=O}}}function Gl(f){var d=gn(f);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(i(364));return d}if(f=Qi(f),f===null)throw Error(i(362));return f.stateNode.current}function Hl(f,d){var x=f.tag;switch(d.$$typeof){case Na:if(f.type===d.value)return!0;break;case Qu:e:{for(d=d.value,f=[f,0],x=0;x<f.length;){var M=f[x++],P=M.tag,O=f[x++],$=d[O];if(P!==5&&P!==26&&P!==27||!Kl(M)){for(;$!=null&&Hl(M,$);)O++,$=d[O];if(O===d.length){d=!0;break e}else for(M=M.child;M!==null;)f.push(M,O),M=M.sibling}}d=!1}return d;case Ju:if((x===5||x===26||x===27)&&xg(f.stateNode,d.value))return!0;break;case rc:if((x===5||x===6||x===26||x===27)&&(f=ch(f),f!==null&&0<=f.indexOf(d.value)))return!0;break;case xh:if((x===5||x===26||x===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Uu(f){switch(f.$$typeof){case Na:return"<"+(g(f.value)||"Unknown")+">";case Qu:return":has("+(Uu(f)||"")+")";case Ju:return'[role="'+f.value+'"]';case rc:return'"'+f.value+'"';case xh:return'[data-testname="'+f.value+'"]';default:throw Error(i(365))}}function Iu(f,d){var x=[];f=[f,0];for(var M=0;M<f.length;){var P=f[M++],O=P.tag,$=f[M++],xe=d[$];if(O!==5&&O!==26&&O!==27||!Kl(P)){for(;xe!=null&&Hl(P,xe);)$++,xe=d[$];if($===d.length)x.push(P);else for(P=P.child;P!==null;)f.push(P,$),P=P.sibling}}return x}function Ts(f,d){if(!_r)throw Error(i(363));f=Gl(f),f=Iu(f,d),d=[],f=Array.from(f);for(var x=0;x<f.length;){var M=f[x++],P=M.tag;if(P===5||P===26||P===27)Kl(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)f.push(M),M=M.sibling}return d}function Ai(){return(Nn&2)!==0&&On!==0?On&-On:tn.T!==null?Ae():ju()}function el(){if(ms===0)if((On&536870912)===0||In){var f=Jc;Jc<<=1,(Jc&3932160)===0&&(Jc=262144),ms=f}else ms=536870912;return f=Ds.current,f!==null&&(f.flags|=32),ms}function Ii(f,d,x){(f===wn&&(si===2||si===9)||f.cancelPendingCommit!==null)&&(Gi(f,0),So(f,On,ms,!1)),I(f,x),((Nn&2)===0||f!==wn)&&(f===wn&&((Nn&2)===0&&(oc|=x),Bi===4&&So(f,On,ms,!1)),st(f))}function Wa(f,d,x){if((Nn&6)!==0)throw Error(i(327));var M=!x&&(d&127)===0&&(d&f.expiredLanes)===0||A(f,d),P=M?yy(f,d):Mo(f,d,!0),O=M;do{if(P===0){sc&&!M&&So(f,d,0,!1);break}else{if(x=f.current.alternate,O&&!gy(x)){P=Mo(f,d,!1),O=!1;continue}if(P===2){if(O=d,f.errorRecoveryDisabledLanes&O)var $=0;else $=f.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){d=$;e:{var xe=f;P=_h;var Qe=Ci&&xe.current.memoizedState.isDehydrated;if(Qe&&(Gi(xe,$).flags|=256),$=Mo(xe,$,!1),$!==2){if(ac&&!Qe){xe.errorRecoveryDisabledLanes|=O,oc|=O,P=4;break e}O=Ps,Ps=P,O!==null&&(Ps===null?Ps=O:Ps.push.apply(Ps,O))}P=$}if(O=!1,P!==2)continue}}if(P===1){Gi(f,0),So(f,d,0,!0);break}e:{switch(M=f,O=P,O){case 0:case 1:throw Error(i(345));case 4:if((d&4194048)!==d)break;case 6:So(M,d,ms,!Za);break e;case 2:Ps=null;break;case 3:case 5:break;default:throw Error(i(329))}if((d&62914560)===d&&(P=bh+300-Jr(),10<P)){if(So(M,d,ms,!Za),T(M,0,!0)!==0)break e;Fo=d,M.timeoutHandle=dg(bo.bind(null,M,x,Ps,Sh,xp,d,ms,oc,ef,Za,O,"Throttled",-0,0),P);break e}bo(M,x,Ps,Sh,xp,d,ms,oc,ef,Za,O,null,-0,0)}}break}while(!0);st(f)}function bo(f,d,x,M,P,O,$,xe,Qe,_t,Ut,Tt,Gt,pn){if(f.timeoutHandle=As,Tt=d.subtreeFlags,Tt&8192||(Tt&16785408)===16785408){Tt=mg(),Vl(d,O,Tt);var tr=(O&62914560)===O?bh-Jr():(O&4194048)===O?su-Jr():0;if(tr=wy(Tt,tr),tr!==null){Fo=O,f.cancelPendingCommit=tr(wo.bind(null,f,d,O,x,M,P,$,xe,Qe,Ut,Tt,null,Gt,pn)),So(f,O,$,!_t);return}}wo(f,d,O,x,M,P,$,xe,Qe)}function gy(f){for(var d=f;;){var x=d.tag;if((x===0||x===11||x===15)&&d.flags&16384&&(x=d.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var M=0;M<x.length;M++){var P=x[M],O=P.getSnapshot;P=P.value;try{if(!Ji(O(),P))return!1}catch{return!1}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function So(f,d,x,M){d&=~$u,d&=~oc,f.suspendedLanes|=d,f.pingedLanes&=~d,M&&(f.warmLanes|=d),M=f.expirationTimes;for(var P=d;0<P;){var O=31-Cs(P),$=1<<O;M[O]=-1,P&=~$}x!==0&&R(f,x,d)}function kd(){return(Nn&6)===0?(at(0),!1):!0}function Bd(){if(Pn!==null){if(si===0)var f=Pn.return;else f=Pn,Ya=vi=null,en(f),tc=null,eu=0,f=Pn;for(;f!==null;)dy(f.alternate,f),f=f.return;Pn=null}}function Gi(f,d){var x=f.timeoutHandle;x!==As&&(f.timeoutHandle=As,Ty(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),Fo=0,Bd(),wn=f,Pn=x=qs(f.current,null),On=d,si=0,hr=null,Za=!1,sc=A(f,d),ac=!1,ef=ms=$u=oc=hl=Bi=0,Ps=_h=null,xp=!1,(d&8)!==0&&(d|=d&32);var M=f.entangledLanes;if(M!==0)for(f=f.entanglements,M&=d;0<M;){var P=31-Cs(M),O=1<<P;d|=f[P],M&=~O}return Oo=d,Zi(),x}function gi(f,d){vn=null,tn.H=Js,d===Tr||d===Ra?(d=Ht(),si=3):d===vp?(d=Ht(),si=4):si=d===ps?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,hr=d,Pn===null&&(Bi=1,Cd(f,le(d,f.current)))}function kn(){var f=Ds.current;return f===null?!0:(On&4194048)===On?Ns===null:(On&62914560)===On||(On&536870912)!==0?f===Ns:!1}function tl(){var f=tn.H;return tn.H=Js,f===null?Js:f}function Ys(){var f=tn.A;return tn.A=Ku,f}function Ou(){Bi=4,Za||(On&4194048)!==On&&Ds.current!==null||(sc=!0),(hl&134217727)===0&&(oc&134217727)===0||wn===null||So(wn,On,ms,!1)}function Mo(f,d,x){var M=Nn;Nn|=2;var P=tl(),O=Ys();(wn!==f||On!==d)&&(Sh=null,Gi(f,d)),d=!1;var $=Bi;e:do try{if(si!==0&&Pn!==null){var xe=Pn,Qe=hr;switch(si){case 8:Bd(),$=6;break e;case 3:case 2:case 9:case 6:Ds.current===null&&(d=!0);var _t=si;if(si=0,hr=null,To(f,xe,Qe,_t),x&&sc){$=0;break e}break;default:_t=si,si=0,hr=null,To(f,xe,Qe,_t)}}vy(),$=Bi;break}catch(Ut){gi(f,Ut)}while(!0);return d&&f.shellSuspendCounter++,Ya=vi=null,Nn=M,tn.H=P,tn.A=O,Pn===null&&(wn=null,On=0,Zi()),$}function vy(){for(;Pn!==null;)jl(Pn)}function yy(f,d){var x=Nn;Nn|=2;var M=tl(),P=Ys();wn!==f||On!==d?(Sh=null,lc=Jr()+500,Gi(f,d)):sc=A(f,d);e:do try{if(si!==0&&Pn!==null){d=Pn;var O=hr;t:switch(si){case 1:si=0,hr=null,To(f,d,O,1);break;case 2:case 9:if(bt(O)){si=0,hr=null,zd(d);break}d=function(){si!==2&&si!==9||wn!==f||(si=7),st(f)},O.then(d,d);break e;case 3:si=7;break e;case 4:si=5;break e;case 7:bt(O)?(si=0,hr=null,zd(d)):(si=0,hr=null,To(f,d,O,7));break;case 5:var $=null;switch(Pn.tag){case 26:$=Pn.memoizedState;case 5:case 27:var xe=Pn,Qe=xe.type,_t=xe.pendingProps;if($?Vg($):Oi(xe.stateNode,Qe,_t)){si=0,hr=null;var Ut=xe.sibling;if(Ut!==null)Pn=Ut;else{var Tt=xe.return;Tt!==null?(Pn=Tt,ku(Tt)):Pn=null}break t}}si=0,hr=null,To(f,d,O,5);break;case 6:si=0,hr=null,To(f,d,O,6);break;case 8:Bd(),Bi=6;break e;default:throw Error(i(462))}}Fu();break}catch(Gt){gi(f,Gt)}while(!0);return Ya=vi=null,tn.H=M,tn.A=P,Nn=x,Pn!==null?0:(wn=null,On=0,Zi(),Bi)}function Fu(){for(;Pn!==null&&!ox();)jl(Pn)}function jl(f){var d=Qm(f.alternate,f,Oo);f.memoizedProps=f.pendingProps,d===null?ku(f):Pn=d}function zd(f){var d=f,x=d.alternate;switch(d.tag){case 15:case 0:d=Wm(x,d,d.pendingProps,d.type,void 0,On);break;case 11:d=Wm(x,d,d.pendingProps,d.type.render,d.ref,On);break;case 5:en(d);default:dy(x,d),d=Pn=Hd(d,Oo),d=Qm(x,d,Oo)}f.memoizedProps=f.pendingProps,d===null?ku(f):Pn=d}function To(f,d,x,M){Ya=vi=null,en(d),tc=null,eu=0;var P=d.return;try{if(rS(f,P,d,x,On)){Bi=1,Cd(f,le(x,f.current)),Pn=null;return}}catch(O){if(P!==null)throw Pn=P,O;Bi=1,Cd(f,le(x,f.current)),Pn=null;return}d.flags&32768?(In||M===1?f=!0:sc||(On&536870912)!==0?f=!1:(Za=f=!0,(M===2||M===9||M===3||M===6)&&(M=Ds.current,M!==null&&M.tag===13&&(M.flags|=16384))),Wl(d,f)):ku(d)}function ku(f){var d=f;do{if((d.flags&32768)!==0){Wl(d,Za);return}f=d.return;var x=hy(d.alternate,d,Oo);if(x!==null){Pn=x;return}if(d=d.sibling,d!==null){Pn=d;return}Pn=d=f}while(d!==null);Bi===0&&(Bi=5)}function Wl(f,d){do{var x=eg(f.alternate,f);if(x!==null){x.flags&=32767,Pn=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!d&&(f=f.sibling,f!==null)){Pn=f;return}Pn=f=x}while(f!==null);Bi=6,Pn=null}function wo(f,d,x,M,P,O,$,xe,Qe){f.cancelPendingCommit=null;do Ao();while(dr!==0);if((Nn&6)!==0)throw Error(i(327));if(d!==null){if(d===f.current)throw Error(i(177));if(O=d.lanes|d.childLanes,O|=tu,k(f,x,O,$,xe,Qe),f===wn&&(Pn=wn=null,On=0),au=d,pl=f,Fo=x,tf=O,_p=P,Kg=M,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,ur(dh,function(){return th(),null})):(f.callbackNode=null,f.callbackPriority=0),M=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||M){M=tn.T,tn.T=null,P=Sa(),Un(2),$=Nn,Nn|=4;try{sS(f,d,x)}finally{Nn=$,Un(P),tn.T=M}}dr=1,nl(),Eo(),Vd()}}function nl(){if(dr===1){dr=0;var f=pl,d=au,x=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||x){x=tn.T,tn.T=null;var M=Sa();Un(2);var P=Nn;Nn|=4;try{$f(d,f),My(f.containerInfo)}finally{Nn=P,Un(M),tn.T=x}}f.current=d,dr=2}}function Eo(){if(dr===2){dr=0;var f=pl,d=au,x=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||x){x=tn.T,tn.T=null;var M=Sa();Un(2);var P=Nn;Nn|=4;try{my(f,d.alternate,d)}finally{Nn=P,Un(M),tn.T=x}}dr=3}}function Vd(){if(dr===4||dr===3){dr=0,Hg();var f=pl,d=au,x=Fo,M=Kg;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?dr=5:(dr=0,au=pl=null,Gd(f,f.pendingLanes));var P=f.pendingLanes;if(P===0&&(dl=null),X(x),d=d.stateNode,Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot($c,d,void 0,(d.current.flags&128)===128)}catch{}if(M!==null){d=tn.T,P=Sa(),Un(2),tn.T=null;try{for(var O=f.onRecoverableError,$=0;$<M.length;$++){var xe=M[$];O(xe.value,{componentStack:xe.stack})}}finally{tn.T=d,Un(P)}}(Fo&3)!==0&&Ao(),st(f),P=f.pendingLanes,(x&261930)!==0&&(P&42)!==0?f===Mh?qn++:(qn=0,Mh=f):qn=0,Ci&&uh(),at(0)}}function Gd(f,d){(f.pooledCacheLanes&=d)===0&&(d=f.pooledCache,d!=null&&(f.pooledCache=null,Ce(d)))}function Ao(){return nl(),Eo(),Vd(),th()}function th(){if(dr!==5)return!1;var f=pl,d=tf;tf=0;var x=X(Fo),M=32>x?32:x;x=tn.T;var P=Sa();try{Un(M),tn.T=null,M=_p,_p=null;var O=pl,$=Fo;if(dr=0,au=pl=null,Fo=0,(Nn&6)!==0)throw Error(i(331));var xe=Nn;if(Nn|=4,Fd(O.current),Id(O,O.current,$,M),Nn=xe,at(0,!1),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot($c,O)}catch{}return!0}finally{Un(P),tn.T=x,Gd(f,d)}}function Xl(f,d,x){d=le(x,d),d=Hm(f.stateNode,d,2),f=ke(f,d,2),f!==null&&(I(f,2),st(f))}function ln(f,d,x){if(f.tag===3)Xl(f,f,x);else for(;d!==null;){if(d.tag===3){Xl(d,f,x);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(dl===null||!dl.has(M))){f=le(x,f),x=ey(2),M=ke(d,x,2),M!==null&&(ty(x,M,d,f),I(M,2),st(M));break}}d=d.return}}function Bu(f,d,x){var M=f.pingCache;if(M===null){M=f.pingCache=new ea;var P=new Set;M.set(d,P)}else P=M.get(d),P===void 0&&(P=new Set,M.set(d,P));P.has(x)||(ac=!0,P.add(x),f=xy.bind(null,f,d,x),d.then(f,f))}function xy(f,d,x){var M=f.pingCache;M!==null&&M.delete(d),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,wn===f&&(On&x)===x&&(Bi===4||Bi===3&&(On&62914560)===On&&300>Jr()-bh?(Nn&2)===0&&Gi(f,0):$u|=x,ef===On&&(ef=0)),st(f)}function _y(f,d){d===0&&(d=N()),f=Qt(f,d),f!==null&&(I(f,d),st(f))}function aS(f){var d=f.memoizedState,x=0;d!==null&&(x=d.retryLane),_y(f,x)}function oS(f,d){var x=0;switch(f.tag){case 31:case 13:var M=f.stateNode,P=f.memoizedState;P!==null&&(x=P.retryLane);break;case 19:M=f.stateNode;break;case 22:M=f.stateNode._retryCache;break;default:throw Error(i(314))}M!==null&&M.delete(d),_y(f,x)}function ur(f,d){return hh(f,d)}function sg(f,d,x,M){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zc(f){return f=f.prototype,!(!f||!f.isReactComponent)}function qs(f,d){var x=f.alternate;return x===null?(x=t(f.tag,d,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=d,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,d=f.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function Hd(f,d){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=d,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,d=x.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),f}function il(f,d,x,M,P,O){var $=0;if(M=f,typeof f=="function")zc(f)&&($=1);else if(typeof f=="string")$=Ma&&br?rp(f,x,Lr.current)?26:Gg(f)?27:5:Ma?rp(f,x,Lr.current)?26:5:br&&Gg(f)?27:5;else e:switch(f){case sh:return f=t(31,x,d,P),f.elementType=sh,f.lanes=O,f;case jc:return _a(x.children,P,O,d);case Wc:$=8,P|=24;break;case Xc:return f=t(12,x,d,P|2),f.elementType=Xc,f.lanes=O,f;case Yd:return f=t(13,x,d,P),f.elementType=Yd,f.lanes=O,f;case rl:return f=t(19,x,d,P),f.elementType=rl,f.lanes=O,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case ba:$=10;break e;case rh:$=9;break e;case zu:$=11;break e;case qd:$=14;break e;case us:$=16,M=null;break e}$=29,x=Error(i(130,f===null?"null":typeof f,"")),M=null}return d=t($,x,d,P),d.elementType=f,d.type=M,d.lanes=O,d}function _a(f,d,x,M){return f=t(7,f,M,d),f.lanes=x,f}function ag(f,d,x){return f=t(6,f,null,d),f.lanes=x,f}function og(f){var d=t(18,null,null,0);return d.stateNode=f,d}function lg(f,d,x){return d=t(4,f.children!==null?f.children:[],f.key,d),d.lanes=x,d.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},d}function by(f,d,x,M,P,O,$,xe,Qe){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=As,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=M,this.onUncaughtError=P,this.onCaughtError=O,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Qe,this.incompleteTransitions=new Map}function Yl(f,d,x,M,P,O,$,xe,Qe,_t,Ut,Tt){return f=new by(f,d,x,$,Qe,_t,Ut,Tt,xe),d=1,O===!0&&(d|=24),O=t(3,null,null,d),f.current=O,O.stateNode=f,d=Ie(),d.refCount++,f.pooledCache=d,d.refCount++,O.memoizedState={element:M,isDehydrated:x,cache:d},W(O),f}function jd(f){return f?(f=Ro,f):Ro}function nh(f){var d=f._reactInternals;if(d===void 0)throw typeof f.render=="function"?Error(i(188)):(f=Object.keys(f).join(","),Error(i(268,f)));return f=l(d),f=f!==null?u(f):null,f===null?null:Gu(f.stateNode)}function cg(f,d,x,M,P,O){P=jd(P),M.context===null?M.context=P:M.pendingContext=P,M=ge(d),M.payload={element:x},O=O===void 0?null:O,O!==null&&(M.callback=O),x=ke(f,M,d),x!==null&&(Ii(x,f,d),qe(x,f,d))}function Vc(f,d){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<d?x:d}}function ih(f,d){Vc(f,d),(f=f.alternate)&&Vc(f,d)}var Mn={},Wd=LN,ws=GX,Xd=Object.assign,Gc=Symbol.for("react.element"),Co=Symbol.for("react.transitional.element"),Hc=Symbol.for("react.portal"),jc=Symbol.for("react.fragment"),Wc=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),rh=Symbol.for("react.consumer"),ba=Symbol.for("react.context"),zu=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),rl=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),sh=Symbol.for("react.activity"),ug=Symbol.for("react.memo_cache_sentinel"),sl=Symbol.iterator,ql=Symbol.for("react.client.reference"),Zl=Array.isArray,tn=Wd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fg=e.rendererVersion,ah=e.rendererPackageName,Vu=e.extraDevToolsConfig,Gu=e.getPublicInstance,Sy=e.getRootHostContext,Hu=e.getChildHostContext,Zd=e.prepareForCommit,My=e.resetAfterCommit,hg=e.createInstance;e.cloneMutableInstance;var oh=e.appendInitialChild,Es=e.finalizeInitialChildren,fs=e.shouldSetTextContent,al=e.createTextInstance;e.cloneMutableTextInstance;var dg=e.scheduleTimeout,Ty=e.cancelTimeout,As=e.noTimeout,Ki=e.isPrimaryRenderer;e.warnsIfNotActing;var Bn=e.supportsMutation,Zs=e.supportsPersistence,Ci=e.supportsHydration,gn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var li=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Un=e.setCurrentUpdatePriority,Sa=e.getCurrentUpdatePriority,ju=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Yc=e.shouldAttemptEagerTransition,Kd=e.detachDeletedInstance;e.requestPostPaintCallback;var lh=e.maySuspendCommit,Wu=e.maySuspendCommitOnUpdate,pg=e.maySuspendCommitInSyncRender,Oi=e.preloadInstance,mg=e.startSuspendingCommit,Qd=e.suspendInstance;e.suspendOnActiveViewTransition;var wy=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var qc=e.NotPendingTransition,Zc=e.HostTransitionContext,gg=e.resetFormInstance;e.bindToConsole;var vg=e.supportsMicrotasks,yg=e.scheduleMicrotask,_r=e.supportsTestSelectors,Qi=e.findFiberRoot,Jd=e.getBoundingRect,ch=e.getTextContent,Kl=e.isHiddenSubtree,xg=e.matchAccessibilityRole,ol=e.setFocusIfFocusable,$d=e.setupIntersectionObserver,_g=e.appendChild,bg=e.appendChildToContainer,Ey=e.commitTextUpdate,Ay=e.commitMount,Cy=e.commitUpdate,Ry=e.insertBefore,Dy=e.insertInContainerBefore,Ny=e.removeChild,Sg=e.removeChildFromContainer,Mg=e.resetTextContent,lS=e.hideInstance,Py=e.hideTextInstance,Ly=e.unhideInstance,Uy=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Tg=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Iy=e.cloneInstance,wg=e.createContainerChildSet,Eg=e.appendChildToContainerChildSet,Oy=e.finalizeContainerChildren,Ag=e.replaceContainerChildren,Fy=e.cloneHiddenInstance,Cg=e.cloneHiddenTextInstance,Ql=e.isSuspenseInstancePending,ep=e.isSuspenseInstanceFallback,tp=e.getSuspenseInstanceFallbackErrorDetails,np=e.registerSuspenseInstanceRetry,ky=e.canHydrateFormStateMarker,Rg=e.isFormStateMarkerMatching,By=e.getNextHydratableSibling,zy=e.getNextHydratableSiblingAfterSingleton,Vy=e.getFirstHydratableChild,Gy=e.getFirstHydratableChildWithinContainer,Hy=e.getFirstHydratableChildWithinActivityInstance,jy=e.getFirstHydratableChildWithinSuspenseInstance,Dg=e.getFirstHydratableChildWithinSingleton,Wy=e.canHydrateInstance,Xy=e.canHydrateTextInstance,Ng=e.canHydrateActivityInstance,Yy=e.canHydrateSuspenseInstance,qy=e.hydrateInstance,cS=e.hydrateTextInstance,Pg=e.hydrateActivityInstance,Zy=e.hydrateSuspenseInstance,Ky=e.getNextHydratableInstanceAfterActivityInstance,Lg=e.getNextHydratableInstanceAfterSuspenseInstance,Qy=e.commitHydratedInstance,Jy=e.commitHydratedContainer,uS=e.commitHydratedActivityInstance,fS=e.commitHydratedSuspenseInstance,$y=e.finalizeHydratedChildren,uh=e.flushHydrationEvents;e.clearActivityBoundary;var Ug=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var ip=e.clearSuspenseBoundaryFromContainer,ex=e.hideDehydratedBoundary,tx=e.unhideDehydratedBoundary,Xu=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var nx=e.validateHydratableInstance,Ig=e.validateHydratableTextInstance,Ma=e.supportsResources,rp=e.isHostHoistableType,fh=e.getHoistableRoot,Og=e.getResource,Fg=e.acquireResource,Jl=e.releaseResource,ix=e.hydrateHoistable,kg=e.mountHoistable,Bg=e.unmountHoistable,sp=e.createHoistableInstance,rx=e.prepareToCommitHoistables,zg=e.mayResourceSuspendCommit,Vg=e.preloadResource,sx=e.suspendResource,br=e.supportsSingletons,ap=e.resolveSingletonInstance,fr=e.acquireSingletonInstance,Pr=e.releaseSingletonInstance,Gg=e.isHostSingletonType,Kc=e.isSingletonScope,op=[],Qc=-1,Ro={},Cs=Math.clz32?Math.clz32:w,lp=Math.log,ax=Math.LN2,cp=256,Jc=262144,Yu=4194304,hh=ws.unstable_scheduleCallback,up=ws.unstable_cancelCallback,ox=ws.unstable_shouldYield,Hg=ws.unstable_requestPaint,Jr=ws.unstable_now,fp=ws.unstable_ImmediatePriority,lx=ws.unstable_UserBlockingPriority,dh=ws.unstable_NormalPriority,hp=ws.unstable_IdlePriority,jg=ws.log,cx=ws.unstable_setDisableYieldValue,$c=null,Rs=null,Ji=typeof Object.is=="function"?Object.is:Q,dp=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},hS=Object.prototype.hasOwnProperty,pp,Do,ph=!1,Wg=new WeakMap,ll=[],No=0,ci=null,mh=0,Ta=[],Ks=0,wa=null,Vr=1,Xa="",Lr=v(null),cl=v(null),Gr=v(null),gh=v(null),Sr=null,Ri=null,In=!1,Po=null,hs=!1,mp=Error(i(519)),Ea=v(null),vi=null,Ya=null,ux=typeof AbortController<"u"?AbortController:function(){var f=[],d=this.signal={aborted:!1,addEventListener:function(x,M){f.push(M)}};this.abort=function(){d.aborted=!0,f.forEach(function(x){return x()})}},Ur=ws.unstable_scheduleCallback,dS=ws.unstable_NormalPriority,Di={$$typeof:ba,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},vh=null,ii=null,$r=!1,Aa=!1,gp=!1,$l=0,qu=null,Xg=0,ul=0,Mr=null,Ca=tn.S;tn.S=function(f,d){su=Jr(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&ht(f,d),Ca!==null&&Ca(f,d)};var ec=v(null),Tr=Error(i(460)),vp=Error(i(474)),Ra=Error(i(542)),Lo={then:function(){}},ds=null,tc=null,eu=0,Hr=xr(!0),Yg=xr(!1),jr=[],Uo=0,tu=0,Qs=!1,yp=!1,nu=v(null),nc=v(0),Ds=v(null),Ns=null,Hi=v(0),fl=0,vn=null,Jt=null,hn=null,Tn=!1,bn=!1,zn=!1,es=0,Da=0,qa=null,qg=0,Js={readContext:K,use:Yn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Js.useEffectEvent=vt;var Fi={readContext:K,use:Yn,useCallback:function(f,d){return jt().memoizedState=[f,d===void 0?null:d],f},useContext:K,useEffect:Ll,useImperativeHandle:function(f,d,x){x=x!=null?x.concat([f]):null,Ga(4194308,4,po.bind(null,d,f),x)},useLayoutEffect:function(f,d){return Ga(4194308,4,f,d)},useInsertionEffect:function(f,d){Ga(4,2,f,d)},useMemo:function(f,d){var x=jt();d=d===void 0?null:d;var M=f();if(zn){q(!0);try{f()}finally{q(!1)}}return x.memoizedState=[M,d],M},useReducer:function(f,d,x){var M=jt();if(x!==void 0){var P=x(d);if(zn){q(!0);try{x(d)}finally{q(!1)}}}else P=d;return M.memoizedState=M.baseState=P,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:P},M.queue=f,f=f.dispatch=Kr.bind(null,vn,f),[M.memoizedState,f]},useRef:function(f){var d=jt();return f={current:f},d.memoizedState=f},useState:function(f){f=Dl(f);var d=f.queue,x=ja.bind(null,vn,d);return d.dispatch=x,[f.memoizedState,x]},useDebugValue:Ol,useDeferredValue:function(f,d){var x=jt();return cr(x,f,d)},useTransition:function(){var f=Dl(!1);return f=Lc.bind(null,vn,f.queue,!0,!1),jt().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,d,x){var M=vn,P=jt();if(In){if(x===void 0)throw Error(i(407));x=x()}else{if(x=d(),wn===null)throw Error(i(349));(On&127)!==0||wi(M,d,x)}P.memoizedState=x;var O={value:x,getSnapshot:d};return P.queue=O,Ll(Ss.bind(null,M,O,f),[f]),M.flags|=2048,Zr(9,{destroy:void 0},as.bind(null,M,O,x,d),null),x},useId:function(){var f=jt(),d=wn.identifierPrefix;if(In){var x=Xa,M=Vr;x=(M&~(1<<32-Cs(M)-1)).toString(32)+x,d="_"+d+"R_"+x,x=es++,0<x&&(d+="H"+x.toString(32)),d+="_"}else x=qg++,d="_"+d+"r_"+x.toString(32)+"_";return f.memoizedState=d},useHostTransitionStatus:Tu,useFormState:Nl,useActionState:Nl,useOptimistic:function(f){var d=jt();d.memoizedState=d.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=x,d=wd.bind(null,vn,!0,x),x.dispatch=d,[f,d]},useMemoCache:ai,useCacheRefresh:function(){return jt().memoizedState=Ws.bind(null,vn)},useEffectEvent:function(f){var d=jt(),x={impl:f};return d.memoizedState=x,function(){if((Nn&2)!==0)throw Error(i(440));return x.impl.apply(void 0,arguments)}}},Io={readContext:K,use:Yn,useCallback:mo,useContext:K,useEffect:pa,useImperativeHandle:Il,useInsertionEffect:Ha,useLayoutEffect:Qo,useMemo:go,useReducer:oi,useRef:Pc,useState:function(){return oi(Cn)},useDebugValue:Ol,useDeferredValue:function(f,d){var x=xt();return jf(x,Jt.memoizedState,f,d)},useTransition:function(){var f=oi(Cn)[0],d=xt().memoizedState;return[typeof f=="boolean"?f:Nt(f),d]},useSyncExternalStore:lr,useId:wu,useHostTransitionStatus:Tu,useFormState:fo,useActionState:fo,useOptimistic:function(f,d){var x=xt();return ha(x,Jt,f,d)},useMemoCache:ai,useCacheRefresh:Br};Io.useEffectEvent=Ei;var ic={readContext:K,use:Yn,useCallback:mo,useContext:K,useEffect:pa,useImperativeHandle:Il,useInsertionEffect:Ha,useLayoutEffect:Qo,useMemo:go,useReducer:fi,useRef:Pc,useState:function(){return fi(Cn)},useDebugValue:Ol,useDeferredValue:function(f,d){var x=xt();return Jt===null?cr(x,f,d):jf(x,Jt.memoizedState,f,d)},useTransition:function(){var f=fi(Cn)[0],d=xt().memoizedState;return[typeof f=="boolean"?f:Nt(f),d]},useSyncExternalStore:lr,useId:wu,useHostTransitionStatus:Tu,useFormState:ho,useActionState:ho,useOptimistic:function(f,d){var x=xt();return Jt!==null?ha(x,Jt,f,d):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:ai,useCacheRefresh:Br};ic.useEffectEvent=Ei;var yh={enqueueSetState:function(f,d,x){f=f._reactInternals;var M=Ai(),P=ge(M);P.payload=d,x!=null&&(P.callback=x),d=ke(f,P,M),d!==null&&(Ii(d,f,M),qe(d,f,M))},enqueueReplaceState:function(f,d,x){f=f._reactInternals;var M=Ai(),P=ge(M);P.tag=1,P.payload=d,x!=null&&(P.callback=x),d=ke(f,P,M),d!==null&&(Ii(d,f,M),qe(d,f,M))},enqueueForceUpdate:function(f,d){f=f._reactInternals;var x=Ai(),M=ge(x);M.tag=2,d!=null&&(M.callback=d),d=ke(f,M,x),d!==null&&(Ii(d,f,x),qe(d,f,x))}},ps=Error(i(461)),bi=!1,iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},ji=!1,Wi=!1,Zu=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,$i=null,ki=null,er=!1,ri=null,$s=8192,Ku={getCacheForType:function(f){var d=K(Di),x=d.data.get(f);return x===void 0&&(x=f(),d.data.set(f,x)),x},cacheSignal:function(){return K(Di).controller.signal}},Na=0,Qu=1,Ju=2,xh=3,rc=4;if(typeof Symbol=="function"&&Symbol.for){var ru=Symbol.for;Na=ru("selector.component"),Qu=ru("selector.has_pseudo_class"),Ju=ru("selector.role"),xh=ru("selector.test_id"),rc=ru("selector.text")}var ea=typeof WeakMap=="function"?WeakMap:Map,Nn=0,wn=null,Pn=null,On=0,si=0,hr=null,Za=!1,sc=!1,ac=!1,Oo=0,Bi=0,hl=0,oc=0,$u=0,ms=0,ef=0,_h=null,Ps=null,xp=!1,bh=0,su=0,lc=1/0,Sh=null,dl=null,dr=0,pl=null,au=null,Fo=0,tf=0,_p=null,Kg=null,qn=0,Mh=null;return Mn.attemptContinuousHydration=function(f){if(f.tag===13||f.tag===31){var d=Qt(f,67108864);d!==null&&Ii(d,f,67108864),ih(f,67108864)}},Mn.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13||f.tag===31){var d=Ai();d=Y(d);var x=Qt(f,d);x!==null&&Ii(x,f,d),ih(f,d)}},Mn.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var d=S(f.pendingLanes);if(d!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;d;){var x=1<<31-Cs(d);f.entanglements[1]|=x,d&=~x}st(f),(Nn&6)===0&&(lc=Jr()+500,at(0))}}break;case 31:case 13:d=Qt(f,2),d!==null&&Ii(d,f,2),kd(),ih(f,2)}},Mn.batchedUpdates=function(f,d){return f(d)},Mn.createComponentSelector=function(f){return{$$typeof:Na,value:f}},Mn.createContainer=function(f,d,x,M,P,O,$,xe,Qe,_t){return Yl(f,d,!1,null,x,M,O,null,$,xe,Qe,_t)},Mn.createHasPseudoClassSelector=function(f){return{$$typeof:Qu,value:f}},Mn.createHydrationContainer=function(f,d,x,M,P,O,$,xe,Qe,_t,Ut,Tt,Gt,pn){var tr;return f=Yl(x,M,!0,f,P,O,xe,pn,Qe,_t,Ut,Tt),f.context=jd(null),x=f.current,M=Ai(),M=Y(M),P=ge(M),P.callback=(tr=d)!=null?tr:null,ke(x,P,M),d=M,f.current.lanes=d,I(f,d),st(f),f},Mn.createPortal=function(f,d,x){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hc,key:M==null?null:""+M,children:f,containerInfo:d,implementation:x}},Mn.createRoleSelector=function(f){return{$$typeof:Ju,value:f}},Mn.createTestNameSelector=function(f){return{$$typeof:xh,value:f}},Mn.createTextSelector=function(f){return{$$typeof:rc,value:f}},Mn.defaultOnCaughtError=function(f){console.error(f)},Mn.defaultOnRecoverableError=function(f){dp(f)},Mn.defaultOnUncaughtError=function(f){dp(f)},Mn.deferredUpdates=function(f){var d=tn.T,x=Sa();try{return Un(32),tn.T=null,f()}finally{Un(x),tn.T=d}},Mn.discreteUpdates=function(f,d,x,M,P){var O=tn.T,$=Sa();try{return Un(2),tn.T=null,f(d,x,M,P)}finally{Un($),tn.T=O,Nn===0&&(lc=Jr()+500)}},Mn.findAllNodes=Ts,Mn.findBoundingRects=function(f,d){if(!_r)throw Error(i(363));d=Ts(f,d),f=[];for(var x=0;x<d.length;x++)f.push(Jd(d[x]));for(d=f.length-1;0<d;d--){x=f[d];for(var M=x.x,P=M+x.width,O=x.y,$=O+x.height,xe=d-1;0<=xe;xe--)if(d!==xe){var Qe=f[xe],_t=Qe.x,Ut=_t+Qe.width,Tt=Qe.y,Gt=Tt+Qe.height;if(M>=_t&&O>=Tt&&P<=Ut&&$<=Gt){f.splice(d,1);break}else if(M!==_t||x.width!==Qe.width||Gt<O||Tt>$){if(!(O!==Tt||x.height!==Qe.height||Ut<M||_t>P)){_t>M&&(Qe.width+=_t-M,Qe.x=M),Ut<P&&(Qe.width=P-_t),f.splice(d,1);break}}else{Tt>O&&(Qe.height+=Tt-O,Qe.y=O),Gt<$&&(Qe.height=$-Tt),f.splice(d,1);break}}}return f},Mn.findHostInstance=nh,Mn.findHostInstanceWithNoPortals=function(f){return f=l(f),f=f!==null?h(f):null,f===null?null:Gu(f.stateNode)},Mn.findHostInstanceWithWarning=function(f){return nh(f)},Mn.flushPassiveEffects=Ao,Mn.flushSyncFromReconciler=function(f){var d=Nn;Nn|=1;var x=tn.T,M=Sa();try{if(Un(2),tn.T=null,f)return f()}finally{Un(M),tn.T=x,Nn=d,(Nn&6)===0&&at(0)}},Mn.flushSyncWork=kd,Mn.focusWithin=function(f,d){if(!_r)throw Error(i(363));for(f=Gl(f),d=Iu(f,d),d=Array.from(d),f=0;f<d.length;){var x=d[f++],M=x.tag;if(!Kl(x)){if((M===5||M===26||M===27)&&ol(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},Mn.getFindAllNodesFailureDescription=function(f,d){if(!_r)throw Error(i(363));var x=0,M=[];f=[Gl(f),0];for(var P=0;P<f.length;){var O=f[P++],$=O.tag,xe=f[P++],Qe=d[xe];if(($!==5&&$!==26&&$!==27||!Kl(O))&&(Hl(O,Qe)&&(M.push(Uu(Qe)),xe++,xe>x&&(x=xe)),xe<d.length))for(O=O.child;O!==null;)f.push(O,xe),O=O.sibling}if(x<d.length){for(f=[];x<d.length;x++)f.push(Uu(d[x]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},Mn.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return Gu(f.child.stateNode);default:return f.child.stateNode}},Mn.injectIntoDevTools=function(){var f={bundleType:0,version:fg,rendererPackageName:ah,currentDispatcherRef:tn,reconcilerVersion:"19.2.0"};if(Vu!==null&&(f.rendererConfig=Vu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)f=!0;else{try{$c=d.inject(f),Rs=d}catch{}f=!!d.checkDCE}}return f},Mn.isAlreadyRendering=function(){return(Nn&6)!==0},Mn.observeVisibleRects=function(f,d,x,M){if(!_r)throw Error(i(363));f=Ts(f,d);var P=$d(f,x,M).disconnect;return{disconnect:function(){P()}}},Mn.shouldError=function(){return null},Mn.shouldSuspend=function(){return!1},Mn.startHostTransition=function(f,d,x,M){if(f.tag!==5)throw Error(i(476));var P=Uc(f).queue;Lc(f,P,d,qc,x===null?n:function(){var O=Uc(f);return O.next===null&&(O=f.alternate.memoizedState),Fl(f,O.next.queue,{},Ai()),x(M)})},Mn.updateContainer=function(f,d,x,M){var P=d.current,O=Ai();return cg(P,O,f,d,x,M),O},Mn.updateContainerSync=function(f,d,x,M){return cg(d.current,2,f,d,x,M),2},Mn},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})})(sN)),sN.exports}var oN;function gY(){return oN||(oN=1,rN.exports=mY()),rN.exports}var vY=gY();const yY=pY(vY);function xY(r){const e=yY(r);return e.injectIntoDevTools(),e}const CO=0,Nm={},_Y=/^three(?=[A-Z])/,tS=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let bY=0;const SY=r=>typeof r=="function";function RO(r){if(SY(r)){const e=`${bY++}`;return Nm[e]=r,e}else Object.assign(Nm,r)}function DO(r,e){const t=tS(r),n=Nm[t];if(r!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function MY(r,e,t){var n;return r=tS(r)in Nm?r:r.replace(_Y,""),DO(r,e),r==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,sb(e.object,t,r,e)}function TY(r){if(!r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?ob(r.parent,r):ia(r.object)&&(r.object.visible=!1),r.isHidden=!0,Bm(r)}}function NO(r){if(r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?ab(r.parent,r):ia(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,Bm(r)}}function DA(r,e,t){const n=e.root.getState();if(!(!r.parent&&r.object!==n.scene)){if(!e.object){var i,s;const o=Nm[tS(e.type)];e.object=(i=e.props.object)!=null?i:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(vc(e.object,e.props),e.props.attach)ab(r,e);else if(ia(e.object)&&ia(r.object)){const o=r.object.children.indexOf(t?.object);if(t&&o!==-1){const l=r.object.children.indexOf(e.object);if(l!==-1){r.object.children.splice(l,1);const u=l<o?o-1:o;r.object.children.splice(u,0,e.object)}else e.object.parent=r.object,r.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:e.object})}else r.object.add(e.object)}for(const o of e.children)DA(e,o);Bm(e)}}function aT(r,e){e&&(e.parent=r,r.children.push(e),DA(r,e))}function lN(r,e,t){if(!e||!t)return;e.parent=r;const n=r.children.indexOf(t);n!==-1?r.children.splice(n,0,e):r.children.push(e),DA(r,e,t)}function PO(r){if(typeof r.dispose=="function"){const e=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():ww.unstable_scheduleCallback(ww.unstable_IdlePriority,e)}}function Aw(r,e,t){if(!e)return;e.parent=null;const n=r.children.indexOf(e);n!==-1&&r.children.splice(n,1),e.props.attach?ob(r,e):ia(e.object)&&ia(r.object)&&(r.object.remove(e.object),sY(bO(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];Aw(e,o,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&PO(e.object),t===void 0&&Bm(e)}function wY(r,e){for(const t of[r,r.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const W_=[];function EY(){for(const[t]of W_){const n=t.parent;if(n){t.props.attach?ob(n,t):ia(t.object)&&ia(n.object)&&n.object.remove(t.object);for(const i of t.children)i.props.attach?ob(t,i):ia(i.object)&&ia(t.object)&&t.object.remove(i.object)}t.isHidden&&NO(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&PO(t.object)}for(const[t,n,i]of W_){t.props=n;const s=t.parent;if(s){var r,e;const o=Nm[tS(t.type)];t.object=(r=t.props.object)!=null?r:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,wY(i,t.object),vc(t.object,t.props),t.props.attach?ab(s,t):ia(t.object)&&ia(s.object)&&s.object.add(t.object);for(const l of t.children)l.props.attach?ab(t,l):ia(l.object)&&ia(t.object)&&t.object.add(l.object);Bm(t)}}W_.length=0}const oT=()=>{},cN={};let w_=CO;const AY=0,CY=4,lb=xY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:MY,removeChild:Aw,appendChild:aT,appendInitialChild:aT,insertBefore:lN,appendChildToContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||aT(t,e)},removeChildFromContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||Aw(t,e)},insertInContainerBefore(r,e,t){const n=r.getState().scene.__r3f;!e||!t||!n||lN(n,e,t)},getRootHostContext:()=>cN,getChildHostContext:()=>cN,commitUpdate(r,e,t,n,i){var s,o,l;DO(e,n);let u=!1;if((r.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(l=n.args)!=null&&l.some((m,g)=>{var v;return m!==((v=t.args)==null?void 0:v[g])}))&&(u=!0),u)W_.push([r,{...n},i]);else{const m=nY(r,n);Object.keys(m).length&&(Object.assign(r.props,m),vc(r.object,m))}(i.sibling===null||(i.flags&CY)===AY)&&EY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r?.object,prepareForCommit:()=>null,preparePortalMount:r=>sb(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:TY,unhideInstance:NO,createTextInstance:oT,hideTextInstance:oT,unhideTextInstance:oT,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Re.createContext(null),setCurrentUpdatePriority(r){w_=r},getCurrentUpdatePriority(){return w_},resolveUpdatePriority(){var r;if(w_!==CO)return w_;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return hY;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uY;default:return fY}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:dY.version,applyViewTransitionName(r,e,t){},restoreViewTransitionName(r,e){},cancelViewTransitionName(r,e,t){},cancelRootViewTransitionName(r){},restoreRootViewTransitionName(r){},InstanceMeasurement:null,measureInstance:r=>null,wasInstanceInViewport:r=>!0,hasInstanceChanged:(r,e)=>!1,hasInstanceAffectedParent:(r,e)=>!1,suspendOnActiveViewTransition(r,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(r){},createViewTransitionInstance:r=>null,getCurrentGestureOffset(r){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(r,e){return r},cloneMutableTextInstance(r){return r},cloneRootViewTransitionContainer(r){throw new Error("Not implemented.")},removeRootViewTransitionClone(r,e){throw new Error("Not implemented.")},createFragmentInstance:r=>null,updateFragmentInstanceFiber(r,e){},commitNewChildToFragmentInstance(r,e){},deleteChildFromFragmentInstance(r,e){},measureClonedInstance:r=>null,maySuspendCommitOnUpdate:(r,e,t)=>!1,maySuspendCommitInSyncRender:(r,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(r,e)=>null}),xd=new Map,qp={objects:"shallow",strict:!1};function RY(r,e){if(!e&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:n,top:i,left:s}=r.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function DY(r){const e=xd.get(r),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||oY(Dw,fN),o=t||lb.createContainer(s,cY,null,!1,null,"",i,i,i,null);e||xd.set(r,{fiber:o,store:s});let l,u,h=!1,m=null;return{async configure(g={}){let v;m=new Promise(z=>v=z);let{gl:_,size:b,scene:w,events:S,onCreated:T,shadows:A=!1,linear:D=!1,flat:N=!1,legacy:L=!1,orthographic:I=!1,frameloop:k="always",dpr:R=[1,2],performance:U,raycaster:H,camera:Y,onPointerMissed:X}=g,q=s.getState(),Q=q.gl;if(!q.gl){const z={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},Z=typeof _=="function"?await _(z):_;nN(Z)?Q=Z:Q=new TA({...z,..._}),q.set({gl:Q})}let ie=q.raycaster;ie||q.set({raycaster:ie=new SA});const{params:j,...J}=H||{};if(Xi.equ(J,ie,qp)||vc(ie,{...J}),Xi.equ(j,ie.params,qp)||vc(ie,{params:{...ie.params,...j}}),!q.camera||q.camera===u&&!Xi.equ(u,Y,qp)){u=Y;const z=Y?.isCamera,Z=z?Y:I?new Sc(0,0,0,0,.1,1e3):new Ar(75,0,.1,1e3);z||(Z.position.z=5,Y&&(vc(Z,Y),Z.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(Z.manual=!0,Z.updateProjectionMatrix())),!q.camera&&!(Y!=null&&Y.rotation)&&Z.lookAt(0,0,0)),q.set({camera:Z}),ie.camera=Z}if(!q.scene){let z;w!=null&&w.isScene?(z=w,sb(z,s,"",{})):(z=new Vv,sb(z,s,"",{}),w&&vc(z,w)),q.set({scene:z})}S&&!q.events.handlers&&q.set({events:S(s)});const de=RY(r,b);if(Xi.equ(de,q.size,qp)||q.setSize(de.width,de.height,de.top,de.left),R&&q.viewport.dpr!==MO(R)&&q.setDpr(R),q.frameloop!==k&&q.setFrameloop(k),q.onPointerMissed||q.set({onPointerMissed:X}),U&&!Xi.equ(U,q.performance,qp)&&q.set(z=>({performance:{...z.performance,...U}})),!q.xr){var le;const z=(fe,ve)=>{const re=s.getState();re.frameloop!=="never"&&fN(fe,!0,re,ve)},Z=()=>{const fe=s.getState();fe.gl.xr.enabled=fe.gl.xr.isPresenting,fe.gl.xr.setAnimationLoop(fe.gl.xr.isPresenting?z:null),fe.gl.xr.isPresenting||Dw(fe)},ae={connect(){const fe=s.getState().gl;fe.xr.addEventListener("sessionstart",Z),fe.xr.addEventListener("sessionend",Z)},disconnect(){const fe=s.getState().gl;fe.xr.removeEventListener("sessionstart",Z),fe.xr.removeEventListener("sessionend",Z)}};typeof((le=Q.xr)==null?void 0:le.addEventListener)=="function"&&ae.connect(),q.set({xr:ae})}if(Q.shadowMap){const z=Q.shadowMap.enabled,Z=Q.shadowMap.type;if(Q.shadowMap.enabled=!!A,Xi.boo(A))Q.shadowMap.type=B0;else if(Xi.str(A)){var ce;const ae={basic:TU,percentage:hm,soft:B0,variance:Qh};Q.shadowMap.type=(ce=ae[A])!=null?ce:B0}else Xi.obj(A)&&Object.assign(Q.shadowMap,A);(z!==Q.shadowMap.enabled||Z!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}return Wn.enabled=!L,h||(Q.outputColorSpace=D?Al:xs,Q.toneMapping=N?qo:Fv),q.legacy!==L&&q.set(()=>({legacy:L})),q.linear!==D&&q.set(()=>({linear:D})),q.flat!==N&&q.set(()=>({flat:N})),_&&!Xi.fun(_)&&!nN(_)&&!Xi.equ(_,Q,qp)&&vc(Q,_),l=T,h=!0,v(),this},render(g){return!h&&!m&&this.configure(),m.then(()=>{lb.updateContainer(F.jsx(NY,{store:s,children:g,onCreated:l,rootElement:r}),o,null,()=>{})}),s},unmount(){LO(r)}}}function NY({store:r,children:e,onCreated:t,rootElement:n}){return Zv(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),F.jsx(CA.Provider,{value:r,children:e})}function LO(r,e){const t=xd.get(r),n=t?.fiber;if(n){const i=t?.store.getState();i&&(i.internal.active=!1),lb.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,o,l,u;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=i.gl)!=null&&u.xr&&i.xr.disconnect(),$X(i.scene),xd.delete(r)}catch{}},500)})}}function PY(r,e,t){return F.jsx(LY,{children:r,container:e,state:t})}function LY({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,o=RA(),[l]=Re.useState(()=>new SA),[u]=Re.useState(()=>new ft),h=AA((g,v)=>{let _;if(v.camera&&i){const b=v.camera;_=g.viewport.getCurrentViewport(b,new se,i),b!==g.camera&&wO(b,i)}return{...g,...v,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:o,events:{...g.events,...v.events,...n},size:{...g.size,...i},viewport:{...g.viewport,..._},setEvents:b=>v.set(w=>({...w,events:{...w.events,...b}}))}}),m=Re.useMemo(()=>{const g=pO((_,b)=>({...s,set:_,get:b})),v=_=>g.setState(b=>h.current(_,b));return v(o.getState()),o.subscribe(v),g},[o,t]);return F.jsx(F.Fragment,{children:lb.createPortal(F.jsx(CA.Provider,{value:m,children:e}),m,null)})}const UY=new Set,IY=new Set,OY=new Set;function lT(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Z0(r,e){switch(r){case"before":return lT(UY,e);case"after":return lT(IY,e);case"tail":return lT(OY,e)}}let cT,uT;function Cw(r,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),cT=e.internal.subscribers;for(let i=0;i<cT.length;i++)uT=cT[i],uT.ref.current(uT.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let cb=!1,Rw=!1,fT,uN,Zp;function UO(r){uN=requestAnimationFrame(UO),cb=!0,fT=0,Z0("before",r),Rw=!0;for(const t of xd.values()){var e;Zp=t.store.getState(),Zp.internal.active&&(Zp.frameloop==="always"||Zp.internal.frames>0)&&!((e=Zp.gl.xr)!=null&&e.isPresenting)&&(fT+=Cw(r,Zp))}if(Rw=!1,Z0("after",r),fT===0)return Z0("tail",r),cb=!1,cancelAnimationFrame(uN)}function Dw(r,e=1){var t;if(!r)return xd.forEach(n=>Dw(n.store.getState(),e));(t=r.gl.xr)!=null&&t.isPresenting||!r.internal.active||r.frameloop==="never"||(e>1?r.internal.frames=Math.min(60,r.internal.frames+e):Rw?r.internal.frames=2:r.internal.frames=1,cb||(cb=!0,requestAnimationFrame(UO)))}function fN(r,e=!0,t,n){if(e&&Z0("before",r),t)Cw(r,t,n);else for(const i of xd.values())Cw(r,i.store.getState());e&&Z0("after",r)}const hT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function FY(r){const{handlePointer:e}=aY(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(hT).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=r.getState();if(i.disconnect==null||i.disconnect(),n(s=>({events:{...s.events,connected:t}})),i.handlers)for(const s in i.handlers){const o=i.handlers[s],[l,u]=hT[s];t.addEventListener(l,o,{passive:u})}},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){if(n.handlers)for(const i in n.handlers){const s=n.handlers[i],[o]=hT[i];n.connected.removeEventListener(o,s)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function hN(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function kY({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Re.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Re.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=r?typeof r=="number"?r:r.scroll:null,h=r?typeof r=="number"?r:r.resize:null,m=Re.useRef(!1);Re.useEffect(()=>(m.current=!0,()=>{m.current=!1}));const[g,v,_]=Re.useMemo(()=>{const T=()=>{if(!l.current.element)return;const{left:A,top:D,width:N,height:L,bottom:I,right:k,x:R,y:U}=l.current.element.getBoundingClientRect(),H={left:A,top:D,width:N,height:L,bottom:I,right:k,x:R,y:U};l.current.element instanceof HTMLElement&&n&&(H.height=l.current.element.offsetHeight,H.width=l.current.element.offsetWidth),Object.freeze(H),m.current&&!GY(l.current.lastBounds,H)&&o(l.current.lastBounds=H)};return[T,h?hN(T,h):T,u?hN(T,u):T]},[o,n,u,h]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new i(_),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(T=>T.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const S=T=>{!T||T===l.current.element||(b(),l.current.element=T,l.current.scrollContainers=IO(T),w())};return zY(_,!!e),BY(v),Re.useEffect(()=>{b(),w()},[e,_,v]),Re.useEffect(()=>b,[]),[S,s,g]}function BY(r){Re.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[r])}function zY(r,e){Re.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[r,e])}function IO(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...IO(r.parentElement)]}const VY=["x","y","top","bottom","left","right","width","height"],GY=(r,e)=>VY.every(t=>r[t]===e[t]);function HY({ref:r,children:e,fallback:t,resize:n,style:i,gl:s,events:o=FY,eventSource:l,eventPrefix:u,shadows:h,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:w,performance:S,raycaster:T,camera:A,scene:D,onPointerMissed:N,onCreated:L,...I}){Re.useMemo(()=>RO(CX),[]);const k=ZX(),[R,U]=kY({scroll:!0,debounce:{scroll:50,resize:0},...n}),H=Re.useRef(null),Y=Re.useRef(null);Re.useImperativeHandle(r,()=>H.current);const X=AA(N),[q,Q]=Re.useState(!1),[ie,j]=Re.useState(!1);if(q)throw q;if(ie)throw ie;const J=Re.useRef(null);Zv(()=>{const le=H.current;if(U.width>0&&U.height>0&&le){J.current||(J.current=DY(le));async function ce(){await J.current.configure({gl:s,scene:D,events:o,shadows:h,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:w,performance:S,raycaster:T,camera:A,size:U,onPointerMissed:(...z)=>X.current==null?void 0:X.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(l?YX(l)?l.current:l:Y.current),u&&z.setEvents({compute:(Z,ae)=>{const fe=Z[u+"X"],ve=Z[u+"Y"];ae.pointer.set(fe/ae.size.width*2-1,-(ve/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),L?.(z)}}),J.current.render(F.jsx(k,{children:F.jsx(QX,{set:j,children:F.jsx(Re.Suspense,{fallback:F.jsx(KX,{set:Q}),children:e??null})})}))}ce()}}),Re.useEffect(()=>{const le=H.current;if(le)return()=>LO(le)},[]);const de=l?"none":"auto";return F.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:de,...i},...I,children:F.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:F.jsx("canvas",{ref:H,style:{display:"block"},children:t})})})}function jY(r){return F.jsx(xO,{children:F.jsx(HY,{...r})})}function Av(){return Av=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Av.apply(null,arguments)}const OO=parseInt(Iv.replace(/\D+/g,""));var Ho=Uint8Array,Af=Uint16Array,Nw=Uint32Array,FO=new Ho([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kO=new Ho([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WY=new Ho([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BO=function(r,e){for(var t=new Af(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new Nw(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},zO=BO(FO,2),VO=zO[0],XY=zO[1];VO[28]=258,XY[258]=28;var YY=BO(kO,0),qY=YY[0],Pw=new Af(32768);for(var Vi=0;Vi<32768;++Vi){var vf=(Vi&43690)>>>1|(Vi&21845)<<1;vf=(vf&52428)>>>2|(vf&13107)<<2,vf=(vf&61680)>>>4|(vf&3855)<<4,Pw[Vi]=((vf&65280)>>>8|(vf&255)<<8)>>>1}var K0=(function(r,e,t){for(var n=r.length,i=0,s=new Af(e);i<n;++i)++s[r[i]-1];var o=new Af(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(t){l=new Af(1<<e);var u=15-e;for(i=0;i<n;++i)if(r[i])for(var h=i<<4|r[i],m=e-r[i],g=o[r[i]-1]++<<m,v=g|(1<<m)-1;g<=v;++g)l[Pw[g]>>>u]=h}else for(l=new Af(n),i=0;i<n;++i)r[i]&&(l[i]=Pw[o[r[i]-1]++]>>>15-r[i]);return l}),Kv=new Ho(288);for(var Vi=0;Vi<144;++Vi)Kv[Vi]=8;for(var Vi=144;Vi<256;++Vi)Kv[Vi]=9;for(var Vi=256;Vi<280;++Vi)Kv[Vi]=7;for(var Vi=280;Vi<288;++Vi)Kv[Vi]=8;var GO=new Ho(32);for(var Vi=0;Vi<32;++Vi)GO[Vi]=5;var ZY=K0(Kv,9,1),KY=K0(GO,5,1),dT=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},xl=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},pT=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},QY=function(r){return(r/8|0)+(r&7&&1)},JY=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof Af?Af:r instanceof Nw?Nw:Ho)(t-e);return n.set(r.subarray(e,t)),n},$Y=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new Ho(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ho(n*3));var o=function(re){var pe=e.length;if(re>pe){var Se=new Ho(Math.max(pe*2,re));Se.set(e),e=Se}},l=t.f||0,u=t.p||0,h=t.b||0,m=t.l,g=t.d,v=t.m,_=t.n,b=n*8;do{if(!m){t.f=l=xl(r,u,1);var w=xl(r,u+1,3);if(u+=3,w)if(w==1)m=ZY,g=KY,v=9,_=5;else if(w==2){var D=xl(r,u,31)+257,N=xl(r,u+10,15)+4,L=D+xl(r,u+5,31)+1;u+=14;for(var I=new Ho(L),k=new Ho(19),R=0;R<N;++R)k[WY[R]]=xl(r,u+R*3,7);u+=N*3;for(var U=dT(k),H=(1<<U)-1,Y=K0(k,U,1),R=0;R<L;){var X=Y[xl(r,u,H)];u+=X&15;var S=X>>>4;if(S<16)I[R++]=S;else{var q=0,Q=0;for(S==16?(Q=3+xl(r,u,3),u+=2,q=I[R-1]):S==17?(Q=3+xl(r,u,7),u+=3):S==18&&(Q=11+xl(r,u,127),u+=7);Q--;)I[R++]=q}}var ie=I.subarray(0,D),j=I.subarray(D);v=dT(ie),_=dT(j),m=K0(ie,v,1),g=K0(j,_,1)}else throw"invalid block type";else{var S=QY(u)+4,T=r[S-4]|r[S-3]<<8,A=S+T;if(A>n){if(s)throw"unexpected EOF";break}i&&o(h+T),e.set(r.subarray(S,A),h),t.b=h+=T,t.p=u=A*8;continue}if(u>b){if(s)throw"unexpected EOF";break}}i&&o(h+131072);for(var J=(1<<v)-1,de=(1<<_)-1,le=u;;le=u){var q=m[pT(r,u)&J],ce=q>>>4;if(u+=q&15,u>b){if(s)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(ce<256)e[h++]=ce;else if(ce==256){le=u,m=null;break}else{var z=ce-254;if(ce>264){var R=ce-257,Z=FO[R];z=xl(r,u,(1<<Z)-1)+VO[R],u+=Z}var ae=g[pT(r,u)&de],fe=ae>>>4;if(!ae)throw"invalid distance";u+=ae&15;var j=qY[fe];if(fe>3){var Z=kO[fe];j+=pT(r,u)&(1<<Z)-1,u+=Z}if(u>b){if(s)throw"unexpected EOF";break}i&&o(h+131072);for(var ve=h+z;h<ve;h+=4)e[h]=e[h-j],e[h+1]=e[h+1-j],e[h+2]=e[h+2-j],e[h+3]=e[h+3-j];h=ve}}t.l=m,t.p=le,t.b=h,m&&(l=1,t.m=v,t.d=g,t.n=_)}while(!l);return h==e.length?e:JY(e,0,h)},eq=new Ho(0),tq=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function E_(r,e){return $Y((tq(r),r.subarray(2,-4)),e)}var nq=typeof TextDecoder<"u"&&new TextDecoder,iq=0;try{nq.decode(eq,{stream:!0}),iq=1}catch{}const rq=r=>r&&r.isCubeTexture;class sq extends Pi{constructor(e,t){var n,i;const s=rq(e),l=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,u=Math.floor(Math.log2(l)),h=Math.pow(2,u),m=3*Math.max(h,112),g=4*h,v=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/m}`,`#define CUBEUV_TEXEL_HEIGHT ${1/g}`,`#define CUBEUV_MAX_MIP ${u}.0`],_=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,b=v.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${OO>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},S=new Wv(1,16),T=new ca({uniforms:w,fragmentShader:b,vertexShader:_,side:Go});super(S,T)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var aq=Object.defineProperty,oq=(r,e,t)=>e in r?aq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lq=(r,e,t)=>(oq(r,e+"",t),t);class cq{constructor(){lq(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var uq=Object.defineProperty,fq=(r,e,t)=>e in r?uq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,an=(r,e,t)=>(fq(r,typeof e!="symbol"?e+"":e,t),t);const A_=new bd,dN=new gu,hq=Math.cos(70*(Math.PI/180)),pN=(r,e)=>(r%e+e)%e;let dq=class extends cq{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new se),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:jh.ROTATE,MIDDLE:jh.DOLLY,RIGHT:jh.PAN}),an(this,"touches",{ONE:Wh.ROTATE,TWO:Wh.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=oe=>{let Ae=pN(oe,2*Math.PI),ht=m.phi;ht<0&&(ht+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let he=Math.abs(Ae-ht);2*Math.PI-he<he&&(Ae<ht?Ae+=2*Math.PI:ht+=2*Math.PI),g.phi=Ae-ht,n.update()},this.setAzimuthalAngle=oe=>{let Ae=pN(oe,2*Math.PI),ht=m.theta;ht<0&&(ht+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let he=Math.abs(Ae-ht);2*Math.PI-he<he&&(Ae<ht?Ae+=2*Math.PI:ht+=2*Math.PI),g.theta=Ae-ht,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=oe=>{oe.addEventListener("keydown",Ee),this._domElementKeyEvents=oe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ee),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),u=l.NONE},this.update=(()=>{const oe=new se,Ae=new se(0,1,0),ht=new bs().setFromUnitVectors(e.up,Ae),he=ht.clone().invert(),_e=new se,$e=new bs,Rt=2*Math.PI;return function(){const Ne=n.object.position;ht.setFromUnitVectors(e.up,Ae),he.copy(ht).invert(),oe.copy(Ne).sub(n.target),oe.applyQuaternion(ht),m.setFromVector3(oe),n.autoRotate&&u===l.NONE&&Q(X()),n.enableDamping?(m.theta+=g.theta*n.dampingFactor,m.phi+=g.phi*n.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);let bt=n.minAzimuthAngle,Ot=n.maxAzimuthAngle;isFinite(bt)&&isFinite(Ot)&&(bt<-Math.PI?bt+=Rt:bt>Math.PI&&(bt-=Rt),Ot<-Math.PI?Ot+=Rt:Ot>Math.PI&&(Ot-=Rt),bt<=Ot?m.theta=Math.max(bt,Math.min(Ot,m.theta)):m.theta=m.theta>(bt+Ot)/2?Math.max(bt,m.theta):Math.min(Ot,m.theta)),m.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,m.phi)),m.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&U||n.object.isOrthographicCamera?m.radius=ae(m.radius):m.radius=ae(m.radius*v),oe.setFromSpherical(m),oe.applyQuaternion(he),Ne.copy(n.target).add(oe),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let It=!1;if(n.zoomToCursor&&U){let Ht=null;if(n.object instanceof Ar&&n.object.isPerspectiveCamera){const Sn=oe.length();Ht=ae(Sn*v);const Dn=Sn-Ht;n.object.position.addScaledVector(k,Dn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Sn=new se(R.x,R.y,0);Sn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),It=!0;const Dn=new se(R.x,R.y,0);Dn.unproject(n.object),n.object.position.sub(Dn).add(Sn),n.object.updateMatrixWorld(),Ht=oe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Ht!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Ht).add(n.object.position):(A_.origin.copy(n.object.position),A_.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(A_.direction))<hq?e.lookAt(n.target):(dN.setFromNormalAndCoplanarPoint(n.object.up,n.target),A_.intersectPlane(dN,n.target))))}else n.object instanceof Sc&&n.object.isOrthographicCamera&&(It=v!==1,It&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,U=!1,It||_e.distanceToSquared(n.object.position)>h||8*(1-$e.dot(n.object.quaternion))>h?(n.dispatchEvent(i),_e.copy(n.object.position),$e.copy(n.object.quaternion),It=!1,!0):!1}})(),this.connect=oe=>{n.domElement=oe,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",wt),n.domElement.addEventListener("pointerdown",We),n.domElement.addEventListener("pointercancel",V),n.domElement.addEventListener("wheel",Ce)},this.dispose=()=>{var oe,Ae,ht,he,_e,$e;n.domElement&&(n.domElement.style.touchAction="auto"),(oe=n.domElement)==null||oe.removeEventListener("contextmenu",wt),(Ae=n.domElement)==null||Ae.removeEventListener("pointerdown",We),(ht=n.domElement)==null||ht.removeEventListener("pointercancel",V),(he=n.domElement)==null||he.removeEventListener("wheel",Ce),(_e=n.domElement)==null||_e.ownerDocument.removeEventListener("pointermove",K),($e=n.domElement)==null||$e.ownerDocument.removeEventListener("pointerup",V),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ee)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const h=1e-6,m=new _w,g=new _w;let v=1;const _=new se,b=new ft,w=new ft,S=new ft,T=new ft,A=new ft,D=new ft,N=new ft,L=new ft,I=new ft,k=new se,R=new ft;let U=!1;const H=[],Y={};function X(){return 2*Math.PI/60/60*n.autoRotateSpeed}function q(){return Math.pow(.95,n.zoomSpeed)}function Q(oe){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=oe:g.theta-=oe}function ie(oe){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=oe:g.phi-=oe}const j=(()=>{const oe=new se;return function(ht,he){oe.setFromMatrixColumn(he,0),oe.multiplyScalar(-ht),_.add(oe)}})(),J=(()=>{const oe=new se;return function(ht,he){n.screenSpacePanning===!0?oe.setFromMatrixColumn(he,1):(oe.setFromMatrixColumn(he,0),oe.crossVectors(n.object.up,oe)),oe.multiplyScalar(ht),_.add(oe)}})(),de=(()=>{const oe=new se;return function(ht,he){const _e=n.domElement;if(_e&&n.object instanceof Ar&&n.object.isPerspectiveCamera){const $e=n.object.position;oe.copy($e).sub(n.target);let Rt=oe.length();Rt*=Math.tan(n.object.fov/2*Math.PI/180),j(2*ht*Rt/_e.clientHeight,n.object.matrix),J(2*he*Rt/_e.clientHeight,n.object.matrix)}else _e&&n.object instanceof Sc&&n.object.isOrthographicCamera?(j(ht*(n.object.right-n.object.left)/n.object.zoom/_e.clientWidth,n.object.matrix),J(he*(n.object.top-n.object.bottom)/n.object.zoom/_e.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function le(oe){n.object instanceof Ar&&n.object.isPerspectiveCamera||n.object instanceof Sc&&n.object.isOrthographicCamera?v=oe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ce(oe){le(v/oe)}function z(oe){le(v*oe)}function Z(oe){if(!n.zoomToCursor||!n.domElement)return;U=!0;const Ae=n.domElement.getBoundingClientRect(),ht=oe.clientX-Ae.left,he=oe.clientY-Ae.top,_e=Ae.width,$e=Ae.height;R.x=ht/_e*2-1,R.y=-(he/$e)*2+1,k.set(R.x,R.y,1).unproject(n.object).sub(n.object.position).normalize()}function ae(oe){return Math.max(n.minDistance,Math.min(n.maxDistance,oe))}function fe(oe){b.set(oe.clientX,oe.clientY)}function ve(oe){Z(oe),N.set(oe.clientX,oe.clientY)}function re(oe){T.set(oe.clientX,oe.clientY)}function pe(oe){w.set(oe.clientX,oe.clientY),S.subVectors(w,b).multiplyScalar(n.rotateSpeed);const Ae=n.domElement;Ae&&(Q(2*Math.PI*S.x/Ae.clientHeight),ie(2*Math.PI*S.y/Ae.clientHeight)),b.copy(w),n.update()}function Se(oe){L.set(oe.clientX,oe.clientY),I.subVectors(L,N),I.y>0?ce(q()):I.y<0&&z(q()),N.copy(L),n.update()}function je(oe){A.set(oe.clientX,oe.clientY),D.subVectors(A,T).multiplyScalar(n.panSpeed),de(D.x,D.y),T.copy(A),n.update()}function ct(oe){Z(oe),oe.deltaY<0?z(q()):oe.deltaY>0&&ce(q()),n.update()}function Je(oe){let Ae=!1;switch(oe.code){case n.keys.UP:de(0,n.keyPanSpeed),Ae=!0;break;case n.keys.BOTTOM:de(0,-n.keyPanSpeed),Ae=!0;break;case n.keys.LEFT:de(n.keyPanSpeed,0),Ae=!0;break;case n.keys.RIGHT:de(-n.keyPanSpeed,0),Ae=!0;break}Ae&&(oe.preventDefault(),n.update())}function nt(){if(H.length==1)b.set(H[0].pageX,H[0].pageY);else{const oe=.5*(H[0].pageX+H[1].pageX),Ae=.5*(H[0].pageY+H[1].pageY);b.set(oe,Ae)}}function Mt(){if(H.length==1)T.set(H[0].pageX,H[0].pageY);else{const oe=.5*(H[0].pageX+H[1].pageX),Ae=.5*(H[0].pageY+H[1].pageY);T.set(oe,Ae)}}function Ue(){const oe=H[0].pageX-H[1].pageX,Ae=H[0].pageY-H[1].pageY,ht=Math.sqrt(oe*oe+Ae*Ae);N.set(0,ht)}function Ve(){n.enableZoom&&Ue(),n.enablePan&&Mt()}function Oe(){n.enableZoom&&Ue(),n.enableRotate&&nt()}function it(oe){if(H.length==1)w.set(oe.pageX,oe.pageY);else{const ht=tt(oe),he=.5*(oe.pageX+ht.x),_e=.5*(oe.pageY+ht.y);w.set(he,_e)}S.subVectors(w,b).multiplyScalar(n.rotateSpeed);const Ae=n.domElement;Ae&&(Q(2*Math.PI*S.x/Ae.clientHeight),ie(2*Math.PI*S.y/Ae.clientHeight)),b.copy(w)}function ee(oe){if(H.length==1)A.set(oe.pageX,oe.pageY);else{const Ae=tt(oe),ht=.5*(oe.pageX+Ae.x),he=.5*(oe.pageY+Ae.y);A.set(ht,he)}D.subVectors(A,T).multiplyScalar(n.panSpeed),de(D.x,D.y),T.copy(A)}function ut(oe){const Ae=tt(oe),ht=oe.pageX-Ae.x,he=oe.pageY-Ae.y,_e=Math.sqrt(ht*ht+he*he);L.set(0,_e),I.set(0,Math.pow(L.y/N.y,n.zoomSpeed)),ce(I.y),N.copy(L)}function Ye(oe){n.enableZoom&&ut(oe),n.enablePan&&ee(oe)}function De(oe){n.enableZoom&&ut(oe),n.enableRotate&&it(oe)}function We(oe){var Ae,ht;n.enabled!==!1&&(H.length===0&&((Ae=n.domElement)==null||Ae.ownerDocument.addEventListener("pointermove",K),(ht=n.domElement)==null||ht.ownerDocument.addEventListener("pointerup",V)),Lt(oe),oe.pointerType==="touch"?st(oe):ue(oe))}function K(oe){n.enabled!==!1&&(oe.pointerType==="touch"?at(oe):Ie(oe))}function V(oe){var Ae,ht,he;Ge(oe),H.length===0&&((Ae=n.domElement)==null||Ae.releasePointerCapture(oe.pointerId),(ht=n.domElement)==null||ht.ownerDocument.removeEventListener("pointermove",K),(he=n.domElement)==null||he.ownerDocument.removeEventListener("pointerup",V)),n.dispatchEvent(o),u=l.NONE}function ue(oe){let Ae;switch(oe.button){case 0:Ae=n.mouseButtons.LEFT;break;case 1:Ae=n.mouseButtons.MIDDLE;break;case 2:Ae=n.mouseButtons.RIGHT;break;default:Ae=-1}switch(Ae){case jh.DOLLY:if(n.enableZoom===!1)return;ve(oe),u=l.DOLLY;break;case jh.ROTATE:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(n.enablePan===!1)return;re(oe),u=l.PAN}else{if(n.enableRotate===!1)return;fe(oe),u=l.ROTATE}break;case jh.PAN:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(n.enableRotate===!1)return;fe(oe),u=l.ROTATE}else{if(n.enablePan===!1)return;re(oe),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function Ie(oe){if(n.enabled!==!1)switch(u){case l.ROTATE:if(n.enableRotate===!1)return;pe(oe);break;case l.DOLLY:if(n.enableZoom===!1)return;Se(oe);break;case l.PAN:if(n.enablePan===!1)return;je(oe);break}}function Ce(oe){n.enabled===!1||n.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(oe.preventDefault(),n.dispatchEvent(s),ct(oe),n.dispatchEvent(o))}function Ee(oe){n.enabled===!1||n.enablePan===!1||Je(oe)}function st(oe){switch(Fe(oe),H.length){case 1:switch(n.touches.ONE){case Wh.ROTATE:if(n.enableRotate===!1)return;nt(),u=l.TOUCH_ROTATE;break;case Wh.PAN:if(n.enablePan===!1)return;Mt(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(n.touches.TWO){case Wh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ve(),u=l.TOUCH_DOLLY_PAN;break;case Wh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Oe(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function at(oe){switch(Fe(oe),u){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;it(oe),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;ee(oe),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ye(oe),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;De(oe),n.update();break;default:u=l.NONE}}function wt(oe){n.enabled!==!1&&oe.preventDefault()}function Lt(oe){H.push(oe)}function Ge(oe){delete Y[oe.pointerId];for(let Ae=0;Ae<H.length;Ae++)if(H[Ae].pointerId==oe.pointerId){H.splice(Ae,1);return}}function Fe(oe){let Ae=Y[oe.pointerId];Ae===void 0&&(Ae=new ft,Y[oe.pointerId]=Ae),Ae.set(oe.pageX,oe.pageY)}function tt(oe){const Ae=oe.pointerId===H[0].pointerId?H[1]:H[0];return Y[Ae.pointerId]}this.dollyIn=(oe=q())=>{z(oe),n.update()},this.dollyOut=(oe=q())=>{ce(oe),n.update()},this.getScale=()=>v,this.setScale=oe=>{le(oe),n.update()},this.getZoomScale=()=>q(),t!==void 0&&this.connect(t),this.update()}};class pq extends pA{constructor(e){super(e),this.type=yr}parse(e){const o=function(R,U){switch(R){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(U||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(U||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(U||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(U||""))}},g=function(R,U,H){U=U||1024;let X=R.pos,q=-1,Q=0,ie="",j=String.fromCharCode.apply(null,new Uint16Array(R.subarray(X,X+128)));for(;0>(q=j.indexOf(`
`))&&Q<U&&X<R.byteLength;)ie+=j,Q+=j.length,X+=128,j+=String.fromCharCode.apply(null,new Uint16Array(R.subarray(X,X+128)));return-1<q?(R.pos+=Q+q+1,ie+j.slice(0,q)):!1},v=function(R){const U=/^#\?(\S+)/,H=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,X=/^\s*FORMAT=(\S+)\s*$/,q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Q={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ie,j;for((R.pos>=R.byteLength||!(ie=g(R)))&&o(1,"no header found"),(j=ie.match(U))||o(3,"bad initial token"),Q.valid|=1,Q.programtype=j[1],Q.string+=ie+`
`;ie=g(R),ie!==!1;){if(Q.string+=ie+`
`,ie.charAt(0)==="#"){Q.comments+=ie+`
`;continue}if((j=ie.match(H))&&(Q.gamma=parseFloat(j[1])),(j=ie.match(Y))&&(Q.exposure=parseFloat(j[1])),(j=ie.match(X))&&(Q.valid|=2,Q.format=j[1]),(j=ie.match(q))&&(Q.valid|=4,Q.height=parseInt(j[1],10),Q.width=parseInt(j[2],10)),Q.valid&2&&Q.valid&4)break}return Q.valid&2||o(3,"missing format specifier"),Q.valid&4||o(3,"missing image size specifier"),Q},_=function(R,U,H){const Y=U;if(Y<8||Y>32767||R[0]!==2||R[1]!==2||R[2]&128)return new Uint8Array(R);Y!==(R[2]<<8|R[3])&&o(3,"wrong scanline width");const X=new Uint8Array(4*U*H);X.length||o(4,"unable to allocate buffer space");let q=0,Q=0;const ie=4*Y,j=new Uint8Array(4),J=new Uint8Array(ie);let de=H;for(;de>0&&Q<R.byteLength;){Q+4>R.byteLength&&o(1),j[0]=R[Q++],j[1]=R[Q++],j[2]=R[Q++],j[3]=R[Q++],(j[0]!=2||j[1]!=2||(j[2]<<8|j[3])!=Y)&&o(3,"bad rgbe scanline format");let le=0,ce;for(;le<ie&&Q<R.byteLength;){ce=R[Q++];const Z=ce>128;if(Z&&(ce-=128),(ce===0||le+ce>ie)&&o(3,"bad scanline data"),Z){const ae=R[Q++];for(let fe=0;fe<ce;fe++)J[le++]=ae}else J.set(R.subarray(Q,Q+ce),le),le+=ce,Q+=ce}const z=Y;for(let Z=0;Z<z;Z++){let ae=0;X[q]=J[Z+ae],ae+=Y,X[q+1]=J[Z+ae],ae+=Y,X[q+2]=J[Z+ae],ae+=Y,X[q+3]=J[Z+ae],q+=4}de--}return X},b=function(R,U,H,Y){const X=R[U+3],q=Math.pow(2,X-128)/255;H[Y+0]=R[U+0]*q,H[Y+1]=R[U+1]*q,H[Y+2]=R[U+2]*q,H[Y+3]=1},w=function(R,U,H,Y){const X=R[U+3],q=Math.pow(2,X-128)/255;H[Y+0]=ed.toHalfFloat(Math.min(R[U+0]*q,65504)),H[Y+1]=ed.toHalfFloat(Math.min(R[U+1]*q,65504)),H[Y+2]=ed.toHalfFloat(Math.min(R[U+2]*q,65504)),H[Y+3]=ed.toHalfFloat(1)},S=new Uint8Array(e);S.pos=0;const T=v(S),A=T.width,D=T.height,N=_(S.subarray(S.pos),A,D);let L,I,k;switch(this.type){case qi:k=N.length/4;const R=new Float32Array(k*4);for(let H=0;H<k;H++)b(N,H*4,R,H*4);L=R,I=qi;break;case yr:k=N.length/4;const U=new Uint16Array(k*4);for(let H=0;H<k;H++)w(N,H*4,U,H*4);L=U,I=yr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:D,data:L,header:T.string,gamma:T.gamma,exposure:T.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,l){switch(o.type){case qi:case yr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Gn,o.magFilter=Gn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,l)}return super.load(e,s,n,i)}}const S0=OO>=152;class mq extends pA{constructor(e){super(e),this.type=yr}parse(e){const U=Math.pow(2.7182818,2.2);function H(W,ne){for(var ge=0,ke=0;ke<65536;++ke)(ke==0||W[ke>>3]&1<<(ke&7))&&(ne[ge++]=ke);for(var qe=ge-1;ge<65536;)ne[ge++]=0;return qe}function Y(W){for(var ne=0;ne<16384;ne++)W[ne]={},W[ne].len=0,W[ne].lit=0,W[ne].p=null}const X={l:0,c:0,lc:0};function q(W,ne,ge,ke,qe){for(;ge<W;)ne=ne<<8|tt(ke,qe),ge+=8;ge-=W,X.l=ne>>ge&(1<<W)-1,X.c=ne,X.lc=ge}const Q=new Array(59);function ie(W){for(var ne=0;ne<=58;++ne)Q[ne]=0;for(var ne=0;ne<65537;++ne)Q[W[ne]]+=1;for(var ge=0,ne=58;ne>0;--ne){var ke=ge+Q[ne]>>1;Q[ne]=ge,ge=ke}for(var ne=0;ne<65537;++ne){var qe=W[ne];qe>0&&(W[ne]=qe|Q[qe]++<<6)}}function j(W,ne,ge,ke,qe,Ke,St){for(var yt=ge,At=0,Ct=0;qe<=Ke;qe++){if(yt.value-ge.value>ke)return!1;q(6,At,Ct,W,yt);var Dt=X.l;if(At=X.c,Ct=X.lc,St[qe]=Dt,Dt==63){if(yt.value-ge.value>ke)throw"Something wrong with hufUnpackEncTable";q(8,At,Ct,W,yt);var G=X.l+6;if(At=X.c,Ct=X.lc,qe+G>Ke+1)throw"Something wrong with hufUnpackEncTable";for(;G--;)St[qe++]=0;qe--}else if(Dt>=59){var G=Dt-59+2;if(qe+G>Ke+1)throw"Something wrong with hufUnpackEncTable";for(;G--;)St[qe++]=0;qe--}}ie(St)}function J(W){return W&63}function de(W){return W>>6}function le(W,ne,ge,ke){for(;ne<=ge;ne++){var qe=de(W[ne]),Ke=J(W[ne]);if(qe>>Ke)throw"Invalid table entry";if(Ke>14){var St=ke[qe>>Ke-14];if(St.len)throw"Invalid table entry";if(St.lit++,St.p){var yt=St.p;St.p=new Array(St.lit);for(var At=0;At<St.lit-1;++At)St.p[At]=yt[At]}else St.p=new Array(1);St.p[St.lit-1]=ne}else if(Ke)for(var Ct=0,At=1<<14-Ke;At>0;At--){var St=ke[(qe<<14-Ke)+Ct];if(St.len||St.p)throw"Invalid table entry";St.len=Ke,St.lit=ne,Ct++}}return!0}const ce={c:0,lc:0};function z(W,ne,ge,ke){W=W<<8|tt(ge,ke),ne+=8,ce.c=W,ce.lc=ne}const Z={c:0,lc:0};function ae(W,ne,ge,ke,qe,Ke,St,yt,At,Ct){if(W==ne){ke<8&&(z(ge,ke,qe,St),ge=ce.c,ke=ce.lc),ke-=8;var Dt=ge>>ke,Dt=new Uint8Array([Dt])[0];if(At.value+Dt>Ct)return!1;for(var G=yt[At.value-1];Dt-- >0;)yt[At.value++]=G}else if(At.value<Ct)yt[At.value++]=W;else return!1;Z.c=ge,Z.lc=ke}function fe(W){return W&65535}function ve(W){var ne=fe(W);return ne>32767?ne-65536:ne}const re={a:0,b:0};function pe(W,ne){var ge=ve(W),ke=ve(ne),qe=ke,Ke=ge+(qe&1)+(qe>>1),St=Ke,yt=Ke-qe;re.a=St,re.b=yt}function Se(W,ne){var ge=fe(W),ke=fe(ne),qe=ge-(ke>>1)&65535,Ke=ke+qe-32768&65535;re.a=Ke,re.b=qe}function je(W,ne,ge,ke,qe,Ke,St){for(var yt=St<16384,At=ge>qe?qe:ge,Ct=1,Dt;Ct<=At;)Ct<<=1;for(Ct>>=1,Dt=Ct,Ct>>=1;Ct>=1;){for(var G=0,me=G+Ke*(qe-Dt),Te=Ke*Ct,be=Ke*Dt,Me=ke*Ct,ot=ke*Dt,mt,gt,vt,kt;G<=me;G+=be){for(var Ft=G,Zt=G+ke*(ge-Dt);Ft<=Zt;Ft+=ot){var Et=Ft+Me,Xt=Ft+Te,mn=Xt+Me;yt?(pe(W[Ft+ne],W[Xt+ne]),mt=re.a,vt=re.b,pe(W[Et+ne],W[mn+ne]),gt=re.a,kt=re.b,pe(mt,gt),W[Ft+ne]=re.a,W[Et+ne]=re.b,pe(vt,kt),W[Xt+ne]=re.a,W[mn+ne]=re.b):(Se(W[Ft+ne],W[Xt+ne]),mt=re.a,vt=re.b,Se(W[Et+ne],W[mn+ne]),gt=re.a,kt=re.b,Se(mt,gt),W[Ft+ne]=re.a,W[Et+ne]=re.b,Se(vt,kt),W[Xt+ne]=re.a,W[mn+ne]=re.b)}if(ge&Ct){var Xt=Ft+Te;yt?pe(W[Ft+ne],W[Xt+ne]):Se(W[Ft+ne],W[Xt+ne]),mt=re.a,W[Xt+ne]=re.b,W[Ft+ne]=mt}}if(qe&Ct)for(var Ft=G,Zt=G+ke*(ge-Dt);Ft<=Zt;Ft+=ot){var Et=Ft+Me;yt?pe(W[Ft+ne],W[Et+ne]):Se(W[Ft+ne],W[Et+ne]),mt=re.a,W[Et+ne]=re.b,W[Ft+ne]=mt}Dt=Ct,Ct>>=1}return G}function ct(W,ne,ge,ke,qe,Ke,St,yt,At,Ct){for(var Dt=0,G=0,me=yt,Te=Math.trunc(qe.value+(Ke+7)/8);qe.value<Te;)for(z(Dt,G,ge,qe),Dt=ce.c,G=ce.lc;G>=14;){var be=Dt>>G-14&16383,Me=ne[be];if(Me.len)G-=Me.len,ae(Me.lit,St,Dt,G,ge,ke,qe,At,Ct,me),Dt=Z.c,G=Z.lc;else{if(!Me.p)throw"hufDecode issues";var ot;for(ot=0;ot<Me.lit;ot++){for(var mt=J(W[Me.p[ot]]);G<mt&&qe.value<Te;)z(Dt,G,ge,qe),Dt=ce.c,G=ce.lc;if(G>=mt&&de(W[Me.p[ot]])==(Dt>>G-mt&(1<<mt)-1)){G-=mt,ae(Me.p[ot],St,Dt,G,ge,ke,qe,At,Ct,me),Dt=Z.c,G=Z.lc;break}}if(ot==Me.lit)throw"hufDecode issues"}}var gt=8-Ke&7;for(Dt>>=gt,G-=gt;G>0;){var Me=ne[Dt<<14-G&16383];if(Me.len)G-=Me.len,ae(Me.lit,St,Dt,G,ge,ke,qe,At,Ct,me),Dt=Z.c,G=Z.lc;else throw"hufDecode issues"}return!0}function Je(W,ne,ge,ke,qe,Ke){var St={value:0},yt=ge.value,At=Fe(ne,ge),Ct=Fe(ne,ge);ge.value+=4;var Dt=Fe(ne,ge);if(ge.value+=4,At<0||At>=65537||Ct<0||Ct>=65537)throw"Something wrong with HUF_ENCSIZE";var G=new Array(65537),me=new Array(16384);Y(me);var Te=ke-(ge.value-yt);if(j(W,ne,ge,Te,At,Ct,G),Dt>8*(ke-(ge.value-yt)))throw"Something wrong with hufUncompress";le(G,At,Ct,me),ct(G,me,W,ne,ge,Dt,Ct,Ke,qe,St)}function nt(W,ne,ge){for(var ke=0;ke<ge;++ke)ne[ke]=W[ne[ke]]}function Mt(W){for(var ne=1;ne<W.length;ne++){var ge=W[ne-1]+W[ne]-128;W[ne]=ge}}function Ue(W,ne){for(var ge=0,ke=Math.floor((W.length+1)/2),qe=0,Ke=W.length-1;!(qe>Ke||(ne[qe++]=W[ge++],qe>Ke));)ne[qe++]=W[ke++]}function Ve(W){for(var ne=W.byteLength,ge=new Array,ke=0,qe=new DataView(W);ne>0;){var Ke=qe.getInt8(ke++);if(Ke<0){var St=-Ke;ne-=St+1;for(var yt=0;yt<St;yt++)ge.push(qe.getUint8(ke++))}else{var St=Ke;ne-=2;for(var At=qe.getUint8(ke++),yt=0;yt<St+1;yt++)ge.push(At)}}return ge}function Oe(W,ne,ge,ke,qe,Ke){var Et=new DataView(Ke.buffer),St=ge[W.idx[0]].width,yt=ge[W.idx[0]].height,At=3,Ct=Math.floor(St/8),Dt=Math.ceil(St/8),G=Math.ceil(yt/8),me=St-(Dt-1)*8,Te=yt-(G-1)*8,be={value:0},Me=new Array(At),ot=new Array(At),mt=new Array(At),gt=new Array(At),vt=new Array(At);for(let jt=0;jt<At;++jt)vt[jt]=ne[W.idx[jt]],Me[jt]=jt<1?0:Me[jt-1]+Dt*G,ot[jt]=new Float32Array(64),mt[jt]=new Uint16Array(64),gt[jt]=new Uint16Array(Dt*64);for(let jt=0;jt<G;++jt){var kt=8;jt==G-1&&(kt=Te);var Ft=8;for(let cn=0;cn<Dt;++cn){cn==Dt-1&&(Ft=me);for(let Nt=0;Nt<At;++Nt)mt[Nt].fill(0),mt[Nt][0]=qe[Me[Nt]++],it(be,ke,mt[Nt]),ee(mt[Nt],ot[Nt]),ut(ot[Nt]);Ye(ot);for(let Nt=0;Nt<At;++Nt)De(ot[Nt],gt[Nt],cn*64)}let xt=0;for(let cn=0;cn<At;++cn){const Nt=ge[W.idx[cn]].type;for(let Yn=8*jt;Yn<8*jt+kt;++Yn){xt=vt[cn][Yn];for(let ai=0;ai<Ct;++ai){const Cn=ai*64+(Yn&7)*8;Et.setUint16(xt+0*Nt,gt[cn][Cn+0],!0),Et.setUint16(xt+2*Nt,gt[cn][Cn+1],!0),Et.setUint16(xt+4*Nt,gt[cn][Cn+2],!0),Et.setUint16(xt+6*Nt,gt[cn][Cn+3],!0),Et.setUint16(xt+8*Nt,gt[cn][Cn+4],!0),Et.setUint16(xt+10*Nt,gt[cn][Cn+5],!0),Et.setUint16(xt+12*Nt,gt[cn][Cn+6],!0),Et.setUint16(xt+14*Nt,gt[cn][Cn+7],!0),xt+=16*Nt}}if(Ct!=Dt)for(let Yn=8*jt;Yn<8*jt+kt;++Yn){const ai=vt[cn][Yn]+8*Ct*2*Nt,Cn=Ct*64+(Yn&7)*8;for(let oi=0;oi<Ft;++oi)Et.setUint16(ai+oi*2*Nt,gt[cn][Cn+oi],!0)}}}for(var Zt=new Uint16Array(St),Et=new DataView(Ke.buffer),Xt=0;Xt<At;++Xt){ge[W.idx[Xt]].decoded=!0;var mn=ge[W.idx[Xt]].type;if(ge[Xt].type==2)for(var Fn=0;Fn<yt;++Fn){const jt=vt[Xt][Fn];for(var en=0;en<St;++en)Zt[en]=Et.getUint16(jt+en*2*mn,!0);for(var en=0;en<St;++en)Et.setFloat32(jt+en*2*mn,_e(Zt[en]),!0)}}}function it(W,ne,ge){for(var ke,qe=1;qe<64;)ke=ne[W.value],ke==65280?qe=64:ke>>8==255?qe+=ke&255:(ge[qe]=ke,qe++),W.value++}function ee(W,ne){ne[0]=_e(W[0]),ne[1]=_e(W[1]),ne[2]=_e(W[5]),ne[3]=_e(W[6]),ne[4]=_e(W[14]),ne[5]=_e(W[15]),ne[6]=_e(W[27]),ne[7]=_e(W[28]),ne[8]=_e(W[2]),ne[9]=_e(W[4]),ne[10]=_e(W[7]),ne[11]=_e(W[13]),ne[12]=_e(W[16]),ne[13]=_e(W[26]),ne[14]=_e(W[29]),ne[15]=_e(W[42]),ne[16]=_e(W[3]),ne[17]=_e(W[8]),ne[18]=_e(W[12]),ne[19]=_e(W[17]),ne[20]=_e(W[25]),ne[21]=_e(W[30]),ne[22]=_e(W[41]),ne[23]=_e(W[43]),ne[24]=_e(W[9]),ne[25]=_e(W[11]),ne[26]=_e(W[18]),ne[27]=_e(W[24]),ne[28]=_e(W[31]),ne[29]=_e(W[40]),ne[30]=_e(W[44]),ne[31]=_e(W[53]),ne[32]=_e(W[10]),ne[33]=_e(W[19]),ne[34]=_e(W[23]),ne[35]=_e(W[32]),ne[36]=_e(W[39]),ne[37]=_e(W[45]),ne[38]=_e(W[52]),ne[39]=_e(W[54]),ne[40]=_e(W[20]),ne[41]=_e(W[22]),ne[42]=_e(W[33]),ne[43]=_e(W[38]),ne[44]=_e(W[46]),ne[45]=_e(W[51]),ne[46]=_e(W[55]),ne[47]=_e(W[60]),ne[48]=_e(W[21]),ne[49]=_e(W[34]),ne[50]=_e(W[37]),ne[51]=_e(W[47]),ne[52]=_e(W[50]),ne[53]=_e(W[56]),ne[54]=_e(W[59]),ne[55]=_e(W[61]),ne[56]=_e(W[35]),ne[57]=_e(W[36]),ne[58]=_e(W[48]),ne[59]=_e(W[49]),ne[60]=_e(W[57]),ne[61]=_e(W[58]),ne[62]=_e(W[62]),ne[63]=_e(W[63])}function ut(W){const ne=.5*Math.cos(.7853975),ge=.5*Math.cos(3.14159/16),ke=.5*Math.cos(3.14159/8),qe=.5*Math.cos(3*3.14159/16),Ke=.5*Math.cos(5*3.14159/16),St=.5*Math.cos(3*3.14159/8),yt=.5*Math.cos(7*3.14159/16);for(var At=new Array(4),Ct=new Array(4),Dt=new Array(4),G=new Array(4),me=0;me<8;++me){var Te=me*8;At[0]=ke*W[Te+2],At[1]=St*W[Te+2],At[2]=ke*W[Te+6],At[3]=St*W[Te+6],Ct[0]=ge*W[Te+1]+qe*W[Te+3]+Ke*W[Te+5]+yt*W[Te+7],Ct[1]=qe*W[Te+1]-yt*W[Te+3]-ge*W[Te+5]-Ke*W[Te+7],Ct[2]=Ke*W[Te+1]-ge*W[Te+3]+yt*W[Te+5]+qe*W[Te+7],Ct[3]=yt*W[Te+1]-Ke*W[Te+3]+qe*W[Te+5]-ge*W[Te+7],Dt[0]=ne*(W[Te+0]+W[Te+4]),Dt[3]=ne*(W[Te+0]-W[Te+4]),Dt[1]=At[0]+At[3],Dt[2]=At[1]-At[2],G[0]=Dt[0]+Dt[1],G[1]=Dt[3]+Dt[2],G[2]=Dt[3]-Dt[2],G[3]=Dt[0]-Dt[1],W[Te+0]=G[0]+Ct[0],W[Te+1]=G[1]+Ct[1],W[Te+2]=G[2]+Ct[2],W[Te+3]=G[3]+Ct[3],W[Te+4]=G[3]-Ct[3],W[Te+5]=G[2]-Ct[2],W[Te+6]=G[1]-Ct[1],W[Te+7]=G[0]-Ct[0]}for(var be=0;be<8;++be)At[0]=ke*W[16+be],At[1]=St*W[16+be],At[2]=ke*W[48+be],At[3]=St*W[48+be],Ct[0]=ge*W[8+be]+qe*W[24+be]+Ke*W[40+be]+yt*W[56+be],Ct[1]=qe*W[8+be]-yt*W[24+be]-ge*W[40+be]-Ke*W[56+be],Ct[2]=Ke*W[8+be]-ge*W[24+be]+yt*W[40+be]+qe*W[56+be],Ct[3]=yt*W[8+be]-Ke*W[24+be]+qe*W[40+be]-ge*W[56+be],Dt[0]=ne*(W[be]+W[32+be]),Dt[3]=ne*(W[be]-W[32+be]),Dt[1]=At[0]+At[3],Dt[2]=At[1]-At[2],G[0]=Dt[0]+Dt[1],G[1]=Dt[3]+Dt[2],G[2]=Dt[3]-Dt[2],G[3]=Dt[0]-Dt[1],W[0+be]=G[0]+Ct[0],W[8+be]=G[1]+Ct[1],W[16+be]=G[2]+Ct[2],W[24+be]=G[3]+Ct[3],W[32+be]=G[3]-Ct[3],W[40+be]=G[2]-Ct[2],W[48+be]=G[1]-Ct[1],W[56+be]=G[0]-Ct[0]}function Ye(W){for(var ne=0;ne<64;++ne){var ge=W[0][ne],ke=W[1][ne],qe=W[2][ne];W[0][ne]=ge+1.5747*qe,W[1][ne]=ge-.1873*ke-.4682*qe,W[2][ne]=ge+1.8556*ke}}function De(W,ne,ge){for(var ke=0;ke<64;++ke)ne[ge+ke]=ed.toHalfFloat(We(W[ke]))}function We(W){return W<=1?Math.sign(W)*Math.pow(Math.abs(W),2.2):Math.sign(W)*Math.pow(U,Math.abs(W)-1)}function K(W){return new DataView(W.array.buffer,W.offset.value,W.size)}function V(W){var ne=W.viewer.buffer.slice(W.offset.value,W.offset.value+W.size),ge=new Uint8Array(Ve(ne)),ke=new Uint8Array(ge.length);return Mt(ge),Ue(ge,ke),new DataView(ke.buffer)}function ue(W){var ne=W.array.slice(W.offset.value,W.offset.value+W.size),ge=E_(ne),ke=new Uint8Array(ge.length);return Mt(ge),Ue(ge,ke),new DataView(ke.buffer)}function Ie(W){for(var ne=W.viewer,ge={value:W.offset.value},ke=new Uint16Array(W.width*W.scanlineBlockSize*(W.channels*W.type)),qe=new Uint8Array(8192),Ke=0,St=new Array(W.channels),yt=0;yt<W.channels;yt++)St[yt]={},St[yt].start=Ke,St[yt].end=St[yt].start,St[yt].nx=W.width,St[yt].ny=W.lines,St[yt].size=W.type,Ke+=St[yt].nx*St[yt].ny*St[yt].size;var At=$e(ne,ge),Ct=$e(ne,ge);if(Ct>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(At<=Ct)for(var yt=0;yt<Ct-At+1;yt++)qe[yt+At]=oe(ne,ge);var Dt=new Uint16Array(65536),G=H(qe,Dt),me=Fe(ne,ge);Je(W.array,ne,ge,me,ke,Ke);for(var yt=0;yt<W.channels;++yt)for(var Te=St[yt],be=0;be<St[yt].size;++be)je(ke,Te.start+be,Te.nx,Te.size,Te.ny,Te.nx*Te.size,G);nt(Dt,ke,Ke);for(var Me=0,ot=new Uint8Array(ke.buffer.byteLength),mt=0;mt<W.lines;mt++)for(var gt=0;gt<W.channels;gt++){var Te=St[gt],vt=Te.nx*Te.size,kt=new Uint8Array(ke.buffer,Te.end*2,vt*2);ot.set(kt,Me),Me+=vt*2,Te.end+=vt}return new DataView(ot.buffer)}function Ce(W){var ne=W.array.slice(W.offset.value,W.offset.value+W.size),ge=E_(ne);const ke=W.lines*W.channels*W.width,qe=W.type==1?new Uint16Array(ke):new Uint32Array(ke);let Ke=0,St=0;const yt=new Array(4);for(let At=0;At<W.lines;At++)for(let Ct=0;Ct<W.channels;Ct++){let Dt=0;switch(W.type){case 1:yt[0]=Ke,yt[1]=yt[0]+W.width,Ke=yt[1]+W.width;for(let G=0;G<W.width;++G){const me=ge[yt[0]++]<<8|ge[yt[1]++];Dt+=me,qe[St]=Dt,St++}break;case 2:yt[0]=Ke,yt[1]=yt[0]+W.width,yt[2]=yt[1]+W.width,Ke=yt[2]+W.width;for(let G=0;G<W.width;++G){const me=ge[yt[0]++]<<24|ge[yt[1]++]<<16|ge[yt[2]++]<<8;Dt+=me,qe[St]=Dt,St++}break}}return new DataView(qe.buffer)}function Ee(W){var ne=W.viewer,ge={value:W.offset.value},ke=new Uint8Array(W.width*W.lines*(W.channels*W.type*2)),qe={version:Ae(ne,ge),unknownUncompressedSize:Ae(ne,ge),unknownCompressedSize:Ae(ne,ge),acCompressedSize:Ae(ne,ge),dcCompressedSize:Ae(ne,ge),rleCompressedSize:Ae(ne,ge),rleUncompressedSize:Ae(ne,ge),rleRawSize:Ae(ne,ge),totalAcUncompressedCount:Ae(ne,ge),totalDcUncompressedCount:Ae(ne,ge),acCompression:Ae(ne,ge)};if(qe.version<2)throw"EXRLoader.parse: "+pi.compression+" version "+qe.version+" is unsupported";for(var Ke=new Array,St=$e(ne,ge)-2;St>0;){var yt=st(ne.buffer,ge),At=oe(ne,ge),Ct=At>>2&3,Dt=(At>>4)-1,G=new Int8Array([Dt])[0],me=oe(ne,ge);Ke.push({name:yt,index:G,type:me,compression:Ct}),St-=yt.length+3}for(var Te=pi.channels,be=new Array(W.channels),Me=0;Me<W.channels;++Me){var ot=be[Me]={},mt=Te[Me];ot.name=mt.name,ot.compression=0,ot.decoded=!1,ot.type=mt.pixelType,ot.pLinear=mt.pLinear,ot.width=W.width,ot.height=W.lines}for(var gt={idx:new Array(3)},vt=0;vt<W.channels;++vt)for(var ot=be[vt],Me=0;Me<Ke.length;++Me){var kt=Ke[Me];ot.name==kt.name&&(ot.compression=kt.compression,kt.index>=0&&(gt.idx[kt.index]=vt),ot.offset=vt)}if(qe.acCompressedSize>0)switch(qe.acCompression){case 0:var Et=new Uint16Array(qe.totalAcUncompressedCount);Je(W.array,ne,ge,qe.acCompressedSize,Et,qe.totalAcUncompressedCount);break;case 1:var Ft=W.array.slice(ge.value,ge.value+qe.totalAcUncompressedCount),Zt=E_(Ft),Et=new Uint16Array(Zt.buffer);ge.value+=qe.totalAcUncompressedCount;break}if(qe.dcCompressedSize>0){var Xt={array:W.array,offset:ge,size:qe.dcCompressedSize},mn=new Uint16Array(ue(Xt).buffer);ge.value+=qe.dcCompressedSize}if(qe.rleRawSize>0){var Ft=W.array.slice(ge.value,ge.value+qe.rleCompressedSize),Zt=E_(Ft),Fn=Ve(Zt.buffer);ge.value+=qe.rleCompressedSize}for(var en=0,jt=new Array(be.length),Me=0;Me<jt.length;++Me)jt[Me]=new Array;for(var xt=0;xt<W.lines;++xt)for(var cn=0;cn<be.length;++cn)jt[cn].push(en),en+=be[cn].width*W.type*2;Oe(gt,jt,be,Et,mn,ke);for(var Me=0;Me<be.length;++Me){var ot=be[Me];if(!ot.decoded)switch(ot.compression){case 2:for(var Nt=0,Yn=0,xt=0;xt<W.lines;++xt){for(var ai=jt[Me][Nt],Cn=0;Cn<ot.width;++Cn){for(var oi=0;oi<2*ot.type;++oi)ke[ai++]=Fn[Yn+oi*ot.width*ot.height];Yn++}Nt++}break;default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ke.buffer)}function st(W,ne){for(var ge=new Uint8Array(W),ke=0;ge[ne.value+ke]!=0;)ke+=1;var qe=new TextDecoder().decode(ge.slice(ne.value,ne.value+ke));return ne.value=ne.value+ke+1,qe}function at(W,ne,ge){var ke=new TextDecoder().decode(new Uint8Array(W).slice(ne.value,ne.value+ge));return ne.value=ne.value+ge,ke}function wt(W,ne){var ge=Ge(W,ne),ke=Fe(W,ne);return[ge,ke]}function Lt(W,ne){var ge=Fe(W,ne),ke=Fe(W,ne);return[ge,ke]}function Ge(W,ne){var ge=W.getInt32(ne.value,!0);return ne.value=ne.value+4,ge}function Fe(W,ne){var ge=W.getUint32(ne.value,!0);return ne.value=ne.value+4,ge}function tt(W,ne){var ge=W[ne.value];return ne.value=ne.value+1,ge}function oe(W,ne){var ge=W.getUint8(ne.value);return ne.value=ne.value+1,ge}const Ae=function(W,ne){let ge;return"getBigInt64"in DataView.prototype?ge=Number(W.getBigInt64(ne.value,!0)):ge=W.getUint32(ne.value+4,!0)+Number(W.getUint32(ne.value,!0)<<32),ne.value+=8,ge};function ht(W,ne){var ge=W.getFloat32(ne.value,!0);return ne.value+=4,ge}function he(W,ne){return ed.toHalfFloat(ht(W,ne))}function _e(W){var ne=(W&31744)>>10,ge=W&1023;return(W>>15?-1:1)*(ne?ne===31?ge?NaN:1/0:Math.pow(2,ne-15)*(1+ge/1024):6103515625e-14*(ge/1024))}function $e(W,ne){var ge=W.getUint16(ne.value,!0);return ne.value+=2,ge}function Rt(W,ne){return _e($e(W,ne))}function rt(W,ne,ge,ke){for(var qe=ge.value,Ke=[];ge.value<qe+ke-1;){var St=st(ne,ge),yt=Ge(W,ge),At=oe(W,ge);ge.value+=3;var Ct=Ge(W,ge),Dt=Ge(W,ge);Ke.push({name:St,pixelType:yt,pLinear:At,xSampling:Ct,ySampling:Dt})}return ge.value+=1,Ke}function Ne(W,ne){var ge=ht(W,ne),ke=ht(W,ne),qe=ht(W,ne),Ke=ht(W,ne),St=ht(W,ne),yt=ht(W,ne),At=ht(W,ne),Ct=ht(W,ne);return{redX:ge,redY:ke,greenX:qe,greenY:Ke,blueX:St,blueY:yt,whiteX:At,whiteY:Ct}}function bt(W,ne){var ge=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ke=oe(W,ne);return ge[ke]}function Ot(W,ne){var ge=Fe(W,ne),ke=Fe(W,ne),qe=Fe(W,ne),Ke=Fe(W,ne);return{xMin:ge,yMin:ke,xMax:qe,yMax:Ke}}function It(W,ne){var ge=["INCREASING_Y"],ke=oe(W,ne);return ge[ke]}function Ht(W,ne){var ge=ht(W,ne),ke=ht(W,ne);return[ge,ke]}function Sn(W,ne){var ge=ht(W,ne),ke=ht(W,ne),qe=ht(W,ne);return[ge,ke,qe]}function Dn(W,ne,ge,ke,qe){if(ke==="string"||ke==="stringvector"||ke==="iccProfile")return at(ne,ge,qe);if(ke==="chlist")return rt(W,ne,ge,qe);if(ke==="chromaticities")return Ne(W,ge);if(ke==="compression")return bt(W,ge);if(ke==="box2i")return Ot(W,ge);if(ke==="lineOrder")return It(W,ge);if(ke==="float")return ht(W,ge);if(ke==="v2f")return Ht(W,ge);if(ke==="v3f")return Sn(W,ge);if(ke==="int")return Ge(W,ge);if(ke==="rational")return wt(W,ge);if(ke==="timecode")return Lt(W,ge);if(ke==="preview")return ge.value+=qe,"skipped";ge.value+=qe}function Qn(W,ne,ge){const ke={};if(W.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ke.version=W.getUint8(4);const qe=W.getUint8(5);ke.spec={singleTile:!!(qe&2),longName:!!(qe&4),deepFormat:!!(qe&8),multiPart:!!(qe&16)},ge.value=8;for(var Ke=!0;Ke;){var St=st(ne,ge);if(St==0)Ke=!1;else{var yt=st(ne,ge),At=Fe(W,ge),Ct=Dn(W,ne,ge,yt,At);Ct===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${yt}'.`):ke[St]=Ct}}if((qe&-5)!=0)throw console.error("EXRHeader:",ke),"THREE.EXRLoader: provided file is currently unsupported.";return ke}function Li(W,ne,ge,ke,qe){const Ke={size:0,viewer:ne,array:ge,offset:ke,width:W.dataWindow.xMax-W.dataWindow.xMin+1,height:W.dataWindow.yMax-W.dataWindow.yMin+1,channels:W.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:W.channels[0].pixelType,uncompress:null,getter:null,format:null,[S0?"colorSpace":"encoding"]:null};switch(W.compression){case"NO_COMPRESSION":Ke.lines=1,Ke.uncompress=K;break;case"RLE_COMPRESSION":Ke.lines=1,Ke.uncompress=V;break;case"ZIPS_COMPRESSION":Ke.lines=1,Ke.uncompress=ue;break;case"ZIP_COMPRESSION":Ke.lines=16,Ke.uncompress=ue;break;case"PIZ_COMPRESSION":Ke.lines=32,Ke.uncompress=Ie;break;case"PXR24_COMPRESSION":Ke.lines=16,Ke.uncompress=Ce;break;case"DWAA_COMPRESSION":Ke.lines=32,Ke.uncompress=Ee;break;case"DWAB_COMPRESSION":Ke.lines=256,Ke.uncompress=Ee;break;default:throw"EXRLoader.parse: "+W.compression+" is unsupported"}if(Ke.scanlineBlockSize=Ke.lines,Ke.type==1)switch(qe){case qi:Ke.getter=Rt,Ke.inputSize=2;break;case yr:Ke.getter=$e,Ke.inputSize=2;break}else if(Ke.type==2)switch(qe){case qi:Ke.getter=ht,Ke.inputSize=4;break;case yr:Ke.getter=he,Ke.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ke.type+" for "+W.compression+".";Ke.blockCount=(W.dataWindow.yMax+1)/Ke.scanlineBlockSize;for(var St=0;St<Ke.blockCount;St++)Ae(ne,ke);Ke.outputChannels=Ke.channels==3?4:Ke.channels;const yt=Ke.width*Ke.height*Ke.outputChannels;switch(qe){case qi:Ke.byteArray=new Float32Array(yt),Ke.channels<Ke.outputChannels&&Ke.byteArray.fill(1,0,yt);break;case yr:Ke.byteArray=new Uint16Array(yt),Ke.channels<Ke.outputChannels&&Ke.byteArray.fill(15360,0,yt);break;default:console.error("THREE.EXRLoader: unsupported type: ",qe);break}return Ke.bytesPerLine=Ke.width*Ke.inputSize*Ke.channels,Ke.outputChannels==4?Ke.format=Rr:Ke.format=Bv,S0?Ke.colorSpace="srgb-linear":Ke.encoding=3e3,Ke}const xr=new DataView(e),Zi=new Uint8Array(e),Ti={value:0},pi=Qn(xr,e,Ti),Qt=Li(pi,xr,Zi,Ti,this.type),Jn={value:0},Xn={R:0,G:1,B:2,A:3,Y:0};for(let W=0;W<Qt.height/Qt.scanlineBlockSize;W++){const ne=Fe(xr,Ti);Qt.size=Fe(xr,Ti),Qt.lines=ne+Qt.scanlineBlockSize>Qt.height?Qt.height-ne:Qt.scanlineBlockSize;const ke=Qt.size<Qt.lines*Qt.bytesPerLine?Qt.uncompress(Qt):K(Qt);Ti.value+=Qt.size;for(let qe=0;qe<Qt.scanlineBlockSize;qe++){const Ke=qe+W*Qt.scanlineBlockSize;if(Ke>=Qt.height)break;for(let St=0;St<Qt.channels;St++){const yt=Xn[pi.channels[St].name];for(let At=0;At<Qt.width;At++){Jn.value=(qe*(Qt.channels*Qt.width)+St*Qt.width+At)*Qt.inputSize;const Ct=(Qt.height-1-Ke)*(Qt.width*Qt.outputChannels)+At*Qt.outputChannels+yt;Qt.byteArray[Ct]=Qt.getter(ke,Jn)}}}}return{header:pi,width:Qt.width,height:Qt.height,data:Qt.byteArray,format:Qt.format,[S0?"colorSpace":"encoding"]:Qt[S0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,l){S0?o.colorSpace=l.colorSpace:o.encoding=l.encoding,o.minFilter=Gn,o.magFilter=Gn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,l)}return super.load(e,s,n,i)}}function gq(){var r=Object.create(null);function e(i,s){var o=i.id,l=i.name,u=i.dependencies;u===void 0&&(u=[]);var h=i.init;h===void 0&&(h=function(){});var m=i.getTransferables;if(m===void 0&&(m=null),!r[o])try{u=u.map(function(v){return v&&v.isWorkerModule&&(e(v,function(_){if(_ instanceof Error)throw _}),v=r[v.id].value),v}),h=n("<"+l+">.init",h),m&&(m=n("<"+l+">.getTransferables",m));var g=null;typeof h=="function"?g=h.apply(void 0,u):console.error("worker module init function failed to rehydrate"),r[o]={id:o,value:g,getTransferables:m},s(g)}catch(v){v&&v.noLog||console.error(v),s(v)}}function t(i,s){var o,l=i.id,u=i.args;(!r[l]||typeof r[l].value!="function")&&s(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var h=(o=r[l]).value.apply(o,u);h&&typeof h.then=="function"?h.then(m,function(g){return s(g instanceof Error?g:new Error(""+g))}):m(h)}catch(g){s(g)}function m(g){try{var v=r[l].getTransferables&&r[l].getTransferables(g);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),s(g,v)}catch(_){console.error(_),s(_)}}}function n(i,s){var o=void 0;self.troikaDefine=function(u){return o=u};var l=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(u){console.error(u)}return URL.revokeObjectURL(l),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,l=s.action,u=s.data;try{l==="registerModule"&&e(u,function(h){h instanceof Error?postMessage({messageId:o,success:!1,error:h.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof h=="function"}})}),l==="callModule"&&t(u,function(h,m){h instanceof Error?postMessage({messageId:o,success:!1,error:h.message}):postMessage({messageId:o,success:!0,result:h},m||void 0)})}catch(h){postMessage({messageId:o,success:!1,error:h.stack})}})}function vq(r){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=r.dependencies,n=r.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var i=Promise.all(t).then(function(s){return n.apply(null,s)});return e._getInitResult=function(){return i},i},e}var HO=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),r=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return HO=function(){return r},r},yq=0,xq=0,mT=!1,Q0=Object.create(null),J0=Object.create(null),Lw=Object.create(null);function zm(r){if((!r||typeof r.init!="function")&&!mT)throw new Error("requires `options.init` function");var e=r.dependencies,t=r.init,n=r.getTransferables,i=r.workerId,s=vq(r);i==null&&(i="#default");var o="workerModule"+ ++yq,l=r.name||o,u=null;e=e&&e.map(function(m){return typeof m=="function"&&!m.workerModuleData&&(mT=!0,m=zm({workerId:i,name:"<"+l+"> function dependency: "+m.name,init:`function(){return (
`+X_(m)+`
)}`}),mT=!1),m&&m.workerModuleData&&(m=m.workerModuleData),m});function h(){for(var m=[],g=arguments.length;g--;)m[g]=arguments[g];if(!HO())return s.apply(void 0,m);if(!u){u=mN(i,"registerModule",h.workerModuleData);var v=function(){u=null,J0[i].delete(v)};(J0[i]||(J0[i]=new Set)).add(v)}return u.then(function(_){var b=_.isCallable;if(b)return mN(i,"callModule",{id:o,args:m});throw new Error("Worker module function was called but `init` did not return a callable function")})}return h.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:X_(t),getTransferables:n&&X_(n)},h.onMainThread=s,h}function _q(r){J0[r]&&J0[r].forEach(function(e){e()}),Q0[r]&&(Q0[r].terminate(),delete Q0[r])}function X_(r){var e=r.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function bq(r){var e=Q0[r];if(!e){var t=X_(gq);e=Q0[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var i=n.data,s=i.messageId,o=Lw[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Lw[s],o(i)}}return e}function mN(r,e,t){return new Promise(function(n,i){var s=++xq;Lw[s]=function(o){o.success?n(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},bq(r).postMessage({messageId:s,action:e,data:t})})}function jO(){var r=(function(e){function t(le,ce,z,Z,ae,fe,ve,re){var pe=1-ve;re.x=pe*pe*le+2*pe*ve*z+ve*ve*ae,re.y=pe*pe*ce+2*pe*ve*Z+ve*ve*fe}function n(le,ce,z,Z,ae,fe,ve,re,pe,Se){var je=1-pe;Se.x=je*je*je*le+3*je*je*pe*z+3*je*pe*pe*ae+pe*pe*pe*ve,Se.y=je*je*je*ce+3*je*je*pe*Z+3*je*pe*pe*fe+pe*pe*pe*re}function i(le,ce){for(var z=/([MLQCZ])([^MLQCZ]*)/g,Z,ae,fe,ve,re;Z=z.exec(le);){var pe=Z[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Se){return parseFloat(Se)});switch(Z[1]){case"M":ve=ae=pe[0],re=fe=pe[1];break;case"L":(pe[0]!==ve||pe[1]!==re)&&ce("L",ve,re,ve=pe[0],re=pe[1]);break;case"Q":{ce("Q",ve,re,ve=pe[2],re=pe[3],pe[0],pe[1]);break}case"C":{ce("C",ve,re,ve=pe[4],re=pe[5],pe[0],pe[1],pe[2],pe[3]);break}case"Z":(ve!==ae||re!==fe)&&ce("L",ve,re,ae,fe);break}}}function s(le,ce,z){z===void 0&&(z=16);var Z={x:0,y:0};i(le,function(ae,fe,ve,re,pe,Se,je,ct,Je){switch(ae){case"L":ce(fe,ve,re,pe);break;case"Q":{for(var nt=fe,Mt=ve,Ue=1;Ue<z;Ue++)t(fe,ve,Se,je,re,pe,Ue/(z-1),Z),ce(nt,Mt,Z.x,Z.y),nt=Z.x,Mt=Z.y;break}case"C":{for(var Ve=fe,Oe=ve,it=1;it<z;it++)n(fe,ve,Se,je,ct,Je,re,pe,it/(z-1),Z),ce(Ve,Oe,Z.x,Z.y),Ve=Z.x,Oe=Z.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,h={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function m(le,ce){var z=le.getContext?le.getContext("webgl",h):le,Z=u.get(z);if(!Z){let Ve=function(De){var We=fe[De];if(!We&&(We=fe[De]=z.getExtension(De),!We))throw new Error(De+" not supported");return We},Oe=function(De,We){var K=z.createShader(We);return z.shaderSource(K,De),z.compileShader(K),K},it=function(De,We,K,V){if(!ve[De]){var ue={},Ie={},Ce=z.createProgram();z.attachShader(Ce,Oe(We,z.VERTEX_SHADER)),z.attachShader(Ce,Oe(K,z.FRAGMENT_SHADER)),z.linkProgram(Ce),ve[De]={program:Ce,transaction:function(st){z.useProgram(Ce),st({setUniform:function(wt,Lt){for(var Ge=[],Fe=arguments.length-2;Fe-- >0;)Ge[Fe]=arguments[Fe+2];var tt=Ie[Lt]||(Ie[Lt]=z.getUniformLocation(Ce,Lt));z["uniform"+wt].apply(z,[tt].concat(Ge))},setAttribute:function(wt,Lt,Ge,Fe,tt){var oe=ue[wt];oe||(oe=ue[wt]={buf:z.createBuffer(),loc:z.getAttribLocation(Ce,wt),data:null}),z.bindBuffer(z.ARRAY_BUFFER,oe.buf),z.vertexAttribPointer(oe.loc,Lt,z.FLOAT,!1,0,0),z.enableVertexAttribArray(oe.loc),ae?z.vertexAttribDivisor(oe.loc,Fe):Ve("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(oe.loc,Fe),tt!==oe.data&&(z.bufferData(z.ARRAY_BUFFER,tt,Ge),oe.data=tt)}})}}}ve[De].transaction(V)},ee=function(De,We){pe++;try{z.activeTexture(z.TEXTURE0+pe);var K=re[De];K||(K=re[De]=z.createTexture(),z.bindTexture(z.TEXTURE_2D,K),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST)),z.bindTexture(z.TEXTURE_2D,K),We(K,pe)}finally{pe--}},ut=function(De,We,K){var V=z.createFramebuffer();Se.push(V),z.bindFramebuffer(z.FRAMEBUFFER,V),z.activeTexture(z.TEXTURE0+We),z.bindTexture(z.TEXTURE_2D,De),z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,De,0);try{K(V)}finally{z.deleteFramebuffer(V),z.bindFramebuffer(z.FRAMEBUFFER,Se[--Se.length-1]||null)}},Ye=function(){fe={},ve={},re={},pe=-1,Se.length=0};var je=Ve,ct=Oe,Je=it,nt=ee,Mt=ut,Ue=Ye,ae=typeof WebGL2RenderingContext<"u"&&z instanceof WebGL2RenderingContext,fe={},ve={},re={},pe=-1,Se=[];z.canvas.addEventListener("webglcontextlost",function(De){Ye(),De.preventDefault()},!1),u.set(z,Z={gl:z,isWebGL2:ae,getExtension:Ve,withProgram:it,withTexture:ee,withTextureFramebuffer:ut,handleContextLoss:Ye})}ce(Z)}function g(le,ce,z,Z,ae,fe,ve,re){ve===void 0&&(ve=15),re===void 0&&(re=null),m(le,function(pe){var Se=pe.gl,je=pe.withProgram,ct=pe.withTexture;ct("copy",function(Je,nt){Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,ae,fe,0,Se.RGBA,Se.UNSIGNED_BYTE,ce),je("copy",o,l,function(Mt){var Ue=Mt.setUniform,Ve=Mt.setAttribute;Ve("aUV",2,Se.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ue("1i","image",nt),Se.bindFramebuffer(Se.FRAMEBUFFER,re||null),Se.disable(Se.BLEND),Se.colorMask(ve&8,ve&4,ve&2,ve&1),Se.viewport(z,Z,ae,fe),Se.scissor(z,Z,ae,fe),Se.drawArrays(Se.TRIANGLES,0,3)})})})}function v(le,ce,z){var Z=le.width,ae=le.height;m(le,function(fe){var ve=fe.gl,re=new Uint8Array(Z*ae*4);ve.readPixels(0,0,Z,ae,ve.RGBA,ve.UNSIGNED_BYTE,re),le.width=ce,le.height=z,g(ve,re,0,0,Z,ae)})}var _=Object.freeze({__proto__:null,withWebGLContext:m,renderImageData:g,resizeWebGLCanvasWithoutClearing:v});function b(le,ce,z,Z,ae,fe){fe===void 0&&(fe=1);var ve=new Uint8Array(le*ce),re=Z[2]-Z[0],pe=Z[3]-Z[1],Se=[];s(z,function(Ve,Oe,it,ee){Se.push({x1:Ve,y1:Oe,x2:it,y2:ee,minX:Math.min(Ve,it),minY:Math.min(Oe,ee),maxX:Math.max(Ve,it),maxY:Math.max(Oe,ee)})}),Se.sort(function(Ve,Oe){return Ve.maxX-Oe.maxX});for(var je=0;je<le;je++)for(var ct=0;ct<ce;ct++){var Je=Mt(Z[0]+re*(je+.5)/le,Z[1]+pe*(ct+.5)/ce),nt=Math.pow(1-Math.abs(Je)/ae,fe)/2;Je<0&&(nt=1-nt),nt=Math.max(0,Math.min(255,Math.round(nt*255))),ve[ct*le+je]=nt}return ve;function Mt(Ve,Oe){for(var it=1/0,ee=1/0,ut=Se.length;ut--;){var Ye=Se[ut];if(Ye.maxX+ee<=Ve)break;if(Ve+ee>Ye.minX&&Oe-ee<Ye.maxY&&Oe+ee>Ye.minY){var De=T(Ve,Oe,Ye.x1,Ye.y1,Ye.x2,Ye.y2);De<it&&(it=De,ee=Math.sqrt(it))}}return Ue(Ve,Oe)&&(ee=-ee),ee}function Ue(Ve,Oe){for(var it=0,ee=Se.length;ee--;){var ut=Se[ee];if(ut.maxX<=Ve)break;var Ye=ut.y1>Oe!=ut.y2>Oe&&Ve<(ut.x2-ut.x1)*(Oe-ut.y1)/(ut.y2-ut.y1)+ut.x1;Ye&&(it+=ut.y1<ut.y2?1:-1)}return it!==0}}function w(le,ce,z,Z,ae,fe,ve,re,pe,Se){fe===void 0&&(fe=1),re===void 0&&(re=0),pe===void 0&&(pe=0),Se===void 0&&(Se=0),S(le,ce,z,Z,ae,fe,ve,null,re,pe,Se)}function S(le,ce,z,Z,ae,fe,ve,re,pe,Se,je){fe===void 0&&(fe=1),pe===void 0&&(pe=0),Se===void 0&&(Se=0),je===void 0&&(je=0);for(var ct=b(le,ce,z,Z,ae,fe),Je=new Uint8Array(ct.length*4),nt=0;nt<ct.length;nt++)Je[nt*4+je]=ct[nt];g(ve,Je,pe,Se,le,ce,1<<3-je,re)}function T(le,ce,z,Z,ae,fe){var ve=ae-z,re=fe-Z,pe=ve*ve+re*re,Se=pe?Math.max(0,Math.min(1,((le-z)*ve+(ce-Z)*re)/pe)):0,je=le-(z+Se*ve),ct=ce-(Z+Se*re);return je*je+ct*ct}var A=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:w,generateIntoFramebuffer:S}),D="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",L="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",I=new Float32Array([0,0,2,0,0,2]),k=null,R=!1,U={},H=new WeakMap;function Y(le){if(!R&&!ie(le))throw new Error("WebGL generation not supported")}function X(le,ce,z,Z,ae,fe,ve){if(fe===void 0&&(fe=1),ve===void 0&&(ve=null),!ve&&(ve=k,!ve)){var re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!re)throw new Error("OffscreenCanvas or DOM canvas not supported");ve=k=re.getContext("webgl",{depth:!1})}Y(ve);var pe=new Uint8Array(le*ce*4);m(ve,function(Je){var nt=Je.gl,Mt=Je.withTexture,Ue=Je.withTextureFramebuffer;Mt("readable",function(Ve,Oe){nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,le,ce,0,nt.RGBA,nt.UNSIGNED_BYTE,null),Ue(Ve,Oe,function(it){Q(le,ce,z,Z,ae,fe,nt,it,0,0,0),nt.readPixels(0,0,le,ce,nt.RGBA,nt.UNSIGNED_BYTE,pe)})})});for(var Se=new Uint8Array(le*ce),je=0,ct=0;je<pe.length;je+=4)Se[ct++]=pe[je];return Se}function q(le,ce,z,Z,ae,fe,ve,re,pe,Se){fe===void 0&&(fe=1),re===void 0&&(re=0),pe===void 0&&(pe=0),Se===void 0&&(Se=0),Q(le,ce,z,Z,ae,fe,ve,null,re,pe,Se)}function Q(le,ce,z,Z,ae,fe,ve,re,pe,Se,je){fe===void 0&&(fe=1),pe===void 0&&(pe=0),Se===void 0&&(Se=0),je===void 0&&(je=0),Y(ve);var ct=[];s(z,function(Je,nt,Mt,Ue){ct.push(Je,nt,Mt,Ue)}),ct=new Float32Array(ct),m(ve,function(Je){var nt=Je.gl,Mt=Je.isWebGL2,Ue=Je.getExtension,Ve=Je.withProgram,Oe=Je.withTexture,it=Je.withTextureFramebuffer,ee=Je.handleContextLoss;if(Oe("rawDistances",function(ut,Ye){(le!==ut._lastWidth||ce!==ut._lastHeight)&&nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,ut._lastWidth=le,ut._lastHeight=ce,0,nt.RGBA,nt.UNSIGNED_BYTE,null),Ve("main",D,N,function(De){var We=De.setAttribute,K=De.setUniform,V=!Mt&&Ue("ANGLE_instanced_arrays"),ue=!Mt&&Ue("EXT_blend_minmax");We("aUV",2,nt.STATIC_DRAW,0,I),We("aLineSegment",4,nt.DYNAMIC_DRAW,1,ct),K.apply(void 0,["4f","uGlyphBounds"].concat(Z)),K("1f","uMaxDistance",ae),K("1f","uExponent",fe),it(ut,Ye,function(Ie){nt.enable(nt.BLEND),nt.colorMask(!0,!0,!0,!0),nt.viewport(0,0,le,ce),nt.scissor(0,0,le,ce),nt.blendFunc(nt.ONE,nt.ONE),nt.blendEquationSeparate(nt.FUNC_ADD,Mt?nt.MAX:ue.MAX_EXT),nt.clear(nt.COLOR_BUFFER_BIT),Mt?nt.drawArraysInstanced(nt.TRIANGLES,0,3,ct.length/4):V.drawArraysInstancedANGLE(nt.TRIANGLES,0,3,ct.length/4)})}),Ve("post",o,L,function(De){De.setAttribute("aUV",2,nt.STATIC_DRAW,0,I),De.setUniform("1i","tex",Ye),nt.bindFramebuffer(nt.FRAMEBUFFER,re),nt.disable(nt.BLEND),nt.colorMask(je===0,je===1,je===2,je===3),nt.viewport(pe,Se,le,ce),nt.scissor(pe,Se,le,ce),nt.drawArrays(nt.TRIANGLES,0,3)})}),nt.isContextLost())throw ee(),new Error("webgl context lost")})}function ie(le){var ce=!le||le===k?U:le.canvas||le,z=H.get(ce);if(z===void 0){R=!0;var Z=null;try{var ae=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],fe=X(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,le);z=fe&&ae.length===fe.length&&fe.every(function(ve,re){return ve===ae[re]}),z||(Z="bad trial run results",console.info(ae,fe))}catch(ve){z=!1,Z=ve.message}Z&&console.warn("WebGL SDF generation not supported:",Z),R=!1,H.set(ce,z)}return z}var j=Object.freeze({__proto__:null,generate:X,generateIntoCanvas:q,generateIntoFramebuffer:Q,isSupported:ie});function J(le,ce,z,Z,ae,fe){ae===void 0&&(ae=Math.max(Z[2]-Z[0],Z[3]-Z[1])/2),fe===void 0&&(fe=1);try{return X.apply(j,arguments)}catch(ve){return console.info("WebGL SDF generation failed, falling back to JS",ve),b.apply(A,arguments)}}function de(le,ce,z,Z,ae,fe,ve,re,pe,Se){ae===void 0&&(ae=Math.max(Z[2]-Z[0],Z[3]-Z[1])/2),fe===void 0&&(fe=1),re===void 0&&(re=0),pe===void 0&&(pe=0),Se===void 0&&(Se=0);try{return q.apply(j,arguments)}catch(je){return console.info("WebGL SDF generation failed, falling back to JS",je),w.apply(A,arguments)}}return e.forEachPathCommand=i,e.generate=J,e.generateIntoCanvas=de,e.javascript=A,e.pathToLineSegments=s,e.webgl=j,e.webglUtils=_,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return r}function Sq(){var r=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach(function(ee,ut){n[ee]=1<<ut+1,i[n[ee]]=ee}),Object.freeze(n);var s=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,l=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,u=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,h=n.S|n.WS|n.B|s|n.PDI|u,m=null;function g(){if(!m){m=new Map;var ee=function(Ye){if(t.hasOwnProperty(Ye)){var De=0;t[Ye].split(",").forEach(function(We){var K=We.split("+"),V=K[0],ue=K[1];V=parseInt(V,36),ue=ue?parseInt(ue,36):0,m.set(De+=V,n[Ye]);for(var Ie=0;Ie<ue;Ie++)m.set(++De,n[Ye])})}};for(var ut in t)ee(ut)}}function v(ee){return g(),m.get(ee.codePointAt(0))||n.L}function _(ee){return i[v(ee)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function w(ee,ut){var Ye=36,De=0,We=new Map,K=ut&&new Map,V;return ee.split(",").forEach(function ue(Ie){if(Ie.indexOf("+")!==-1)for(var Ce=+Ie;Ce--;)ue(V);else{V=Ie;var Ee=Ie.split(">"),st=Ee[0],at=Ee[1];st=String.fromCodePoint(De+=parseInt(st,Ye)),at=String.fromCodePoint(De+=parseInt(at,Ye)),We.set(st,at),ut&&K.set(at,st)}}),{map:We,reverseMap:K}}var S,T,A;function D(){if(!S){var ee=w(b.pairs,!0),ut=ee.map,Ye=ee.reverseMap;S=ut,T=Ye,A=w(b.canonical,!1).map}}function N(ee){return D(),S.get(ee)||null}function L(ee){return D(),T.get(ee)||null}function I(ee){return D(),A.get(ee)||null}var k=n.L,R=n.R,U=n.EN,H=n.ES,Y=n.ET,X=n.AN,q=n.CS,Q=n.B,ie=n.S,j=n.ON,J=n.BN,de=n.NSM,le=n.AL,ce=n.LRO,z=n.RLO,Z=n.LRE,ae=n.RLE,fe=n.PDF,ve=n.LRI,re=n.RLI,pe=n.FSI,Se=n.PDI;function je(ee,ut){for(var Ye=125,De=new Uint32Array(ee.length),We=0;We<ee.length;We++)De[We]=v(ee[We]);var K=new Map;function V(Br,Ws){var Kr=De[Br];De[Br]=Ws,K.set(Kr,K.get(Kr)-1),Kr&l&&K.set(l,K.get(l)-1),K.set(Ws,(K.get(Ws)||0)+1),Ws&l&&K.set(l,(K.get(l)||0)+1)}for(var ue=new Uint8Array(ee.length),Ie=new Map,Ce=[],Ee=null,st=0;st<ee.length;st++)Ee||Ce.push(Ee={start:st,end:ee.length-1,level:ut==="rtl"?1:ut==="ltr"?0:Tu(st,!1)}),De[st]&Q&&(Ee.end=st,Ee=null);for(var at=ae|Z|z|ce|s|Se|fe|Q,wt=function(Br){return Br+(Br&1?1:2)},Lt=function(Br){return Br+(Br&1?2:1)},Ge=0;Ge<Ce.length;Ge++){Ee=Ce[Ge];var Fe=[{_level:Ee.level,_override:0,_isolate:0}],tt=void 0,oe=0,Ae=0,ht=0;K.clear();for(var he=Ee.start;he<=Ee.end;he++){var _e=De[he];if(tt=Fe[Fe.length-1],K.set(_e,(K.get(_e)||0)+1),_e&l&&K.set(l,(K.get(l)||0)+1),_e&at)if(_e&(ae|Z)){ue[he]=tt._level;var $e=(_e===ae?Lt:wt)(tt._level);$e<=Ye&&!oe&&!Ae?Fe.push({_level:$e,_override:0,_isolate:0}):oe||Ae++}else if(_e&(z|ce)){ue[he]=tt._level;var Rt=(_e===z?Lt:wt)(tt._level);Rt<=Ye&&!oe&&!Ae?Fe.push({_level:Rt,_override:_e&z?R:k,_isolate:0}):oe||Ae++}else if(_e&s){_e&pe&&(_e=Tu(he+1,!0)===1?re:ve),ue[he]=tt._level,tt._override&&V(he,tt._override);var rt=(_e===re?Lt:wt)(tt._level);rt<=Ye&&oe===0&&Ae===0?(ht++,Fe.push({_level:rt,_override:0,_isolate:1,_isolInitIndex:he})):oe++}else if(_e&Se){if(oe>0)oe--;else if(ht>0){for(Ae=0;!Fe[Fe.length-1]._isolate;)Fe.pop();var Ne=Fe[Fe.length-1]._isolInitIndex;Ne!=null&&(Ie.set(Ne,he),Ie.set(he,Ne)),Fe.pop(),ht--}tt=Fe[Fe.length-1],ue[he]=tt._level,tt._override&&V(he,tt._override)}else _e&fe?(oe===0&&(Ae>0?Ae--:!tt._isolate&&Fe.length>1&&(Fe.pop(),tt=Fe[Fe.length-1])),ue[he]=tt._level):_e&Q&&(ue[he]=Ee.level);else ue[he]=tt._level,tt._override&&_e!==J&&V(he,tt._override)}for(var bt=[],Ot=null,It=Ee.start;It<=Ee.end;It++){var Ht=De[It];if(!(Ht&u)){var Sn=ue[It],Dn=Ht&s,Qn=Ht===Se;Ot&&Sn===Ot._level?(Ot._end=It,Ot._endsWithIsolInit=Dn):bt.push(Ot={_start:It,_end:It,_level:Sn,_startsWithPDI:Qn,_endsWithIsolInit:Dn})}}for(var Li=[],xr=0;xr<bt.length;xr++){var Zi=bt[xr];if(!Zi._startsWithPDI||Zi._startsWithPDI&&!Ie.has(Zi._start)){for(var Ti=[Ot=Zi],pi=void 0;Ot&&Ot._endsWithIsolInit&&(pi=Ie.get(Ot._end))!=null;)for(var Qt=xr+1;Qt<bt.length;Qt++)if(bt[Qt]._start===pi){Ti.push(Ot=bt[Qt]);break}for(var Jn=[],Xn=0;Xn<Ti.length;Xn++)for(var W=Ti[Xn],ne=W._start;ne<=W._end;ne++)Jn.push(ne);for(var ge=ue[Jn[0]],ke=Ee.level,qe=Jn[0]-1;qe>=0;qe--)if(!(De[qe]&u)){ke=ue[qe];break}var Ke=Jn[Jn.length-1],St=ue[Ke],yt=Ee.level;if(!(De[Ke]&s)){for(var At=Ke+1;At<=Ee.end;At++)if(!(De[At]&u)){yt=ue[At];break}}Li.push({_seqIndices:Jn,_sosType:Math.max(ke,ge)%2?R:k,_eosType:Math.max(yt,St)%2?R:k})}}for(var Ct=0;Ct<Li.length;Ct++){var Dt=Li[Ct],G=Dt._seqIndices,me=Dt._sosType,Te=Dt._eosType,be=ue[G[0]]&1?R:k;if(K.get(de))for(var Me=0;Me<G.length;Me++){var ot=G[Me];if(De[ot]&de){for(var mt=me,gt=Me-1;gt>=0;gt--)if(!(De[G[gt]]&u)){mt=De[G[gt]];break}V(ot,mt&(s|Se)?j:mt)}}if(K.get(U))for(var vt=0;vt<G.length;vt++){var kt=G[vt];if(De[kt]&U)for(var Ft=vt-1;Ft>=-1;Ft--){var Zt=Ft===-1?me:De[G[Ft]];if(Zt&o){Zt===le&&V(kt,X);break}}}if(K.get(le))for(var Et=0;Et<G.length;Et++){var Xt=G[Et];De[Xt]&le&&V(Xt,R)}if(K.get(H)||K.get(q))for(var mn=1;mn<G.length-1;mn++){var Fn=G[mn];if(De[Fn]&(H|q)){for(var en=0,jt=0,xt=mn-1;xt>=0&&(en=De[G[xt]],!!(en&u));xt--);for(var cn=mn+1;cn<G.length&&(jt=De[G[cn]],!!(jt&u));cn++);en===jt&&(De[Fn]===H?en===U:en&(U|X))&&V(Fn,en)}}if(K.get(U))for(var Nt=0;Nt<G.length;Nt++){var Yn=G[Nt];if(De[Yn]&U){for(var ai=Nt-1;ai>=0&&De[G[ai]]&(Y|u);ai--)V(G[ai],U);for(Nt++;Nt<G.length&&De[G[Nt]]&(Y|u|U);Nt++)De[G[Nt]]!==U&&V(G[Nt],U)}}if(K.get(Y)||K.get(H)||K.get(q))for(var Cn=0;Cn<G.length;Cn++){var oi=G[Cn];if(De[oi]&(Y|H|q)){V(oi,j);for(var Ln=Cn-1;Ln>=0&&De[G[Ln]]&u;Ln--)V(G[Ln],j);for(var fi=Cn+1;fi<G.length&&De[G[fi]]&u;fi++)V(G[fi],j)}}if(K.get(U))for(var lr=0,wi=me;lr<G.length;lr++){var as=G[lr],Ss=De[as];Ss&U?wi===k&&V(as,k):Ss&o&&(wi=Ss)}if(K.get(l)){var Gs=R|U|X,Hf=Gs|k,Dl=[];{for(var ha=[],qr=0;qr<G.length;qr++)if(De[G[qr]]&l){var uo=ee[G[qr]],Rc=void 0;if(N(uo)!==null)if(ha.length<63)ha.push({char:uo,seqIndex:qr});else break;else if((Rc=L(uo))!==null)for(var Hs=ha.length-1;Hs>=0;Hs--){var da=ha[Hs].char;if(da===Rc||da===L(I(uo))||N(I(da))===uo){Dl.push([ha[Hs].seqIndex,qr]),ha.length=Hs;break}}}Dl.sort(function(Br,Ws){return Br[0]-Ws[0]})}for(var Dc=0;Dc<Dl.length;Dc++){for(var Nc=Dl[Dc],Nl=Nc[0],fo=Nc[1],js=!1,os=0,ho=Nl+1;ho<fo;ho++){var Zr=G[ho];if(De[Zr]&Hf){js=!0;var Pc=De[Zr]&Gs?R:k;if(Pc===be){os=Pc;break}}}if(js&&!os){os=me;for(var Ga=Nl-1;Ga>=0;Ga--){var Pl=G[Ga];if(De[Pl]&Hf){var Ll=De[Pl]&Gs?R:k;Ll!==be?os=Ll:os=be;break}}}if(os){if(De[G[Nl]]=De[G[fo]]=os,os!==be){for(var pa=Nl+1;pa<G.length;pa++)if(!(De[G[pa]]&u)){v(ee[G[pa]])&de&&(De[G[pa]]=os);break}}if(os!==be){for(var Ul=fo+1;Ul<G.length;Ul++)if(!(De[G[Ul]]&u)){v(ee[G[Ul]])&de&&(De[G[Ul]]=os);break}}}}for(var Ei=0;Ei<G.length;Ei++)if(De[G[Ei]]&l){for(var Ha=Ei,Qo=Ei,po=me,Il=Ei-1;Il>=0;Il--)if(De[G[Il]]&u)Ha=Il;else{po=De[G[Il]]&Gs?R:k;break}for(var Ol=Te,mo=Ei+1;mo<G.length;mo++)if(De[G[mo]]&(l|u))Qo=mo;else{Ol=De[G[mo]]&Gs?R:k;break}for(var go=Ha;go<=Qo;go++)De[G[go]]=po===Ol?po:be;Ei=Qo}}}for(var cr=Ee.start;cr<=Ee.end;cr++){var jf=ue[cr],Lc=De[cr];if(jf&1?Lc&(k|U|X)&&ue[cr]++:Lc&R?ue[cr]++:Lc&(X|U)&&(ue[cr]+=2),Lc&u&&(ue[cr]=cr===0?Ee.level:ue[cr-1]),cr===Ee.end||v(ee[cr])&(ie|Q))for(var Uc=cr;Uc>=0&&v(ee[Uc])&h;Uc--)ue[Uc]=Ee.level}}return{levels:ue,paragraphs:Ce};function Tu(Br,Ws){for(var Kr=Br;Kr<ee.length;Kr++){var ja=De[Kr];if(ja&(R|le))return 1;if(ja&(Q|k)||Ws&&ja===Se)return 0;if(ja&s){var Fl=wu(Kr);Kr=Fl===-1?ee.length:Fl}}return 0}function wu(Br){for(var Ws=1,Kr=Br+1;Kr<ee.length;Kr++){var ja=De[Kr];if(ja&Q)break;if(ja&Se){if(--Ws===0)return Kr}else ja&s&&Ws++}return-1}}var ct="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Je;function nt(){if(!Je){var ee=w(ct,!0),ut=ee.map,Ye=ee.reverseMap;Ye.forEach(function(De,We){ut.set(We,De)}),Je=ut}}function Mt(ee){return nt(),Je.get(ee)||null}function Ue(ee,ut,Ye,De){var We=ee.length;Ye=Math.max(0,Ye==null?0:+Ye),De=Math.min(We-1,De==null?We-1:+De);for(var K=new Map,V=Ye;V<=De;V++)if(ut[V]&1){var ue=Mt(ee[V]);ue!==null&&K.set(V,ue)}return K}function Ve(ee,ut,Ye,De){var We=ee.length;Ye=Math.max(0,Ye==null?0:+Ye),De=Math.min(We-1,De==null?We-1:+De);var K=[];return ut.paragraphs.forEach(function(V){var ue=Math.max(Ye,V.start),Ie=Math.min(De,V.end);if(ue<Ie){for(var Ce=ut.levels.slice(ue,Ie+1),Ee=Ie;Ee>=ue&&v(ee[Ee])&h;Ee--)Ce[Ee]=V.level;for(var st=V.level,at=1/0,wt=0;wt<Ce.length;wt++){var Lt=Ce[wt];Lt>st&&(st=Lt),Lt<at&&(at=Lt|1)}for(var Ge=st;Ge>=at;Ge--)for(var Fe=0;Fe<Ce.length;Fe++)if(Ce[Fe]>=Ge){for(var tt=Fe;Fe+1<Ce.length&&Ce[Fe+1]>=Ge;)Fe++;Fe>tt&&K.push([tt+ue,Fe+ue])}}}),K}function Oe(ee,ut,Ye,De){var We=it(ee,ut,Ye,De),K=[].concat(ee);return We.forEach(function(V,ue){K[ue]=(ut.levels[V]&1?Mt(ee[V]):null)||ee[V]}),K.join("")}function it(ee,ut,Ye,De){for(var We=Ve(ee,ut,Ye,De),K=[],V=0;V<ee.length;V++)K[V]=V;return We.forEach(function(ue){for(var Ie=ue[0],Ce=ue[1],Ee=K.slice(Ie,Ce+1),st=Ee.length;st--;)K[Ce-st]=Ee[st]}),K}return e.closingToOpeningBracket=L,e.getBidiCharType=v,e.getBidiCharTypeName=_,e.getCanonicalBracket=I,e.getEmbeddingLevels=je,e.getMirroredCharacter=Mt,e.getMirroredCharactersMap=Ue,e.getReorderSegments=Ve,e.getReorderedIndices=it,e.getReorderedString=Oe,e.openingToClosingBracket=N,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return r}const WO=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Uw(r){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,i){let s=En[i];return s?Uw(s):n}return r.replace(e,t)}const vs=[];for(let r=0;r<256;r++)vs[r]=(r<16?"0":"")+r.toString(16);function Mq(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(vs[r&255]+vs[r>>8&255]+vs[r>>16&255]+vs[r>>24&255]+"-"+vs[e&255]+vs[e>>8&255]+"-"+vs[e>>16&15|64]+vs[e>>24&255]+"-"+vs[t&63|128]+vs[t>>8&255]+"-"+vs[t>>16&255]+vs[t>>24&255]+vs[n&255]+vs[n>>8&255]+vs[n>>16&255]+vs[n>>24&255]).toUpperCase()}const Vh=Object.assign||function(){let r=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Tq=Date.now(),gN=new WeakMap,vN=new Map;let wq=1e10;function Iw(r,e){const t=Rq(e);let n=gN.get(r);if(n||gN.set(r,n=Object.create(null)),n[t])return new n[t];const i=`_onBeforeCompile${t}`,s=function(h,m){r.onBeforeCompile.call(this,h,m);const g=this.customProgramCacheKey()+"|"+h.vertexShader+"|"+h.fragmentShader;let v=vN[g];if(!v){const _=Eq(this,h,e,t);v=vN[g]=_}h.vertexShader=v.vertexShader,h.fragmentShader=v.fragmentShader,Vh(h.uniforms,this.uniforms),e.timeUniform&&(h.uniforms[e.timeUniform]={get value(){return Date.now()-Tq}}),this[i]&&this[i](h)},o=function(){return l(e.chained?r:r.clone())},l=function(h){const m=Object.create(h,u);return Object.defineProperty(m,"baseMaterial",{value:r}),Object.defineProperty(m,"id",{value:wq++}),m.uuid=Mq(),m.uniforms=Vh({},h.uniforms,e.uniforms),m.defines=Vh({},h.defines,e.defines),m.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",m.extensions=Vh({},h.extensions,e.extensions),m._listeners=void 0,m},u={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>r.type,set:h=>{r.type=h}},isDerivedFrom:{writable:!0,configurable:!0,value:function(h){const m=this.baseMaterial;return h===m||m.isDerivedMaterial&&m.isDerivedFrom(h)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(h){this[i]=h}},copy:{writable:!0,configurable:!0,value:function(h){return r.copy.call(this,h),!r.isShaderMaterial&&!r.isDerivedMaterial&&(Vh(this.extensions,h.extensions),Vh(this.defines,h.defines),Vh(this.uniforms,lA.clone(h.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const h=new r.constructor;return l(h).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let h=this._depthMaterial;return h||(h=this._depthMaterial=Iw(r.isDerivedMaterial?r.getDepthMaterial():new Xb({depthPacking:KU}),e),h.defines.IS_DEPTH_MATERIAL="",h.uniforms=this.uniforms),h}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let h=this._distanceMaterial;return h||(h=this._distanceMaterial=Iw(r.isDerivedMaterial?r.getDistanceMaterial():new Yb,e),h.defines.IS_DISTANCE_MATERIAL="",h.uniforms=this.uniforms),h}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:h,_distanceMaterial:m}=this;h&&h.dispose(),m&&m.dispose(),r.dispose.call(this)}}};return n[t]=o,new o}function Eq(r,{vertexShader:e,fragmentShader:t},n,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:m,fragmentMainOutro:g,fragmentColorTransform:v,customRewriter:_,timeUniform:b}=n;if(s=s||"",o=o||"",l=l||"",h=h||"",m=m||"",g=g||"",(u||_)&&(e=Uw(e)),(v||_)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=Uw(t)),_){let w=_({vertexShader:e,fragmentShader:t});e=w.vertexShader,t=w.fragmentShader}if(v){let w=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(w.push(S),"")),g=`${v}
${w.join(`
`)}
${g}`}if(b){const w=`
uniform float ${b};
`;s=w+s,h=w+h}return u&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(w,S,T,A)=>/\battribute\s+vec[23]\s+$/.test(A.substr(0,T))?S:`troika_${S}_${i}`),r.map&&r.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=yN(e,i,s,o,l),t=yN(t,i,h,m,g),{vertexShader:e,fragmentShader:t}}function yN(r,e,t,n,i){return(n||i||t)&&(r=r.replace(WO,`
${t}
void troikaOrigMain${e}() {`),r+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${i}
}`),r}function Aq(r,e){return r==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Cq=0;const xN=new Map;function Rq(r){const e=JSON.stringify(r,Aq);let t=xN.get(e);return t==null&&xN.set(e,t=++Cq),t}function Dq(){return typeof window>"u"&&(self.window=self),(function(r){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var l=4;s.readUshort(o,l),l+=2,s.readUshort(o,l),l+=2;var u=s.readUint(o,l);l+=4;for(var h=[],m=0;m<u;m++){var g=s.readUint(o,l);l+=4,h.push(e._readFont(o,g))}return h}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,l=s;o.readFixed(i,s),s+=4;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var h=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],m={_data:i,_offset:l},g={},v=0;v<u;v++){var _=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var b=o.readUint(i,s);s+=4;var w=o.readUint(i,s);s+=4,g[_]={offset:b,length:w}}for(v=0;v<h.length;v++){var S=h[v];g[S]&&(m[S.trim()]=e[S.trim()].parse(i,g[S].offset,g[S].length,m))}return m},_tabOffset:function(i,s,o){for(var l=e._bin,u=l.readUshort(i,o+4),h=o+12,m=0;m<u;m++){var g=l.readASCII(i,h,4);h+=4,l.readUint(i,h),h+=4;var v=l.readUint(i,h);if(h+=4,l.readUint(i,h),h+=4,g==s)return v}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var l=[],u=0;u<o;u++)l.push(e._bin.readUshort(i,s+2*u));return l},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var l="",u=0;u<o;u++)l+=String.fromCharCode(i[s+u]);return l},readUnicode:function(i,s,o){for(var l="",u=0;u<o;u++){var h=i[s++]<<8|i[s++];l+=String.fromCharCode(h)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var l=e._bin._tdec;return l&&s==0&&o==i.length?l.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var l=[],u=0;u<o;u++)l.push(i[s+u]);return l},readASCIIArray:function(i,s,o){for(var l=[],u=0;u<o;u++)l.push(String.fromCharCode(i[s+u]));return l},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,l,u){var h=e._bin,m={},g=s;h.readFixed(i,s),s+=4;var v=h.readUshort(i,s);s+=2;var _=h.readUshort(i,s);s+=2;var b=h.readUshort(i,s);return s+=2,m.scriptList=e._lctf.readScriptList(i,g+v),m.featureList=e._lctf.readFeatureList(i,g+_),m.lookupList=e._lctf.readLookupList(i,g+b,u),m},e._lctf.readLookupList=function(i,s,o){var l=e._bin,u=s,h=[],m=l.readUshort(i,s);s+=2;for(var g=0;g<m;g++){var v=l.readUshort(i,s);s+=2;var _=e._lctf.readLookupTable(i,u+v,o);h.push(_)}return h},e._lctf.readLookupTable=function(i,s,o){var l=e._bin,u=s,h={tabs:[]};h.ltype=l.readUshort(i,s),s+=2,h.flag=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;for(var g=h.ltype,v=0;v<m;v++){var _=l.readUshort(i,s);s+=2;var b=o(i,g,u+_,h);h.tabs.push(b)}return h},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)(i>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,l=[],u=o.readUshort(i,s);if(s+=2,u==1){var h=o.readUshort(i,s);s+=2;var m=o.readUshort(i,s);s+=2;for(var g=0;g<m;g++)l.push(h+g),l.push(h+g),l.push(o.readUshort(i,s)),s+=2}if(u==2){var v=o.readUshort(i,s);for(s+=2,g=0;g<v;g++)l.push(o.readUshort(i,s)),s+=2,l.push(o.readUshort(i,s)),s+=2,l.push(o.readUshort(i,s)),s+=2}return l},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var l=i[o],u=i[o+1];if(i[o+2],l<=s&&s<=u)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,l={};l.fmt=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);return s+=2,l.fmt==1&&(l.tab=o.readUshorts(i,s,u)),l.fmt==2&&(l.tab=o.readUshorts(i,s,3*u)),l},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var l=e._lctf.getInterval(o,s);if(l!=-1)return o[l+2]+(s-o[l])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,l=s,u=[],h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var g=o.readASCII(i,s,4);s+=4;var v=o.readUshort(i,s);s+=2;var _=e._lctf.readFeatureTable(i,l+v);_.tag=g.trim(),u.push(_)}return u},e._lctf.readFeatureTable=function(i,s){var o=e._bin,l=s,u={},h=o.readUshort(i,s);s+=2,h>0&&(u.featureParams=l+h);var m=o.readUshort(i,s);s+=2,u.tab=[];for(var g=0;g<m;g++)u.tab.push(o.readUshort(i,s+2*g));return u},e._lctf.readScriptList=function(i,s){var o=e._bin,l=s,u={},h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var g=o.readASCII(i,s,4);s+=4;var v=o.readUshort(i,s);s+=2,u[g.trim()]=e._lctf.readScriptTable(i,l+v)}return u},e._lctf.readScriptTable=function(i,s){var o=e._bin,l=s,u={},h=o.readUshort(i,s);s+=2,h>0&&(u.default=e._lctf.readLangSysTable(i,l+h));var m=o.readUshort(i,s);s+=2;for(var g=0;g<m;g++){var v=o.readASCII(i,s,4);s+=4;var _=o.readUshort(i,s);s+=2,u[v.trim()]=e._lctf.readLangSysTable(i,l+_)}return u},e._lctf.readLangSysTable=function(i,s){var o=e._bin,l={};o.readUshort(i,s),s+=2,l.reqFeature=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);return s+=2,l.features=o.readUshorts(i,s,u),l},e.CFF={},e.CFF.parse=function(i,s,o){var l=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var u=[];s=e.CFF.readIndex(i,s,u);for(var h=[],m=0;m<u.length-1;m++)h.push(l.readASCII(i,s+u[m],u[m+1]-u[m]));s+=u[u.length-1];var g=[];s=e.CFF.readIndex(i,s,g);var v=[];for(m=0;m<g.length-1;m++)v.push(e.CFF.readDict(i,s+g[m],s+g[m+1]));s+=g[g.length-1];var _=v[0],b=[];s=e.CFF.readIndex(i,s,b);var w=[];for(m=0;m<b.length-1;m++)w.push(l.readASCII(i,s+b[m],b[m+1]-b[m]));if(s+=b[b.length-1],e.CFF.readSubrs(i,s,_),_.CharStrings){s=_.CharStrings,b=[],s=e.CFF.readIndex(i,s,b);var S=[];for(m=0;m<b.length-1;m++)S.push(l.readBytes(i,s+b[m],b[m+1]-b[m]));_.CharStrings=S}if(_.ROS){s=_.FDArray;var T=[];for(s=e.CFF.readIndex(i,s,T),_.FDArray=[],m=0;m<T.length-1;m++){var A=e.CFF.readDict(i,s+T[m],s+T[m+1]);e.CFF._readFDict(i,A,w),_.FDArray.push(A)}s+=T[T.length-1],s=_.FDSelect,_.FDSelect=[];var D=i[s];if(s++,D!=3)throw D;var N=l.readUshort(i,s);for(s+=2,m=0;m<N+1;m++)_.FDSelect.push(l.readUshort(i,s),i[s+2]),s+=3}return _.Encoding&&(_.Encoding=e.CFF.readEncoding(i,_.Encoding,_.CharStrings.length)),_.charset&&(_.charset=e.CFF.readCharset(i,_.charset,_.CharStrings.length)),e.CFF._readFDict(i,_,w),_},e.CFF._readFDict=function(i,s,o){var l;for(var u in s.Private&&(l=s.Private[1],s.Private=e.CFF.readDict(i,l,l+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,l+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(s[u]=o[s[u]-426+35])},e.CFF.readSubrs=function(i,s,o){var l=e._bin,u=[];s=e.CFF.readIndex(i,s,u);var h,m=u.length;h=m<1240?107:m<33900?1131:32768,o.Bias=h,o.Subrs=[];for(var g=0;g<u.length-1;g++)o.Subrs.push(l.readBytes(i,s+u[g],u[g+1]-u[g]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var l=[".notdef"],u=i[s];if(s++,u!=0)throw"error: unknown encoding format: "+u;var h=i[s];s++;for(var m=0;m<h;m++)l.push(i[s+m]);return l},e.CFF.readCharset=function(i,s,o){var l=e._bin,u=[".notdef"],h=i[s];if(s++,h==0)for(var m=0;m<o;m++){var g=l.readUshort(i,s);s+=2,u.push(g)}else{if(h!=1&&h!=2)throw"error: format: "+h;for(;u.length<o;){g=l.readUshort(i,s),s+=2;var v=0;for(h==1?(v=i[s],s++):(v=l.readUshort(i,s),s+=2),m=0;m<=v;m++)u.push(g),g++}}return u},e.CFF.readIndex=function(i,s,o){var l=e._bin,u=l.readUshort(i,s)+1,h=i[s+=2];if(s++,h==1)for(var m=0;m<u;m++)o.push(i[s+m]);else if(h==2)for(m=0;m<u;m++)o.push(l.readUshort(i,s+2*m));else if(h==3)for(m=0;m<u;m++)o.push(16777215&l.readUint(i,s+3*m-1));else if(u!=1)throw"unsupported offset size: "+h+", count: "+u;return(s+=u*h)-1},e.CFF.getCharString=function(i,s,o){var l=e._bin,u=i[s],h=i[s+1];i[s+2],i[s+3],i[s+4];var m=1,g=null,v=null;u<=20&&(g=u,m=1),u==12&&(g=100*u+h,m=2),21<=u&&u<=27&&(g=u,m=1),u==28&&(v=l.readShort(i,s+1),m=3),29<=u&&u<=31&&(g=u,m=1),32<=u&&u<=246&&(v=u-139,m=1),247<=u&&u<=250&&(v=256*(u-247)+h+108,m=2),251<=u&&u<=254&&(v=256*-(u-251)-h-108,m=2),u==255&&(v=l.readInt(i,s+1)/65535,m=5),o.val=v??"o"+g,o.size=m},e.CFF.readCharString=function(i,s,o){for(var l=s+o,u=e._bin,h=[];s<l;){var m=i[s],g=i[s+1];i[s+2],i[s+3],i[s+4];var v=1,_=null,b=null;m<=20&&(_=m,v=1),m==12&&(_=100*m+g,v=2),m!=19&&m!=20||(_=m,v=2),21<=m&&m<=27&&(_=m,v=1),m==28&&(b=u.readShort(i,s+1),v=3),29<=m&&m<=31&&(_=m,v=1),32<=m&&m<=246&&(b=m-139,v=1),247<=m&&m<=250&&(b=256*(m-247)+g+108,v=2),251<=m&&m<=254&&(b=256*-(m-251)-g-108,v=2),m==255&&(b=u.readInt(i,s+1)/65535,v=5),h.push(b??"o"+_),s+=v}return h},e.CFF.readDict=function(i,s,o){for(var l=e._bin,u={},h=[];s<o;){var m=i[s],g=i[s+1];i[s+2],i[s+3],i[s+4];var v=1,_=null,b=null;if(m==28&&(b=l.readShort(i,s+1),v=3),m==29&&(b=l.readInt(i,s+1),v=5),32<=m&&m<=246&&(b=m-139,v=1),247<=m&&m<=250&&(b=256*(m-247)+g+108,v=2),251<=m&&m<=254&&(b=256*-(m-251)-g-108,v=2),m==255)throw b=l.readInt(i,s+1)/65535,v=5,"unknown number";if(m==30){var w=[];for(v=1;;){var S=i[s+v];v++;var T=S>>4,A=15&S;if(T!=15&&w.push(T),A!=15&&w.push(A),A==15)break}for(var D="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],L=0;L<w.length;L++)D+=N[w[L]];b=parseFloat(D)}m<=21&&(_=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][m],v=1,m==12&&(_=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],v=2)),_!=null?(u[_]=h.length==1?h[0]:h,h=[]):h.push(b),s+=v}return u},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var l=e._bin,u={};l.readUshort(i,s),s+=2;var h=l.readUshort(i,s);s+=2;var m=[];u.tables=[];for(var g=0;g<h;g++){var v=l.readUshort(i,s);s+=2;var _=l.readUshort(i,s);s+=2;var b=l.readUint(i,s);s+=4;var w="p"+v+"e"+_,S=m.indexOf(b);if(S==-1){var T;S=u.tables.length,m.push(b);var A=l.readUshort(i,b);A==0?T=e.cmap.parse0(i,b):A==4?T=e.cmap.parse4(i,b):A==6?T=e.cmap.parse6(i,b):A==12?T=e.cmap.parse12(i,b):console.debug("unknown format: "+A,v,_,b),u.tables.push(T)}if(u[w]!=null)throw"multiple tables for one platform+encoding";u[w]=S}return u},e.cmap.parse0=function(i,s){var o=e._bin,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,l.map=[];for(var h=0;h<u-6;h++)l.map.push(i[s+h]);return l},e.cmap.parse4=function(i,s){var o=e._bin,l=s,u={};u.format=o.readUshort(i,s),s+=2;var h=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var m=o.readUshort(i,s);s+=2;var g=m/2;u.searchRange=o.readUshort(i,s),s+=2,u.entrySelector=o.readUshort(i,s),s+=2,u.rangeShift=o.readUshort(i,s),s+=2,u.endCount=o.readUshorts(i,s,g),s+=2*g,s+=2,u.startCount=o.readUshorts(i,s,g),s+=2*g,u.idDelta=[];for(var v=0;v<g;v++)u.idDelta.push(o.readShort(i,s)),s+=2;for(u.idRangeOffset=o.readUshorts(i,s,g),s+=2*g,u.glyphIdArray=[];s<l+h;)u.glyphIdArray.push(o.readUshort(i,s)),s+=2;return u},e.cmap.parse6=function(i,s){var o=e._bin,l={};l.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,l.firstCode=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,l.glyphIdArray=[];for(var h=0;h<u;h++)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse12=function(i,s){var o=e._bin,l={};l.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var u=o.readUint(i,s);s+=4,l.groups=[];for(var h=0;h<u;h++){var m=s+12*h,g=o.readUint(i,m+0),v=o.readUint(i,m+4),_=o.readUint(i,m+8);l.groups.push([g,v,_])}return l},e.glyf={},e.glyf.parse=function(i,s,o,l){for(var u=[],h=0;h<l.maxp.numGlyphs;h++)u.push(null);return u},e.glyf._parseGlyf=function(i,s){var o=e._bin,l=i._data,u=e._tabOffset(l,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var h={};if(h.noc=o.readShort(l,u),u+=2,h.xMin=o.readShort(l,u),u+=2,h.yMin=o.readShort(l,u),u+=2,h.xMax=o.readShort(l,u),u+=2,h.yMax=o.readShort(l,u),u+=2,h.xMin>=h.xMax||h.yMin>=h.yMax)return null;if(h.noc>0){h.endPts=[];for(var m=0;m<h.noc;m++)h.endPts.push(o.readUshort(l,u)),u+=2;var g=o.readUshort(l,u);if(u+=2,l.length-u<g)return null;h.instructions=o.readBytes(l,u,g),u+=g;var v=h.endPts[h.noc-1]+1;for(h.flags=[],m=0;m<v;m++){var _=l[u];if(u++,h.flags.push(_),(8&_)!=0){var b=l[u];u++;for(var w=0;w<b;w++)h.flags.push(_),m++}}for(h.xs=[],m=0;m<v;m++){var S=(2&h.flags[m])!=0,T=(16&h.flags[m])!=0;S?(h.xs.push(T?l[u]:-l[u]),u++):T?h.xs.push(0):(h.xs.push(o.readShort(l,u)),u+=2)}for(h.ys=[],m=0;m<v;m++)S=(4&h.flags[m])!=0,T=(32&h.flags[m])!=0,S?(h.ys.push(T?l[u]:-l[u]),u++):T?h.ys.push(0):(h.ys.push(o.readShort(l,u)),u+=2);var A=0,D=0;for(m=0;m<v;m++)A+=h.xs[m],D+=h.ys[m],h.xs[m]=A,h.ys[m]=D}else{var N;h.parts=[];do{N=o.readUshort(l,u),u+=2;var L={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(h.parts.push(L),L.glyphIndex=o.readUshort(l,u),u+=2,1&N){var I=o.readShort(l,u);u+=2;var k=o.readShort(l,u);u+=2}else I=o.readInt8(l,u),u++,k=o.readInt8(l,u),u++;2&N?(L.m.tx=I,L.m.ty=k):(L.p1=I,L.p2=k),8&N?(L.m.a=L.m.d=o.readF2dot14(l,u),u+=2):64&N?(L.m.a=o.readF2dot14(l,u),u+=2,L.m.d=o.readF2dot14(l,u),u+=2):128&N&&(L.m.a=o.readF2dot14(l,u),u+=2,L.m.b=o.readF2dot14(l,u),u+=2,L.m.c=o.readF2dot14(l,u),u+=2,L.m.d=o.readF2dot14(l,u),u+=2)}while(32&N);if(256&N){var R=o.readUshort(l,u);for(u+=2,h.instr=[],m=0;m<R;m++)h.instr.push(l[u]),u++}}return h},e.GDEF={},e.GDEF.parse=function(i,s,o,l){var u=s;s+=4;var h=e._bin.readUshort(i,s);return{glyphClassDef:h===0?null:e._lctf.readClassDef(i,u+h)}},e.GPOS={},e.GPOS.parse=function(i,s,o,l){return e._lctf.parse(i,s,o,l,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,l){var u=e._bin,h=o,m={};if(m.fmt=u.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&m.fmt<=2){var g=u.readUshort(i,o);o+=2,m.coverage=e._lctf.readCoverage(i,g+h)}if(s==1&&m.fmt==1){var v=u.readUshort(i,o);o+=2,v!=0&&(m.pos=e.GPOS.readValueRecord(i,o,v))}else if(s==2&&m.fmt>=1&&m.fmt<=2){v=u.readUshort(i,o),o+=2;var _=u.readUshort(i,o);o+=2;var b=e._lctf.numOfOnes(v),w=e._lctf.numOfOnes(_);if(m.fmt==1){m.pairsets=[];var S=u.readUshort(i,o);o+=2;for(var T=0;T<S;T++){var A=h+u.readUshort(i,o);o+=2;var D=u.readUshort(i,A);A+=2;for(var N=[],L=0;L<D;L++){var I=u.readUshort(i,A);A+=2,v!=0&&(X=e.GPOS.readValueRecord(i,A,v),A+=2*b),_!=0&&(q=e.GPOS.readValueRecord(i,A,_),A+=2*w),N.push({gid2:I,val1:X,val2:q})}m.pairsets.push(N)}}if(m.fmt==2){var k=u.readUshort(i,o);o+=2;var R=u.readUshort(i,o);o+=2;var U=u.readUshort(i,o);o+=2;var H=u.readUshort(i,o);for(o+=2,m.classDef1=e._lctf.readClassDef(i,h+k),m.classDef2=e._lctf.readClassDef(i,h+R),m.matrix=[],T=0;T<U;T++){var Y=[];for(L=0;L<H;L++){var X=null,q=null;v!=0&&(X=e.GPOS.readValueRecord(i,o,v),o+=2*b),_!=0&&(q=e.GPOS.readValueRecord(i,o,_),o+=2*w),Y.push({val1:X,val2:q})}m.matrix.push(Y)}}}else if(s==4&&m.fmt==1)m.markCoverage=e._lctf.readCoverage(i,u.readUshort(i,o)+h),m.baseCoverage=e._lctf.readCoverage(i,u.readUshort(i,o+2)+h),m.markClassCount=u.readUshort(i,o+4),m.markArray=e.GPOS.readMarkArray(i,u.readUshort(i,o+6)+h),m.baseArray=e.GPOS.readBaseArray(i,u.readUshort(i,o+8)+h,m.markClassCount);else if(s==6&&m.fmt==1)m.mark1Coverage=e._lctf.readCoverage(i,u.readUshort(i,o)+h),m.mark2Coverage=e._lctf.readCoverage(i,u.readUshort(i,o+2)+h),m.markClassCount=u.readUshort(i,o+4),m.mark1Array=e.GPOS.readMarkArray(i,u.readUshort(i,o+6)+h),m.mark2Array=e.GPOS.readBaseArray(i,u.readUshort(i,o+8)+h,m.markClassCount);else{if(s==9&&m.fmt==1){var Q=u.readUshort(i,o);o+=2;var ie=u.readUint(i,o);if(o+=4,l.ltype==9)l.ltype=Q;else if(l.ltype!=Q)throw"invalid extension substitution";return e.GPOS.subt(i,l.ltype,h+ie)}console.debug("unsupported GPOS table LookupType",s,"format",m.fmt)}return m},e.GPOS.readValueRecord=function(i,s,o){var l=e._bin,u=[];return u.push(1&o?l.readShort(i,s):0),s+=1&o?2:0,u.push(2&o?l.readShort(i,s):0),s+=2&o?2:0,u.push(4&o?l.readShort(i,s):0),s+=4&o?2:0,u.push(8&o?l.readShort(i,s):0),s+=8&o?2:0,u},e.GPOS.readBaseArray=function(i,s,o){var l=e._bin,u=[],h=s,m=l.readUshort(i,s);s+=2;for(var g=0;g<m;g++){for(var v=[],_=0;_<o;_++)v.push(e.GPOS.readAnchorRecord(i,h+l.readUshort(i,s))),s+=2;u.push(v)}return u},e.GPOS.readMarkArray=function(i,s){var o=e._bin,l=[],u=s,h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var g=e.GPOS.readAnchorRecord(i,o.readUshort(i,s+2)+u);g.markClass=o.readUshort(i,s),l.push(g),s+=4}return l},e.GPOS.readAnchorRecord=function(i,s){var o=e._bin,l={};return l.fmt=o.readUshort(i,s),l.x=o.readShort(i,s+2),l.y=o.readShort(i,s+4),l},e.GSUB={},e.GSUB.parse=function(i,s,o,l){return e._lctf.parse(i,s,o,l,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,l){var u=e._bin,h=o,m={};if(m.fmt=u.readUshort(i,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&m.fmt<=2||s==6&&m.fmt<=2){var g=u.readUshort(i,o);o+=2,m.coverage=e._lctf.readCoverage(i,h+g)}if(s==1&&m.fmt>=1&&m.fmt<=2){if(m.fmt==1)m.delta=u.readShort(i,o),o+=2;else if(m.fmt==2){var v=u.readUshort(i,o);o+=2,m.newg=u.readUshorts(i,o,v),o+=2*m.newg.length}}else if(s==2&&m.fmt==1){v=u.readUshort(i,o),o+=2,m.seqs=[];for(var _=0;_<v;_++){var b=u.readUshort(i,o)+h;o+=2;var w=u.readUshort(i,b);m.seqs.push(u.readUshorts(i,b+2,w))}}else if(s==4)for(m.vals=[],v=u.readUshort(i,o),o+=2,_=0;_<v;_++){var S=u.readUshort(i,o);o+=2,m.vals.push(e.GSUB.readLigatureSet(i,h+S))}else if(s==5&&m.fmt==2){if(m.fmt==2){var T=u.readUshort(i,o);o+=2,m.cDef=e._lctf.readClassDef(i,h+T),m.scset=[];var A=u.readUshort(i,o);for(o+=2,_=0;_<A;_++){var D=u.readUshort(i,o);o+=2,m.scset.push(D==0?null:e.GSUB.readSubClassSet(i,h+D))}}}else if(s==6&&m.fmt==3){if(m.fmt==3){for(_=0;_<3;_++){v=u.readUshort(i,o),o+=2;for(var N=[],L=0;L<v;L++)N.push(e._lctf.readCoverage(i,h+u.readUshort(i,o+2*L)));o+=2*v,_==0&&(m.backCvg=N),_==1&&(m.inptCvg=N),_==2&&(m.ahedCvg=N)}v=u.readUshort(i,o),o+=2,m.lookupRec=e.GSUB.readSubstLookupRecords(i,o,v)}}else{if(s==7&&m.fmt==1){var I=u.readUshort(i,o);o+=2;var k=u.readUint(i,o);if(o+=4,l.ltype==9)l.ltype=I;else if(l.ltype!=I)throw"invalid extension substitution";return e.GSUB.subt(i,l.ltype,h+k)}console.debug("unsupported GSUB table LookupType",s,"format",m.fmt)}return m},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,l=s,u=[],h=o(i,s);s+=2;for(var m=0;m<h;m++){var g=o(i,s);s+=2,u.push(e.GSUB.readSubClassRule(i,l+g))}return u},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,l={},u=o(i,s),h=o(i,s+=2);s+=2,l.input=[];for(var m=0;m<u-1;m++)l.input.push(o(i,s)),s+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,h),l},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var l=e._bin.readUshort,u=[],h=0;h<o;h++)u.push(l(i,s),l(i,s+2)),s+=4;return u},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,l=s,u=[],h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var g=o.readUshort(i,s);s+=2,u.push(e.GSUB.readChainSubClassRule(i,l+g))}return u},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,l={},u=["backtrack","input","lookahead"],h=0;h<u.length;h++){var m=o.readUshort(i,s);s+=2,h==1&&m--,l[u[h]]=o.readUshorts(i,s,m),s+=2*l[u[h]].length}return m=o.readUshort(i,s),s+=2,l.subst=o.readUshorts(i,s,2*m),s+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,l=s,u=[],h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var g=o.readUshort(i,s);s+=2,u.push(e.GSUB.readLigature(i,l+g))}return u},e.GSUB.readLigature=function(i,s){var o=e._bin,l={chain:[]};l.nglyph=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;for(var h=0;h<u-1;h++)l.chain.push(o.readUshort(i,s)),s+=2;return l},e.head={},e.head.parse=function(i,s,o){var l=e._bin,u={};return l.readFixed(i,s),s+=4,u.fontRevision=l.readFixed(i,s),s+=4,l.readUint(i,s),s+=4,l.readUint(i,s),s+=4,u.flags=l.readUshort(i,s),s+=2,u.unitsPerEm=l.readUshort(i,s),s+=2,u.created=l.readUint64(i,s),s+=8,u.modified=l.readUint64(i,s),s+=8,u.xMin=l.readShort(i,s),s+=2,u.yMin=l.readShort(i,s),s+=2,u.xMax=l.readShort(i,s),s+=2,u.yMax=l.readShort(i,s),s+=2,u.macStyle=l.readUshort(i,s),s+=2,u.lowestRecPPEM=l.readUshort(i,s),s+=2,u.fontDirectionHint=l.readShort(i,s),s+=2,u.indexToLocFormat=l.readShort(i,s),s+=2,u.glyphDataFormat=l.readShort(i,s),s+=2,u},e.hhea={},e.hhea.parse=function(i,s,o){var l=e._bin,u={};return l.readFixed(i,s),s+=4,u.ascender=l.readShort(i,s),s+=2,u.descender=l.readShort(i,s),s+=2,u.lineGap=l.readShort(i,s),s+=2,u.advanceWidthMax=l.readUshort(i,s),s+=2,u.minLeftSideBearing=l.readShort(i,s),s+=2,u.minRightSideBearing=l.readShort(i,s),s+=2,u.xMaxExtent=l.readShort(i,s),s+=2,u.caretSlopeRise=l.readShort(i,s),s+=2,u.caretSlopeRun=l.readShort(i,s),s+=2,u.caretOffset=l.readShort(i,s),s+=2,s+=8,u.metricDataFormat=l.readShort(i,s),s+=2,u.numberOfHMetrics=l.readUshort(i,s),s+=2,u},e.hmtx={},e.hmtx.parse=function(i,s,o,l){for(var u=e._bin,h={aWidth:[],lsBearing:[]},m=0,g=0,v=0;v<l.maxp.numGlyphs;v++)v<l.hhea.numberOfHMetrics&&(m=u.readUshort(i,s),s+=2,g=u.readShort(i,s),s+=2),h.aWidth.push(m),h.lsBearing.push(g);return h},e.kern={},e.kern.parse=function(i,s,o,l){var u=e._bin,h=u.readUshort(i,s);if(s+=2,h==1)return e.kern.parseV1(i,s-2,o,l);var m=u.readUshort(i,s);s+=2;for(var g={glyph1:[],rval:[]},v=0;v<m;v++){s+=2,o=u.readUshort(i,s),s+=2;var _=u.readUshort(i,s);s+=2;var b=_>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;s=e.kern.readFormat0(i,s,g)}return g},e.kern.parseV1=function(i,s,o,l){var u=e._bin;u.readFixed(i,s),s+=4;var h=u.readUint(i,s);s+=4;for(var m={glyph1:[],rval:[]},g=0;g<h;g++){u.readUint(i,s),s+=4;var v=u.readUshort(i,s);s+=2,u.readUshort(i,s),s+=2;var _=v>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;s=e.kern.readFormat0(i,s,m)}return m},e.kern.readFormat0=function(i,s,o){var l=e._bin,u=-1,h=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2,l.readUshort(i,s),s+=2,l.readUshort(i,s),s+=2;for(var m=0;m<h;m++){var g=l.readUshort(i,s);s+=2;var v=l.readUshort(i,s);s+=2;var _=l.readShort(i,s);s+=2,g!=u&&(o.glyph1.push(g),o.rval.push({glyph2:[],vals:[]}));var b=o.rval[o.rval.length-1];b.glyph2.push(v),b.vals.push(_),u=g}return s},e.loca={},e.loca.parse=function(i,s,o,l){var u=e._bin,h=[],m=l.head.indexToLocFormat,g=l.maxp.numGlyphs+1;if(m==0)for(var v=0;v<g;v++)h.push(u.readUshort(i,s+(v<<1))<<1);if(m==1)for(v=0;v<g;v++)h.push(u.readUint(i,s+(v<<2)));return h},e.maxp={},e.maxp.parse=function(i,s,o){var l=e._bin,u={},h=l.readUint(i,s);return s+=4,u.numGlyphs=l.readUshort(i,s),s+=2,h==65536&&(u.maxPoints=l.readUshort(i,s),s+=2,u.maxContours=l.readUshort(i,s),s+=2,u.maxCompositePoints=l.readUshort(i,s),s+=2,u.maxCompositeContours=l.readUshort(i,s),s+=2,u.maxZones=l.readUshort(i,s),s+=2,u.maxTwilightPoints=l.readUshort(i,s),s+=2,u.maxStorage=l.readUshort(i,s),s+=2,u.maxFunctionDefs=l.readUshort(i,s),s+=2,u.maxInstructionDefs=l.readUshort(i,s),s+=2,u.maxStackElements=l.readUshort(i,s),s+=2,u.maxSizeOfInstructions=l.readUshort(i,s),s+=2,u.maxComponentElements=l.readUshort(i,s),s+=2,u.maxComponentDepth=l.readUshort(i,s),s+=2),u},e.name={},e.name.parse=function(i,s,o){var l=e._bin,u={};l.readUshort(i,s),s+=2;var h=l.readUshort(i,s);s+=2,l.readUshort(i,s);for(var m,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=s+=2,_=0;_<h;_++){var b=l.readUshort(i,s);s+=2;var w=l.readUshort(i,s);s+=2;var S=l.readUshort(i,s);s+=2;var T=l.readUshort(i,s);s+=2;var A=l.readUshort(i,s);s+=2;var D=l.readUshort(i,s);s+=2;var N,L=g[T],I=v+12*h+D;if(b==0)N=l.readUnicode(i,I,A/2);else if(b==3&&w==0)N=l.readUnicode(i,I,A/2);else if(w==0)N=l.readASCII(i,I,A);else if(w==1)N=l.readUnicode(i,I,A/2);else if(w==3)N=l.readUnicode(i,I,A/2);else{if(b!=1)throw"unknown encoding "+w+", platformID: "+b;N=l.readASCII(i,I,A),console.debug("reading unknown MAC encoding "+w+" as ASCII")}var k="p"+b+","+S.toString(16);u[k]==null&&(u[k]={}),u[k][L!==void 0?L:T]=N,u[k]._lang=S}for(var R in u)if(u[R].postScriptName!=null&&u[R]._lang==1033)return u[R];for(var R in u)if(u[R].postScriptName!=null&&u[R]._lang==0)return u[R];for(var R in u)if(u[R].postScriptName!=null&&u[R]._lang==3084)return u[R];for(var R in u)if(u[R].postScriptName!=null)return u[R];for(var R in u){m=R;break}return console.debug("returning name table with languageID "+u[m]._lang),u[m]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var l=e._bin.readUshort(i,s);s+=2;var u={};if(l==0)e["OS/2"].version0(i,s,u);else if(l==1)e["OS/2"].version1(i,s,u);else if(l==2||l==3||l==4)e["OS/2"].version2(i,s,u);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(i,s,u)}return u},e["OS/2"].version0=function(i,s,o){var l=e._bin;return o.xAvgCharWidth=l.readShort(i,s),s+=2,o.usWeightClass=l.readUshort(i,s),s+=2,o.usWidthClass=l.readUshort(i,s),s+=2,o.fsType=l.readUshort(i,s),s+=2,o.ySubscriptXSize=l.readShort(i,s),s+=2,o.ySubscriptYSize=l.readShort(i,s),s+=2,o.ySubscriptXOffset=l.readShort(i,s),s+=2,o.ySubscriptYOffset=l.readShort(i,s),s+=2,o.ySuperscriptXSize=l.readShort(i,s),s+=2,o.ySuperscriptYSize=l.readShort(i,s),s+=2,o.ySuperscriptXOffset=l.readShort(i,s),s+=2,o.ySuperscriptYOffset=l.readShort(i,s),s+=2,o.yStrikeoutSize=l.readShort(i,s),s+=2,o.yStrikeoutPosition=l.readShort(i,s),s+=2,o.sFamilyClass=l.readShort(i,s),s+=2,o.panose=l.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=l.readUint(i,s),s+=4,o.ulUnicodeRange2=l.readUint(i,s),s+=4,o.ulUnicodeRange3=l.readUint(i,s),s+=4,o.ulUnicodeRange4=l.readUint(i,s),s+=4,o.achVendID=[l.readInt8(i,s),l.readInt8(i,s+1),l.readInt8(i,s+2),l.readInt8(i,s+3)],s+=4,o.fsSelection=l.readUshort(i,s),s+=2,o.usFirstCharIndex=l.readUshort(i,s),s+=2,o.usLastCharIndex=l.readUshort(i,s),s+=2,o.sTypoAscender=l.readShort(i,s),s+=2,o.sTypoDescender=l.readShort(i,s),s+=2,o.sTypoLineGap=l.readShort(i,s),s+=2,o.usWinAscent=l.readUshort(i,s),s+=2,o.usWinDescent=l.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var l=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=l.readUint(i,s),s+=4,o.ulCodePageRange2=l.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var l=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=l.readShort(i,s),s+=2,o.sCapHeight=l.readShort(i,s),s+=2,o.usDefault=l.readUshort(i,s),s+=2,o.usBreak=l.readUshort(i,s),s+=2,o.usMaxContext=l.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var l=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=l.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=l.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var l=e._bin,u={};return u.version=l.readFixed(i,s),s+=4,u.italicAngle=l.readFixed(i,s),s+=4,u.underlinePosition=l.readShort(i,s),s+=2,u.underlineThickness=l.readShort(i,s),s+=2,u},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,l=-1;if(o.p0e4!=null?l=o.p0e4:o.p3e1!=null?l=o.p3e1:o.p1e0!=null?l=o.p1e0:o.p0e3!=null&&(l=o.p0e3),l==-1)throw"no familiar platform and encoding!";var u=o.tables[l];if(u.format==0)return s>=u.map.length?0:u.map[s];if(u.format==4){for(var h=-1,m=0;m<u.endCount.length;m++)if(s<=u.endCount[m]){h=m;break}return h==-1||u.startCount[h]>s?0:65535&(u.idRangeOffset[h]!=0?u.glyphIdArray[s-u.startCount[h]+(u.idRangeOffset[h]>>1)-(u.idRangeOffset.length-h)]:s+u.idDelta[h])}if(u.format==12){if(s>u.groups[u.groups.length-1][1])return 0;for(m=0;m<u.groups.length;m++){var g=u.groups[m];if(g[0]<=s&&s<=g[1])return g[2]+(s-g[0])}return 0}throw"unknown cmap table format "+u.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var l=i.SVG.entries[s];return l==null?o:(typeof l=="string"&&(l=e.SVG.toPath(l),i.SVG.entries[s]=l),l)}if(i.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},h=i.CFF,m=i.CFF.Private;if(h.ROS){for(var g=0;h.FDSelect[g+2]<=s;)g+=2;m=h.FDArray[h.FDSelect[g+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],u,h,m,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var l=s.glyf[i];l==null&&(l=s.glyf[i]=e.glyf._parseGlyf(s,i)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,o):e.U._compoGlyph(l,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var l=o==0?0:i.endPts[o-1]+1,u=i.endPts[o],h=l;h<=u;h++){var m=h==l?u:h-1,g=h==u?l:h+1,v=1&i.flags[h],_=1&i.flags[m],b=1&i.flags[g],w=i.xs[h],S=i.ys[h];if(h==l)if(v){if(!_){e.U.P.moveTo(s,w,S);continue}e.U.P.moveTo(s,i.xs[m],i.ys[m])}else _?e.U.P.moveTo(s,i.xs[m],i.ys[m]):e.U.P.moveTo(s,(i.xs[m]+w)/2,(i.ys[m]+S)/2);v?_&&e.U.P.lineTo(s,w,S):b?e.U.P.qcurveTo(s,w,S,i.xs[g],i.ys[g]):e.U.P.qcurveTo(s,w,S,(w+i.xs[g])/2,(S+i.ys[g])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var l=0;l<i.parts.length;l++){var u={cmds:[],crds:[]},h=i.parts[l];e.U._drawGlyf(h.glyphIndex,s,u);for(var m=h.m,g=0;g<u.crds.length;g+=2){var v=u.crds[g],_=u.crds[g+1];o.crds.push(v*m.a+_*m.b+m.tx),o.crds.push(v*m.c+_*m.d+m.ty)}for(g=0;g<u.cmds.length;g++)o.cmds.push(u.cmds[g])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U._applySubs=function(i,s,o,l){for(var u=i.length-s-1,h=0;h<o.tabs.length;h++)if(o.tabs[h]!=null){var m,g=o.tabs[h];if(!g.coverage||(m=e._lctf.coverageIndex(g.coverage,i[s]))!=-1){if(o.ltype==1)i[s],g.fmt==1?i[s]=i[s]+g.delta:i[s]=g.newg[m];else if(o.ltype==4)for(var v=g.vals[m],_=0;_<v.length;_++){var b=v[_],w=b.chain.length;if(!(w>u)){for(var S=!0,T=0,A=0;A<w;A++){for(;i[s+T+(1+A)]==-1;)T++;b.chain[A]!=i[s+T+(1+A)]&&(S=!1)}if(S){for(i[s]=b.nglyph,A=0;A<w+T;A++)i[s+A+1]=-1;break}}}else if(o.ltype==5&&g.fmt==2)for(var D=e._lctf.getInterval(g.cDef,i[s]),N=g.cDef[D+2],L=g.scset[N],I=0;I<L.length;I++){var k=L[I],R=k.input;if(!(R.length>u)){for(S=!0,A=0;A<R.length;A++){var U=e._lctf.getInterval(g.cDef,i[s+1+A]);if(D==-1&&g.cDef[U+2]!=R[A]){S=!1;break}}if(S){var H=k.substLookupRecords;for(_=0;_<H.length;_+=2)H[_],H[_+1]}}}else if(o.ltype==6&&g.fmt==3){if(!e.U._glsCovered(i,g.backCvg,s-g.backCvg.length)||!e.U._glsCovered(i,g.inptCvg,s)||!e.U._glsCovered(i,g.ahedCvg,s+g.inptCvg.length))continue;var Y=g.lookupRec;for(I=0;I<Y.length;I+=2){D=Y[I];var X=l[Y[I+1]];e.U._applySubs(i,s+D,X,l)}}}}},e.U._glsCovered=function(i,s,o){for(var l=0;l<s.length;l++)if(e._lctf.coverageIndex(s[l],i[o+l])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var l={cmds:[],crds:[]},u=0,h=0;h<s.length;h++){var m=s[h];if(m!=-1){for(var g=h<s.length-1&&s[h+1]!=-1?s[h+1]:0,v=e.U.glyphToPath(i,m),_=0;_<v.crds.length;_+=2)l.crds.push(v.crds[_]+u),l.crds.push(v.crds[_+1]);for(o&&l.cmds.push(o),_=0;_<v.cmds.length;_++)l.cmds.push(v.cmds[_]);o&&l.cmds.push("X"),u+=i.hmtx.aWidth[m],h<s.length-1&&(u+=e.U.getPairAdjustment(i,m,g))}}return l},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,l,u,h,m){i.cmds.push("C"),i.crds.push(s,o,l,u,h,m)},e.U.P.qcurveTo=function(i,s,o,l,u){i.cmds.push("Q"),i.crds.push(s,o,l,u)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,l,u){for(var h=s.stack,m=s.nStems,g=s.haveWidth,v=s.width,_=s.open,b=0,w=s.x,S=s.y,T=0,A=0,D=0,N=0,L=0,I=0,k=0,R=0,U=0,H=0,Y={val:0,size:0};b<i.length;){e.CFF.getCharString(i,b,Y);var X=Y.val;if(b+=Y.size,X=="o1"||X=="o18")h.length%2!=0&&!g&&(v=h.shift()+l.nominalWidthX),m+=h.length>>1,h.length=0,g=!0;else if(X=="o3"||X=="o23")h.length%2!=0&&!g&&(v=h.shift()+l.nominalWidthX),m+=h.length>>1,h.length=0,g=!0;else if(X=="o4")h.length>1&&!g&&(v=h.shift()+l.nominalWidthX,g=!0),_&&e.U.P.closePath(u),S+=h.pop(),e.U.P.moveTo(u,w,S),_=!0;else if(X=="o5")for(;h.length>0;)w+=h.shift(),S+=h.shift(),e.U.P.lineTo(u,w,S);else if(X=="o6"||X=="o7")for(var q=h.length,Q=X=="o6",ie=0;ie<q;ie++){var j=h.shift();Q?w+=j:S+=j,Q=!Q,e.U.P.lineTo(u,w,S)}else if(X=="o8"||X=="o24"){q=h.length;for(var J=0;J+6<=q;)T=w+h.shift(),A=S+h.shift(),D=T+h.shift(),N=A+h.shift(),w=D+h.shift(),S=N+h.shift(),e.U.P.curveTo(u,T,A,D,N,w,S),J+=6;X=="o24"&&(w+=h.shift(),S+=h.shift(),e.U.P.lineTo(u,w,S))}else{if(X=="o11")break;if(X=="o1234"||X=="o1235"||X=="o1236"||X=="o1237")X=="o1234"&&(A=S,D=(T=w+h.shift())+h.shift(),H=N=A+h.shift(),I=N,R=S,w=(k=(L=(U=D+h.shift())+h.shift())+h.shift())+h.shift(),e.U.P.curveTo(u,T,A,D,N,U,H),e.U.P.curveTo(u,L,I,k,R,w,S)),X=="o1235"&&(T=w+h.shift(),A=S+h.shift(),D=T+h.shift(),N=A+h.shift(),U=D+h.shift(),H=N+h.shift(),L=U+h.shift(),I=H+h.shift(),k=L+h.shift(),R=I+h.shift(),w=k+h.shift(),S=R+h.shift(),h.shift(),e.U.P.curveTo(u,T,A,D,N,U,H),e.U.P.curveTo(u,L,I,k,R,w,S)),X=="o1236"&&(T=w+h.shift(),A=S+h.shift(),D=T+h.shift(),H=N=A+h.shift(),I=N,k=(L=(U=D+h.shift())+h.shift())+h.shift(),R=I+h.shift(),w=k+h.shift(),e.U.P.curveTo(u,T,A,D,N,U,H),e.U.P.curveTo(u,L,I,k,R,w,S)),X=="o1237"&&(T=w+h.shift(),A=S+h.shift(),D=T+h.shift(),N=A+h.shift(),U=D+h.shift(),H=N+h.shift(),L=U+h.shift(),I=H+h.shift(),k=L+h.shift(),R=I+h.shift(),Math.abs(k-w)>Math.abs(R-S)?w=k+h.shift():S=R+h.shift(),e.U.P.curveTo(u,T,A,D,N,U,H),e.U.P.curveTo(u,L,I,k,R,w,S));else if(X=="o14"){if(h.length>0&&!g&&(v=h.shift()+o.nominalWidthX,g=!0),h.length==4){var de=h.shift(),le=h.shift(),ce=h.shift(),z=h.shift(),Z=e.CFF.glyphBySE(o,ce),ae=e.CFF.glyphBySE(o,z);e.U._drawCFF(o.CharStrings[Z],s,o,l,u),s.x=de,s.y=le,e.U._drawCFF(o.CharStrings[ae],s,o,l,u)}_&&(e.U.P.closePath(u),_=!1)}else if(X=="o19"||X=="o20")h.length%2!=0&&!g&&(v=h.shift()+l.nominalWidthX),m+=h.length>>1,h.length=0,g=!0,b+=m+7>>3;else if(X=="o21")h.length>2&&!g&&(v=h.shift()+l.nominalWidthX,g=!0),S+=h.pop(),w+=h.pop(),_&&e.U.P.closePath(u),e.U.P.moveTo(u,w,S),_=!0;else if(X=="o22")h.length>1&&!g&&(v=h.shift()+l.nominalWidthX,g=!0),w+=h.pop(),_&&e.U.P.closePath(u),e.U.P.moveTo(u,w,S),_=!0;else if(X=="o25"){for(;h.length>6;)w+=h.shift(),S+=h.shift(),e.U.P.lineTo(u,w,S);T=w+h.shift(),A=S+h.shift(),D=T+h.shift(),N=A+h.shift(),w=D+h.shift(),S=N+h.shift(),e.U.P.curveTo(u,T,A,D,N,w,S)}else if(X=="o26")for(h.length%2&&(w+=h.shift());h.length>0;)T=w,A=S+h.shift(),w=D=T+h.shift(),S=(N=A+h.shift())+h.shift(),e.U.P.curveTo(u,T,A,D,N,w,S);else if(X=="o27")for(h.length%2&&(S+=h.shift());h.length>0;)A=S,D=(T=w+h.shift())+h.shift(),N=A+h.shift(),w=D+h.shift(),S=N,e.U.P.curveTo(u,T,A,D,N,w,S);else if(X=="o10"||X=="o29"){var fe=X=="o10"?l:o;if(h.length==0)console.debug("error: empty stack");else{var ve=h.pop(),re=fe.Subrs[ve+fe.Bias];s.x=w,s.y=S,s.nStems=m,s.haveWidth=g,s.width=v,s.open=_,e.U._drawCFF(re,s,o,l,u),w=s.x,S=s.y,m=s.nStems,g=s.haveWidth,v=s.width,_=s.open}}else if(X=="o30"||X=="o31"){var pe=h.length,Se=(J=0,X=="o31");for(J+=pe-(q=-3&pe);J<q;)Se?(A=S,D=(T=w+h.shift())+h.shift(),S=(N=A+h.shift())+h.shift(),q-J==5?(w=D+h.shift(),J++):w=D,Se=!1):(T=w,A=S+h.shift(),D=T+h.shift(),N=A+h.shift(),w=D+h.shift(),q-J==5?(S=N+h.shift(),J++):S=N,Se=!0),e.U.P.curveTo(u,T,A,D,N,w,S),J+=4}else{if((X+"").charAt(0)=="o")throw console.debug("Unknown operation: "+X,i),X;h.push(X)}}}s.x=w,s.y=S,s.nStems=m,s.haveWidth=g,s.width=v,s.open=_};var t=e,n={Typr:t};return r.Typr=t,r.default=n,Object.defineProperty(r,"__esModule",{value:!0}),r})({}).Typr}function Nq(){return(function(r){var e=Uint8Array,t=Uint16Array,n=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(X,q){for(var Q=new t(31),ie=0;ie<31;++ie)Q[ie]=q+=1<<X[ie-1];var j=new n(Q[30]);for(ie=1;ie<30;++ie)for(var J=Q[ie];J<Q[ie+1];++J)j[J]=J-Q[ie]<<5|ie;return[Q,j]},u=l(i,2),h=u[0],m=u[1];h[28]=258,m[258]=28;for(var g=l(s,0)[0],v=new t(32768),_=0;_<32768;++_){var b=(43690&_)>>>1|(21845&_)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,v[_]=((65280&b)>>>8|(255&b)<<8)>>>1}var w=function(X,q,Q){for(var ie=X.length,j=0,J=new t(q);j<ie;++j)++J[X[j]-1];var de,le=new t(q);for(j=0;j<q;++j)le[j]=le[j-1]+J[j-1]<<1;{de=new t(1<<q);var ce=15-q;for(j=0;j<ie;++j)if(X[j])for(var z=j<<4|X[j],Z=q-X[j],ae=le[X[j]-1]++<<Z,fe=ae|(1<<Z)-1;ae<=fe;++ae)de[v[ae]>>>ce]=z}return de},S=new e(288);for(_=0;_<144;++_)S[_]=8;for(_=144;_<256;++_)S[_]=9;for(_=256;_<280;++_)S[_]=7;for(_=280;_<288;++_)S[_]=8;var T=new e(32);for(_=0;_<32;++_)T[_]=5;var A=w(S,9),D=w(T,5),N=function(X){for(var q=X[0],Q=1;Q<X.length;++Q)X[Q]>q&&(q=X[Q]);return q},L=function(X,q,Q){var ie=q/8|0;return(X[ie]|X[ie+1]<<8)>>(7&q)&Q},I=function(X,q){var Q=q/8|0;return(X[Q]|X[Q+1]<<8|X[Q+2]<<16)>>(7&q)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(X,q,Q){var ie=new Error(q||k[X]);if(ie.code=X,Error.captureStackTrace&&Error.captureStackTrace(ie,R),!Q)throw ie;return ie},U=function(X,q,Q){var ie=X.length;if(!ie||Q&&!Q.l&&ie<5)return q||new e(0);var j=!q||Q,J=!Q||Q.i;Q||(Q={}),q||(q=new e(3*ie));var de,le=function(tt){var oe=q.length;if(tt>oe){var Ae=new e(Math.max(2*oe,tt));Ae.set(q),q=Ae}},ce=Q.f||0,z=Q.p||0,Z=Q.b||0,ae=Q.l,fe=Q.d,ve=Q.m,re=Q.n,pe=8*ie;do{if(!ae){Q.f=ce=L(X,z,1);var Se=L(X,z+1,3);if(z+=3,!Se){var je=X[(Ye=((de=z)/8|0)+(7&de&&1)+4)-4]|X[Ye-3]<<8,ct=Ye+je;if(ct>ie){J&&R(0);break}j&&le(Z+je),q.set(X.subarray(Ye,ct),Z),Q.b=Z+=je,Q.p=z=8*ct;continue}if(Se==1)ae=A,fe=D,ve=9,re=5;else if(Se==2){var Je=L(X,z,31)+257,nt=L(X,z+10,15)+4,Mt=Je+L(X,z+5,31)+1;z+=14;for(var Ue=new e(Mt),Ve=new e(19),Oe=0;Oe<nt;++Oe)Ve[o[Oe]]=L(X,z+3*Oe,7);z+=3*nt;var it=N(Ve),ee=(1<<it)-1,ut=w(Ve,it);for(Oe=0;Oe<Mt;){var Ye,De=ut[L(X,z,ee)];if(z+=15&De,(Ye=De>>>4)<16)Ue[Oe++]=Ye;else{var We=0,K=0;for(Ye==16?(K=3+L(X,z,3),z+=2,We=Ue[Oe-1]):Ye==17?(K=3+L(X,z,7),z+=3):Ye==18&&(K=11+L(X,z,127),z+=7);K--;)Ue[Oe++]=We}}var V=Ue.subarray(0,Je),ue=Ue.subarray(Je);ve=N(V),re=N(ue),ae=w(V,ve),fe=w(ue,re)}else R(1);if(z>pe){J&&R(0);break}}j&&le(Z+131072);for(var Ie=(1<<ve)-1,Ce=(1<<re)-1,Ee=z;;Ee=z){var st=(We=ae[I(X,z)&Ie])>>>4;if((z+=15&We)>pe){J&&R(0);break}if(We||R(2),st<256)q[Z++]=st;else{if(st==256){Ee=z,ae=null;break}var at=st-254;if(st>264){var wt=i[Oe=st-257];at=L(X,z,(1<<wt)-1)+h[Oe],z+=wt}var Lt=fe[I(X,z)&Ce],Ge=Lt>>>4;if(Lt||R(3),z+=15&Lt,ue=g[Ge],Ge>3&&(wt=s[Ge],ue+=I(X,z)&(1<<wt)-1,z+=wt),z>pe){J&&R(0);break}j&&le(Z+131072);for(var Fe=Z+at;Z<Fe;Z+=4)q[Z]=q[Z-ue],q[Z+1]=q[Z+1-ue],q[Z+2]=q[Z+2-ue],q[Z+3]=q[Z+3-ue];Z=Fe}}Q.l=ae,Q.p=Ee,Q.b=Z,ae&&(ce=1,Q.m=ve,Q.d=fe,Q.n=re)}while(!ce);return Z==q.length?q:(function(tt,oe,Ae){(Ae==null||Ae>tt.length)&&(Ae=tt.length);var ht=new(tt instanceof t?t:tt instanceof n?n:e)(Ae-oe);return ht.set(tt.subarray(oe,Ae)),ht})(q,0,Z)},H=new e(0),Y=typeof TextDecoder<"u"&&new TextDecoder;try{Y.decode(H,{stream:!0})}catch{}return r.convert_streams=function(X){var q=new DataView(X),Q=0;function ie(){var Je=q.getUint16(Q);return Q+=2,Je}function j(){var Je=q.getUint32(Q);return Q+=4,Je}function J(Je){je.setUint16(ct,Je),ct+=2}function de(Je){je.setUint32(ct,Je),ct+=4}for(var le={signature:j(),flavor:j(),length:j(),numTables:ie(),reserved:ie(),totalSfntSize:j(),majorVersion:ie(),minorVersion:ie(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},ce=0;Math.pow(2,ce)<=le.numTables;)ce++;ce--;for(var z=16*Math.pow(2,ce),Z=16*le.numTables-z,ae=12,fe=[],ve=0;ve<le.numTables;ve++)fe.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),ae+=16;var re,pe=new Uint8Array(12+16*fe.length+fe.reduce((function(Je,nt){return Je+nt.origLength+4}),0)),Se=pe.buffer,je=new DataView(Se),ct=0;return de(le.flavor),J(le.numTables),J(z),J(ce),J(Z),fe.forEach((function(Je){de(Je.tag),de(Je.origChecksum),de(ae),de(Je.origLength),Je.outOffset=ae,(ae+=Je.origLength)%4!=0&&(ae+=4-ae%4)})),fe.forEach((function(Je){var nt,Mt=X.slice(Je.offset,Je.offset+Je.compLength);if(Je.compLength!=Je.origLength){var Ue=new Uint8Array(Je.origLength);nt=new Uint8Array(Mt,2),U(nt,Ue)}else Ue=new Uint8Array(Mt);pe.set(Ue,Je.outOffset);var Ve=0;(ae=Je.outOffset+Je.origLength)%4!=0&&(Ve=4-ae%4),pe.set(new Uint8Array(Ve).buffer,Je.outOffset+Je.origLength),re=ae+Ve})),Se.slice(0,re)},Object.defineProperty(r,"__esModule",{value:!0}),r})({}).convert_streams}function Pq(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,l=8,u=16,h=32;let m;function g(k){if(!m){const R={R:s,L:i,D:o,C:u,U:h,T:l};m=new Map;for(let U in n){let H=0;n[U].split(",").forEach(Y=>{let[X,q]=Y.split("+");X=parseInt(X,36),q=q?parseInt(q,36):0,m.set(H+=X,R[U]);for(let Q=q;Q--;)m.set(++H,R[U])})}}return m.get(k)||h}const v=1,_=2,b=3,w=4,S=[null,"isol","init","fina","medi"];function T(k){const R=new Uint8Array(k.length);let U=h,H=v,Y=-1;for(let X=0;X<k.length;X++){const q=k.codePointAt(X);let Q=g(q)|0,ie=v;Q&l||(U&(i|o|u)?Q&(s|o|u)?(ie=b,(H===v||H===b)&&R[Y]++):Q&(i|h)&&(H===_||H===w)&&R[Y]--:U&(s|h)&&(H===_||H===w)&&R[Y]--,H=R[X]=ie,U=Q,Y=X,q>65535&&X++)}return R}function A(k,R){const U=[];for(let Y=0;Y<R.length;Y++){const X=R.codePointAt(Y);X>65535&&Y++,U.push(r.U.codeToGlyph(k,X))}const H=k.GSUB;if(H){const{lookupList:Y,featureList:X}=H;let q;const Q=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ie=[];X.forEach(j=>{if(Q.test(j.tag))for(let J=0;J<j.tab.length;J++){if(ie[j.tab[J]])continue;ie[j.tab[J]]=!0;const de=Y[j.tab[J]],le=/^(isol|init|fina|medi)$/.test(j.tag);le&&!q&&(q=T(R));for(let ce=0;ce<U.length;ce++)(!q||!le||S[q[ce]]===j.tag)&&r.U._applySubs(U,ce,de,Y)}})}return U}function D(k,R){const U=new Int16Array(R.length*3);let H=0;for(;H<R.length;H++){const Q=R[H];if(Q===-1)continue;U[H*3+2]=k.hmtx.aWidth[Q];const ie=k.GPOS;if(ie){const j=ie.lookupList;for(let J=0;J<j.length;J++){const de=j[J];for(let le=0;le<de.tabs.length;le++){const ce=de.tabs[le];if(de.ltype===1){if(r._lctf.coverageIndex(ce.coverage,Q)!==-1&&ce.pos){q(ce.pos,H);break}}else if(de.ltype===2){let z=null,Z=Y();if(Z!==-1){const ae=r._lctf.coverageIndex(ce.coverage,R[Z]);if(ae!==-1){if(ce.fmt===1){const fe=ce.pairsets[ae];for(let ve=0;ve<fe.length;ve++)fe[ve].gid2===Q&&(z=fe[ve])}else if(ce.fmt===2){const fe=r.U._getGlyphClass(R[Z],ce.classDef1),ve=r.U._getGlyphClass(Q,ce.classDef2);z=ce.matrix[fe][ve]}if(z){z.val1&&q(z.val1,Z),z.val2&&q(z.val2,H);break}}}}else if(de.ltype===4){const z=r._lctf.coverageIndex(ce.markCoverage,Q);if(z!==-1){const Z=Y(X),ae=Z===-1?-1:r._lctf.coverageIndex(ce.baseCoverage,R[Z]);if(ae!==-1){const fe=ce.markArray[z],ve=ce.baseArray[ae][fe.markClass];U[H*3]=ve.x-fe.x+U[Z*3]-U[Z*3+2],U[H*3+1]=ve.y-fe.y+U[Z*3+1];break}}}else if(de.ltype===6){const z=r._lctf.coverageIndex(ce.mark1Coverage,Q);if(z!==-1){const Z=Y();if(Z!==-1){const ae=R[Z];if(N(k,ae)===3){const fe=r._lctf.coverageIndex(ce.mark2Coverage,ae);if(fe!==-1){const ve=ce.mark1Array[z],re=ce.mark2Array[fe][ve.markClass];U[H*3]=re.x-ve.x+U[Z*3]-U[Z*3+2],U[H*3+1]=re.y-ve.y+U[Z*3+1];break}}}}}}}}else if(k.kern&&!k.cff){const j=Y();if(j!==-1){const J=k.kern.glyph1.indexOf(R[j]);if(J!==-1){const de=k.kern.rval[J].glyph2.indexOf(Q);de!==-1&&(U[j*3+2]+=k.kern.rval[J].vals[de])}}}}return U;function Y(Q){for(let ie=H-1;ie>=0;ie--)if(R[ie]!==-1&&(!Q||Q(R[ie])))return ie;return-1}function X(Q){return N(k,Q)===1}function q(Q,ie){for(let j=0;j<3;j++)U[ie*3+j]+=Q[j]||0}}function N(k,R){const U=k.GDEF&&k.GDEF.glyphClassDef;return U?r.U._getGlyphClass(R,U):0}function L(...k){for(let R=0;R<k.length;R++)if(typeof k[R]=="number")return k[R]}function I(k){const R=Object.create(null),U=k["OS/2"],H=k.hhea,Y=k.head.unitsPerEm,X=L(U&&U.sTypoAscender,H&&H.ascender,Y),q={unitsPerEm:Y,ascender:X,descender:L(U&&U.sTypoDescender,H&&H.descender,0),capHeight:L(U&&U.sCapHeight,X),xHeight:L(U&&U.sxHeight,X),lineGap:L(U&&U.sTypoLineGap,H&&H.lineGap),supportsCodePoint(Q){return r.U.codeToGlyph(k,Q)>0},forEachGlyph(Q,ie,j,J){let de=0;const le=1/q.unitsPerEm*ie,ce=A(k,Q);let z=0;const Z=D(k,ce);return ce.forEach((ae,fe)=>{if(ae!==-1){let ve=R[ae];if(!ve){const{cmds:re,crds:pe}=r.U.glyphToPath(k,ae);let Se="",je=0;for(let Ue=0,Ve=re.length;Ue<Ve;Ue++){const Oe=t[re[Ue]];Se+=re[Ue];for(let it=1;it<=Oe;it++)Se+=(it>1?",":"")+pe[je++]}let ct,Je,nt,Mt;if(pe.length){ct=Je=1/0,nt=Mt=-1/0;for(let Ue=0,Ve=pe.length;Ue<Ve;Ue+=2){let Oe=pe[Ue],it=pe[Ue+1];Oe<ct&&(ct=Oe),it<Je&&(Je=it),Oe>nt&&(nt=Oe),it>Mt&&(Mt=it)}}else ct=nt=Je=Mt=0;ve=R[ae]={index:ae,advanceWidth:k.hmtx.aWidth[ae],xMin:ct,yMin:Je,xMax:nt,yMax:Mt,path:Se}}J.call(null,ve,de+Z[fe*3]*le,Z[fe*3+1]*le,z),de+=Z[fe*3+2]*le,j&&(de+=j*ie)}z+=Q.codePointAt(z)>65535?2:1}),de}};return q}return function(R){const U=new Uint8Array(R,0,4),H=r._bin.readASCII(U,0,4);if(H==="wOFF")R=e(R);else if(H==="wOF2")throw new Error("woff2 fonts not supported");return I(r.parse(R)[0])}}const Lq=zm({name:"Typr Font Parser",dependencies:[Dq,Nq,Pq],init(r,e,t){const n=r(),i=e();return t(n,i)}});function Uq(){return(function(r){var e=function(){this.buckets=new Map};e.prototype.add=function(D){var N=D>>5;this.buckets.set(N,(this.buckets.get(N)||0)|1<<(31&D))},e.prototype.has=function(D){var N=this.buckets.get(D>>5);return N!==void 0&&(N&1<<(31&D))!=0},e.prototype.serialize=function(){var D=[];return this.buckets.forEach((function(N,L){D.push((+L).toString(36)+":"+N.toString(36))})),D.join(",")},e.prototype.deserialize=function(D){var N=this;this.buckets.clear(),D.split(",").forEach((function(L){var I=L.split(":");N.buckets.set(parseInt(I[0],36),parseInt(I[1],36))}))};var t=Math.pow(2,8),n=t-1,i=~n;function s(D){var N=(function(I){return I&i})(D).toString(16),L=(function(I){return(I&i)+t-1})(D).toString(16);return"codepoint-index/plane"+(D>>16)+"/"+N+"-"+L+".json"}function o(D,N){var L=D&n,I=N.codePointAt(L/6|0);return((I=(I||48)-48)&1<<L%6)!=0}function l(D,N){var L;(L=D,L.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(I){return I.split("-").map((function(k){return parseInt(k.trim(),16)}))}))).forEach((function(I){var k=I[0],R=I[1];R===void 0&&(R=k),N(k,R)}))}function u(D,N){l(D,(function(L,I){for(var k=L;k<=I;k++)N(k)}))}var h={},m={},g=new WeakMap,v="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function _(D){var N=g.get(D);return N||(N=new e,u(D.ranges,(function(L){return N.add(L)})),g.set(D,N)),N}var b,w=new Map;function S(D,N,L){return D[N]?N:D[L]?L:(function(I){for(var k in I)return k})(D)}function T(D,N){var L=N;if(!D.includes(L)){L=1/0;for(var I=0;I<D.length;I++)Math.abs(D[I]-N)<Math.abs(L-N)&&(L=D[I])}return L}function A(D){return b||(b=new Set,u("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(N){b.add(N)}))),b.has(D)}return r.CodePointSet=e,r.clearCache=function(){h={},m={}},r.getFontsForString=function(D,N){N===void 0&&(N={});var L,I=N.lang;I===void 0&&(I=new RegExp("\\p{Script=Hangul}","u").test(L=D)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(L)?"ja":"en");var k=N.category;k===void 0&&(k="sans-serif");var R=N.style;R===void 0&&(R="normal");var U=N.weight;U===void 0&&(U=400);var H=(N.dataUrl||v).replace(/\/$/g,""),Y=new Map,X=new Uint8Array(D.length),q={},Q={},ie=new Array(D.length),j=new Map,J=!1;function de(z){var Z=w.get(z);return Z||(Z=fetch(H+"/"+z).then((function(ae){if(!ae.ok)throw new Error(ae.statusText);return ae.json().then((function(fe){if(!Array.isArray(fe)||fe[0]!==1)throw new Error("Incorrect schema version; need 1, got "+fe[0]);return fe[1]}))})).catch((function(ae){if(H!==v)return J||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+H+'", trying default CDN. '+ae.message),J=!0),H=v,w.delete(z),de(z);throw ae})),w.set(z,Z)),Z}for(var le=function(z){var Z=D.codePointAt(z),ae=s(Z);ie[z]=ae,h[ae]||j.has(ae)||j.set(ae,de(ae).then((function(fe){h[ae]=fe}))),Z>65535&&(z++,ce=z)},ce=0;ce<D.length;ce++)le(ce);return Promise.all(j.values()).then((function(){j.clear();for(var z=function(ae){var fe=D.codePointAt(ae),ve=null,re=h[ie[ae]],pe=void 0;for(var Se in re){var je=Q[Se];if(je===void 0&&(je=Q[Se]=new RegExp(Se).test(I||"en")),je){for(var ct in pe=Se,re[Se])if(o(fe,re[Se][ct])){ve=ct;break}break}}if(!ve){e:for(var Je in re)if(Je!==pe){for(var nt in re[Je])if(o(fe,re[Je][nt])){ve=nt;break e}}}ve||(console.debug("No font coverage for U+"+fe.toString(16)),ve="latin"),ie[ae]=ve,m[ve]||j.has(ve)||j.set(ve,de("font-meta/"+ve+".json").then((function(Mt){m[ve]=Mt}))),fe>65535&&(ae++,Z=ae)},Z=0;Z<D.length;Z++)z(Z);return Promise.all(j.values())})).then((function(){for(var z,Z=null,ae=0;ae<D.length;ae++){var fe=D.codePointAt(ae);if(Z&&(A(fe)||_(Z).has(fe)))X[ae]=X[ae-1];else{Z=m[ie[ae]];var ve=q[Z.id];if(!ve){var re=Z.typeforms,pe=S(re,k,"sans-serif"),Se=S(re[pe],R,"normal"),je=T((z=re[pe])===null||z===void 0?void 0:z[Se],U);ve=q[Z.id]=H+"/font-files/"+Z.id+"/"+pe+"."+Se+"."+je+".woff"}var ct=Y.get(ve);ct==null&&(ct=Y.size,Y.set(ve,ct)),X[ae]=ct}fe>65535&&(ae++,X[ae]=X[ae-1])}return{fontUrls:Array.from(Y.keys()),chars:X}}))},Object.defineProperty(r,"__esModule",{value:!0}),r})({})}function Iq(r,e){const t=Object.create(null),n=Object.create(null);function i(o,l){const u=h=>{console.error(`Failure loading font ${o}`,h)};try{const h=new XMLHttpRequest;h.open("get",o,!0),h.responseType="arraybuffer",h.onload=function(){if(h.status>=400)u(new Error(h.statusText));else if(h.status>0)try{const m=r(h.response);m.src=o,l(m)}catch(m){u(m)}},h.onerror=u,h.send()}catch(h){u(h)}}function s(o,l){let u=t[o];u?l(u):n[o]?n[o].push(l):(n[o]=[l],i(o,h=>{h.src=o,t[o]=h,n[o].forEach(m=>m(h)),delete n[o]}))}return function(o,l,{lang:u,fonts:h=[],style:m="normal",weight:g="normal",unicodeFontsURL:v}={}){const _=new Uint8Array(o.length),b=[];o.length||A();const w=new Map,S=[];if(m!=="italic"&&(m="normal"),typeof g!="number"&&(g=g==="bold"?700:400),h&&!Array.isArray(h)&&(h=[h]),h=h.slice().filter(N=>!N.lang||N.lang.test(u)).reverse(),h.length){let k=0;(function R(U=0){for(let H=U,Y=o.length;H<Y;H++){const X=o.codePointAt(H);if(k===1&&b[_[H-1]].supportsCodePoint(X)||H>0&&/\s/.test(o[H]))_[H]=_[H-1],k===2&&(S[S.length-1][1]=H);else for(let q=_[H],Q=h.length;q<=Q;q++)if(q===Q){const ie=k===2?S[S.length-1]:S[S.length]=[H,H];ie[1]=H,k=2}else{_[H]=q;const{src:ie,unicodeRange:j}=h[q];if(!j||D(X,j)){const J=t[ie];if(!J){s(ie,()=>{R(H)});return}if(J.supportsCodePoint(X)){let de=w.get(J);typeof de!="number"&&(de=b.length,b.push(J),w.set(J,de)),_[H]=de,k=1;break}}}X>65535&&H+1<Y&&(_[H+1]=_[H],H++,k===2&&(S[S.length-1][1]=H))}T()})()}else S.push([0,o.length-1]),T();function T(){if(S.length){const N=S.map(L=>o.substring(L[0],L[1]+1)).join(`
`);e.getFontsForString(N,{lang:u||void 0,style:m,weight:g,dataUrl:v}).then(({fontUrls:L,chars:I})=>{const k=b.length;let R=0;S.forEach(H=>{for(let Y=0,X=H[1]-H[0];Y<=X;Y++)_[H[0]+Y]=I[R++]+k;R++});let U=0;L.forEach((H,Y)=>{s(H,X=>{b[Y+k]=X,++U===L.length&&A()})})})}else A()}function A(){l({chars:_,fonts:b})}function D(N,L){for(let I=0;I<L.length;I++){const[k,R=k]=L[I];if(k<=N&&N<=R)return!0}return!1}}}const Oq=zm({name:"FontResolver",dependencies:[Iq,Lq,Uq],init(r,e,t){return r(e,t())}});function Fq(r,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",s=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:b,lang:w,fonts:S,style:T,weight:A,preResolvedFonts:D,unicodeFontsURL:N},L){const I=({chars:k,fonts:R})=>{let U,H;const Y=[];for(let X=0;X<k.length;X++)k[X]!==H?(H=k[X],Y.push(U={start:X,end:X,fontObj:R[k[X]]})):U.end=X;L(Y)};D?I(D):r(b,I,{lang:w,fonts:S,style:T,weight:A,unicodeFontsURL:N})}function l({text:b="",font:w,lang:S,sdfGlyphSize:T=64,fontSize:A=400,fontWeight:D=1,fontStyle:N="normal",letterSpacing:L=0,lineHeight:I="normal",maxWidth:k=1/0,direction:R,textAlign:U="left",textIndent:H=0,whiteSpace:Y="normal",overflowWrap:X="normal",anchorX:q=0,anchorY:Q=0,metricsOnly:ie=!1,unicodeFontsURL:j,preResolvedFonts:J=null,includeCaretPositions:de=!1,chunkedBoundsSize:le=8192,colorRanges:ce=null},z){const Z=g(),ae={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,L=+L,k=+k,I=I||"normal",H=+H,o({text:b,lang:S,style:N,weight:D,fonts:typeof w=="string"?[{src:w}]:w,unicodeFontsURL:j,preResolvedFonts:J},fe=>{ae.fontLoad=g()-Z;const ve=isFinite(k);let re=null,pe=null,Se=null,je=null,ct=null,Je=null,nt=null,Mt=null,Ue=0,Ve=0,Oe=Y!=="nowrap";const it=new Map,ee=g();let ut=H,Ye=0,De=new v;const We=[De];fe.forEach(Ce=>{const{fontObj:Ee}=Ce,{ascender:st,descender:at,unitsPerEm:wt,lineGap:Lt,capHeight:Ge,xHeight:Fe}=Ee;let tt=it.get(Ee);if(!tt){const _e=A/wt,$e=I==="normal"?(st-at+Lt)*_e:I*A,Rt=($e-(st-at)*_e)/2,rt=Math.min($e,(st-at)*_e),Ne=(st+at)/2*_e+rt/2;tt={index:it.size,src:Ee.src,fontObj:Ee,fontSizeMult:_e,unitsPerEm:wt,ascender:st*_e,descender:at*_e,capHeight:Ge*_e,xHeight:Fe*_e,lineHeight:$e,baseline:-Rt-st*_e,caretTop:Ne,caretBottom:Ne-rt},it.set(Ee,tt)}const{fontSizeMult:oe}=tt,Ae=b.slice(Ce.start,Ce.end+1);let ht,he;Ee.forEachGlyph(Ae,A,L,(_e,$e,Rt,rt)=>{$e+=Ye,rt+=Ce.start,ht=$e,he=_e;const Ne=b.charAt(rt),bt=_e.advanceWidth*oe,Ot=De.count;let It;if("isEmpty"in _e||(_e.isWhitespace=!!Ne&&new RegExp(i).test(Ne),_e.canBreakAfter=!!Ne&&s.test(Ne),_e.isEmpty=_e.xMin===_e.xMax||_e.yMin===_e.yMax||n.test(Ne)),!_e.isWhitespace&&!_e.isEmpty&&Ve++,Oe&&ve&&!_e.isWhitespace&&$e+bt+ut>k&&Ot){if(De.glyphAt(Ot-1).glyphObj.canBreakAfter)It=new v,ut=-$e;else for(let Sn=Ot;Sn--;)if(Sn===0&&X==="break-word"){It=new v,ut=-$e;break}else if(De.glyphAt(Sn).glyphObj.canBreakAfter){It=De.splitAt(Sn+1);const Dn=It.glyphAt(0).x;ut-=Dn;for(let Qn=It.count;Qn--;)It.glyphAt(Qn).x-=Dn;break}It&&(De.isSoftWrapped=!0,De=It,We.push(De),Ue=k)}let Ht=De.glyphAt(De.count);Ht.glyphObj=_e,Ht.x=$e+ut,Ht.y=Rt,Ht.width=bt,Ht.charIndex=rt,Ht.fontData=tt,Ne===`
`&&(De=new v,We.push(De),ut=-($e+bt+L*A)+H)}),Ye=ht+he.advanceWidth*oe+L*A});let K=0;We.forEach(Ce=>{let Ee=!0;for(let st=Ce.count;st--;){const at=Ce.glyphAt(st);Ee&&!at.glyphObj.isWhitespace&&(Ce.width=at.x+at.width,Ce.width>Ue&&(Ue=Ce.width),Ee=!1);let{lineHeight:wt,capHeight:Lt,xHeight:Ge,baseline:Fe}=at.fontData;wt>Ce.lineHeight&&(Ce.lineHeight=wt);const tt=Fe-Ce.baseline;tt<0&&(Ce.baseline+=tt,Ce.cap+=tt,Ce.ex+=tt),Ce.cap=Math.max(Ce.cap,Ce.baseline+Lt),Ce.ex=Math.max(Ce.ex,Ce.baseline+Ge)}Ce.baseline-=K,Ce.cap-=K,Ce.ex-=K,K+=Ce.lineHeight});let V=0,ue=0;if(q&&(typeof q=="number"?V=-q:typeof q=="string"&&(V=-Ue*(q==="left"?0:q==="center"?.5:q==="right"?1:h(q)))),Q&&(typeof Q=="number"?ue=-Q:typeof Q=="string"&&(ue=Q==="top"?0:Q==="top-baseline"?-We[0].baseline:Q==="top-cap"?-We[0].cap:Q==="top-ex"?-We[0].ex:Q==="middle"?K/2:Q==="bottom"?K:Q==="bottom-baseline"?-We[We.length-1].baseline:h(Q)*K)),!ie){const Ce=e.getEmbeddingLevels(b,R);re=new Uint16Array(Ve),pe=new Uint8Array(Ve),Se=new Float32Array(Ve*2),je={},nt=[1/0,1/0,-1/0,-1/0],Mt=[],de&&(Je=new Float32Array(b.length*4)),ce&&(ct=new Uint8Array(Ve*3));let Ee=0,st=-1,at=-1,wt,Lt;if(We.forEach((Ge,Fe)=>{let{count:tt,width:oe}=Ge;if(tt>0){let Ae=0;for(let rt=tt;rt--&&Ge.glyphAt(rt).glyphObj.isWhitespace;)Ae++;let ht=0,he=0;if(U==="center")ht=(Ue-oe)/2;else if(U==="right")ht=Ue-oe;else if(U==="justify"&&Ge.isSoftWrapped){let rt=0;for(let Ne=tt-Ae;Ne--;)Ge.glyphAt(Ne).glyphObj.isWhitespace&&rt++;he=(Ue-oe)/rt}if(he||ht){let rt=0;for(let Ne=0;Ne<tt;Ne++){let bt=Ge.glyphAt(Ne);const Ot=bt.glyphObj;bt.x+=ht+rt,he!==0&&Ot.isWhitespace&&Ne<tt-Ae&&(rt+=he,bt.width+=he)}}const _e=e.getReorderSegments(b,Ce,Ge.glyphAt(0).charIndex,Ge.glyphAt(Ge.count-1).charIndex);for(let rt=0;rt<_e.length;rt++){const[Ne,bt]=_e[rt];let Ot=1/0,It=-1/0;for(let Ht=0;Ht<tt;Ht++)if(Ge.glyphAt(Ht).charIndex>=Ne){let Sn=Ht,Dn=Ht;for(;Dn<tt;Dn++){let Qn=Ge.glyphAt(Dn);if(Qn.charIndex>bt)break;Dn<tt-Ae&&(Ot=Math.min(Ot,Qn.x),It=Math.max(It,Qn.x+Qn.width))}for(let Qn=Sn;Qn<Dn;Qn++){const Li=Ge.glyphAt(Qn);Li.x=It-(Li.x+Li.width-Ot)}break}}let $e;const Rt=rt=>$e=rt;for(let rt=0;rt<tt;rt++){const Ne=Ge.glyphAt(rt);$e=Ne.glyphObj;const bt=$e.index,Ot=Ce.levels[Ne.charIndex]&1;if(Ot){const It=e.getMirroredCharacter(b[Ne.charIndex]);It&&Ne.fontData.fontObj.forEachGlyph(It,0,0,Rt)}if(de){const{charIndex:It,fontData:Ht}=Ne,Sn=Ne.x+V,Dn=Ne.x+Ne.width+V;Je[It*4]=Ot?Dn:Sn,Je[It*4+1]=Ot?Sn:Dn,Je[It*4+2]=Ge.baseline+Ht.caretBottom+ue,Je[It*4+3]=Ge.baseline+Ht.caretTop+ue;const Qn=It-st;Qn>1&&m(Je,st,Qn),st=It}if(ce){const{charIndex:It}=Ne;for(;It>at;)at++,ce.hasOwnProperty(at)&&(Lt=ce[at])}if(!$e.isWhitespace&&!$e.isEmpty){const It=Ee++,{fontSizeMult:Ht,src:Sn,index:Dn}=Ne.fontData,Qn=je[Sn]||(je[Sn]={});Qn[bt]||(Qn[bt]={path:$e.path,pathBounds:[$e.xMin,$e.yMin,$e.xMax,$e.yMax]});const Li=Ne.x+V,xr=Ne.y+Ge.baseline+ue;Se[It*2]=Li,Se[It*2+1]=xr;const Zi=Li+$e.xMin*Ht,Ti=xr+$e.yMin*Ht,pi=Li+$e.xMax*Ht,Qt=xr+$e.yMax*Ht;Zi<nt[0]&&(nt[0]=Zi),Ti<nt[1]&&(nt[1]=Ti),pi>nt[2]&&(nt[2]=pi),Qt>nt[3]&&(nt[3]=Qt),It%le===0&&(wt={start:It,end:It,rect:[1/0,1/0,-1/0,-1/0]},Mt.push(wt)),wt.end++;const Jn=wt.rect;if(Zi<Jn[0]&&(Jn[0]=Zi),Ti<Jn[1]&&(Jn[1]=Ti),pi>Jn[2]&&(Jn[2]=pi),Qt>Jn[3]&&(Jn[3]=Qt),re[It]=bt,pe[It]=Dn,ce){const Xn=It*3;ct[Xn]=Lt>>16&255,ct[Xn+1]=Lt>>8&255,ct[Xn+2]=Lt&255}}}}}),Je){const Ge=b.length-st;Ge>1&&m(Je,st,Ge)}}const Ie=[];it.forEach(({index:Ce,src:Ee,unitsPerEm:st,ascender:at,descender:wt,lineHeight:Lt,capHeight:Ge,xHeight:Fe})=>{Ie[Ce]={src:Ee,unitsPerEm:st,ascender:at,descender:wt,lineHeight:Lt,capHeight:Ge,xHeight:Fe}}),ae.typesetting=g()-ee,z({glyphIds:re,glyphFontIndices:pe,glyphPositions:Se,glyphData:je,fontData:Ie,caretPositions:Je,glyphColors:ct,chunkedBounds:Mt,fontSize:A,topBaseline:ue+We[0].baseline,blockBounds:[V,ue-K,V+Ue,ue],visibleBounds:nt,timings:ae})})}function u(b,w){l({...b,metricsOnly:!0},S=>{const[T,A,D,N]=S.blockBounds;w({width:D-T,height:N-A})})}function h(b){let w=b.match(/^([\d.]+)%$/),S=w?parseFloat(w[1]):NaN;return isNaN(S)?0:S/100}function m(b,w,S){const T=b[w*4],A=b[w*4+1],D=b[w*4+2],N=b[w*4+3],L=(A-T)/S;for(let I=0;I<S;I++){const k=(w+I)*4;b[k]=T+L*I,b[k+1]=T+L*(I+1),b[k+2]=D,b[k+3]=N}}function g(){return(self.performance||Date).now()}function v(){this.data=[]}const _=["glyphObj","x","y","width","charIndex","fontData"];return v.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/_.length)},glyphAt(b){let w=v.flyweight;return w.data=this.data,w.index=b,w},splitAt(b){let w=new v;return w.data=this.data.splice(b*_.length),w}},v.flyweight=_.reduce((b,w,S,T)=>(Object.defineProperty(b,w,{get(){return this.data[this.index*_.length+S]},set(A){this.data[this.index*_.length+S]=A}}),b),{data:null,index:0}),{typeset:l,measure:u}}const fd=()=>(self.performance||Date).now(),nS=jO();let _N;function kq(r,e,t,n,i,s,o,l,u,h,m=!0){return m?zq(r,e,t,n,i,s,o,l,u,h).then(null,g=>(_N||(console.warn("WebGL SDF generation failed, falling back to JS",g),_N=!0),SN(r,e,t,n,i,s,o,l,u,h))):SN(r,e,t,n,i,s,o,l,u,h)}const Y_=[],Bq=5;let Ow=0;function XO(){const r=fd();for(;Y_.length&&fd()-r<Bq;)Y_.shift()();Ow=Y_.length?setTimeout(XO,0):0}const zq=(...r)=>new Promise((e,t)=>{Y_.push(()=>{const n=fd();try{nS.webgl.generateIntoCanvas(...r),e({timing:fd()-n})}catch(i){t(i)}}),Ow||(Ow=setTimeout(XO,0))}),Vq=4,Gq=2e3,bN={};let Hq=0;function SN(r,e,t,n,i,s,o,l,u,h){const m="TroikaTextSDFGenerator_JS_"+Hq++%Vq;let g=bN[m];return g||(g=bN[m]={workerModule:zm({name:m,workerId:m,dependencies:[jO,fd],init(v,_){const b=v().javascript.generate;return function(...w){const S=_();return{textureData:b(...w),timing:_()-S}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(r,e,t,n,i,s).then(({textureData:v,timing:_})=>{const b=fd(),w=new Uint8Array(v.length*4);for(let S=0;S<v.length;S++)w[S*4+h]=v[S];return nS.webglUtils.renderImageData(o,w,l,u,r,e,1<<3-h),_+=fd()-b,--g.requests===0&&(g.idleTimer=setTimeout(()=>{_q(m)},Gq)),{timing:_}})}function jq(r){r._warm||(nS.webgl.isSupported(r),r._warm=!0)}const Wq=nS.webglUtils.resizeWebGLCanvasWithoutClearing,N0={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Xq=new Vt;function Kp(){return(self.performance||Date).now()}const MN=Object.create(null);function YO(r,e){r=Zq({},r);const t=Kp(),n=[];if(r.font&&n.push({label:"user",src:Kq(r.font)}),r.font=n,r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||N0.sdfGlyphSize,r.unicodeFontsURL=r.unicodeFontsURL||N0.unicodeFontsURL,r.colorRanges!=null){let v={};for(let _ in r.colorRanges)if(r.colorRanges.hasOwnProperty(_)){let b=r.colorRanges[_];typeof b!="number"&&(b=Xq.set(b).getHex()),v[_]=b}r.colorRanges=v}Object.freeze(r);const{textureWidth:i,sdfExponent:s}=N0,{sdfGlyphSize:o}=r,l=i/o*4;let u=MN[o];if(!u){const v=document.createElement("canvas");v.width=i,v.height=o*256/l,u=MN[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:v,sdfTexture:new di(v,void 0,void 0,void 0,Gn,Gn),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,Yq(u)}const{sdfTexture:h,sdfCanvas:m}=u;KO(r).then(v=>{const{glyphIds:_,glyphFontIndices:b,fontData:w,glyphPositions:S,fontSize:T,timings:A}=v,D=[],N=new Float32Array(_.length*4);let L=0,I=0;const k=Kp(),R=w.map(q=>{let Q=u.glyphsByFont.get(q.src);return Q||u.glyphsByFont.set(q.src,Q=new Map),Q});_.forEach((q,Q)=>{const ie=b[Q],{src:j,unitsPerEm:J}=w[ie];let de=R[ie].get(q);if(!de){const{path:ae,pathBounds:fe}=v.glyphData[j][q],ve=Math.max(fe[2]-fe[0],fe[3]-fe[1])/o*(N0.sdfMargin*o+.5),re=u.glyphCount++,pe=[fe[0]-ve,fe[1]-ve,fe[2]+ve,fe[3]+ve];R[ie].set(q,de={path:ae,atlasIndex:re,sdfViewBox:pe}),D.push(de)}const{sdfViewBox:le}=de,ce=S[I++],z=S[I++],Z=T/J;N[L++]=ce+le[0]*Z,N[L++]=z+le[1]*Z,N[L++]=ce+le[2]*Z,N[L++]=z+le[3]*Z,_[Q]=de.atlasIndex}),A.quads=(A.quads||0)+(Kp()-k);const U=Kp();A.sdf={};const H=m.height,Y=Math.ceil(u.glyphCount/l),X=Math.pow(2,Math.ceil(Math.log2(Y*o)));X>H&&(console.info(`Increasing SDF texture size ${H}->${X}`),Wq(m,i,X),h.dispose()),Promise.all(D.map(q=>qO(q,u,r.gpuAccelerateSDF).then(({timing:Q})=>{A.sdf[q.atlasIndex]=Q}))).then(()=>{D.length&&!u.contextLost&&(ZO(u),h.needsUpdate=!0),A.sdfTotal=Kp()-U,A.total=Kp()-t,e(Object.freeze({parameters:r,sdfTexture:h,sdfGlyphSize:o,sdfExponent:s,glyphBounds:N,glyphAtlasIndices:_,glyphColors:v.glyphColors,caretPositions:v.caretPositions,chunkedBounds:v.chunkedBounds,ascender:v.ascender,descender:v.descender,lineHeight:v.lineHeight,capHeight:v.capHeight,xHeight:v.xHeight,topBaseline:v.topBaseline,blockBounds:v.blockBounds,visibleBounds:v.visibleBounds,timings:v.timings}))})}),Promise.resolve().then(()=>{u.contextLost||jq(m)})}function qO({path:r,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:u}=N0,h=Math.max(t[2]-t[0],t[3]-t[1]),m=Math.floor(e/4),g=m%(l/n)*n,v=Math.floor(m/(l/n))*n,_=e%4;return kq(n,n,r,t,h,u,i,g,v,_,o)}function Yq(r){const e=r.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),r.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),r.contextLost=!1;const n=[];r.glyphsByFont.forEach(i=>{i.forEach(s=>{n.push(qO(s,r,!0))})}),Promise.all(n).then(()=>{ZO(r),r.sdfTexture.needsUpdate=!0})})}function qq({font:r,characters:e,sdfGlyphSize:t},n){let i=Array.isArray(e)?e.join(`
`):""+e;YO({font:r,sdfGlyphSize:t,text:i},n)}function Zq(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}let C_;function Kq(r){return C_||(C_=typeof document>"u"?{}:document.createElement("a")),C_.href=r,C_.href}function ZO(r){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=r,{width:n,height:i}=e,s=r.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*i*4)&&(o=new Uint8Array(n*i*4),t.image={width:n,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,n,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const Qq=zm({name:"Typesetter",dependencies:[Fq,Oq,Sq],init(r,e,t){return r(e,t())}}),KO=zm({name:"Typesetter",dependencies:[Qq],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[];for(let t in r)r[t]&&r[t].buffer&&e.push(r[t].buffer);return e}});KO.onMainThread;const TN={};function Jq(r){let e=TN[r];return e||(e=TN[r]=new Rl(1,1,r,r).translate(.5,.5,0)),e}const $q="aTroikaGlyphBounds",wN="aTroikaGlyphIndex",eZ="aTroikaGlyphColor";class tZ extends vA{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new rs,this.boundingBox=new is}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Jq(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,i,s){this.updateAttributeData($q,e,4),this.updateAttributeData(wN,t,1),this.updateAttributeData(eZ,s,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:i,floor:s,min:o,max:l,sin:u,cos:h}=Math,m=i/2,g=i*2,v=Math.abs(t),_=e[0]/v,b=e[2]/v,w=s((_+m)/g)!==s((b+m)/g)?-v:o(u(_)*v,u(b)*v),S=s((_-m)/g)!==s((b-m)/g)?v:l(u(_)*v,u(b)*v),T=s((_+i)/g)!==s((b+i)/g)?v*2:l(v-h(_)*v,v-h(b)*v);n.min.set(w,e[1],t<0?-T:0),n.max.set(S,e[3],t<0?0:T)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(wN).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){t=n[i].end;let s=n[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const i=this.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(this.setAttribute(e,new vd(t,n)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const nZ=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,iZ=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,rZ=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,sZ=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function aZ(r){const e=Iw(r,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ft},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new hi(0,0,0,0)},uTroikaClipRect:{value:new hi(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ft},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Vt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new xn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:nZ,vertexTransform:iZ,fragmentDefs:rZ,fragmentColorTransform:sZ,customRewriter({vertexShader:t,fragmentShader:n}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(WO,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const NA=new Ac({color:16777215,side:Go,transparent:!0}),EN=8421504,AN=new fn,R_=new se,gT=new se,M0=[],oZ=new se,vT="+x+y";function CN(r){return Array.isArray(r)?r[0]:r}let QO=()=>{const r=new Pi(new Rl(1,1),NA);return QO=()=>r,r},JO=()=>{const r=new Pi(new Rl(1,1,32,1),NA);return JO=()=>r,r};const lZ={type:"syncstart"},cZ={type:"synccomplete"},$O=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],uZ=$O.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let e4=class extends Pi{constructor(){const e=new tZ;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=EN,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=vT,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(lZ),YO({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(i=>i&&i())})),this.dispatchEvent(cZ),e&&e()})))}onBeforeRender(e,t,n,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return aZ(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=NA.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return CN(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return CN(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:l,blockBounds:u}=i;n.uTroikaSDFTexture.value=l,n.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(u),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let h=0,m=0,g=0,v,_,b,w=0,S=0;if(t){let{outlineWidth:A,outlineOffsetX:D,outlineOffsetY:N,outlineBlur:L,outlineOpacity:I}=this;h=this._parsePercent(A)||0,m=Math.max(0,this._parsePercent(L)||0),v=I,w=this._parsePercent(D)||0,S=this._parsePercent(N)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(b=this.strokeColor,n.uTroikaStrokeColor.value.set(b??EN),_=this.strokeOpacity,_==null&&(_=1)),v=this.fillOpacity;n.uTroikaEdgeOffset.value=h,n.uTroikaPositionOffset.value.set(w,S),n.uTroikaBlurRadius.value=m,n.uTroikaStrokeWidth.value=g,n.uTroikaStrokeOpacity.value=_,n.uTroikaFillOpacity.value=v??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let T=this.clipRect;if(T&&Array.isArray(T)&&T.length===4)n.uTroikaClipRect.value.fromArray(T);else{const A=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(u[0]-A,u[1]-A,u[2]+A,u[3]+A)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new Vt;(s!==l._input||typeof s=="object")&&l.set(l._input=s)}let o=this.orientation||vT;if(o!==e._orientation){let l=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let u=o!==vT&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,h,m,g,v]=u;R_.set(0,0,0)[m]=h==="-"?1:-1,gT.set(0,0,0)[v]=g==="-"?-1:1,AN.lookAt(oZ,R_.cross(gT),gT),l.setFromMatrix4(AN)}else l.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new ft){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new ft){return R_.copy(e),this.localPositionToTextCoords(this.worldToLocal(R_),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:i}=this;if(n){const s=n.blockBounds,o=i?JO():QO(),l=o.geometry,{position:u,uv:h}=l.attributes;for(let m=0;m<h.count;m++){let g=s[0]+h.getX(m)*(s[2]-s[0]);const v=s[1]+h.getY(m)*(s[3]-s[1]);let _=0;i&&(_=i-Math.cos(g/i)*i,g=Math.sin(g/i)*i),u.setXYZ(m,g,v,_)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,M0.length=0,o.raycast(e,M0);for(let m=0;m<M0.length;m++)M0[m].object=this,t.push(M0[m])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,uZ.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};$O.forEach(r=>{const e="_private_"+r;Object.defineProperty(e4.prototype,r,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new is;new Vt;const RN=Re.forwardRef(({sdfGlyphSize:r=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:i=1,children:s,characters:o,onSync:l,...u},h)=>{const m=Ia(({invalidate:b})=>b),[g]=Re.useState(()=>new e4),[v,_]=Re.useMemo(()=>{const b=[];let w="";return Re.Children.forEach(s,S=>{typeof S=="string"||typeof S=="number"?w+=S:b.push(S)}),[b,w]},[s]);return vO(()=>new Promise(b=>qq({font:n,characters:o},b)),["troika-text",n,o]),Re.useLayoutEffect(()=>{g.sync(()=>{m(),l&&l(g)})}),Re.useEffect(()=>()=>g.dispose(),[g]),Re.createElement("primitive",Av({object:g,ref:h,font:n,text:_,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:r},u),v)}),fZ=Re.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:u,...h},m)=>{const g=Ia(I=>I.invalidate),v=Ia(I=>I.camera),_=Ia(I=>I.gl),b=Ia(I=>I.events),w=Ia(I=>I.setEvents),S=Ia(I=>I.set),T=Ia(I=>I.get),A=Ia(I=>I.performance),D=e||v,N=n||b.connected||_.domElement,L=Re.useMemo(()=>new dq(D),[D]);return eS(()=>{L.enabled&&L.update()},-1),Re.useEffect(()=>(s&&L.connect(s===!0?N:s),L.connect(N),()=>{L.dispose()}),[s,N,t,L,g]),Re.useEffect(()=>{const I=U=>{g(),t&&A.regress(),o&&o(U)},k=U=>{l&&l(U)},R=U=>{u&&u(U)};return L.addEventListener("change",I),L.addEventListener("start",k),L.addEventListener("end",R),()=>{L.removeEventListener("start",k),L.removeEventListener("end",R),L.removeEventListener("change",I)}},[o,l,u,L,g,w]),Re.useEffect(()=>{if(r){const I=T().controls;return S({controls:L}),()=>S({controls:I})}},[r,L]),Re.createElement("primitive",Av({ref:m,object:L,enableDamping:i},h))}),t4=(r,e,t)=>{let n;switch(r){case ns:n=new Uint8ClampedArray(e*t*4);break;case yr:n=new Uint16Array(e*t*4);break;case lo:n=new Uint32Array(e*t*4);break;case vb:n=new Int8Array(e*t*4);break;case yb:n=new Int16Array(e*t*4);break;case kv:n=new Int32Array(e*t*4);break;case qi:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let D_;const hZ=(r,e,t,n)=>{if(D_!==void 0)return D_;const i=new la(1,1,n);e.setRenderTarget(i);const s=new Pi(new Rl,new Ac({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=t4(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),D_=o[0]!==0,D_};class PA{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Rr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:Gn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:Gn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:vr,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:vr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=PA.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Vv,this._camera=new Sc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!hZ(this._type,this._renderer,this._camera,t)){let n;this._type===yr&&(n=this._renderer.extensions.has("EXT_color_buffer_float")?qi:void 0),n!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${qi}`),this._type=n):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Pi(new Rl,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new la(this.width,this.height,t),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:Uf}static instantiateRenderer(){const e=new TA;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=t4(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Zo(this.toArray(),this.width,this.height,Rr,this._type,e?.mapping||Uf,e?.wrapS||vr,e?.wrapT||vr,e?.magFilter||Gn,e?.minFilter||Gn,e?.anisotropy||1,Al);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ca&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof di&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof di&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class n4 extends Error{}class i4 extends Error{}const T0=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},dZ=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=T0(i,"hdrgm:GainMapMin","0"),o=T0(i,"hdrgm:GainMapMax"),l=T0(i,"hdrgm:Gamma","1"),u=T0(i,"hdrgm:OffsetSDR","0.015625"),h=T0(i,"hdrgm:OffsetHDR","0.015625"),m=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),g=m?m[1]:"0",v=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!v)throw new Error("Incomplete gainmap metadata");const _=v[1];return{gainMapMin:Array.isArray(s)?s.map(b=>parseFloat(b)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(b=>parseFloat(b)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(l)?l.map(b=>parseFloat(b)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(u)?u.map(b=>parseFloat(b)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetHdr:Array.isArray(h)?h.map(b=>parseFloat(b)):[parseFloat(h),parseFloat(h),parseFloat(h)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(_)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class pZ{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=s.byteLength;let l=2,u=0,h;for(;l<o;){if(++u>250){n(new Error(`Found no marker after ${u} loops `));return}if(s.getUint8(l)!==255){n(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${s.getUint8(l).toString(16)}`));return}if(h=s.getUint8(l+1),i&&console.log(`Marker: ${h.toString(16)}`),h===226){i&&console.log("Found APP2 marker (0xffe2)");const m=l+4;if(s.getUint32(m)===1297106432){const g=m+4;let v;if(s.getUint16(g)===18761)v=!1;else if(s.getUint16(g)===19789)v=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(g+2,!v)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const _=s.getUint32(g+4,!v);if(_<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const b=g+_,w=s.getUint16(b,!v),S=b+2;let T=0;for(let L=S;L<S+12*w;L+=12)s.getUint16(L,!v)===45057&&(T=s.getUint32(L+8,!v));const D=b+2+w*12+4,N=[];for(let L=D;L<D+T*16;L+=16){const I={MPType:s.getUint32(L,!v),size:s.getUint32(L+4,!v),dataOffset:s.getUint32(L+8,!v),dependantImages:s.getUint32(L+12,!v),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=g+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,N.push(I)}if(this.options.extractNonFII&&N.length){const L=new Blob([s]),I=[];for(const k of N){if(k.isFII&&!this.options.extractFII)continue;const R=L.slice(k.start,k.end+1,"image/jpeg");I.push(R)}t(I)}}}l+=2+s.getUint16(l+2)}})}}const mZ=async r=>{const e=dZ(r);if(!e)throw new i4("Gain map XMP metadata not found");const n=await new pZ({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new n4("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},DN=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class gZ extends fa{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,t){super(t),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new qb}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new di,sdr:new di});return this._config.createQuadRenderer({width:16,height:16,type:yr,colorSpace:Al,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,n){const i=t?new Blob([t],{type:"image/jpeg"}):void 0,s=new Blob([e],{type:"image/jpeg"});let o,l,u=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([i?DN(i):Promise.resolve(void 0),DN(s)]);l=h[0],o=h[1],u=n==="flipY"}else{const h=await Promise.all([i?createImageBitmap(i,{imageOrientation:n||"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:n||"flipY"})]);l=h[0],o=h[1]}return{sdrImage:o,gainMapImage:l,needsFlip:u}}createTextures(e,t,n){const i=new di(t||new ImageData(2,2),Uf,vr,vr,Gn,cw,Rr,ns,1,Al);i.flipY=n,i.needsUpdate=!0;const s=new di(e,Uf,vr,vr,Gn,cw,Rr,ns,1,xs);return s.flipY=n,s.needsUpdate=!0,{gainMap:i,sdr:s}}updateQuadRenderer(e,t,n,i,s){e.width=t.width,e.height=t.height,e.material.gainMap=n,e.material.sdr=i,e.material.gainMapMin=s.gainMapMin,e.material.gainMapMax=s.gainMapMax,e.material.offsetHdr=s.offsetHdr,e.material.offsetSdr=s.offsetSdr,e.material.gamma=s.gamma,e.material.hdrCapacityMin=s.hdrCapacityMin,e.material.hdrCapacityMax=s.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),e.material.needsUpdate=!0}}const vZ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,yZ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class xZ extends ca{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:l,hdrCapacityMax:u,sdr:h,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:vZ,fragmentShader:yZ,uniforms:{sdr:{value:h},gainMap:{value:m},gamma:{value:new se(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new se().fromArray(t)},offsetSdr:{value:new se().fromArray(n)},gainMapMin:{value:new se().fromArray(i)},gainMapMax:{value:new se().fromArray(s)},weightFactor:{value:(Math.log2(o)-l)/(u-l)}},blending:wl,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=l,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class r4 extends gZ{constructor(e,t){super({renderer:e,createMaterial:n=>new xZ(n),createQuadRenderer:n=>new PA(n)},t)}async render(e,t,n,i){const{sdrImage:s,gainMapImage:o,needsFlip:l}=await this.processImages(n,i,"flipY"),{gainMap:u,sdr:h}=this.createTextures(s,o,l);this.updateQuadRenderer(e,s,u,h,t),e.render()}}class _Z extends r4{load([e,t,n],i,s,o){const l=this.prepareQuadRenderer();let u,h,m;const g=async()=>{if(u&&h&&m){try{await this.render(l,m,u,h)}catch(U){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(U),l.disposeOnDemandRenderer();return}typeof i=="function"&&i(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),l.disposeOnDemandRenderer()}};let v=!0,_=0,b=0,w=!0,S=0,T=0,A=!0,D=0,N=0;const L=()=>{if(typeof s=="function"){const U=_+S+D,H=b+T+N,Y=v&&w&&A;s(new ProgressEvent("progress",{lengthComputable:Y,loaded:H,total:U}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const I=new so(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async U=>{if(typeof U=="string")throw new Error("Invalid sdr buffer");u=U,await g()},U=>{v=U.lengthComputable,b=U.loaded,_=U.total,L()},U=>{this.manager.itemError(e),typeof o=="function"&&o(U)});const k=new so(this._internalLoadingManager);k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(t,async U=>{if(typeof U=="string")throw new Error("Invalid gainmap buffer");h=U,await g()},U=>{w=U.lengthComputable,T=U.loaded,S=U.total,L()},U=>{this.manager.itemError(t),typeof o=="function"&&o(U)});const R=new so(this._internalLoadingManager);return R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(n,async U=>{if(typeof U!="string")throw new Error("Invalid metadata string");m=JSON.parse(U),await g()},U=>{A=U.lengthComputable,N=U.loaded,D=U.total,L()},U=>{this.manager.itemError(n),typeof o=="function"&&o(U)}),l}}class bZ extends r4{load(e,t,n,i){const s=this.prepareQuadRenderer(),o=new so(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const u=new Uint8Array(l);let h,m,g;try{const v=await mZ(u);h=v.sdr,m=v.gainMap,g=v.metadata}catch(v){if(v instanceof i4||v instanceof n4)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),g={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},h=u;else throw v}try{await this.render(s,g,h.buffer,m?.buffer)}catch(v){this.manager.itemError(e),typeof i=="function"&&i(v),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,l=>{this.manager.itemError(e),typeof i=="function"&&i(l)}),s}}const Cv={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},s4="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",mm=r=>Array.isArray(r),LA=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function iS({files:r=LA,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:i}={}){t&&(UA(t),r=Cv[t],e=s4);const s=mm(r),{extension:o,isCubemap:l}=IA(r),u=OA(o);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+r);const h=Ia(_=>_.gl);Re.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function _(){Dm.clear(u,s?[r]:r)}h.domElement.addEventListener("webglcontextlost",_,{once:!0})},[r,h.domElement]);const m=Dm(u,s?[r]:r,_=>{(o==="webp"||o==="jpg"||o==="jpeg")&&_.setRenderer(h),_.setPath==null||_.setPath(e),i&&i(_)});let g=s?m[0]:m;if(o==="jpg"||o==="jpeg"||o==="webp"){var v;g=(v=g.renderTarget)==null?void 0:v.texture}return g.mapping=l?El:dm,g.colorSpace=n??(l?"srgb":"srgb-linear"),g}const SZ={files:LA,path:"",preset:void 0,extensions:void 0};iS.preload=r=>{const e={...SZ,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(UA(i),t=Cv[i],n=s4);const{extension:o}=IA(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=OA(o);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);Dm.preload(l,mm(t)?[t]:t,u=>{u.setPath==null||u.setPath(n),s&&s(u)})};const MZ={files:LA,preset:void 0};iS.clear=r=>{const e={...MZ,...r};let{files:t}=e;const{preset:n}=e;n&&(UA(n),t=Cv[n]);const{extension:i}=IA(t),s=OA(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Dm.clear(s,mm(t)?[t]:t)};function UA(r){if(!(r in Cv))throw new Error("Preset must be one of: "+Object.keys(Cv).join(", "))}function IA(r){var e;const t=mm(r)&&r.length===6,n=mm(r)&&r.length===3&&r.some(o=>o.endsWith("json")),i=mm(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function OA(r){return r==="cube"?WI:r==="hdr"?pq:r==="exr"?mq:r==="jpg"||r==="jpeg"?bZ:r==="webp"?_Z:null}const TZ=r=>r.current&&r.current.isScene,wZ=r=>TZ(r)?r.current:r;function FA(r,e,t,n,i={}){var s,o,l,u;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const h=wZ(e||t),m=h.background,g=h.environment,v={backgroundBlurriness:h.backgroundBlurriness,backgroundIntensity:h.backgroundIntensity,backgroundRotation:(s=(o=h.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:h.environmentIntensity,environmentRotation:(l=(u=h.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return r!=="only"&&(h.environment=n),r&&(h.background=n),vc(h,i),()=>{r!=="only"&&(h.environment=g),r&&(h.background=m),vc(h,v)}}function kA({scene:r,background:e=!1,map:t,...n}){const i=Ia(s=>s.scene);return Re.useLayoutEffect(()=>{if(t)return FA(e,r,i,t,n)}),null}function a4({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:l,...u}){const h=iS(u),m=Ia(g=>g.scene);return Re.useLayoutEffect(()=>FA(r,e,m,h,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:l})),Re.useEffect(()=>()=>{h.dispose()},[h]),null}function EZ({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:o=!1,blur:l,backgroundBlurriness:u,backgroundIntensity:h,backgroundRotation:m,environmentIntensity:g,environmentRotation:v,scene:_,files:b,path:w,preset:S=void 0,extensions:T}){const A=Ia(R=>R.gl),D=Ia(R=>R.scene),N=Re.useRef(null),[L]=Re.useState(()=>new Vv),I=Re.useMemo(()=>{const R=new Jb(n);return R.texture.type=yr,R},[n]);Re.useEffect(()=>()=>{I.dispose()},[I]),Re.useLayoutEffect(()=>{if(i===1){const R=A.autoClear;A.autoClear=!0,N.current.update(A,L),A.autoClear=R}return FA(o,_,D,I.texture,{backgroundBlurriness:l??u,backgroundIntensity:h,backgroundRotation:m,environmentIntensity:g,environmentRotation:v})},[r,L,I.texture,_,D,o,i,A]);let k=1;return eS(()=>{if(i===1/0||k<i){const R=A.autoClear;A.autoClear=!0,N.current.update(A,L),A.autoClear=R,k++}}),Re.createElement(Re.Fragment,null,PY(Re.createElement(Re.Fragment,null,r,Re.createElement("cubeCamera",{ref:N,args:[e,t,I]}),b||S?Re.createElement(a4,{background:!0,files:b,preset:S,path:w,extensions:T}):s?Re.createElement(kA,{background:!0,map:s,extensions:T}):null),L))}function AZ(r){var e,t,n,i;const s=iS(r),o=r.map||s;Re.useMemo(()=>RO({GroundProjectedEnvImpl:sq}),[]),Re.useEffect(()=>()=>{s.dispose()},[s]);const l=Re.useMemo(()=>[o],[o]),u=(e=r.ground)==null?void 0:e.height,h=(t=r.ground)==null?void 0:t.radius,m=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return Re.createElement(Re.Fragment,null,Re.createElement(kA,Av({},r,{map:o})),Re.createElement("groundProjectedEnvImpl",{args:l,scale:m,height:u,radius:h}))}function CZ(r){return r.ground?Re.createElement(AZ,r):r.map?Re.createElement(kA,r):r.children?Re.createElement(EZ,r):Re.createElement(a4,r)}function RZ(){const r=Re.useRef(),e=Re.useRef(),t=Re.useRef(),[n,i]=Re.useState(!1);eS(l=>{r.current&&(r.current.rotation.y+=.012,r.current.rotation.x=Math.sin(l.clock.elapsedTime*.4)*.12,r.current.position.y=Math.sin(l.clock.elapsedTime*.6)*.4),t.current&&t.current.scale.setScalar(1+Math.sin(l.clock.elapsedTime*2)*.05),e.current&&n&&(e.current.material.emissiveIntensity=.3+Math.sin(l.clock.elapsedTime*3)*.1)});const s=Re.useMemo(()=>{const l=document.createElement("canvas");l.width=2048,l.height=1024;const u=l.getContext("2d"),h=u.createRadialGradient(1024,512,0,1024,512,1024);h.addColorStop(0,"#ffffff"),h.addColorStop(1,"#f0f0f0"),u.fillStyle=h,u.fillRect(0,0,2048,1024),[{x:1024,y:150,size:80},{x:512,y:300,size:75},{x:1536,y:300,size:75},{x:256,y:512,size:70},{x:768,y:512,size:75},{x:1280,y:512,size:75},{x:1792,y:512,size:70},{x:512,y:724,size:75},{x:1536,y:724,size:75},{x:1024,y:874,size:80},{x:128,y:200,size:65},{x:1920,y:200,size:65}].forEach(({x:_,y:b,size:w})=>{u.fillStyle="rgba(0, 28, 88, 0.1)",u.beginPath();for(let T=0;T<5;T++){const A=Math.PI*2*T/5-Math.PI/2,D=_+Math.cos(A)*(w+3),N=b+Math.sin(A)*(w+3)+3;T===0?u.moveTo(D,N):u.lineTo(D,N)}u.closePath(),u.fill();const S=u.createRadialGradient(_,b,0,_,b,w);S.addColorStop(0,"#001c58"),S.addColorStop(1,"#000a2e"),u.fillStyle=S,u.beginPath();for(let T=0;T<5;T++){const A=Math.PI*2*T/5-Math.PI/2,D=_+Math.cos(A)*w,N=b+Math.sin(A)*w;T===0?u.moveTo(D,N):u.lineTo(D,N)}u.closePath(),u.fill(),u.fillStyle="rgba(255, 255, 255, 0.15)",u.beginPath();for(let T=0;T<5;T++){const A=Math.PI*2*T/5-Math.PI/2,D=_+Math.cos(A)*(w*.4),N=b+Math.sin(A)*(w*.4)-w*.2;T===0?u.moveTo(D,N):u.lineTo(D,N)}u.closePath(),u.fill(),u.strokeStyle="#000000",u.lineWidth=3,u.beginPath();for(let T=0;T<5;T++){const A=Math.PI*2*T/5-Math.PI/2,D=_+Math.cos(A)*w,N=b+Math.sin(A)*w;T===0?u.moveTo(D,N):u.lineTo(D,N)}u.closePath(),u.stroke()});const g=[[[512,300],[768,512]],[[1536,300],[1280,512]],[[768,512],[512,724]],[[1280,512],[1536,724]]];u.strokeStyle="rgba(0, 28, 88, 0.3)",u.lineWidth=4,g.forEach(([_,b])=>{u.beginPath(),u.moveTo(_[0],_[1]),u.lineTo(b[0],b[1]),u.stroke()});const v=new pw(l);return v.wrapS=dd,v.wrapT=dd,v.anisotropy=16,v},[]),o=Re.useMemo(()=>{const l=document.createElement("canvas");l.width=512,l.height=512;const u=l.getContext("2d");u.fillStyle="#8080ff",u.fillRect(0,0,512,512);for(let h=0;h<20;h++)u.fillStyle=`rgba(${100+Math.random()*100}, ${100+Math.random()*100}, 255, 0.3)`,u.beginPath(),u.arc(Math.random()*512,Math.random()*512,20+Math.random()*30,0,Math.PI*2),u.fill();return new pw(l)},[]);return F.jsxs("group",{ref:r,onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),scale:n?1.12:1,children:[F.jsxs("mesh",{ref:e,castShadow:!0,receiveShadow:!0,children:[F.jsx("sphereGeometry",{args:[2.6,128,128]}),F.jsx("meshStandardMaterial",{map:s,normalMap:o,normalScale:[.3,.3],roughness:.35,metalness:.15,emissive:"#febe10",emissiveIntensity:n?.3:.15,envMapIntensity:1.5})]}),F.jsxs("mesh",{children:[F.jsx("sphereGeometry",{args:[2.62,64,64]}),F.jsx("meshPhysicalMaterial",{transparent:!0,opacity:.2,roughness:.05,metalness:.9,clearcoat:1,clearcoatRoughness:.05,transmission:.1})]}),F.jsxs("group",{ref:t,children:[F.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[F.jsx("torusGeometry",{args:[2.65,.08,16,100]}),F.jsx("meshStandardMaterial",{color:"#febe10",emissive:"#febe10",emissiveIntensity:n?1:.6,metalness:.9,roughness:.1})]}),F.jsxs("mesh",{rotation:[Math.PI/3,Math.PI/4,0],children:[F.jsx("torusGeometry",{args:[2.65,.04,12,100]}),F.jsx("meshStandardMaterial",{color:"#ffd700",emissive:"#ffd700",emissiveIntensity:n?.8:.4,metalness:.9,roughness:.1,transparent:!0,opacity:.7})]})]}),n&&F.jsxs("mesh",{children:[F.jsx("sphereGeometry",{args:[3,32,32]}),F.jsx("meshBasicMaterial",{color:"#febe10",transparent:!0,opacity:.1,side:zs})]}),n&&[0,1,2,3].map(l=>F.jsxs("mesh",{position:[Math.cos(l*Math.PI/2)*3,Math.sin(l*Math.PI/2+Math.PI/4)*2,Math.sin(l)*2],children:[F.jsx("sphereGeometry",{args:[.08,8,8]}),F.jsx("meshBasicMaterial",{color:"#febe10"})]},l))]})}function DZ({position:r,text:e,delay:t=0}){const n=Re.useRef(),i=Re.useRef();return eS(s=>{if(n.current){const o=s.clock.elapsedTime+t;n.current.position.x=r[0]+Math.sin(o*.3)*.6,n.current.position.z=r[2]+Math.cos(o*.3)*.6,n.current.lookAt(s.camera.position);const l=1+Math.sin(o*2)*.05;n.current.scale.setScalar(l)}i.current&&(i.current.rotation.z+=.02)}),F.jsxs("group",{ref:n,position:r,children:[F.jsxs("mesh",{ref:i,position:[0,0,-.1],children:[F.jsx("circleGeometry",{args:[.6,32]}),F.jsx("meshBasicMaterial",{color:"#febe10",transparent:!0,opacity:.15})]}),F.jsx(RN,{fontSize:.42,color:"#febe10",anchorX:"center",anchorY:"middle",outlineWidth:.08,outlineColor:"#000000",fontWeight:900,children:e}),F.jsx(RN,{fontSize:.42,color:"#fff",anchorX:"center",anchorY:"middle",transparent:!0,opacity:.3,position:[0,0,.01],fontWeight:900,children:e})]})}function NZ(){const r=[{text:"Java",position:[4,1.8,0],delay:0},{text:"Spring Boot",position:[-4,1.5,.8],delay:1},{text:"Python",position:[3.5,-1.5,1.5],delay:2},{text:"PostgreSQL",position:[-3.5,-1.8,-1],delay:3},{text:"Microservices",position:[2.5,3,-1.5],delay:4},{text:"Kafka",position:[-2.8,2.8,2],delay:5},{text:"Redis",position:[3.2,.8,-2.5],delay:6},{text:"REST APIs",position:[-3,.5,2.5],delay:7},{text:"ML/NLP",position:[0,-3.2,2],delay:8},{text:"TensorFlow",position:[0,3.5,1],delay:9},{text:"AWS",position:[2,-2.8,-1.5],delay:10},{text:"Docker",position:[-2,-2.5,1.8],delay:11}];return F.jsx("div",{className:"w-full h-full",children:F.jsxs(jY,{camera:{position:[0,0,9],fov:50},className:"cursor-grab active:cursor-grabbing",shadows:!0,gl:{antialias:!0,alpha:!0,toneMapping:Fv,toneMappingExposure:1.2},dpr:[1,2],children:[F.jsx("ambientLight",{intensity:.4}),F.jsx("directionalLight",{position:[12,12,8],intensity:2.5,color:"#ffffff",castShadow:!0,"shadow-mapSize":[2048,2048]}),F.jsx("directionalLight",{position:[-8,8,-5],intensity:1.2,color:"#e8f4ff"}),F.jsx("directionalLight",{position:[0,-8,-8],intensity:.8,color:"#4488ff"}),F.jsx("pointLight",{position:[4,4,4],intensity:2,color:"#febe10",distance:10}),F.jsx("pointLight",{position:[-4,-4,4],intensity:1.5,color:"#ffd700",distance:10}),F.jsx("pointLight",{position:[0,0,-6],intensity:1,color:"#febe10",distance:8}),F.jsx("spotLight",{position:[0,12,0],angle:.5,penumbra:1,intensity:2,castShadow:!0,color:"#ffffff"}),F.jsx(RZ,{}),r.map((e,t)=>F.jsx(DZ,{position:e.position,text:e.text,delay:e.delay},t)),F.jsx(CZ,{preset:"city"}),F.jsx(fZ,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.4,maxPolarAngle:Math.PI,minPolarAngle:0}),F.jsx("fog",{attach:"fog",args:["#001c58",12,20]})]})})}function PZ(){const r=Re.useRef(null),e=Re.useRef(null);Re.useEffect(()=>{r.current&&e.current&&yU.timeline({defaults:{ease:"power3.out"}}).fromTo(r.current,{y:100,opacity:0},{y:0,opacity:1,duration:1,delay:.5}).fromTo(e.current,{y:50,opacity:0},{y:0,opacity:1,duration:.8},"-=0.5")},[]);const t=()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})};return F.jsxs("section",{className:"relative min-h-screen w-full overflow-hidden bg-gradient-to-br from-[#001c58] via-[#0a1f4a] to-[#001c58]",children:[F.jsx("div",{className:"absolute inset-0 field-pattern opacity-10"}),F.jsx("div",{className:"absolute inset-0 chalkboard-texture opacity-20"}),F.jsx("div",{className:"container relative min-h-screen",children:F.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center min-h-screen py-20 lg:py-0",children:[F.jsxs("div",{className:"z-50 space-y-5 relative bg-black/30 backdrop-blur-md p-6 lg:p-8 rounded-2xl border border-white/10 max-w-2xl",children:[F.jsx(dn.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.3},className:"inline-block",children:F.jsx("span",{className:"text-[#febe10] text-xs md:text-sm font-bold tracking-wider uppercase drop-shadow-lg",children:"Software Development Engineer"})}),F.jsxs("h1",{ref:r,className:"text-4xl md:text-6xl lg:text-7xl font-black leading-tight",style:{textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:[F.jsx("span",{className:"text-white drop-shadow-2xl",children:"PRANAV"}),F.jsx("br",{}),F.jsx("span",{className:"text-[#febe10] drop-shadow-2xl",children:"SAGAR"})]}),F.jsxs("div",{ref:e,className:"space-y-3",children:[F.jsxs("p",{className:"text-lg md:text-xl text-white drop-shadow-lg",children:["Building scalable systems with the precision of a"," ",F.jsx("span",{className:"text-[#febe10] font-bold",children:"tactical playmaker"})]}),F.jsx("div",{className:"flex flex-wrap gap-2",children:["Backend","Frontend","ML/NLP","System Design"].map((n,i)=>F.jsx(dn.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:1.2+i*.1},className:"px-3 py-1.5 bg-white/10 border border-[#febe10]/40 rounded-full text-xs font-medium text-white backdrop-blur-sm hover:bg-white/20 transition-colors",children:n},n))}),F.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5},className:"grid grid-cols-3 gap-3 pt-3",children:[F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"text-2xl md:text-3xl font-bold text-[#febe10] drop-shadow-lg",children:"2+"}),F.jsx("div",{className:"text-xs text-white/80 uppercase tracking-wide",children:"Years"})]}),F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"text-2xl md:text-3xl font-bold text-[#febe10] drop-shadow-lg",children:"10+"}),F.jsx("div",{className:"text-xs text-white/80 uppercase tracking-wide",children:"Projects"})]}),F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"text-2xl md:text-3xl font-bold text-[#febe10] drop-shadow-lg",children:"5M+"}),F.jsx("div",{className:"text-xs text-white/80 uppercase tracking-wide",children:"Users"})]})]}),F.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.7},className:"flex flex-wrap gap-3 pt-3",children:[F.jsx("a",{href:"#contact",className:"px-6 py-2.5 bg-[#febe10] text-[#001c58] font-bold text-sm rounded-lg hover:bg-yellow-400 transition-all transform hover:scale-105 hover:shadow-lg hover:shadow-[#febe10]/50",children:"Get in Touch"}),F.jsx("a",{href:"#projects",className:"px-6 py-2.5 border-2 border-[#febe10] text-[#febe10] font-bold text-sm rounded-lg hover:bg-[#febe10] hover:text-[#001c58] transition-all transform hover:scale-105",children:"View Projects"})]})]})]}),F.jsx(dn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:1,delay:.5},className:"w-full h-[500px] lg:h-[600px] hidden lg:flex items-center justify-center",children:F.jsx("div",{className:"w-full h-full",children:F.jsx(NZ,{})})})]})}),F.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:1},className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-20",children:F.jsxs("button",{onClick:t,className:"flex flex-col items-center gap-2 text-[#febe10] hover:text-yellow-300 transition-colors group","aria-label":"Scroll to next section",children:[F.jsx("span",{className:"text-xs uppercase tracking-widest font-semibold",children:"Scroll"}),F.jsx(b6,{className:"w-6 h-6 animate-bounce"})]})}),F.jsxs("svg",{className:"absolute bottom-0 left-0 w-full h-32 opacity-30",xmlns:"http://www.w3.org/2000/svg",children:[F.jsx("line",{x1:"0",y1:"100",x2:"100%",y2:"50",stroke:"#febe10",strokeWidth:"3",strokeDasharray:"10,5",className:"tactical-line"}),F.jsx("line",{x1:"0",y1:"50",x2:"100%",y2:"100",stroke:"#febe10",strokeWidth:"3",strokeDasharray:"10,5",className:"tactical-line",style:{animationDelay:"0.5s"}})]})]})}const LZ={positions:{attack:{title:"Backend Mastery",skills:[{name:"Java",level:95,icon:"coffee",position:"RW",jersey:7},{name:"Spring Boot",level:93,icon:"leaf",position:"ST",jersey:9},{name:"Microservices",level:92,icon:"microservices",position:"LW",jersey:11}]},midfield:{title:"Distributed Systems & Data",skills:[{name:"Kafka",level:88,icon:"kafka",position:"RCM",jersey:8},{name:"PostgreSQL",level:90,icon:"database",position:"CM",jersey:6},{name:"Redis",level:88,icon:"zap",position:"LCM",jersey:10}]},defense:{title:"Infrastructure & DevOps",skills:[{name:"Docker",level:90,icon:"container",position:"RB",jersey:2},{name:"Kubernetes",level:85,icon:"k8s",position:"CB",jersey:4},{name:"AWS",level:88,icon:"cloud",position:"CB",jersey:5},{name:"Python",level:90,icon:"python",position:"LB",jersey:3}]},goalkeeper:{title:"Foundation",skills:[{name:"Git",level:95,icon:"git-branch",jersey:1}]},substitutes:{title:"Substitutes Bench",skills:[{name:"React.js",level:85,icon:"react",jersey:14},{name:"ML/NLP",level:87,icon:"brain",jersey:16},{name:"Node.js",level:83,icon:"server",jersey:18},{name:"MongoDB",level:82,icon:"database",jersey:20},{name:"GraphQL",level:80,icon:"api",jersey:22}]}}},UZ=[{category:"Development Practices",skills:["Agile/Scrum","TDD","CI/CD","Code Review","System Design"]},{category:"Tools & Platforms",skills:["Jenkins","Git","Grafana","Postman","IntelliJ IDEA"]},{category:"Databases & Storage",skills:["MySQL","MongoDB","Elasticsearch","S3","DynamoDB"]}],yT={technical:[{name:"Backend Development",rating:95},{name:"Distributed Systems",rating:90},{name:"Database Design",rating:90},{name:"Microservices",rating:92},{name:"API Development",rating:93}],mental:[{name:"Problem Solving",rating:92},{name:"System Design",rating:90},{name:"Learning Ability",rating:94},{name:"Code Quality",rating:91},{name:"Documentation",rating:87}],physical:[{name:"Productivity",rating:89},{name:"Collaboration",rating:91},{name:"Adaptability",rating:93},{name:"Communication",rating:88},{name:"Mentoring",rating:86}]};function IZ({name:r,rating:e,delay:t=0}){const[n,i]=Re.useState(0),s=Re.useRef(null),o=YB(s,{once:!0});return Re.useEffect(()=>{o&&setTimeout(()=>i(e),t*100)},[o,e,t]),F.jsxs("div",{ref:s,className:"space-y-2",children:[F.jsxs("div",{className:"flex justify-between items-center",children:[F.jsx("span",{className:"text-sm font-medium text-white",children:r}),F.jsx("span",{className:"text-sm font-bold text-[#febe10]",children:e})]}),F.jsx("div",{className:"stat-bar",children:F.jsx("div",{className:"stat-bar-fill",style:{width:`${n}%`}})})]})}function xT({title:r,icon:e,attributes:t,delay:n=0}){return F.jsxs(dn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:n},className:"tactical-card p-6 space-y-4",children:[F.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[F.jsx("div",{className:"w-10 h-10 rounded-full bg-[#febe10]/20 flex items-center justify-center",children:F.jsx(e,{className:"w-5 h-5 text-[#febe10]"})}),F.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-wide",children:r})]}),F.jsx("div",{className:"space-y-4",children:t.map((i,s)=>F.jsx(IZ,{name:i.name,rating:i.rating,delay:n*2+s},i.name))})]})}function OZ(){return F.jsxs("section",{id:"about",className:"py-20 bg-gradient-to-b from-[#0a1f4a] to-[#0d2554] relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 field-pattern opacity-10"}),F.jsx("div",{className:"absolute top-20 right-10 w-64 h-64 bg-[#febe10]/5 rounded-full blur-3xl"}),F.jsx("div",{className:"absolute bottom-20 left-10 w-96 h-96 bg-[#001c58]/10 rounded-full blur-3xl"}),F.jsxs("div",{className:"container relative z-10",children:[F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[F.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:["SCOUTING ",F.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#febe10] to-yellow-300",children:"REPORT"})]}),F.jsx("div",{className:"w-24 h-1 bg-[#febe10] mx-auto mb-6"}),F.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"A versatile software engineer combining backend strength, frontend creativity, and tactical problem-solving"})]}),F.jsx(dn.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},className:"tactical-card p-8 md:p-12 mb-12 max-w-5xl mx-auto",children:F.jsxs("div",{className:"grid md:grid-cols-[300px,1fr] gap-8",children:[F.jsxs("div",{className:"space-y-6",children:[F.jsx("div",{className:"aspect-square bg-gradient-to-br from-[#001c58] to-[#febe10]/20 rounded-lg overflow-hidden border-2 border-[#febe10]/30 shadow-2xl",children:F.jsx("img",{src:"/profile.jpg",alt:"Pranav Sagar",className:"w-full h-full object-cover"})}),F.jsxs("div",{className:"space-y-3",children:[F.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/10",children:[F.jsx("span",{className:"text-sm text-white/60 uppercase",children:"Position"}),F.jsx("span",{className:"font-semibold text-white",children:"Full-Stack Dev"})]}),F.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/10",children:[F.jsx("span",{className:"text-sm text-white/60 uppercase",children:"Primary Role"}),F.jsx("span",{className:"font-semibold text-white",children:"Backend"})]}),F.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/10",children:[F.jsx("span",{className:"text-sm text-white/60 uppercase",children:"Experience"}),F.jsx("span",{className:"font-semibold text-white",children:"2+ Years"})]}),F.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/10",children:[F.jsx("span",{className:"text-sm text-white/60 uppercase",children:"Current Club"}),F.jsx("span",{className:"font-semibold text-[#febe10]",children:"Glance"})]})]})]}),F.jsxs("div",{className:"space-y-6",children:[F.jsxs("div",{children:[F.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[F.jsx(pR,{className:"w-6 h-6 text-[#febe10]"}),"Profile Overview"]}),F.jsx("p",{className:"text-white/80 leading-relaxed mb-4",children:"A technically gifted software engineer with exceptional versatility across the full stack. Demonstrates strong game intelligence through strategic system design and tactical approach to problem-solving."}),F.jsx("p",{className:"text-white/80 leading-relaxed",children:"Known for precision in backend development, creativity in frontend implementation, and vision in ML/NLP applications. Possesses excellent work rate, collaboration skills, and a constant drive for improvement. A true team player who elevates those around them."})]}),F.jsxs("div",{children:[F.jsxs("h4",{className:"text-lg font-bold text-[#febe10] mb-3 flex items-center gap-2",children:[F.jsx(u1,{className:"w-5 h-5"}),"Key Strengths"]}),F.jsx("ul",{className:"grid grid-cols-2 gap-2",children:["Microservices Architecture","RESTful API Design","ML/NLP Implementation","Database Optimization","System Scalability","Code Quality & Testing"].map((r,e)=>F.jsxs(dn.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.1},className:"flex items-center gap-2 text-sm text-white/80",children:[F.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#febe10]"}),r]},r))})]}),F.jsxs("div",{children:[F.jsxs("h4",{className:"text-lg font-bold text-[#febe10] mb-3 flex items-center gap-2",children:[F.jsx(f1,{className:"w-5 h-5"}),"Career Highlights"]}),F.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[F.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg border border-[#febe10]/10 hover:border-[#febe10]/30 transition-colors",children:[F.jsx("div",{className:"text-3xl font-bold text-[#febe10]",children:"5M+"}),F.jsx("div",{className:"text-xs text-white/70 uppercase tracking-wide mt-1",children:"Users Impacted"})]}),F.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg border border-[#febe10]/10 hover:border-[#febe10]/30 transition-colors",children:[F.jsx("div",{className:"text-3xl font-bold text-[#febe10]",children:"2+"}),F.jsx("div",{className:"text-xs text-white/70 uppercase tracking-wide mt-1",children:"Years Experience"})]}),F.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg border border-[#febe10]/10 hover:border-[#febe10]/30 transition-colors",children:[F.jsx("div",{className:"text-3xl font-bold text-[#febe10]",children:"10+"}),F.jsx("div",{className:"text-xs text-white/70 uppercase tracking-wide mt-1",children:"Projects Built"})]}),F.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg border border-[#febe10]/10 hover:border-[#febe10]/30 transition-colors",children:[F.jsx("div",{className:"text-3xl font-bold text-[#febe10]",children:"9.2"}),F.jsx("div",{className:"text-xs text-white/70 uppercase tracking-wide mt-1",children:"CGPA"})]})]})]})]})]})}),F.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[F.jsx(xT,{title:"Technical",icon:u1,attributes:yT.technical,delay:0}),F.jsx(xT,{title:"Mental",icon:f1,attributes:yT.mental,delay:.2}),F.jsx(xT,{title:"Physical",icon:pR,attributes:yT.physical,delay:.4})]}),F.jsxs(dn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"tactical-card p-8 mt-12 max-w-4xl mx-auto border-l-4 border-[#febe10]",children:[F.jsx("h3",{className:"text-xl font-bold text-[#febe10] mb-4 uppercase tracking-wide",children:"Scout's Final Assessment"}),F.jsxs("p",{className:"text-white/80 leading-relaxed italic",children:['"A complete midfielder in the software engineering space. Pranav combines technical excellence with tactical awareness and team chemistry. His ability to switch between defensive (backend) and attacking (frontend) roles, while maintaining vision for innovative plays (ML/NLP), makes him a valuable asset to any squad. High potential for growth and leadership roles.',F.jsx("span",{className:"text-[#febe10] font-semibold",children:" Recommended signing."}),'"']}),F.jsx("div",{className:"mt-4 text-right text-sm text-white/60",children:" Chief Technical Scout"})]})]})]})}const NN=[{id:1,title:"Software Development Engineer",company:"Glance",location:"Bangalore, India",period:"Nov 2023 - Present",duration:"1+ year",minute:"75'",type:"goal",description:"Building next-generation content delivery and engagement platforms serving millions of users globally",impact:{users:"5M+",performance:"40%",uptime:"99.9%"},achievements:["Architected and deployed scalable microservices handling 5M+ daily active users","Implemented real-time content recommendation engine using ML/NLP techniques","Optimized backend systems resulting in 40% reduction in response time","Led code reviews and mentored 3 junior developers on best practices","Collaborated with cross-functional teams to deliver high-impact features","Designed and implemented caching strategies improving system throughput by 50%","Maintained 99.9% uptime for critical production services"],technologies:["Java","Spring Boot","PostgreSQL","Redis","AWS","Kafka","React.js","Microservices","REST APIs"],icon:"trophy"},{id:2,title:"Software Development Engineer Intern",company:"Glance",location:"Bangalore, India",period:"Aug 2022 - Oct 2023",duration:"1 year 3 months",minute:"45'",type:"assist",description:"Contributed to core platform features and infrastructure improvements for content delivery systems",impact:{performance:"30%",coverage:"85%",apis:"15+"},achievements:["Developed 15+ RESTful APIs for content management system","Implemented caching strategies reducing database load by 30%","Wrote comprehensive unit and integration tests achieving 85% code coverage","Participated in agile development process and sprint planning","Contributed to migration of monolithic architecture to microservices","Optimized SQL queries reducing page load time by 25%"],technologies:["Java","Spring Boot","MySQL","Redis","Docker","JUnit","REST APIs"],icon:"zap"},{id:3,title:"Bachelor of Technology in Computer Science",company:"SRM Institute of Science and Technology",location:"Chennai, India",period:"2019 - 2023",duration:"4 years",minute:"20'",type:"milestone",description:"Built strong foundation in computer science, software engineering, and machine learning with academic excellence",impact:{cgpa:"9.2/10",awards:"5+",projects:"10+"},achievements:["CGPA: 9.2/10 - First Class with Distinction","Winner - Smart India Hackathon 2022 (National Level)","Published research paper on NLP sentiment analysis techniques","Completed 10+ major projects including ML models and web applications","Active member of coding club and led technical workshops","Secured 5+ awards in inter-college coding competitions","Core team member of technical symposium organizing committee"],technologies:["Data Structures","Algorithms","DBMS","OS","Computer Networks","Machine Learning","Python","Java"],icon:"graduation-cap"}],o4={trophy:h1,zap:K6,"graduation-cap":D6};function FZ({experience:r,index:e}){const t=o4[r.icon]||h1,n=e%2===0;return F.jsxs("div",{className:"relative grid lg:grid-cols-[1fr,auto,1fr] gap-8 items-start",children:[n?F.jsxs(dn.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,delay:e*.2},className:"tactical-card p-6 hover:border-[#febe10]/50 transition-all group",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${r.type==="goal"?"bg-[#febe10]/20 text-[#febe10]":r.type==="assist"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:[F.jsx(t,{className:"w-3 h-3"}),r.type.toUpperCase()]}),F.jsx("div",{className:"px-3 py-1 bg-[#febe10] text-[#001c58] text-xs font-bold rounded-full",children:r.minute})]}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-[#febe10] transition-colors",children:r.title}),F.jsx("div",{className:"flex items-center gap-2 text-white/60 text-sm mt-1",children:F.jsx("span",{className:"font-semibold text-[#febe10]",children:r.company})}),F.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-white/50 mt-2",children:[F.jsxs("div",{className:"flex items-center gap-1",children:[F.jsx(yR,{className:"w-3 h-3"}),F.jsx("span",{children:r.location})]}),F.jsxs("div",{className:"flex items-center gap-1",children:[F.jsx(gR,{className:"w-3 h-3"}),F.jsx("span",{children:r.period})]}),r.duration&&F.jsx("span",{className:"px-2 py-0.5 bg-[#febe10]/10 text-[#febe10] rounded-full",children:r.duration})]})]}),F.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:r.description}),r.impact&&F.jsx("div",{className:"grid grid-cols-3 gap-3 py-3 border-y border-white/10",children:Object.entries(r.impact).map(([i,s])=>F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"text-xl font-bold text-[#febe10]",children:s}),F.jsx("div",{className:"text-[10px] text-white/50 uppercase tracking-wide",children:i})]},i))}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{className:"text-xs font-semibold text-[#febe10] uppercase tracking-wider mb-2",children:"Key Achievements"}),r.achievements.map((i,s)=>F.jsxs("div",{className:"flex items-start gap-2 text-sm text-white/70",children:[F.jsx(mR,{className:"w-4 h-4 text-[#febe10] mt-0.5 flex-shrink-0"}),F.jsx("span",{children:i})]},s))]}),F.jsxs("div",{className:"pt-2",children:[F.jsx("div",{className:"text-xs font-semibold text-[#febe10] uppercase tracking-wider mb-2",children:"Technologies & Skills"}),F.jsx("div",{className:"flex flex-wrap gap-2",children:r.technologies.map(i=>F.jsx("span",{className:"px-3 py-1 bg-white/5 border border-[#febe10]/30 rounded-full text-xs text-white font-medium",children:i},i))})]})]})]}):F.jsx("div",{className:"hidden lg:block"}),F.jsx("div",{className:"hidden lg:flex justify-center pt-8",children:F.jsx("div",{className:"w-4 h-4 rounded-full bg-[#febe10] border-4 border-[#0d2554] shadow-lg shadow-[#febe10]/50"})}),n?F.jsx("div",{className:"hidden lg:block"}):F.jsxs(dn.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,delay:e*.2},className:"tactical-card p-6 hover:border-[#febe10]/50 transition-all group",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${r.type==="goal"?"bg-[#febe10]/20 text-[#febe10]":r.type==="assist"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:[F.jsx(t,{className:"w-3 h-3"}),r.type.toUpperCase()]}),F.jsx("div",{className:"px-3 py-1 bg-[#febe10] text-[#001c58] text-xs font-bold rounded-full",children:r.minute})]}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-[#febe10] transition-colors",children:r.title}),F.jsx("div",{className:"flex items-center gap-2 text-white/60 text-sm mt-1",children:F.jsx("span",{className:"font-semibold text-[#febe10]",children:r.company})}),F.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-white/50 mt-2",children:[F.jsxs("div",{className:"flex items-center gap-1",children:[F.jsx(yR,{className:"w-3 h-3"}),F.jsx("span",{children:r.location})]}),F.jsxs("div",{className:"flex items-center gap-1",children:[F.jsx(gR,{className:"w-3 h-3"}),F.jsx("span",{children:r.period})]}),r.duration&&F.jsx("span",{className:"px-2 py-0.5 bg-[#febe10]/10 text-[#febe10] rounded-full",children:r.duration})]})]}),F.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:r.description}),r.impact&&F.jsx("div",{className:"grid grid-cols-3 gap-3 py-3 border-y border-white/10",children:Object.entries(r.impact).map(([i,s])=>F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"text-xl font-bold text-[#febe10]",children:s}),F.jsx("div",{className:"text-[10px] text-white/50 uppercase tracking-wide",children:i})]},i))}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{className:"text-xs font-semibold text-[#febe10] uppercase tracking-wider mb-2",children:"Key Achievements"}),r.achievements.map((i,s)=>F.jsxs("div",{className:"flex items-start gap-2 text-sm text-white/70",children:[F.jsx(mR,{className:"w-4 h-4 text-[#febe10] mt-0.5 flex-shrink-0"}),F.jsx("span",{children:i})]},s))]}),F.jsxs("div",{className:"pt-2",children:[F.jsx("div",{className:"text-xs font-semibold text-[#febe10] uppercase tracking-wider mb-2",children:"Technologies & Skills"}),F.jsx("div",{className:"flex flex-wrap gap-2",children:r.technologies.map(i=>F.jsx("span",{className:"px-3 py-1 bg-white/5 border border-[#febe10]/30 rounded-full text-xs text-white font-medium",children:i},i))})]})]})]})]})}function kZ(){return F.jsxs("section",{id:"experience",className:"py-20 bg-gradient-to-b from-[#0d2554] to-[#0a1f4a] relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 chalkboard-texture opacity-30"}),F.jsx("div",{className:"absolute top-1/4 left-10 w-72 h-72 bg-[#001c58]/10 rounded-full blur-3xl"}),F.jsx("div",{className:"absolute bottom-1/4 right-10 w-96 h-96 bg-[#febe10]/5 rounded-full blur-3xl"}),F.jsxs("div",{className:"container relative z-10",children:[F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[F.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:["MATCH ",F.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#febe10] to-yellow-300",children:"TIMELINE"})]}),F.jsx("div",{className:"w-24 h-1 bg-[#febe10] mx-auto mb-6"}),F.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Key moments in the journey from student to software engineer"})]}),F.jsxs("div",{className:"max-w-5xl mx-auto relative",children:[F.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-[#febe10]/20 hidden lg:block"}),F.jsx("div",{className:"space-y-16",children:NN.map((r,e)=>F.jsx(FZ,{experience:r,index:e},r.id))}),F.jsx(dn.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},className:"mt-16 text-center",children:F.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-[#febe10]/10 border-2 border-[#febe10] rounded-full",children:[F.jsx(h1,{className:"w-5 h-5 text-[#febe10]"}),F.jsx("span",{className:"text-[#febe10] font-bold uppercase tracking-wide",children:"Journey Continues..."})]})})]}),F.jsx("div",{className:"lg:hidden max-w-2xl mx-auto space-y-8 mt-12",children:NN.map((r,e)=>F.jsxs(dn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.15},className:"tactical-card p-6 relative",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${r.type==="goal"?"bg-[#febe10]/20 text-[#febe10]":r.type==="assist"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:[(()=>{const t=o4[r.icon]||h1;return F.jsx(t,{className:"w-3 h-3"})})(),r.type.toUpperCase()]}),F.jsx("div",{className:"px-3 py-1 bg-[#febe10] text-[#001c58] text-xs font-bold rounded-full",children:r.minute})]}),F.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:r.title}),F.jsxs("div",{className:"text-sm text-white/60 mb-3",children:[r.company,"  ",r.period]}),F.jsx("p",{className:"text-sm text-white/70 mb-3",children:r.description}),F.jsx("div",{className:"flex flex-wrap gap-2",children:r.technologies.slice(0,5).map(t=>F.jsx("span",{className:"px-2 py-1 bg-white/5 border border-[#febe10]/20 rounded text-xs text-white",children:t},t))})]},r.id))})]})]})}function BA({number:r}){return F.jsxs("svg",{viewBox:"0 0 100 120",className:"w-full h-full",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[F.jsx("path",{d:"M20 25 L10 35 L10 55 L15 55 L15 120 L85 120 L85 55 L90 55 L90 35 L80 25 L70 30 L50 20 L30 30 Z",fill:"#febe10",stroke:"#001c58",strokeWidth:"2"}),F.jsx("path",{d:"M10 35 L5 40 L10 50 L15 45 Z",fill:"#febe10",stroke:"#001c58",strokeWidth:"1.5"}),F.jsx("path",{d:"M90 35 L95 40 L90 50 L85 45 Z",fill:"#febe10",stroke:"#001c58",strokeWidth:"1.5"}),F.jsx("ellipse",{cx:"50",cy:"25",rx:"12",ry:"8",fill:"#001c58"}),F.jsx("text",{x:"50",y:"75",fontSize:"36",fontWeight:"bold",fill:"#001c58",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",children:r})]})}function N_({skill:r,position:e,delay:t=0,onClick:n}){return F.jsxs(dn.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:t},whileHover:{scale:1.1,y:-5},onClick:()=>n(r),className:"relative cursor-pointer group",children:[F.jsx("div",{className:"w-20 h-24 relative z-10 group-hover:drop-shadow-xl transition-all",children:F.jsx(BA,{number:r.jersey})}),F.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap",children:F.jsx("div",{className:"bg-[#001c58]/90 px-3 py-1 rounded text-xs font-semibold text-white group-hover:bg-[#febe10] group-hover:text-[#001c58] transition-colors",children:r.name})}),e&&F.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-xs text-[#febe10]/60 font-mono",children:e}),F.jsx("div",{className:"absolute -top-2 -right-2 bg-white border-2 border-[#febe10] rounded-full w-7 h-7 flex items-center justify-center shadow-lg z-20",children:F.jsx("span",{className:"text-[#001c58] font-bold text-[10px]",children:r.level})}),F.jsx("div",{className:"absolute top-1/2 left-1/2 w-0.5 h-12 bg-[#febe10]/30 -translate-x-1/2 -z-10"})]})}function BZ({skill:r,onClose:e}){return r?F.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:F.jsxs(dn.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),className:"tactical-card p-6 max-w-md w-full relative",children:[F.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors z-10",children:F.jsx(IE,{className:"w-5 h-5"})}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx("div",{className:"w-20 h-24 flex-shrink-0",children:F.jsx(BA,{number:r.jersey})}),F.jsxs("div",{className:"flex-1",children:[F.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:r.name}),F.jsxs("div",{className:"text-sm text-[#febe10] mb-1",children:["Squad Number: #",r.jersey]}),F.jsxs("div",{className:"text-sm text-white/60",children:["Proficiency: ",r.level,"%"]})]})]}),F.jsx("div",{className:"stat-bar h-3",children:F.jsx(dn.div,{initial:{width:0},animate:{width:`${r.level}%`},transition:{duration:1,delay:.2},className:"stat-bar-fill"})}),F.jsx("div",{className:"pt-4 border-t border-white/10",children:F.jsx("p",{className:"text-white/70 text-sm",children:"A core technology in the tech stack, utilized across multiple projects and production systems. Continuous growth and mastery in progress."})})]})]})}):null}function zZ(){const[r,e]=Re.useState(null),t=LZ.positions;return F.jsxs("section",{id:"skills",className:"py-20 bg-gradient-to-b from-[#0a1f4a] via-[#0d2554] to-[#0a1f4a] relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pitch-green/10 to-transparent"}),F.jsxs("div",{className:"absolute inset-0",children:[F.jsx("div",{className:"absolute inset-x-0 top-1/2 h-0.5 bg-white/10"}),F.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-white/10"}),F.jsx("div",{className:"absolute left-1/2 top-1/2 w-32 h-32 border-2 border-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"})]}),F.jsxs("div",{className:"container relative z-10",children:[F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[F.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:["FORMATION ",F.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#febe10] to-yellow-300",children:"VIEW"})]}),F.jsx("div",{className:"w-24 h-1 bg-[#febe10] mx-auto mb-6"}),F.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto mb-4",children:"Technical skills arranged in the classic 4-3-3 Real Madrid formation"}),F.jsx("div",{className:"text-[#febe10] font-mono text-2xl font-bold",children:"4-3-3"})]}),F.jsx("div",{className:"max-w-4xl mx-auto",children:F.jsxs("div",{className:"tactical-card p-8 md:p-12 bg-pitch-green/5 backdrop-blur-md relative overflow-hidden",children:[F.jsxs("div",{className:"absolute inset-0 opacity-20",children:[F.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(0deg, transparent, transparent 50px, rgba(254, 190, 16, 0.1) 50px, rgba(254, 190, 16, 0.1) 51px)"}}),F.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 50px, rgba(254, 190, 16, 0.1) 50px, rgba(254, 190, 16, 0.1) 51px)"}})]}),F.jsxs("div",{className:"relative space-y-16",children:[F.jsxs("div",{className:"space-y-8",children:[F.jsx("h3",{className:"text-center text-lg font-bold text-[#febe10] uppercase tracking-wide",children:t.attack.title}),F.jsx("div",{className:"flex justify-around items-center px-8",children:t.attack.skills.map((n,i)=>F.jsx(N_,{skill:n,position:n.position,delay:i*.1,onClick:e},n.name))})]}),F.jsxs("div",{className:"space-y-8",children:[F.jsx("h3",{className:"text-center text-lg font-bold text-[#febe10] uppercase tracking-wide",children:t.midfield.title}),F.jsx("div",{className:"flex justify-around items-center px-8",children:t.midfield.skills.map((n,i)=>F.jsx(N_,{skill:n,position:n.position,delay:.3+i*.1,onClick:e},n.name))})]}),F.jsxs("div",{className:"space-y-8",children:[F.jsx("h3",{className:"text-center text-lg font-bold text-[#febe10] uppercase tracking-wide",children:t.defense.title}),F.jsx("div",{className:"flex justify-around items-center px-4",children:t.defense.skills.map((n,i)=>F.jsx(N_,{skill:n,position:n.position,delay:.6+i*.1,onClick:e},n.name))})]}),F.jsxs("div",{className:"space-y-8",children:[F.jsx("h3",{className:"text-center text-lg font-bold text-[#febe10] uppercase tracking-wide",children:t.goalkeeper.title}),F.jsx("div",{className:"flex justify-around items-center px-16",children:t.goalkeeper.skills.map((n,i)=>F.jsx(N_,{skill:n,position:"GK",delay:.9+i*.1,onClick:e},n.name))})]})]}),t.substitutes&&F.jsxs("div",{className:"mt-12 pt-8 border-t-2 border-[#febe10]/30",children:[F.jsx("h3",{className:"text-center text-lg font-bold text-[#febe10] uppercase tracking-wide mb-6",children:t.substitutes.title}),F.jsx("div",{className:"flex flex-wrap justify-center items-start gap-8 px-4",children:t.substitutes.skills.map((n,i)=>F.jsxs(dn.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:1.2+i*.1},whileHover:{scale:1.1},onClick:()=>e(n),className:"cursor-pointer group flex flex-col items-center gap-2 relative",children:[F.jsx("div",{className:"w-16 h-20 relative group-hover:drop-shadow-lg transition-all opacity-70 group-hover:opacity-100",children:F.jsx(BA,{number:n.jersey})}),F.jsx("div",{className:"absolute -top-1 -right-1 bg-white border-2 border-[#febe10] rounded-full w-6 h-6 flex items-center justify-center shadow-md",children:F.jsx("span",{className:"text-[#001c58] font-bold text-[9px]",children:n.level})}),F.jsx("div",{className:"bg-[#001c58]/70 px-3 py-1 rounded text-xs font-semibold text-white/80 group-hover:bg-[#febe10]/20 group-hover:text-white transition-colors",children:n.name})]},n.name))})]}),F.jsx("svg",{className:"absolute inset-0 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",children:F.jsx(dn.path,{initial:{pathLength:0},whileInView:{pathLength:1},viewport:{once:!0},transition:{duration:2,delay:1.2},d:"M 50% 10% L 50% 90%",stroke:"#febe10",strokeWidth:"1",strokeDasharray:"5,5",opacity:"0.3",fill:"none"})})]})}),F.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:F.jsx(dn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"grid md:grid-cols-3 gap-6",children:UZ.map((n,i)=>F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.15},className:"tactical-card p-6",children:[F.jsx("h4",{className:"text-lg font-bold text-[#febe10] mb-4 uppercase tracking-wide",children:n.category}),F.jsx("div",{className:"flex flex-wrap gap-2",children:n.skills.map(s=>F.jsx("span",{className:"px-3 py-1 bg-white/5 border border-[#febe10]/20 rounded-full text-sm text-white hover:bg-[#febe10]/10 hover:border-[#febe10]/40 transition-colors",children:s},s))})]},n.category))})}),F.jsx(dn.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:1.5},className:"mt-12 text-center",children:F.jsx("p",{className:"text-gray-400 text-sm",children:"Click on any skill to view details  Numbers represent proficiency level"})})]}),F.jsx(t1,{children:r&&F.jsx(BZ,{skill:r,onClose:()=>e(null)})})]})}const VZ=[{id:1,title:"Project Vaani",subtitle:"Open Source Contribution",tagline:"Empowering Multilingual India",challenge:"Limited voice assistant support for Indian languages created accessibility barriers for millions of non-English speakers",solution:"Contributed to open-source voice assistant supporting 10+ Indian languages with custom NLP models for regional dialects",impact:["10,000+ active users across rural India","Featured in National Innovation Summit 2023","85% accuracy in regional language recognition","Reduced response latency by 40%"],formation:{attack:["Python","TensorFlow"],midfield:["NLP","Speech Recognition"],defense:["FastAPI","PostgreSQL"],goalkeeper:["Docker","AWS"]},technologies:["Python","TensorFlow","NLP","FastAPI","PostgreSQL","Docker","AWS"],links:{github:"https://github.com/pranavsagar",demo:null,article:"https://medium.com/@prnv1009"},image:"/projects/vaani.jpg",color:"#4F46E5"},{id:2,title:"Amazon Review Sentiments",subtitle:"ML/NLP Analysis Platform",tagline:"Decoding Customer Emotions at Scale",challenge:"E-commerce platforms struggle to extract actionable insights from millions of unstructured customer reviews",solution:"Built sentiment analysis pipeline using transformer models to classify reviews and extract key themes with 90%+ accuracy",impact:["Analyzed 500K+ Amazon reviews","90% sentiment classification accuracy","Real-time dashboard for insights","Published research paper on findings"],formation:{attack:["BERT","Transformers"],midfield:["Python","Pandas"],defense:["Flask","MongoDB"],goalkeeper:["Docker","Heroku"]},technologies:["Python","BERT","Transformers","Pandas","Flask","MongoDB","Docker"],links:{github:"https://github.com/pranavsagar",demo:null,article:"https://medium.com/@prnv1009"},image:"/projects/sentiment.jpg",color:"#10B981"},{id:3,title:"Content Recommendation Engine",subtitle:"Glance InternLab Project",tagline:"Personalization at Scale",challenge:"Generic content delivery resulted in low engagement rates and high user churn",solution:"Designed ML-powered recommendation system using collaborative filtering and content-based approaches for personalized feeds",impact:["35% increase in user engagement","20% reduction in bounce rate","Handles 5M+ requests daily","Sub-100ms response time"],formation:{attack:["React.js","Redux"],midfield:["Spring Boot","Kafka"],defense:["PostgreSQL","Redis"],goalkeeper:["Kubernetes","AWS"]},technologies:["Java","Spring Boot","Kafka","React.js","PostgreSQL","Redis","Kubernetes"],links:{github:null,demo:null,article:null},image:"/projects/recommendation.jpg",color:"#F59E0B"},{id:4,title:"Real-time Chat Application",subtitle:"Full-Stack WebSocket Project",tagline:"Instant Communication, Zero Lag",challenge:"Traditional polling mechanisms created delays and server overhead in chat applications",solution:"Built real-time chat platform using WebSockets with message persistence, typing indicators, and online status",impact:["Real-time message delivery","Support for 1000+ concurrent users","End-to-end message encryption","Cross-platform support"],formation:{attack:["React.js","Socket.io"],midfield:["Node.js","Express"],defense:["MongoDB","Redis"],goalkeeper:["Docker","Nginx"]},technologies:["React.js","Node.js","Socket.io","MongoDB","Redis","Docker"],links:{github:"https://github.com/pranavsagar",demo:null,article:null},image:"/projects/chat.jpg",color:"#EF4444"},{id:5,title:"Smart India Hackathon 2022",subtitle:"Winner - Healthcare Track",tagline:"AI-Powered Health Monitoring",challenge:"Rural healthcare centers lack resources for continuous patient monitoring and early diagnosis",solution:"Developed IoT-based patient monitoring system with ML-powered early warning system for critical conditions",impact:["Won 1st Prize at SIH 2022","Patent filed for innovation","Pilot deployed in 3 rural clinics","Featured in tech news publications"],formation:{attack:["React Native","ML Models"],midfield:["Python","TensorFlow"],defense:["Node.js","Firebase"],goalkeeper:["IoT Sensors","Cloud"]},technologies:["React Native","Python","TensorFlow","Node.js","Firebase","IoT"],links:{github:null,demo:null,article:"https://medium.com/@prnv1009"},image:"/projects/healthcare.jpg",color:"#8B5CF6"}];function l4({formation:r,color:e}){return F.jsxs("div",{className:"relative w-full h-56 bg-gradient-to-b from-[#001c58]/20 to-[#0a1f4a]/20 rounded-lg border border-[#febe10]/30 overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 opacity-10",children:F.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(254, 190, 16, 0.2) 20px, rgba(254, 190, 16, 0.2) 21px)"}})}),F.jsxs("div",{className:"relative h-full flex flex-col justify-around py-5 px-6",children:[F.jsx("div",{className:"flex justify-around items-center gap-2",children:r.attack.map((t,n)=>F.jsxs(dn.div,{initial:{scale:0,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{delay:n*.1},className:"flex flex-col items-center gap-1.5",children:[F.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-[11px] font-bold text-white shadow-lg",style:{backgroundColor:e},children:t.slice(0,2).toUpperCase()}),F.jsx("span",{className:"text-[9px] text-white/80 font-medium whitespace-nowrap",children:t})]},t))}),F.jsx("div",{className:"flex justify-around items-center gap-2",children:r.midfield.map((t,n)=>F.jsxs(dn.div,{initial:{scale:0,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{delay:.2+n*.1},className:"flex flex-col items-center gap-1.5",children:[F.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-[11px] font-bold text-white shadow-lg",style:{backgroundColor:e},children:t.slice(0,2).toUpperCase()}),F.jsx("span",{className:"text-[9px] text-white/80 font-medium whitespace-nowrap",children:t})]},t))}),F.jsx("div",{className:"flex justify-around items-center gap-2",children:r.defense.map((t,n)=>F.jsxs(dn.div,{initial:{scale:0,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{delay:.4+n*.1},className:"flex flex-col items-center gap-1.5",children:[F.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-[11px] font-bold text-white shadow-lg",style:{backgroundColor:e},children:t.slice(0,2).toUpperCase()}),F.jsx("span",{className:"text-[9px] text-white/80 font-medium whitespace-nowrap",children:t})]},t))}),F.jsx("div",{className:"flex justify-center items-center gap-2",children:r.goalkeeper.map((t,n)=>F.jsxs(dn.div,{initial:{scale:0,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{delay:.6+n*.1},className:"flex flex-col items-center gap-1.5",children:[F.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-[11px] font-bold text-white shadow-lg",style:{backgroundColor:e},children:t.slice(0,2).toUpperCase()}),F.jsx("span",{className:"text-[9px] text-white/80 font-medium whitespace-nowrap",children:t})]},t))})]})]})}function GZ({project:r,index:e,onClick:t}){return F.jsxs(dn.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.6,delay:e*.15},className:"tactical-card p-6 md:p-8 hover:border-[#febe10]/50 transition-all group cursor-pointer",onClick:()=>t(r),children:[F.jsxs("div",{className:"flex items-start justify-between mb-6",children:[F.jsxs("div",{className:"flex-1",children:[F.jsx("div",{className:"text-xs text-[#febe10] font-semibold uppercase tracking-wider mb-2",children:r.subtitle}),F.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white group-hover:text-[#febe10] transition-colors mb-2",children:r.title}),F.jsx("p",{className:"text-white/60 italic",children:r.tagline})]}),F.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${r.color}20`,borderColor:r.color,borderWidth:"2px"},children:F.jsx(u1,{className:"w-6 h-6",style:{color:r.color}})})]}),F.jsx("div",{className:"mb-6",children:F.jsx(l4,{formation:r.formation,color:r.color})}),F.jsxs("div",{className:"space-y-4 mb-6",children:[F.jsxs("div",{className:"flex items-start gap-3",children:[F.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:F.jsx(u1,{className:"w-3 h-3 text-red-400"})}),F.jsxs("div",{className:"flex-1",children:[F.jsx("div",{className:"text-xs text-red-400 font-semibold uppercase tracking-wide mb-1",children:"Challenge"}),F.jsx("p",{className:"text-sm text-white/70",children:r.challenge})]})]}),F.jsxs("div",{className:"flex items-start gap-3",children:[F.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:F.jsx(U6,{className:"w-3 h-3 text-blue-400"})}),F.jsxs("div",{className:"flex-1",children:[F.jsx("div",{className:"text-xs text-blue-400 font-semibold uppercase tracking-wide mb-1",children:"Solution"}),F.jsx("p",{className:"text-sm text-white/70",children:r.solution})]})]}),F.jsxs("div",{className:"flex items-start gap-3",children:[F.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:F.jsx(f1,{className:"w-3 h-3 text-green-400"})}),F.jsxs("div",{className:"flex-1",children:[F.jsx("div",{className:"text-xs text-green-400 font-semibold uppercase tracking-wide mb-2",children:"Impact"}),F.jsx("ul",{className:"space-y-1.5",children:r.impact.map((n,i)=>F.jsxs("li",{className:"text-sm text-white/70 flex items-start gap-2",children:[F.jsx("span",{className:"text-[#febe10] mt-0.5",children:""}),F.jsx("span",{children:n})]},i))})]})]})]}),F.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:r.technologies.map(n=>F.jsx("span",{className:"px-3 py-1 bg-white/5 border border-[#febe10]/20 rounded-full text-xs text-white",children:n},n))}),F.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-white/10",children:[r.links.github&&F.jsxs("a",{href:r.links.github,target:"_blank",rel:"noopener noreferrer",onClick:n=>n.stopPropagation(),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-[#febe10]/20 border border-[#febe10]/20 hover:border-[#febe10]/50 rounded-lg text-sm text-white hover:text-[#febe10] transition-all font-medium",children:[F.jsx(UE,{className:"w-4 h-4"}),"View Code"]}),r.links.demo&&F.jsxs("a",{href:r.links.demo,target:"_blank",rel:"noopener noreferrer",onClick:n=>n.stopPropagation(),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-[#febe10]/20 border border-[#febe10]/20 hover:border-[#febe10]/50 rounded-lg text-sm text-white hover:text-[#febe10] transition-all font-medium",children:[F.jsx(_U,{className:"w-4 h-4"}),"Live Demo"]}),r.links.article&&F.jsxs("a",{href:r.links.article,target:"_blank",rel:"noopener noreferrer",onClick:n=>n.stopPropagation(),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-[#febe10]/20 border border-[#febe10]/20 hover:border-[#febe10]/50 rounded-lg text-sm text-white hover:text-[#febe10] transition-all font-medium",children:[F.jsx(x6,{className:"w-4 h-4"}),"Read Article"]})]})]})}function HZ({project:r,onClose:e}){return r?F.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:F.jsxs(dn.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),className:"tactical-card p-8 max-w-3xl w-full my-8 relative",children:[F.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors z-10",children:F.jsx(IE,{className:"w-6 h-6"})}),F.jsxs("div",{className:"space-y-6",children:[F.jsxs("div",{children:[F.jsx("div",{className:"text-sm text-[#febe10] font-semibold uppercase tracking-wider mb-2",children:r.subtitle}),F.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:r.title}),F.jsx("p",{className:"text-xl text-white/60 italic",children:r.tagline})]}),F.jsx(l4,{formation:r.formation,color:r.color}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"tactical-card p-4 bg-red-500/5 border-l-4 border-red-500",children:[F.jsx("div",{className:"text-sm text-red-400 font-semibold uppercase tracking-wide mb-2",children:"The Challenge"}),F.jsx("p",{className:"text-white/80",children:r.challenge})]}),F.jsxs("div",{className:"tactical-card p-4 bg-blue-500/5 border-l-4 border-blue-500",children:[F.jsx("div",{className:"text-sm text-blue-400 font-semibold uppercase tracking-wide mb-2",children:"The Solution"}),F.jsx("p",{className:"text-white/80",children:r.solution})]}),F.jsxs("div",{className:"tactical-card p-4 bg-green-500/5 border-l-4 border-green-500",children:[F.jsx("div",{className:"text-sm text-green-400 font-semibold uppercase tracking-wide mb-2",children:"The Impact"}),F.jsx("ul",{className:"space-y-2",children:r.impact.map((t,n)=>F.jsxs("li",{className:"text-white/80 flex items-start gap-2",children:[F.jsx(f1,{className:"w-4 h-4 text-green-400 mt-1 flex-shrink-0"}),F.jsx("span",{children:t})]},n))})]})]}),F.jsxs("div",{children:[F.jsx("div",{className:"text-sm text-[#febe10] font-semibold uppercase tracking-wide mb-3",children:"Tech Stack"}),F.jsx("div",{className:"flex flex-wrap gap-2",children:r.technologies.map(t=>F.jsx("span",{className:"px-3 py-1 bg-white/10 border border-[#febe10]/30 rounded-full text-sm text-white",children:t},t))})]}),F.jsxs("div",{className:"flex gap-3 pt-4",children:[r.links.github&&F.jsxs("a",{href:r.links.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-6 py-3 bg-[#febe10] text-[#001c58] font-semibold rounded-lg hover:bg-yellow-400 transition-all",children:[F.jsx(UE,{className:"w-5 h-5"}),"View Code"]}),r.links.demo&&F.jsxs("a",{href:r.links.demo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-6 py-3 border-2 border-[#febe10] text-[#febe10] font-semibold rounded-lg hover:bg-[#febe10] hover:text-[#001c58] transition-all",children:[F.jsx(_U,{className:"w-5 h-5"}),"Live Demo"]})]})]})]})}):null}function jZ(){const[r,e]=Re.useState(null);return F.jsxs("section",{id:"projects",className:"py-20 bg-gradient-to-b from-[#0a1f4a] via-[#0d2554] to-[#0a1f4a] relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 chalkboard-texture opacity-30"}),F.jsx("div",{className:"absolute top-1/3 right-10 w-96 h-96 bg-[#febe10]/5 rounded-full blur-3xl"}),F.jsx("div",{className:"absolute bottom-1/3 left-10 w-72 h-72 bg-[#001c58]/10 rounded-full blur-3xl"}),F.jsxs("div",{className:"container relative z-10",children:[F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[F.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:["KEY ",F.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#febe10] to-yellow-300",children:"PLAYS"})]}),F.jsx("div",{className:"w-24 h-1 bg-[#febe10] mx-auto mb-6"}),F.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Strategic projects executed with precision and impact"})]}),F.jsx("div",{className:"grid lg:grid-cols-2 gap-8 max-w-7xl mx-auto",children:VZ.map((t,n)=>F.jsx(GZ,{project:t,index:n,onClick:e},t.id))})]}),F.jsx(t1,{children:r&&F.jsx(HZ,{project:r,onClose:()=>e(null)})})]})}const WZ=[{icon:bU,label:"Email",value:"pranav.sagar@outlook.com",href:"mailto:pranav.sagar@outlook.com",color:"#EF4444",description:"Direct line for opportunities"},{icon:O6,label:"LinkedIn",value:"/pranavsagar",href:"https://linkedin.com/in/pranavsagar",color:"#0077B5",description:"Professional network"},{icon:UE,label:"GitHub",value:"/pranavsagar",href:"https://github.com/pranavsagar",color:"#ffffff",description:"Code repositories"},{icon:G6,label:"Medium",value:"@prnv1009",href:"https://medium.com/@prnv1009",color:"#00AB6C",description:"Technical articles"}];function XZ({method:r,index:e}){const t=r.icon;return F.jsx(dn.a,{href:r.href,target:"_blank",rel:"noopener noreferrer",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:e*.1},whileHover:{y:-8,scale:1.02},className:"tactical-card p-6 hover:border-[#febe10]/50 transition-all group",children:F.jsxs("div",{className:"flex items-start gap-4",children:[F.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",style:{backgroundColor:`${r.color}20`},children:F.jsx(t,{className:"w-6 h-6",style:{color:r.color}})}),F.jsxs("div",{className:"flex-1",children:[F.jsx("div",{className:"text-[#febe10] font-semibold uppercase text-xs tracking-wider mb-1",children:r.label}),F.jsx("div",{className:"text-white font-medium mb-1 group-hover:text-[#febe10] transition-colors",children:r.value}),F.jsx("div",{className:"text-white/60 text-sm",children:r.description})]}),F.jsx(j6,{className:"w-4 h-4 text-[#febe10]/50 group-hover:text-[#febe10] group-hover:translate-x-1 transition-all"})]})})}function YZ(){return F.jsxs("section",{id:"contact",className:"py-20 bg-gradient-to-b from-[#0a1f4a] to-[#0d2554] relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 field-pattern opacity-10"}),F.jsx("div",{className:"absolute inset-0 chalkboard-texture opacity-20"}),F.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-[#febe10]/5 rounded-full blur-3xl"}),F.jsx("div",{className:"absolute bottom-20 right-10 w-72 h-72 bg-[#001c58]/10 rounded-full blur-3xl"}),F.jsxs("div",{className:"container relative z-10",children:[F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[F.jsx(dn.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},className:"inline-block mb-6",children:F.jsx("div",{className:"px-6 py-2 bg-[#febe10]/20 border-2 border-[#febe10] rounded-full",children:F.jsx("span",{className:"text-[#febe10] font-bold uppercase tracking-wider text-sm",children:"Transfer Window Open"})})}),F.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:["LET'S ",F.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#febe10] to-yellow-300",children:"CONNECT"})]}),F.jsx("div",{className:"w-24 h-1 bg-[#febe10] mx-auto mb-6"}),F.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Ready to discuss the next big play? Let's explore how we can build something extraordinary together"})]}),F.jsx("div",{className:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto mb-16",children:WZ.map((r,e)=>F.jsx(XZ,{method:r,index:e},r.label))}),F.jsxs(dn.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,delay:.4},className:"tactical-card p-8 md:p-12 max-w-4xl mx-auto border-2 border-[#febe10]/30 relative overflow-hidden",children:[F.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#febe10]/10 rounded-bl-full"}),F.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-[#001c58]/10 rounded-tr-full"}),F.jsxs("div",{className:"relative z-10 text-center space-y-6",children:[F.jsx("div",{className:"inline-block p-4 bg-[#febe10]/20 rounded-full mb-4",children:F.jsx(vR,{className:"w-12 h-12 text-[#febe10]"})}),F.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-white",children:"Open to Opportunities"}),F.jsxs("p",{className:"text-white/70 text-lg max-w-2xl mx-auto leading-relaxed",children:["Currently exploring exciting roles in"," ",F.jsx("span",{className:"text-[#febe10] font-semibold",children:"Backend Engineering"}),","," ",F.jsx("span",{className:"text-[#febe10] font-semibold",children:"Full-Stack Development"}),", and"," ",F.jsx("span",{className:"text-[#febe10] font-semibold",children:"ML/NLP"}),". Looking for teams that value innovation, quality, and collaboration."]}),F.jsxs("div",{className:"grid md:grid-cols-3 gap-6 pt-6",children:[F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{className:"text-3xl font-bold gradient-text",children:"Immediate"}),F.jsx("div",{className:"text-sm text-white/60 uppercase tracking-wide",children:"Availability"})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{className:"text-3xl font-bold gradient-text",children:"Remote"}),F.jsx("div",{className:"text-sm text-white/60 uppercase tracking-wide",children:"Work Preference"})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{className:"text-3xl font-bold gradient-text",children:"Global"}),F.jsx("div",{className:"text-sm text-white/60 uppercase tracking-wide",children:"Open to Relocation"})]})]}),F.jsx("div",{className:"pt-8",children:F.jsxs("a",{href:"mailto:pranav.sagar@outlook.com",className:"inline-flex items-center gap-3 px-8 py-4 bg-[#febe10] text-[#001c58] font-bold text-lg rounded-lg hover:bg-yellow-400 transition-all transform hover:scale-105 hover:shadow-lg hover:shadow-[#febe10]/50",children:[F.jsx(bU,{className:"w-5 h-5"}),"Start the Conversation"]})}),F.jsx("div",{className:"pt-6",children:F.jsxs("a",{href:"/resume.pdf",download:!0,className:"inline-flex items-center gap-2 text-[#febe10] hover:text-yellow-400 transition-colors text-sm font-semibold",children:[F.jsx(vR,{className:"w-4 h-4"}),"Download Resume (PDF)"]})})]})]}),F.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"mt-16 text-center max-w-3xl mx-auto",children:[F.jsx("blockquote",{className:"text-white/60 italic text-lg",children:`"The best transfers happen when technical excellence meets cultural fit. Let's see if we can make magic together."`}),F.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[F.jsx("div",{className:"w-8 h-0.5 bg-[#febe10]"}),F.jsx("span",{className:"text-[#febe10] font-semibold text-sm",children:"Pranav Sagar"}),F.jsx("div",{className:"w-8 h-0.5 bg-[#febe10]"})]})]})]}),F.jsxs("svg",{className:"absolute bottom-0 left-0 w-full h-32 opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[F.jsx(dn.line,{initial:{pathLength:0},whileInView:{pathLength:1},viewport:{once:!0},transition:{duration:2},x1:"0",y1:"50",x2:"100%",y2:"80",stroke:"#febe10",strokeWidth:"2",strokeDasharray:"10,5"}),F.jsx(dn.line,{initial:{pathLength:0},whileInView:{pathLength:1},viewport:{once:!0},transition:{duration:2,delay:.3},x1:"0",y1:"80",x2:"100%",y2:"50",stroke:"#febe10",strokeWidth:"2",strokeDasharray:"10,5"})]})]})}const PN=[{label:"Home",href:"#"},{label:"About",href:"#about"},{label:"Experience",href:"#experience"},{label:"Skills",href:"#skills"},{label:"Projects",href:"#projects"},{label:"Contact",href:"#contact"}];function qZ(){const[r,e]=Re.useState(!1),[t,n]=Re.useState(!1);Re.useEffect(()=>{const s=()=>{n(window.scrollY>50)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const i=(s,o)=>{if(s.preventDefault(),e(!1),o==="#")window.scrollTo({top:0,behavior:"smooth"});else{const l=document.querySelector(o);if(l){const h=l.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:h-80,behavior:"smooth"})}}};return F.jsxs(F.Fragment,{children:[F.jsx(dn.nav,{initial:{y:-100},animate:{y:0},transition:{duration:.5},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-[#001c58]/95 backdrop-blur-md border-b border-[#febe10]/30":"bg-transparent"}`,children:F.jsx("div",{className:"container",children:F.jsxs("div",{className:"flex items-center justify-between h-20",children:[F.jsx("a",{href:"#",onClick:s=>i(s,"#"),className:"text-2xl font-black text-white hover:text-[#febe10] transition-colors",children:F.jsx("span",{className:"text-[#febe10]",children:"PS"})}),F.jsx("div",{className:"hidden md:flex items-center gap-8",children:PN.map(s=>F.jsx("a",{href:s.href,onClick:o=>i(o,s.href),className:"text-white hover:text-[#febe10] transition-colors font-semibold text-sm uppercase tracking-wider gold-underline",children:s.label},s.label))}),F.jsx("button",{onClick:()=>e(!r),className:"md:hidden text-white hover:text-[#febe10] transition-colors","aria-label":"Toggle menu",children:r?F.jsx(IE,{className:"w-6 h-6"}):F.jsx(z6,{className:"w-6 h-6"})})]})})}),F.jsx(t1,{children:r&&F.jsx(dn.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{duration:.3},className:"fixed inset-y-0 right-0 w-64 bg-[#0d2554] border-l border-[#febe10]/30 z-40 md:hidden",children:F.jsx("div",{className:"flex flex-col gap-4 p-8 pt-24",children:PN.map((s,o)=>F.jsx(dn.a,{href:s.href,onClick:l=>i(l,s.href),initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:"text-white hover:text-[#febe10] transition-colors font-semibold text-lg uppercase tracking-wider",children:s.label},s.label))})})}),F.jsx(t1,{children:r&&F.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 md:hidden"})})]})}function ZZ(){const r=new Date().getFullYear();return F.jsx("footer",{className:"bg-[#0d2554] border-t border-[#febe10]/20 py-12",children:F.jsxs("div",{className:"container",children:[F.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"text-2xl font-black text-white",children:[F.jsx("span",{className:"text-[#febe10]",children:"PRANAV"})," SAGAR"]}),F.jsx("p",{className:"text-gray-400 text-sm",children:"Software Development Engineer crafting scalable solutions with precision and passion."})]}),F.jsxs("div",{className:"space-y-4",children:[F.jsx("h3",{className:"text-[#febe10] font-bold uppercase tracking-wide text-sm",children:"Quick Links"}),F.jsx("div",{className:"flex flex-col gap-2",children:["About","Experience","Skills","Projects","Contact"].map(e=>F.jsx("a",{href:`#${e.toLowerCase()}`,className:"text-gray-400 hover:text-[#febe10] transition-colors text-sm",children:e},e))})]}),F.jsxs("div",{className:"space-y-4",children:[F.jsx("h3",{className:"text-[#febe10] font-bold uppercase tracking-wide text-sm",children:"Connect"}),F.jsxs("div",{className:"flex flex-col gap-2",children:[F.jsx("a",{href:"https://github.com/pranavsagar",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-[#febe10] transition-colors text-sm",children:"GitHub"}),F.jsx("a",{href:"https://linkedin.com/in/pranavsagar",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-[#febe10] transition-colors text-sm",children:"LinkedIn"}),F.jsx("a",{href:"https://medium.com/@prnv1009",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-[#febe10] transition-colors text-sm",children:"Medium"}),F.jsx("a",{href:"mailto:pranav.sagar@outlook.com",className:"text-white/60 hover:text-[#febe10] transition-colors text-sm",children:"Email"})]})]})]}),F.jsxs("div",{className:"pt-8 border-t border-white/10",children:[F.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[F.jsxs(dn.p,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-gray-400 text-sm flex items-center gap-2",children:[F.jsx(w6,{className:"w-4 h-4"}),F.jsxs("span",{children:[" ",r," Pranav Sagar. All rights reserved."]})]}),F.jsxs(dn.p,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-gray-400 text-sm flex items-center gap-2",children:["Built with",F.jsx(P6,{className:"w-4 h-4 text-[#febe10]"}),"and ",F.jsx("span",{className:"text-[#febe10]",children:"React"})]})]}),F.jsx("div",{className:"mt-6 text-center",children:F.jsx("p",{className:"text-gray-500 text-xs italic",children:'"Hala Madrid! The beautiful game meets beautiful code."'})})]})]})})}function KZ(){return Re.useEffect(()=>{document.documentElement.classList.add("smooth-scroll"),window.location.hash&&(window.history.replaceState(null,null," "),window.scrollTo(0,0))},[]),F.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0a1428] via-[#0d1736] to-[#0a1428]",children:[F.jsx(qZ,{}),F.jsxs("main",{children:[F.jsx(PZ,{}),F.jsx(OZ,{}),F.jsx(kZ,{}),F.jsx(zZ,{}),F.jsx(jZ,{}),F.jsx(YZ,{})]}),F.jsx(ZZ,{})]})}Q4.createRoot(document.getElementById("root")).render(F.jsx(Re.StrictMode,{children:F.jsx(KZ,{})}));
